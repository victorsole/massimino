"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/profile/page",{

/***/ "(app-pages-browser)/./src/app/profile/actions.ts":
/*!************************************!*\
  !*** ./src/app/profile/actions.ts ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteTrainerCredentialAction: () => (/* binding */ deleteTrainerCredentialAction),\n/* harmony export */   selectAccreditedProviderAction: () => (/* binding */ selectAccreditedProviderAction),\n/* harmony export */   submitTrainerAccreditationAction: () => (/* binding */ submitTrainerAccreditationAction),\n/* harmony export */   updateEmailAction: () => (/* binding */ updateEmailAction),\n/* harmony export */   updateFitnessPreferencesAction: () => (/* binding */ updateFitnessPreferencesAction),\n/* harmony export */   updateLocationAction: () => (/* binding */ updateLocationAction),\n/* harmony export */   updateMediaSettingsAction: () => (/* binding */ updateMediaSettingsAction),\n/* harmony export */   updateProfileBasicsAction: () => (/* binding */ updateProfileBasicsAction),\n/* harmony export */   updateSocialMediaAction: () => (/* binding */ updateSocialMediaAction),\n/* harmony export */   uploadAvatarAction: () => (/* binding */ uploadAvatarAction),\n/* harmony export */   uploadMediaAction: () => (/* binding */ uploadMediaAction),\n/* harmony export */   uploadTrainerCertificateAction: () => (/* binding */ uploadTrainerCertificateAction)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"401d610a29c41b6ccf86b068595906318844b3966d\":\"updateProfileBasicsAction\",\"402c8e6d9e9f6fc5402b82539ff4fb92978391a489\":\"updateLocationAction\",\"4035934452c425a49cecd46e90998e14dcc38e62da\":\"updateEmailAction\",\"40395148242374a1cadbd0d5060c7d9ab19d40b7a3\":\"selectAccreditedProviderAction\",\"404c82dd4ed64b8302ea8304160903ff0e5d986959\":\"updateMediaSettingsAction\",\"40896ff35f721454880dda1e4b6ca9d3dd09baff25\":\"uploadTrainerCertificateAction\",\"4089876012f7a0bea9780f12c7240de5c9eea81e0a\":\"uploadAvatarAction\",\"40b41ea69b135066e457a9ce2afd885edcb786d363\":\"updateFitnessPreferencesAction\",\"40cc3dd2ad806d3d0b457c295f0abbe30598745b4a\":\"updateSocialMediaAction\",\"40d40b127e7425a907690e5140232728f896b773a8\":\"uploadMediaAction\",\"40d54ae79637fe0b7f2495d9f879175b3f42eb7e4c\":\"deleteTrainerCredentialAction\",\"40d60632e2bd8e7c4a59633a3e795bd0dcfac3b291\":\"submitTrainerAccreditationAction\"} */ \nvar updateEmailAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4035934452c425a49cecd46e90998e14dcc38e62da\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateEmailAction\");\nvar submitTrainerAccreditationAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d60632e2bd8e7c4a59633a3e795bd0dcfac3b291\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"submitTrainerAccreditationAction\");\nvar uploadTrainerCertificateAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40896ff35f721454880dda1e4b6ca9d3dd09baff25\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"uploadTrainerCertificateAction\");\nvar updateProfileBasicsAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"401d610a29c41b6ccf86b068595906318844b3966d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateProfileBasicsAction\");\nvar uploadAvatarAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4089876012f7a0bea9780f12c7240de5c9eea81e0a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"uploadAvatarAction\");\nvar updateSocialMediaAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40cc3dd2ad806d3d0b457c295f0abbe30598745b4a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateSocialMediaAction\");\nvar updateFitnessPreferencesAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b41ea69b135066e457a9ce2afd885edcb786d363\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateFitnessPreferencesAction\");\nvar updateLocationAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"402c8e6d9e9f6fc5402b82539ff4fb92978391a489\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateLocationAction\");\nvar selectAccreditedProviderAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40395148242374a1cadbd0d5060c7d9ab19d40b7a3\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"selectAccreditedProviderAction\");\nvar deleteTrainerCredentialAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d54ae79637fe0b7f2495d9f879175b3f42eb7e4c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"deleteTrainerCredentialAction\");\nvar uploadMediaAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d40b127e7425a907690e5140232728f896b773a8\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"uploadMediaAction\");\nvar updateMediaSettingsAction = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"404c82dd4ed64b8302ea8304160903ff0e5d986959\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateMediaSettingsAction\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvcHJvZmlsZS9hY3Rpb25zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWdCc0JBLGtDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFlQUMsaURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStEQUMsK0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTRFQUMsMENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBCQUMsbUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWlFQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThEQUMsK0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThDQUMscUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlDQUMsK0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtDQUMsOENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTJDQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXNGQUMsMENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQSIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9hcHAvcHJvZmlsZS9hY3Rpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHNlcnZlclwiXG5cbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvY29yZSdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZSdcbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSAnbmV4dC9jYWNoZSdcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IHsgbW9kZXJhdGVDb250ZW50IH0gZnJvbSAnQC9zZXJ2aWNlcy9tb2RlcmF0aW9uL29wZW5haSdcbmltcG9ydCB7IGxvZ01vZGVyYXRpb25BY3Rpb24gfSBmcm9tICdAL3NlcnZpY2VzL21vZGVyYXRpb24vbG9nZ2VycydcbmltcG9ydCB7IE1vZGVyYXRpb25BY3Rpb24gfSBmcm9tICdAcHJpc21hL2NsaWVudCdcblxuZnVuY3Rpb24gaXNTaWduZWRJbihzZXNzaW9uOiBhbnkpIHtcbiAgcmV0dXJuIEJvb2xlYW4oc2Vzc2lvbj8udXNlcj8uaWQpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbEFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIWlzU2lnbmVkSW4oc2Vzc2lvbikpIHJldHVyblxuICAgIGNvbnN0IHVzZXJJZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3VzZXJJZCcpIHx8ICcnKVxuICAgIGNvbnN0IGVtYWlsUmF3ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnZW1haWwnKSB8fCAnJykudHJpbSgpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoIXVzZXJJZCB8fCAhZW1haWxSYXcpIHJldHVyblxuICAgIGlmICh1c2VySWQgIT09IHNlc3Npb24hLnVzZXIhLmlkKSByZXR1cm5cbiAgICBhd2FpdCBwcmlzbWEudXNlcnMudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LCBkYXRhOiB7IGVtYWlsOiBlbWFpbFJhdyB9IH0pXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3VwZGF0ZUVtYWlsQWN0aW9uIGVycm9yJywgZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3VibWl0VHJhaW5lckFjY3JlZGl0YXRpb25BY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFpc1NpZ25lZEluKHNlc3Npb24pKSByZXR1cm5cbiAgICBjb25zdCB1c2VySWQgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCd1c2VySWQnKSB8fCAnJylcbiAgICBjb25zdCBwcm92aWRlcklkID0gKGZvcm1EYXRhLmdldCgncHJvdmlkZXJJZCcpIGFzIHN0cmluZyB8IG51bGwpIHx8IG51bGxcbiAgICBjb25zdCBwcm92aWRlclF1ZXJ5ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgncHJvdmlkZXJRdWVyeScpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdjcmVkZW50aWFsRmlsZScpIGFzIHVua25vd24gYXMgRmlsZSB8IG51bGxcbiAgICBpZiAoIXVzZXJJZCB8fCB1c2VySWQgIT09IHNlc3Npb24hLnVzZXIhLmlkKSByZXR1cm5cbiAgICBpZiAoIXByb3ZpZGVySWQgJiYgIXByb3ZpZGVyUXVlcnkpIHJldHVyblxuICAgIGlmICghZmlsZSkgcmV0dXJuXG4gICAgY29uc3QgdmFsaWRUeXBlcyA9IFsnYXBwbGljYXRpb24vcGRmJywgJ2ltYWdlL3BuZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZyddXG4gICAgaWYgKCF2YWxpZFR5cGVzLmluY2x1ZGVzKChmaWxlIGFzIGFueSkudHlwZSkpIHJldHVyblxuICAgIGNvbnN0IGJ5dGVzID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpXG4gICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYnl0ZXMpXG4gICAgaWYgKGJ1ZmZlci5ieXRlTGVuZ3RoID4gMTAwICogMTAyNCAqIDEwMjQpIHJldHVyblxuICAgIGxldCBwcm92aWRlciA9IG51bGwgYXMgbnVsbCB8IHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBjb3VudHJ5OiBzdHJpbmc7IHF1YWxpZmljYXRpb25zOiBzdHJpbmdbXSB9XG4gICAgaWYgKHByb3ZpZGVySWQpIHtcbiAgICAgIHByb3ZpZGVyID0gYXdhaXQgcHJpc21hLmFjY3JlZGl0ZWRfcHJvdmlkZXJzLmZpbmRGaXJzdCh7IHdoZXJlOiB7IGlkOiBwcm92aWRlcklkLCBpc0FjdGl2ZTogdHJ1ZSB9LCBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGNvdW50cnk6IHRydWUsIHF1YWxpZmljYXRpb25zOiB0cnVlIH0gfSlcbiAgICB9IGVsc2UgaWYgKHByb3ZpZGVyUXVlcnkpIHtcbiAgICAgIHByb3ZpZGVyID0gYXdhaXQgcHJpc21hLmFjY3JlZGl0ZWRfcHJvdmlkZXJzLmZpbmRGaXJzdCh7IHdoZXJlOiB7IG5hbWU6IHsgY29udGFpbnM6IHByb3ZpZGVyUXVlcnksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSwgaXNBY3RpdmU6IHRydWUgfSwgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBjb3VudHJ5OiB0cnVlLCBxdWFsaWZpY2F0aW9uczogdHJ1ZSB9IH0pXG4gICAgfVxuICAgIGlmICghcHJvdmlkZXIpIHJldHVyblxuICAgIGNvbnN0IHVwbG9hZHNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd1cGxvYWRzJywgJ2NyZWRlbnRpYWxzJylcbiAgICBhd2FpdCBmcy5ta2Rpcih1cGxvYWRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgIGNvbnN0IHNhZmVCYXNlID0gcGF0aC5iYXNlbmFtZSgoZmlsZSBhcyBhbnkpLm5hbWUgfHwgJ2NyZWRlbnRpYWwnKVxuICAgIGNvbnN0IHRzID0gRGF0ZS5ub3coKVxuICAgIGNvbnN0IGV4dCA9IHNhZmVCYXNlLmluY2x1ZGVzKCcuJykgPyBzYWZlQmFzZS5zbGljZShzYWZlQmFzZS5sYXN0SW5kZXhPZignLicpKSA6ICcnXG4gICAgY29uc3QgZmlsZU5hbWUgPSBgJHt1c2VySWR9LSR7dHN9JHtleHR9YFxuICAgIGNvbnN0IGRlc3RQYXRoID0gcGF0aC5qb2luKHVwbG9hZHNEaXIsIGZpbGVOYW1lKVxuICAgIGF3YWl0IGZzLndyaXRlRmlsZShkZXN0UGF0aCwgYnVmZmVyKVxuICAgIGNvbnN0IHB1YmxpY1VybCA9IGAvdXBsb2Fkcy9jcmVkZW50aWFscy8ke2ZpbGVOYW1lfWBcbiAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIHNlbGVjdDogeyB0cmFpbmVyQ3JlZGVudGlhbHM6IHRydWUgfSB9KVxuICAgIGxldCBjcmVkczogYW55W10gPSBbXVxuICAgIHRyeSB7IGlmIChjdXJyZW50Py50cmFpbmVyQ3JlZGVudGlhbHMpIGNyZWRzID0gSlNPTi5wYXJzZShjdXJyZW50LnRyYWluZXJDcmVkZW50aWFscyk7IGlmICghQXJyYXkuaXNBcnJheShjcmVkcykpIGNyZWRzID0gW10gfSBjYXRjaCB7IGNyZWRzID0gW10gfVxuICAgIGNyZWRzLnB1c2goe1xuICAgICAgcHJvdmlkZXJJZDogcHJvdmlkZXIuaWQsXG4gICAgICBwcm92aWRlck5hbWU6IHByb3ZpZGVyLm5hbWUsXG4gICAgICBjb3VudHJ5OiBwcm92aWRlci5jb3VudHJ5LFxuICAgICAgcXVhbGlmaWNhdGlvbnM6IHByb3ZpZGVyLnF1YWxpZmljYXRpb25zLFxuICAgICAgY3JlZGVudGlhbFBhdGg6IHB1YmxpY1VybCxcbiAgICAgIHN1Ym1pdHRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgIHZlcmlmaWVkQXQ6IG51bGwsXG4gICAgICB2ZXJpZmllZEJ5OiBudWxsLFxuICAgICAgdmVyaWZpY2F0aW9uTm90ZXM6IG51bGxcbiAgICB9KVxuICAgIC8vIERvbid0IGF1dG8tdmVyaWZ5IC0gc2V0IHRvIHBlbmRpbmcgZm9yIGFkbWluIHJldmlld1xuICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICByb2xlOiAnVFJBSU5FUicsXG4gICAgICAgIHRyYWluZXJWZXJpZmllZDogZmFsc2UsIC8vIENoYW5nZWQ6IFJlcXVpcmUgYWRtaW4gYXBwcm92YWxcbiAgICAgICAgdHJhaW5lckNyZWRlbnRpYWxzOiBKU09OLnN0cmluZ2lmeShjcmVkcyksXG4gICAgICAgIHN0YXR1czogJ0FDVElWRSdcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldmFsaWRhdGVQYXRoKCcvcHJvZmlsZScpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdzdWJtaXRUcmFpbmVyQWNjcmVkaXRhdGlvbkFjdGlvbiBlcnJvcicsIGUpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZFRyYWluZXJDZXJ0aWZpY2F0ZUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIWlzU2lnbmVkSW4oc2Vzc2lvbikpIHJldHVyblxuICAgIGNvbnN0IHVzZXJJZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3VzZXJJZCcpIHx8ICcnKVxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZCAhPT0gc2Vzc2lvbiEudXNlciEuaWQpIHJldHVyblxuXG4gICAgY29uc3QgaXNzdWVyID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnaXNzdWVyJykgfHwgJycpLnRyaW0oKVxuICAgIGNvbnN0IGZpbGUgPSBmb3JtRGF0YS5nZXQoJ2NlcnRpZmljYXRlRmlsZScpIGFzIHVua25vd24gYXMgRmlsZSB8IG51bGxcbiAgICBpZiAoIWZpbGUpIHJldHVyblxuXG4gICAgLy8gQWNjZXB0IERPQywgUERGLCBQTkcsIEpQR1xuICAgIGNvbnN0IHZhbGlkVHlwZXMgPSBbXG4gICAgICAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgICdhcHBsaWNhdGlvbi9tc3dvcmQnLFxuICAgICAgLy8gQ29tbW9uIGltYWdlIHR5cGVzXG4gICAgICAnaW1hZ2UvcG5nJyxcbiAgICAgICdpbWFnZS9qcGVnJyxcbiAgICAgICdpbWFnZS9qcGcnLFxuICAgIF1cblxuICAgIGNvbnN0IGZpbGVUeXBlID0gKGZpbGUgYXMgYW55KS50eXBlXG4gICAgaWYgKCF2YWxpZFR5cGVzLmluY2x1ZGVzKGZpbGVUeXBlKSkgcmV0dXJuXG5cbiAgICBjb25zdCBieXRlcyA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKVxuICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKVxuICAgIGlmIChidWZmZXIuYnl0ZUxlbmd0aCA+IDEwMCAqIDEwMjQgKiAxMDI0KSByZXR1cm5cblxuICAgIGNvbnN0IHVwbG9hZHNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd1cGxvYWRzJywgJ2NyZWRlbnRpYWxzJylcbiAgICBhd2FpdCBmcy5ta2Rpcih1cGxvYWRzRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxuICAgIGNvbnN0IHNhZmVCYXNlID0gcGF0aC5iYXNlbmFtZSgoZmlsZSBhcyBhbnkpLm5hbWUgfHwgJ2NlcnRpZmljYXRlJylcbiAgICBjb25zdCB0cyA9IERhdGUubm93KClcbiAgICBjb25zdCBleHQgPSBzYWZlQmFzZS5pbmNsdWRlcygnLicpID8gc2FmZUJhc2Uuc2xpY2Uoc2FmZUJhc2UubGFzdEluZGV4T2YoJy4nKSkgOiAnJ1xuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7dXNlcklkfS0ke3RzfSR7ZXh0fWBcbiAgICBjb25zdCBkZXN0UGF0aCA9IHBhdGguam9pbih1cGxvYWRzRGlyLCBmaWxlTmFtZSlcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZGVzdFBhdGgsIGJ1ZmZlcilcbiAgICBjb25zdCBwdWJsaWNVcmwgPSBgL3VwbG9hZHMvY3JlZGVudGlhbHMvJHtmaWxlTmFtZX1gXG5cbiAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIHNlbGVjdDogeyB0cmFpbmVyQ3JlZGVudGlhbHM6IHRydWUgfSB9KVxuICAgIGxldCBjcmVkczogYW55W10gPSBbXVxuICAgIHRyeSB7XG4gICAgICBpZiAoY3VycmVudD8udHJhaW5lckNyZWRlbnRpYWxzKSBjcmVkcyA9IEpTT04ucGFyc2UoY3VycmVudC50cmFpbmVyQ3JlZGVudGlhbHMpXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3JlZHMpKSBjcmVkcyA9IFtdXG4gICAgfSBjYXRjaCB7XG4gICAgICBjcmVkcyA9IFtdXG4gICAgfVxuXG4gICAgY3JlZHMucHVzaCh7XG4gICAgICBwcm92aWRlcklkOiBudWxsLFxuICAgICAgcHJvdmlkZXJOYW1lOiBpc3N1ZXIgfHwgbnVsbCxcbiAgICAgIGNvdW50cnk6IG51bGwsXG4gICAgICBxdWFsaWZpY2F0aW9uczogW10sXG4gICAgICBjcmVkZW50aWFsUGF0aDogcHVibGljVXJsLFxuICAgICAgc3VibWl0dGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHN0YXR1czogJ3BlbmRpbmcnLFxuICAgICAgdmVyaWZpZWRBdDogbnVsbCxcbiAgICAgIHZlcmlmaWVkQnk6IG51bGwsXG4gICAgICB2ZXJpZmljYXRpb25Ob3RlczogbnVsbCxcbiAgICB9KVxuXG4gICAgYXdhaXQgcHJpc21hLnVzZXJzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHJvbGU6ICdUUkFJTkVSJyxcbiAgICAgICAgdHJhaW5lclZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgdHJhaW5lckNyZWRlbnRpYWxzOiBKU09OLnN0cmluZ2lmeShjcmVkcyksXG4gICAgICAgIHN0YXR1czogJ0FDVElWRScsXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldmFsaWRhdGVQYXRoKCcvcHJvZmlsZScpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCd1cGxvYWRUcmFpbmVyQ2VydGlmaWNhdGVBY3Rpb24gZXJyb3InLCBlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlQmFzaWNzQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghaXNTaWduZWRJbihzZXNzaW9uKSkgcmV0dXJuXG4gICAgY29uc3QgdXNlcklkID0gU3RyaW5nKGZvcm1EYXRhLmdldCgndXNlcklkJykgfHwgJycpXG4gICAgaWYgKCF1c2VySWQgfHwgdXNlcklkICE9PSBzZXNzaW9uIS51c2VyIS5pZCkgcmV0dXJuXG4gICAgY29uc3QgZmlyc3ROYW1lID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnZmlyc3ROYW1lJykgfHwgJycpLnRyaW0oKVxuICAgIGNvbnN0IGxhc3ROYW1lID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnbGFzdE5hbWUnKSB8fCAnJykudHJpbSgpXG4gICAgY29uc3Qgbmlja25hbWUgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCduaWNrbmFtZScpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBiaW8gPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdiaW8nKSB8fCAnJykudHJpbSgpXG5cbiAgICBhd2FpdCBwcmlzbWEudXNlcnMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogZmlyc3ROYW1lIHx8IG51bGwsXG4gICAgICAgIHN1cm5hbWU6IGxhc3ROYW1lIHx8IG51bGwsXG4gICAgICAgIG5pY2tuYW1lOiBuaWNrbmFtZSB8fCBudWxsLFxuICAgICAgICB0cmFpbmVyQmlvOiBiaW8gfHwgbnVsbFxuICAgICAgfVxuICAgIH0pXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3VwZGF0ZVByb2ZpbGVCYXNpY3NBY3Rpb24gZXJyb3InLCBlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGxvYWRBdmF0YXJBY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFpc1NpZ25lZEluKHNlc3Npb24pKSByZXR1cm5cbiAgICBjb25zdCB1c2VySWQgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCd1c2VySWQnKSB8fCAnJylcbiAgICBpZiAoIXVzZXJJZCB8fCB1c2VySWQgIT09IHNlc3Npb24hLnVzZXIhLmlkKSByZXR1cm5cbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdhdmF0YXInKSBhcyB1bmtub3duIGFzIEZpbGUgfCBudWxsXG4gICAgaWYgKCFmaWxlKSByZXR1cm5cbiAgICBjb25zdCB2YWxpZFR5cGVzID0gWydpbWFnZS9wbmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnLCAnaW1hZ2Uvd2VicCddXG4gICAgaWYgKCF2YWxpZFR5cGVzLmluY2x1ZGVzKChmaWxlIGFzIGFueSkudHlwZSkpIHJldHVyblxuICAgIGNvbnN0IGJ1ZiA9IEJ1ZmZlci5mcm9tKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSlcbiAgICBpZiAoYnVmLmJ5dGVMZW5ndGggPiA1ICogMTAyNCAqIDEwMjQpIHJldHVyblxuICAgIGNvbnN0IHVwbG9hZHNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd1cGxvYWRzJywgJ2F2YXRhcnMnKVxuICAgIGF3YWl0IGZzLm1rZGlyKHVwbG9hZHNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXG4gICAgY29uc3QgYmFzZSA9IHBhdGguYmFzZW5hbWUoKGZpbGUgYXMgYW55KS5uYW1lIHx8ICdhdmF0YXInKVxuICAgIGNvbnN0IGV4dCA9IGJhc2UuaW5jbHVkZXMoJy4nKSA/IGJhc2Uuc2xpY2UoYmFzZS5sYXN0SW5kZXhPZignLicpKSA6ICcnXG4gICAgY29uc3QgZmlsZU5hbWUgPSBgJHt1c2VySWR9LSR7RGF0ZS5ub3coKX0ke2V4dH1gXG4gICAgY29uc3QgZGVzdCA9IHBhdGguam9pbih1cGxvYWRzRGlyLCBmaWxlTmFtZSlcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZGVzdCwgYnVmKVxuICAgIGNvbnN0IHB1YmxpY1VybCA9IGAvdXBsb2Fkcy9hdmF0YXJzLyR7ZmlsZU5hbWV9YFxuICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIGRhdGE6IHsgaW1hZ2U6IHB1YmxpY1VybCB9IH0pXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3VwbG9hZEF2YXRhckFjdGlvbiBlcnJvcicsIGUpXG4gIH1cbn1cblxuLy8gU29jaWFsIE1lZGlhIFVSTCB2YWxpZGF0aW9uIGFuZCBub3JtYWxpemF0aW9uIGhlbHBlclxuZnVuY3Rpb24gbm9ybWFsaXplQW5kVmFsaWRhdGVTb2NpYWxNZWRpYVVybCh1cmw6IHN0cmluZywgcGxhdGZvcm06IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBpZiAoIXVybCB8fCB1cmwudHJpbSgpID09PSAnJykgcmV0dXJuIG51bGwgLy8gQWxsb3cgZW1wdHkgVVJMc1xuXG4gIGxldCBub3JtYWxpemVkVXJsID0gdXJsLnRyaW0oKVxuXG4gIC8vIEF1dG8tYWRkIGh0dHBzOi8vIGlmIG5vIHByb3RvY29sIGlzIHByZXNlbnRcbiAgaWYgKCFub3JtYWxpemVkVXJsLm1hdGNoKC9eaHR0cHM/OlxcL1xcLy9pKSkge1xuICAgIG5vcm1hbGl6ZWRVcmwgPSBgaHR0cHM6Ly8ke25vcm1hbGl6ZWRVcmx9YFxuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKG5vcm1hbGl6ZWRVcmwpXG4gICAgY29uc3QgaG9zdG5hbWUgPSB1cmxPYmouaG9zdG5hbWUudG9Mb3dlckNhc2UoKVxuXG4gICAgLy8gQ2hlY2sgaWYgZG9tYWluIG1hdGNoZXMgdGhlIHBsYXRmb3JtIChsZXNzIHN0cmljdCAtIGp1c3QgY2hlY2sgaWYgZG9tYWluIGNvbnRhaW5zIHBsYXRmb3JtIG5hbWUpXG4gICAgY29uc3QgZG9tYWluQ2hlY2tzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHtcbiAgICAgICdpbnN0YWdyYW0nOiBob3N0bmFtZS5pbmNsdWRlcygnaW5zdGFncmFtJyksXG4gICAgICAnc3BvdGlmeSc6IGhvc3RuYW1lLmluY2x1ZGVzKCdzcG90aWZ5JyksXG4gICAgICAndGlrdG9rJzogaG9zdG5hbWUuaW5jbHVkZXMoJ3Rpa3RvaycpLFxuICAgICAgJ3lvdXR1YmUnOiBob3N0bmFtZS5pbmNsdWRlcygneW91dHViZScpIHx8IGhvc3RuYW1lLmluY2x1ZGVzKCd5b3V0dS5iZScpLFxuICAgICAgJ2ZhY2Vib29rJzogaG9zdG5hbWUuaW5jbHVkZXMoJ2ZhY2Vib29rJykgfHwgaG9zdG5hbWUuaW5jbHVkZXMoJ2ZiJyksXG4gICAgICAnbGlua2VkaW4nOiBob3N0bmFtZS5pbmNsdWRlcygnbGlua2VkaW4nKVxuICAgIH1cblxuICAgIGlmIChkb21haW5DaGVja3NbcGxhdGZvcm1dKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplZFVybFxuICAgIH1cblxuICAgIC8vIElmIGRvbWFpbiBkb2Vzbid0IG1hdGNoLCByZXR1cm4gbnVsbCAoaW52YWxpZClcbiAgICBjb25zb2xlLndhcm4oYEludmFsaWQgJHtwbGF0Zm9ybX0gVVJMIGRvbWFpbjogJHtob3N0bmFtZX1gKVxuICAgIHJldHVybiBudWxsXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gcGFyc2UgJHtwbGF0Zm9ybX0gVVJMOiAke3VybH1gLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVTb2NpYWxNZWRpYUFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIWlzU2lnbmVkSW4oc2Vzc2lvbikpIHJldHVyblxuICAgIGNvbnN0IHVzZXJJZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3VzZXJJZCcpIHx8ICcnKVxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZCAhPT0gc2Vzc2lvbiEudXNlciEuaWQpIHJldHVyblxuXG4gICAgLy8gR2V0IHNvY2lhbCBtZWRpYSBVUkxzIGZyb20gZm9ybVxuICAgIGNvbnN0IGluc3RhZ3JhbVVybFJhdyA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ2luc3RhZ3JhbVVybCcpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBzcG90aWZ5VXJsUmF3ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnc3BvdGlmeVVybCcpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCB0aWt0b2tVcmxSYXcgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCd0aWt0b2tVcmwnKSB8fCAnJykudHJpbSgpXG4gICAgY29uc3QgeW91dHViZVVybFJhdyA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3lvdXR1YmVVcmwnKSB8fCAnJykudHJpbSgpXG4gICAgY29uc3QgZmFjZWJvb2tVcmxSYXcgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdmYWNlYm9va1VybCcpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBsaW5rZWRpblVybFJhdyA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ2xpbmtlZGluVXJsJykgfHwgJycpLnRyaW0oKVxuICAgIGNvbnN0IHNob3dTb2NpYWxNZWRpYSA9IGZvcm1EYXRhLmdldCgnc2hvd1NvY2lhbE1lZGlhJykgPT09ICdvbidcblxuICAgIGNvbnNvbGUubG9nKCdTb2NpYWwgTWVkaWEgRm9ybSBEYXRhOicsIHtcbiAgICAgIGluc3RhZ3JhbVVybFJhdyxcbiAgICAgIHNwb3RpZnlVcmxSYXcsXG4gICAgICB0aWt0b2tVcmxSYXcsXG4gICAgICB5b3V0dWJlVXJsUmF3LFxuICAgICAgZmFjZWJvb2tVcmxSYXcsXG4gICAgICBsaW5rZWRpblVybFJhd1xuICAgIH0pXG5cbiAgICAvLyBOb3JtYWxpemUgYW5kIHZhbGlkYXRlIFVSTHMgKHNhdmVzIHZhbGlkIG9uZXMsIHNraXBzIGludmFsaWQgb25lcylcbiAgICBjb25zdCBpbnN0YWdyYW1VcmwgPSBub3JtYWxpemVBbmRWYWxpZGF0ZVNvY2lhbE1lZGlhVXJsKGluc3RhZ3JhbVVybFJhdywgJ2luc3RhZ3JhbScpXG4gICAgY29uc3Qgc3BvdGlmeVVybCA9IG5vcm1hbGl6ZUFuZFZhbGlkYXRlU29jaWFsTWVkaWFVcmwoc3BvdGlmeVVybFJhdywgJ3Nwb3RpZnknKVxuICAgIGNvbnN0IHRpa3Rva1VybCA9IG5vcm1hbGl6ZUFuZFZhbGlkYXRlU29jaWFsTWVkaWFVcmwodGlrdG9rVXJsUmF3LCAndGlrdG9rJylcbiAgICBjb25zdCB5b3V0dWJlVXJsID0gbm9ybWFsaXplQW5kVmFsaWRhdGVTb2NpYWxNZWRpYVVybCh5b3V0dWJlVXJsUmF3LCAneW91dHViZScpXG4gICAgY29uc3QgZmFjZWJvb2tVcmwgPSBub3JtYWxpemVBbmRWYWxpZGF0ZVNvY2lhbE1lZGlhVXJsKGZhY2Vib29rVXJsUmF3LCAnZmFjZWJvb2snKVxuICAgIGNvbnN0IGxpbmtlZGluVXJsID0gbm9ybWFsaXplQW5kVmFsaWRhdGVTb2NpYWxNZWRpYVVybChsaW5rZWRpblVybFJhdywgJ2xpbmtlZGluJylcblxuICAgIGNvbnNvbGUubG9nKCdOb3JtYWxpemVkIFVSTHM6Jywge1xuICAgICAgaW5zdGFncmFtVXJsLFxuICAgICAgc3BvdGlmeVVybCxcbiAgICAgIHRpa3Rva1VybCxcbiAgICAgIHlvdXR1YmVVcmwsXG4gICAgICBmYWNlYm9va1VybCxcbiAgICAgIGxpbmtlZGluVXJsXG4gICAgfSlcblxuICAgIC8vIFVwZGF0ZSB1c2VyIHdpdGggc29jaWFsIG1lZGlhIGRhdGEgKHNhdmVzIGFsbCB2YWxpZCBVUkxzKVxuICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBpbnN0YWdyYW1VcmwsXG4gICAgICAgIHNwb3RpZnlVcmwsXG4gICAgICAgIHRpa3Rva1VybCxcbiAgICAgICAgeW91dHViZVVybCxcbiAgICAgICAgZmFjZWJvb2tVcmwsXG4gICAgICAgIGxpbmtlZGluVXJsLFxuICAgICAgICBzaG93U29jaWFsTWVkaWFcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3VwZGF0ZVNvY2lhbE1lZGlhQWN0aW9uIGVycm9yJywgZSlcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRml0bmVzc1ByZWZlcmVuY2VzQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghaXNTaWduZWRJbihzZXNzaW9uKSkgcmV0dXJuXG4gICAgY29uc3QgdXNlcklkID0gU3RyaW5nKGZvcm1EYXRhLmdldCgndXNlcklkJykgfHwgJycpXG4gICAgaWYgKCF1c2VySWQgfHwgdXNlcklkICE9PSBzZXNzaW9uIS51c2VyIS5pZCkgcmV0dXJuXG5cbiAgICAvLyBHZXQgZml0bmVzcyBwcmVmZXJlbmNlcyBmcm9tIGZvcm1cbiAgICBjb25zdCBmaXRuZXNzR29hbHMgPSBmb3JtRGF0YS5nZXRBbGwoJ2ZpdG5lc3NHb2FscycpIGFzIHN0cmluZ1tdXG4gICAgY29uc3QgZXhwZXJpZW5jZUxldmVsID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnZXhwZXJpZW5jZUxldmVsJykgfHwgJ0JFR0lOTkVSJylcbiAgICBjb25zdCBwcmVmZXJyZWRXb3Jrb3V0VHlwZXMgPSBmb3JtRGF0YS5nZXRBbGwoJ3ByZWZlcnJlZFdvcmtvdXRUeXBlcycpIGFzIHN0cmluZ1tdXG4gICAgY29uc3QgYXZhaWxhYmxlV29ya291dERheXMgPSBmb3JtRGF0YS5nZXRBbGwoJ2F2YWlsYWJsZVdvcmtvdXREYXlzJykgYXMgc3RyaW5nW11cbiAgICBjb25zdCBwcmVmZXJyZWRXb3Jrb3V0RHVyYXRpb24gPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdwcmVmZXJyZWRXb3Jrb3V0RHVyYXRpb24nKSB8fCAnMzAtNjAnKVxuXG4gICAgLy8gVmFsaWRhdGUgZXhwZXJpZW5jZSBsZXZlbFxuICAgIGNvbnN0IHZhbGlkRXhwZXJpZW5jZUxldmVscyA9IFsnQkVHSU5ORVInLCAnSU5URVJNRURJQVRFJywgJ0FEVkFOQ0VEJ11cbiAgICBpZiAoIXZhbGlkRXhwZXJpZW5jZUxldmVscy5pbmNsdWRlcyhleHBlcmllbmNlTGV2ZWwpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGV4cGVyaWVuY2UgbGV2ZWw6JywgZXhwZXJpZW5jZUxldmVsKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgd29ya291dCBkdXJhdGlvblxuICAgIGNvbnN0IHZhbGlkRHVyYXRpb25zID0gWycxNS0zMCcsICczMC02MCcsICc2MCsnXVxuICAgIGlmICghdmFsaWREdXJhdGlvbnMuaW5jbHVkZXMocHJlZmVycmVkV29ya291dER1cmF0aW9uKSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCB3b3Jrb3V0IGR1cmF0aW9uOicsIHByZWZlcnJlZFdvcmtvdXREdXJhdGlvbilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB1c2VyIHdpdGggZml0bmVzcyBwcmVmZXJlbmNlc1xuICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBmaXRuZXNzR29hbHMsXG4gICAgICAgIGV4cGVyaWVuY2VMZXZlbCxcbiAgICAgICAgcHJlZmVycmVkV29ya291dFR5cGVzLFxuICAgICAgICBhdmFpbGFibGVXb3Jrb3V0RGF5cyxcbiAgICAgICAgcHJlZmVycmVkV29ya291dER1cmF0aW9uXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldmFsaWRhdGVQYXRoKCcvcHJvZmlsZScpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCd1cGRhdGVGaXRuZXNzUHJlZmVyZW5jZXNBY3Rpb24gZXJyb3InLCBlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVMb2NhdGlvbkFjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIWlzU2lnbmVkSW4oc2Vzc2lvbikpIHJldHVyblxuICAgIGNvbnN0IHVzZXJJZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3VzZXJJZCcpIHx8ICcnKVxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZCAhPT0gc2Vzc2lvbiEudXNlciEuaWQpIHJldHVyblxuXG4gICAgLy8gR2V0IGxvY2F0aW9uIGRhdGEgZnJvbSBmb3JtXG4gICAgY29uc3QgY2l0eSA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ2NpdHknKSB8fCAnJykudHJpbSgpXG4gICAgY29uc3Qgc3RhdGUgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdzdGF0ZScpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBjb3VudHJ5ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnY291bnRyeScpIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBzaG93TG9jYXRpb24gPSBmb3JtRGF0YS5nZXQoJ3Nob3dMb2NhdGlvbicpID09PSAnb24nXG4gICAgY29uc3QgbG9jYXRpb25WaXNpYmlsaXR5ID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnbG9jYXRpb25WaXNpYmlsaXR5JykgfHwgJ05PTkUnKVxuICAgIGNvbnN0IGVuYWJsZURpc2NvdmVyeSA9IGZvcm1EYXRhLmdldCgnZW5hYmxlRGlzY292ZXJ5JykgPT09ICdvbidcblxuICAgIC8vIFZhbGlkYXRlIGxvY2F0aW9uIHZpc2liaWxpdHlcbiAgICBjb25zdCB2YWxpZFZpc2liaWxpdGllcyA9IFsnTk9ORScsICdUUkFJTkVSU19PTkxZJywgJ0FMTCddXG4gICAgaWYgKCF2YWxpZFZpc2liaWxpdGllcy5pbmNsdWRlcyhsb2NhdGlvblZpc2liaWxpdHkpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGxvY2F0aW9uIHZpc2liaWxpdHk6JywgbG9jYXRpb25WaXNpYmlsaXR5KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHVzZXIgd2l0aCBsb2NhdGlvbiBkYXRhXG4gICAgYXdhaXQgcHJpc21hLnVzZXJzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGNpdHk6IGNpdHkgfHwgbnVsbCxcbiAgICAgICAgc3RhdGU6IHN0YXRlIHx8IG51bGwsXG4gICAgICAgIGNvdW50cnk6IGNvdW50cnkgfHwgbnVsbCxcbiAgICAgICAgc2hvd0xvY2F0aW9uLFxuICAgICAgICBsb2NhdGlvblZpc2liaWxpdHksXG4gICAgICAgIGVuYWJsZURpc2NvdmVyeVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXZhbGlkYXRlUGF0aCgnL3Byb2ZpbGUnKVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcigndXBkYXRlTG9jYXRpb25BY3Rpb24gZXJyb3InLCBlKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWxlY3RBY2NyZWRpdGVkUHJvdmlkZXJBY3Rpb24oZm9ybURhdGE6IEZvcm1EYXRhKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFpc1NpZ25lZEluKHNlc3Npb24pKSByZXR1cm5cbiAgICBjb25zdCB1c2VySWQgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCd1c2VySWQnKSB8fCAnJylcbiAgICBjb25zdCBwcm92aWRlcklkID0gU3RyaW5nKGZvcm1EYXRhLmdldCgncHJvdmlkZXJJZCcpIHx8ICcnKVxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZCAhPT0gc2Vzc2lvbiEudXNlciEuaWQpIHJldHVyblxuICAgIGlmICghcHJvdmlkZXJJZCkgcmV0dXJuXG5cbiAgICBjb25zdCBwcm92aWRlciA9IGF3YWl0IHByaXNtYS5hY2NyZWRpdGVkX3Byb3ZpZGVycy5maW5kRmlyc3QoeyB3aGVyZTogeyBpZDogcHJvdmlkZXJJZCwgaXNBY3RpdmU6IHRydWUgfSwgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBjb3VudHJ5OiB0cnVlLCBxdWFsaWZpY2F0aW9uczogdHJ1ZSB9IH0pXG4gICAgaWYgKCFwcm92aWRlcikgcmV0dXJuXG5cbiAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIHNlbGVjdDogeyB0cmFpbmVyQ3JlZGVudGlhbHM6IHRydWUgfSB9KVxuICAgIGxldCBjcmVkczogYW55W10gPSBbXVxuICAgIHRyeSB7IGlmIChjdXJyZW50Py50cmFpbmVyQ3JlZGVudGlhbHMpIGNyZWRzID0gSlNPTi5wYXJzZShjdXJyZW50LnRyYWluZXJDcmVkZW50aWFscyk7IGlmICghQXJyYXkuaXNBcnJheShjcmVkcykpIGNyZWRzID0gW10gfSBjYXRjaCB7IGNyZWRzID0gW10gfVxuXG4gICAgLy8gU3RvcmUgb3IgdXBkYXRlIGEgcGVuZGluZyBzZWxlY3Rpb24gd2l0aG91dCBmaWxlVXJsXG4gICAgY3JlZHMucHVzaCh7XG4gICAgICBwcm92aWRlcklkOiBwcm92aWRlci5pZCxcbiAgICAgIHByb3ZpZGVyTmFtZTogcHJvdmlkZXIubmFtZSxcbiAgICAgIGNvdW50cnk6IHByb3ZpZGVyLmNvdW50cnksXG4gICAgICBxdWFsaWZpY2F0aW9uczogcHJvdmlkZXIucXVhbGlmaWNhdGlvbnMsXG4gICAgICBmaWxlVXJsOiBudWxsLFxuICAgICAgcGVuZGluZzogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KVxuXG4gICAgYXdhaXQgcHJpc21hLnVzZXJzLnVwZGF0ZSh7IHdoZXJlOiB7IGlkOiB1c2VySWQgfSwgZGF0YTogeyB0cmFpbmVyQ3JlZGVudGlhbHM6IEpTT04uc3RyaW5naWZ5KGNyZWRzKSB9IH0pXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3NlbGVjdEFjY3JlZGl0ZWRQcm92aWRlckFjdGlvbiBlcnJvcicsIGUpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRyYWluZXJDcmVkZW50aWFsQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghaXNTaWduZWRJbihzZXNzaW9uKSkgcmV0dXJuXG5cbiAgICBjb25zdCB1c2VySWQgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCd1c2VySWQnKSB8fCAnJylcbiAgICBjb25zdCBpbmRleFJhdyA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ2luZGV4JykgfHwgJycpXG4gICAgaWYgKCF1c2VySWQgfHwgdXNlcklkICE9PSBzZXNzaW9uIS51c2VyIS5pZCkgcmV0dXJuXG4gICAgaWYgKGluZGV4UmF3ID09PSAnJykgcmV0dXJuXG5cbiAgICBjb25zdCBpbmRleCA9IE51bWJlcihpbmRleFJhdylcbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoaW5kZXgpIHx8IGluZGV4IDwgMCkgcmV0dXJuXG5cbiAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIHNlbGVjdDogeyB0cmFpbmVyQ3JlZGVudGlhbHM6IHRydWUgfSB9KVxuICAgIGxldCBjcmVkczogYW55W10gPSBbXVxuICAgIHRyeSB7XG4gICAgICBpZiAoY3VycmVudD8udHJhaW5lckNyZWRlbnRpYWxzKSBjcmVkcyA9IEpTT04ucGFyc2UoY3VycmVudC50cmFpbmVyQ3JlZGVudGlhbHMpXG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3JlZHMpKSBjcmVkcyA9IFtdXG4gICAgfSBjYXRjaCB7IGNyZWRzID0gW10gfVxuXG4gICAgaWYgKGluZGV4ID49IGNyZWRzLmxlbmd0aCkgcmV0dXJuXG5cbiAgICAvLyBUcnkgdG8gZGVsZXRlIHN0b3JlZCBmaWxlIGlmIGl0IGV4aXN0cyBhbmQgaXMgdW5kZXIgdXBsb2Fkcy9jcmVkZW50aWFsc1xuICAgIGNvbnN0IGNyZWQgPSBjcmVkc1tpbmRleF0gfHwge31cbiAgICBjb25zdCBmaWxlVXJsOiBzdHJpbmcgfCBudWxsID0gY3JlZC5jcmVkZW50aWFsUGF0aCB8fCBjcmVkLmZpbGVVcmwgfHwgbnVsbFxuICAgIGlmIChmaWxlVXJsICYmIHR5cGVvZiBmaWxlVXJsID09PSAnc3RyaW5nJyAmJiBmaWxlVXJsLnN0YXJ0c1dpdGgoJy91cGxvYWRzL2NyZWRlbnRpYWxzLycpKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGxvYWRzRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnKVxuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IHBhdGguam9pbih1cGxvYWRzRGlyLCBmaWxlVXJsLnJlcGxhY2UoL15cXC8rLywgJycpKVxuICAgICAgICBhd2FpdCBmcy51bmxpbmsoZnVsbFBhdGgpLmNhdGNoKCgpID0+IHt9KVxuICAgICAgfSBjYXRjaCB7fVxuICAgIH1cblxuICAgIC8vIFJlbW92ZSB0aGUgY3JlZGVudGlhbFxuICAgIGNyZWRzLnNwbGljZShpbmRleCwgMSlcblxuICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoeyB3aGVyZTogeyBpZDogdXNlcklkIH0sIGRhdGE6IHsgdHJhaW5lckNyZWRlbnRpYWxzOiBKU09OLnN0cmluZ2lmeShjcmVkcykgfSB9KVxuICAgIHJldmFsaWRhdGVQYXRoKCcvcHJvZmlsZScpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdkZWxldGVUcmFpbmVyQ3JlZGVudGlhbEFjdGlvbiBlcnJvcicsIGUpXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZE1lZGlhQWN0aW9uKGZvcm1EYXRhOiBGb3JtRGF0YSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZzsgbWVkaWFVcmw/OiBzdHJpbmc7IG5lZWRzUmV2aWV3PzogYm9vbGVhbiB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFpc1NpZ25lZEluKHNlc3Npb24pKSByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdOb3QgYXV0aGVudGljYXRlZCcgfVxuXG4gICAgY29uc3QgdXNlcklkID0gU3RyaW5nKGZvcm1EYXRhLmdldCgndXNlcklkJykgfHwgJycpXG4gICAgaWYgKCF1c2VySWQgfHwgdXNlcklkICE9PSBzZXNzaW9uIS51c2VyIS5pZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCB1c2VyJyB9XG5cbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdtZWRpYScpIGFzIHVua25vd24gYXMgRmlsZSB8IG51bGxcbiAgICBjb25zdCBtZWRpYVR5cGUgPSBTdHJpbmcoZm9ybURhdGEuZ2V0KCdtZWRpYVR5cGUnKSB8fCAncGhvdG8nKSAvLyAncGhvdG8nIG9yICd2aWRlbydcbiAgICBjb25zdCBjYXB0aW9uID0gU3RyaW5nKGZvcm1EYXRhLmdldCgnY2FwdGlvbicpIHx8ICcnKS50cmltKClcblxuICAgIGlmICghZmlsZSkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gZmlsZSBwcm92aWRlZCcgfVxuXG4gICAgLy8gVmFsaWRhdGUgZmlsZSB0eXBlIGFuZCBzaXplXG4gICAgY29uc3QgdmFsaWRJbWFnZVR5cGVzID0gWydpbWFnZS9wbmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9qcGcnLCAnaW1hZ2Uvd2VicCddXG4gICAgY29uc3QgdmFsaWRWaWRlb1R5cGVzID0gWyd2aWRlby9tcDQnLCAndmlkZW8vd2VibScsICd2aWRlby9tb3YnLCAndmlkZW8vYXZpJ11cbiAgICBjb25zdCB2YWxpZFR5cGVzID0gbWVkaWFUeXBlID09PSAndmlkZW8nID8gdmFsaWRWaWRlb1R5cGVzIDogdmFsaWRJbWFnZVR5cGVzXG5cbiAgICBpZiAoIXZhbGlkVHlwZXMuaW5jbHVkZXMoKGZpbGUgYXMgYW55KS50eXBlKSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnSW52YWxpZCBmaWxlIHR5cGUnIH1cbiAgICB9XG5cbiAgICBjb25zdCBidWYgPSBCdWZmZXIuZnJvbShhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCkpXG4gICAgY29uc3QgbWF4U2l6ZSA9IG1lZGlhVHlwZSA9PT0gJ3ZpZGVvJyA/IDUwICogMTAyNCAqIDEwMjQgOiAxMCAqIDEwMjQgKiAxMDI0IC8vIDUwTUIgZm9yIHZpZGVvLCAxME1CIGZvciBpbWFnZXNcblxuICAgIGlmIChidWYuYnl0ZUxlbmd0aCA+IG1heFNpemUpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZpbGUgdG9vIGxhcmdlJyB9XG4gICAgfVxuXG4gICAgLy8gQ29udGVudCBtb2RlcmF0aW9uIGZvciBjYXB0aW9uIGlmIHByb3ZpZGVkXG4gICAgbGV0IG1vZGVyYXRpb25SZXN1bHQgPSBudWxsXG4gICAgaWYgKGNhcHRpb24pIHtcbiAgICAgIG1vZGVyYXRpb25SZXN1bHQgPSBhd2FpdCBtb2RlcmF0ZUNvbnRlbnQoY2FwdGlvbilcblxuICAgICAgLy8gQmxvY2sgdXBsb2FkIGlmIGNhcHRpb24gaXMgaW5hcHByb3ByaWF0ZVxuICAgICAgaWYgKG1vZGVyYXRpb25SZXN1bHQuYmxvY2tlZCkge1xuICAgICAgICBhd2FpdCBsb2dNb2RlcmF0aW9uQWN0aW9uKHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgY29udGVudFR5cGU6ICdNRURJQV9DQVBUSU9OJyxcbiAgICAgICAgICBjb250ZW50OiBjYXB0aW9uLFxuICAgICAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5CTE9DS0VELFxuICAgICAgICAgIHJlc3VsdDogbW9kZXJhdGlvblJlc3VsdCxcbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdDYXB0aW9uIHZpb2xhdGVzIGNvbW11bml0eSBndWlkZWxpbmVzJyB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHVwbG9hZCBkaXJlY3RvcnlcbiAgICBjb25zdCB1cGxvYWRzRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAndXBsb2FkcycsICdtZWRpYScpXG4gICAgYXdhaXQgZnMubWtkaXIodXBsb2Fkc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSlcblxuICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lXG4gICAgY29uc3QgYmFzZSA9IHBhdGguYmFzZW5hbWUoKGZpbGUgYXMgYW55KS5uYW1lIHx8IGBtZWRpYS4ke21lZGlhVHlwZSA9PT0gJ3ZpZGVvJyA/ICdtcDQnIDogJ2pwZyd9YClcbiAgICBjb25zdCBleHQgPSBiYXNlLmluY2x1ZGVzKCcuJykgPyBiYXNlLnNsaWNlKGJhc2UubGFzdEluZGV4T2YoJy4nKSkgOiAobWVkaWFUeXBlID09PSAndmlkZW8nID8gJy5tcDQnIDogJy5qcGcnKVxuICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7dXNlcklkfS0ke0RhdGUubm93KCl9JHtleHR9YFxuICAgIGNvbnN0IGRlc3QgPSBwYXRoLmpvaW4odXBsb2Fkc0RpciwgZmlsZU5hbWUpXG5cbiAgICAvLyBTYXZlIGZpbGVcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoZGVzdCwgYnVmKVxuICAgIGNvbnN0IHB1YmxpY1VybCA9IGAvdXBsb2Fkcy9tZWRpYS8ke2ZpbGVOYW1lfWBcblxuICAgIC8vIExvZyBtb2RlcmF0aW9uIGFjdGlvbiBpZiBjYXB0aW9uIHdhcyBmbGFnZ2VkXG4gICAgaWYgKG1vZGVyYXRpb25SZXN1bHQgJiYgbW9kZXJhdGlvblJlc3VsdC5mbGFnZ2VkKSB7XG4gICAgICBhd2FpdCBsb2dNb2RlcmF0aW9uQWN0aW9uKHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBjb250ZW50VHlwZTogJ01FRElBX0NBUFRJT04nLFxuICAgICAgICBjb250ZW50OiBjYXB0aW9uLFxuICAgICAgICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24uRkxBR0dFRCxcbiAgICAgICAgcmVzdWx0OiBtb2RlcmF0aW9uUmVzdWx0LFxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXZhbGlkYXRlUGF0aCgnL3Byb2ZpbGUnKVxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVkaWFVcmw6IHB1YmxpY1VybCxcbiAgICAgIG5lZWRzUmV2aWV3OiBtb2RlcmF0aW9uUmVzdWx0Py5yZXF1aXJlc0h1bWFuUmV2aWV3IHx8IGZhbHNlXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcigndXBsb2FkTWVkaWFBY3Rpb24gZXJyb3InLCBlKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1VwbG9hZCBmYWlsZWQnIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlTWVkaWFTZXR0aW5nc0FjdGlvbihmb3JtRGF0YTogRm9ybURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIWlzU2lnbmVkSW4oc2Vzc2lvbikpIHJldHVyblxuICAgIGNvbnN0IHVzZXJJZCA9IFN0cmluZyhmb3JtRGF0YS5nZXQoJ3VzZXJJZCcpIHx8ICcnKVxuICAgIGlmICghdXNlcklkIHx8IHVzZXJJZCAhPT0gc2Vzc2lvbiEudXNlciEuaWQpIHJldHVyblxuXG4gICAgLy8gR2V0IG1lZGlhIHNldHRpbmdzIGZyb20gZm9ybVxuICAgIGNvbnN0IHNob3dNZWRpYU9uUHJvZmlsZSA9IGZvcm1EYXRhLmdldCgnc2hvd01lZGlhT25Qcm9maWxlJykgPT09ICdvbidcbiAgICBjb25zdCBhbGxvd01lZGlhQ29tbWVudHMgPSBmb3JtRGF0YS5nZXQoJ2FsbG93TWVkaWFDb21tZW50cycpID09PSAnb24nXG4gICAgY29uc3QgZW5hYmxlU29jaWFsU2hhcmluZyA9IGZvcm1EYXRhLmdldCgnZW5hYmxlU29jaWFsU2hhcmluZycpID09PSAnb24nXG5cbiAgICAvLyBGb3Igbm93LCBzdG9yZSBpbiB1c2VyIHByb2ZpbGUgLSBpbiBhIHJlYWwgYXBwIHlvdSBtaWdodCB3YW50IGEgc2VwYXJhdGUgbWVkaWFfc2V0dGluZ3MgdGFibGVcbiAgICAvLyBXZSdsbCB1c2UgSlNPTiBpbiBhbiBleGlzdGluZyBmaWVsZCBvciBhZGQgbmV3IGJvb2xlYW4gZmllbGRzIHRvIHRoZSB1c2VyIG1vZGVsXG4gICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LCBzZWxlY3Q6IHsgdHJhaW5lckNyZWRlbnRpYWxzOiB0cnVlIH0gfSlcbiAgICBsZXQgdXNlckRhdGE6IGFueSA9IHt9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGN1cnJlbnQ/LnRyYWluZXJDcmVkZW50aWFscykge1xuICAgICAgICB1c2VyRGF0YSA9IEpTT04ucGFyc2UoY3VycmVudC50cmFpbmVyQ3JlZGVudGlhbHMpXG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICB1c2VyRGF0YSA9IHt9XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgbWVkaWEgc2V0dGluZ3MgaW4gdGhlIHVzZXIgZGF0YSAodGVtcG9yYXJ5IHNvbHV0aW9uKVxuICAgIHVzZXJEYXRhLm1lZGlhU2V0dGluZ3MgPSB7XG4gICAgICBzaG93TWVkaWFPblByb2ZpbGUsXG4gICAgICBhbGxvd01lZGlhQ29tbWVudHMsXG4gICAgICBlbmFibGVTb2NpYWxTaGFyaW5nLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG5cbiAgICBhd2FpdCBwcmlzbWEudXNlcnMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdHJhaW5lckNyZWRlbnRpYWxzOiBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV2YWxpZGF0ZVBhdGgoJy9wcm9maWxlJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ3VwZGF0ZU1lZGlhU2V0dGluZ3NBY3Rpb24gZXJyb3InLCBlKVxuICB9XG59XG4iXSwibmFtZXMiOlsidXBkYXRlRW1haWxBY3Rpb24iLCJzdWJtaXRUcmFpbmVyQWNjcmVkaXRhdGlvbkFjdGlvbiIsInVwbG9hZFRyYWluZXJDZXJ0aWZpY2F0ZUFjdGlvbiIsInVwZGF0ZVByb2ZpbGVCYXNpY3NBY3Rpb24iLCJ1cGxvYWRBdmF0YXJBY3Rpb24iLCJ1cGRhdGVTb2NpYWxNZWRpYUFjdGlvbiIsInVwZGF0ZUZpdG5lc3NQcmVmZXJlbmNlc0FjdGlvbiIsInVwZGF0ZUxvY2F0aW9uQWN0aW9uIiwic2VsZWN0QWNjcmVkaXRlZFByb3ZpZGVyQWN0aW9uIiwiZGVsZXRlVHJhaW5lckNyZWRlbnRpYWxBY3Rpb24iLCJ1cGxvYWRNZWRpYUFjdGlvbiIsInVwZGF0ZU1lZGlhU2V0dGluZ3NBY3Rpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/profile/actions.ts\n"));

/***/ })

});