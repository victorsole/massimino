/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/massichat/route";
exports.ids = ["app/api/massichat/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmassichat%2Froute&page=%2Fapi%2Fmassichat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmassichat%2Froute.ts&appDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmassichat%2Froute&page=%2Fapi%2Fmassichat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmassichat%2Froute.ts&appDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_victorsole_Documents_GitHub_massimino_massimino_src_app_api_massichat_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/massichat/route.ts */ \"(rsc)/./src/app/api/massichat/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/massichat/route\",\n        pathname: \"/api/massichat\",\n        filename: \"route\",\n        bundlePath: \"app/api/massichat/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/victorsole/Documents/GitHub/massimino/massimino/src/app/api/massichat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_victorsole_Documents_GitHub_massimino_massimino_src_app_api_massichat_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/massichat/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZtYXNzaWNoYXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm1hc3NpY2hhdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm1hc3NpY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpY3RvcnNvbGUlMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZtYXNzaW1pbm8lMkZtYXNzaW1pbm8lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdmljdG9yc29sZSUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRm1hc3NpbWlubyUyRm1hc3NpbWlubyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNnRDtBQUNsSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7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LDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9hcHAvYXBpL21hc3NpY2hhdC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbWFzc2ljaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWFzc2ljaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9tYXNzaWNoYXQvcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9hcHAvYXBpL21hc3NpY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL21hc3NpY2hhdC9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmassichat%2Froute&page=%2Fapi%2Fmassichat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmassichat%2Froute.ts&appDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/massichat/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/massichat/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/core */ \"(rsc)/./src/core/index.ts\");\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _services_ai_massichat_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/services/ai/massichat_service */ \"(rsc)/./src/services/ai/massichat_service.ts\");\n\n\n\n\n\nasync function POST(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_core__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const { message, sessionId, includeAssessments, includeWorkoutHistory } = await request.json();\n        if (!message || typeof message !== 'string') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Message is required'\n            }, {\n                status: 400\n            });\n        }\n        const res = await (0,_services_ai_massichat_service__WEBPACK_IMPORTED_MODULE_4__.sendMassichatMessage)({\n            userId: session.user.id,\n            sessionId,\n            message,\n            includeAssessments: includeAssessments ?? true,\n            includeWorkoutHistory: includeWorkoutHistory ?? true\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(res);\n    } catch (err) {\n        const raw = err?.message || 'Internal server error';\n        const redacted = redactSecrets(raw);\n        console.error('Massichat POST error:', redacted);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: redacted\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_core__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const { searchParams } = new URL(request.url);\n        const list = searchParams.get('list') === 'true';\n        const sessionId = searchParams.get('sessionId');\n        const db = _core_database__WEBPACK_IMPORTED_MODULE_3__.prisma;\n        if (!db?.ai_chat_sessions) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Massichat tables not available. Run migrations.'\n            }, {\n                status: 500\n            });\n        }\n        if (list) {\n            const sessions = await db.ai_chat_sessions.findMany({\n                where: {\n                    userId: session.user.id\n                },\n                orderBy: {\n                    updatedAt: 'desc'\n                },\n                take: 20,\n                include: {\n                    ai_chat_messages: {\n                        orderBy: {\n                            createdAt: 'desc'\n                        },\n                        take: 1\n                    }\n                }\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                sessions\n            });\n        }\n        if (!sessionId) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'sessionId required'\n        }, {\n            status: 400\n        });\n        const sess = await db.ai_chat_sessions.findFirst({\n            where: {\n                id: sessionId,\n                userId: session.user.id\n            }\n        });\n        if (!sess) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Not found'\n        }, {\n            status: 404\n        });\n        const messages = await db.ai_chat_messages.findMany({\n            where: {\n                sessionId\n            },\n            orderBy: {\n                createdAt: 'asc'\n            }\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            session: sess,\n            messages\n        });\n    } catch (err) {\n        const raw = err?.message || 'Internal server error';\n        const redacted = redactSecrets(raw);\n        console.error('Massichat GET error:', redacted);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: redacted\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PATCH(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_core__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const body = await request.json().catch(()=>({}));\n        const sessionId = body.sessionId;\n        const title = (body.title || '').trim();\n        const db = _core_database__WEBPACK_IMPORTED_MODULE_3__.prisma;\n        if (!db?.ai_chat_sessions?.update) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Massichat tables not available'\n        }, {\n            status: 500\n        });\n        if (!sessionId || !title) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'sessionId and title are required'\n        }, {\n            status: 400\n        });\n        const updated = await db.ai_chat_sessions.update({\n            where: {\n                id: sessionId,\n                userId: session.user.id\n            },\n            data: {\n                title\n            }\n        }).catch(()=>null);\n        if (!updated) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Not found'\n        }, {\n            status: 404\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (err) {\n        const raw = err?.message || 'Internal server error';\n        const redacted = redactSecrets(raw);\n        console.error('Massichat PATCH error:', redacted);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: redacted\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_core__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.id) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Unauthorized'\n        }, {\n            status: 401\n        });\n        const { searchParams } = new URL(request.url);\n        const sessionId = searchParams.get('sessionId');\n        const db = _core_database__WEBPACK_IMPORTED_MODULE_3__.prisma;\n        if (!db?.ai_chat_sessions?.deleteMany) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Massichat tables not available'\n        }, {\n            status: 500\n        });\n        if (!sessionId) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'sessionId required'\n        }, {\n            status: 400\n        });\n        const res = await db.ai_chat_sessions.deleteMany({\n            where: {\n                id: sessionId,\n                userId: session.user.id\n            }\n        });\n        if (res.count === 0) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Not found'\n        }, {\n            status: 404\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (err) {\n        const raw = err?.message || 'Internal server error';\n        const redacted = redactSecrets(raw);\n        console.error('Massichat DELETE error:', redacted);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: redacted\n        }, {\n            status: 500\n        });\n    }\n}\nfunction redactSecrets(msg) {\n    try {\n        // Redact API keys like sk-... or sk-proj-...\n        return msg.replace(/sk-[a-zA-Z0-9_\\-]+/g, 'sk-***');\n    } catch  {\n        return 'Internal server error';\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9tYXNzaWNoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNYO0FBQ1I7QUFDSTtBQUM4QjtBQUUvRCxlQUFlSyxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNTiwyREFBZ0JBLENBQUNDLDhDQUFXQTtRQUNsRCxJQUFJLENBQUNLLFNBQVNDLE1BQU1DLElBQUksT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWUsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDMUYsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRUMsa0JBQWtCLEVBQUVDLHFCQUFxQixFQUFFLEdBQUcsTUFBTVYsUUFBUUksSUFBSTtRQUM1RixJQUFJLENBQUNHLFdBQVcsT0FBT0EsWUFBWSxVQUFVO1lBQzNDLE9BQU9iLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBc0IsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzNFO1FBRUEsTUFBTUssTUFBTSxNQUFNYixvRkFBb0JBLENBQUM7WUFDckNjLFFBQVFYLFFBQVFDLElBQUksQ0FBQ0MsRUFBRTtZQUN2Qks7WUFDQUQ7WUFDQUUsb0JBQW9CQSxzQkFBc0I7WUFDMUNDLHVCQUF1QkEseUJBQXlCO1FBQ2xEO1FBQ0EsT0FBT2hCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUNPO0lBQzNCLEVBQUUsT0FBT0UsS0FBVTtRQUNqQixNQUFNQyxNQUFNRCxLQUFLTixXQUFXO1FBQzVCLE1BQU1RLFdBQVdDLGNBQWNGO1FBQy9CRyxRQUFRWixLQUFLLENBQUMseUJBQXlCVTtRQUN2QyxPQUFPckIscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPVTtRQUFTLEdBQUc7WUFBRVQsUUFBUTtRQUFJO0lBQzlEO0FBQ0Y7QUFFTyxlQUFlWSxJQUFJbEIsT0FBb0I7SUFDNUMsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTU4sMkRBQWdCQSxDQUFDQyw4Q0FBV0E7UUFDbEQsSUFBSSxDQUFDSyxTQUFTQyxNQUFNQyxJQUFJLE9BQU9ULHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFlLEdBQUc7WUFBRUMsUUFBUTtRQUFJO1FBQzFGLE1BQU0sRUFBRWEsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSXBCLFFBQVFxQixHQUFHO1FBQzVDLE1BQU1DLE9BQU9ILGFBQWFJLEdBQUcsQ0FBQyxZQUFZO1FBQzFDLE1BQU1mLFlBQVlXLGFBQWFJLEdBQUcsQ0FBQztRQUNuQyxNQUFNQyxLQUFVM0Isa0RBQU1BO1FBQ3RCLElBQUksQ0FBQzJCLElBQUlDLGtCQUFrQjtZQUN6QixPQUFPL0IscURBQVlBLENBQUNVLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFrRCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDdkc7UUFFQSxJQUFJZ0IsTUFBTTtZQUNSLE1BQU1JLFdBQVcsTUFBTUYsR0FBR0MsZ0JBQWdCLENBQUNFLFFBQVEsQ0FBQztnQkFDbERDLE9BQU87b0JBQUVoQixRQUFRWCxRQUFRQyxJQUFJLENBQUNDLEVBQUU7Z0JBQUM7Z0JBQ2pDMEIsU0FBUztvQkFBRUMsV0FBVztnQkFBTztnQkFDN0JDLE1BQU07Z0JBQ05DLFNBQVM7b0JBQUVDLGtCQUFrQjt3QkFBRUosU0FBUzs0QkFBRUssV0FBVzt3QkFBTzt3QkFBR0gsTUFBTTtvQkFBRTtnQkFBRTtZQUMzRTtZQUNBLE9BQU9yQyxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO2dCQUFFc0I7WUFBUztRQUN0QztRQUVBLElBQUksQ0FBQ2xCLFdBQVcsT0FBT2QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXFCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO1FBQ3hGLE1BQU02QixPQUFPLE1BQU1YLEdBQUdDLGdCQUFnQixDQUFDVyxTQUFTLENBQUM7WUFBRVIsT0FBTztnQkFBRXpCLElBQUlLO2dCQUFXSSxRQUFRWCxRQUFRQyxJQUFJLENBQUNDLEVBQUU7WUFBQztRQUFFO1FBQ3JHLElBQUksQ0FBQ2dDLE1BQU0sT0FBT3pDLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFZLEdBQUc7WUFBRUMsUUFBUTtRQUFJO1FBQzFFLE1BQU0rQixXQUFXLE1BQU1iLEdBQUdTLGdCQUFnQixDQUFDTixRQUFRLENBQUM7WUFBRUMsT0FBTztnQkFBRXBCO1lBQVU7WUFBR3FCLFNBQVM7Z0JBQUVLLFdBQVc7WUFBTTtRQUFFO1FBQzFHLE9BQU94QyxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVILFNBQVNrQztZQUFNRTtRQUFTO0lBQ3JELEVBQUUsT0FBT3hCLEtBQVU7UUFDakIsTUFBTUMsTUFBTUQsS0FBS04sV0FBVztRQUM1QixNQUFNUSxXQUFXQyxjQUFjRjtRQUMvQkcsUUFBUVosS0FBSyxDQUFDLHdCQUF3QlU7UUFDdEMsT0FBT3JCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBT1U7UUFBUyxHQUFHO1lBQUVULFFBQVE7UUFBSTtJQUM5RDtBQUNGO0FBRU8sZUFBZWdDLE1BQU10QyxPQUFvQjtJQUM5QyxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNTiwyREFBZ0JBLENBQUNDLDhDQUFXQTtRQUNsRCxJQUFJLENBQUNLLFNBQVNDLE1BQU1DLElBQUksT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWUsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDMUYsTUFBTWlDLE9BQU8sTUFBTXZDLFFBQVFJLElBQUksR0FBR29DLEtBQUssQ0FBQyxJQUFPLEVBQUM7UUFDaEQsTUFBTWhDLFlBQVkrQixLQUFLL0IsU0FBUztRQUNoQyxNQUFNaUMsUUFBUSxDQUFDRixLQUFLRSxLQUFLLElBQUksRUFBQyxFQUFHQyxJQUFJO1FBQ3JDLE1BQU1sQixLQUFVM0Isa0RBQU1BO1FBQ3RCLElBQUksQ0FBQzJCLElBQUlDLGtCQUFrQmtCLFFBQVEsT0FBT2pELHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFpQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtRQUN2SCxJQUFJLENBQUNFLGFBQWEsQ0FBQ2lDLE9BQU8sT0FBTy9DLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFtQyxHQUFHO1lBQUVDLFFBQVE7UUFBSTtRQUNoSCxNQUFNc0MsVUFBVSxNQUFNcEIsR0FBR0MsZ0JBQWdCLENBQUNrQixNQUFNLENBQUM7WUFBRWYsT0FBTztnQkFBRXpCLElBQUlLO2dCQUFXSSxRQUFRWCxRQUFRQyxJQUFJLENBQUNDLEVBQUU7WUFBQztZQUFHMEMsTUFBTTtnQkFBRUo7WUFBTTtRQUFFLEdBQUdELEtBQUssQ0FBQyxJQUFNO1FBQ3JJLElBQUksQ0FBQ0ksU0FBUyxPQUFPbEQscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQVksR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDN0UsT0FBT1oscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFMEMsU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBT2pDLEtBQVU7UUFDakIsTUFBTUMsTUFBTUQsS0FBS04sV0FBVztRQUM1QixNQUFNUSxXQUFXQyxjQUFjRjtRQUMvQkcsUUFBUVosS0FBSyxDQUFDLDBCQUEwQlU7UUFDeEMsT0FBT3JCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBT1U7UUFBUyxHQUFHO1lBQUVULFFBQVE7UUFBSTtJQUM5RDtBQUNGO0FBRU8sZUFBZXlDLE9BQU8vQyxPQUFvQjtJQUMvQyxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNTiwyREFBZ0JBLENBQUNDLDhDQUFXQTtRQUNsRCxJQUFJLENBQUNLLFNBQVNDLE1BQU1DLElBQUksT0FBT1QscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWUsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDMUYsTUFBTSxFQUFFYSxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJcEIsUUFBUXFCLEdBQUc7UUFDNUMsTUFBTWIsWUFBWVcsYUFBYUksR0FBRyxDQUFDO1FBQ25DLE1BQU1DLEtBQVUzQixrREFBTUE7UUFDdEIsSUFBSSxDQUFDMkIsSUFBSUMsa0JBQWtCdUIsWUFBWSxPQUFPdEQscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWlDLEdBQUc7WUFBRUMsUUFBUTtRQUFJO1FBQzNILElBQUksQ0FBQ0UsV0FBVyxPQUFPZCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUIsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDeEYsTUFBTUssTUFBTSxNQUFNYSxHQUFHQyxnQkFBZ0IsQ0FBQ3VCLFVBQVUsQ0FBQztZQUFFcEIsT0FBTztnQkFBRXpCLElBQUlLO2dCQUFXSSxRQUFRWCxRQUFRQyxJQUFJLENBQUNDLEVBQUU7WUFBQztRQUFFO1FBQ3JHLElBQUlRLElBQUlzQyxLQUFLLEtBQUssR0FBRyxPQUFPdkQscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQVksR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFDcEYsT0FBT1oscURBQVlBLENBQUNVLElBQUksQ0FBQztZQUFFMEMsU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBT2pDLEtBQVU7UUFDakIsTUFBTUMsTUFBTUQsS0FBS04sV0FBVztRQUM1QixNQUFNUSxXQUFXQyxjQUFjRjtRQUMvQkcsUUFBUVosS0FBSyxDQUFDLDJCQUEyQlU7UUFDekMsT0FBT3JCLHFEQUFZQSxDQUFDVSxJQUFJLENBQUM7WUFBRUMsT0FBT1U7UUFBUyxHQUFHO1lBQUVULFFBQVE7UUFBSTtJQUM5RDtBQUNGO0FBRUEsU0FBU1UsY0FBY2tDLEdBQVc7SUFDaEMsSUFBSTtRQUNGLDZDQUE2QztRQUM3QyxPQUFPQSxJQUFJQyxPQUFPLENBQUMsdUJBQXVCO0lBQzVDLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2FwcC9hcGkvbWFzc2ljaGF0L3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJ0AvY29yZSdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZSdcbmltcG9ydCB7IHNlbmRNYXNzaWNoYXRNZXNzYWdlIH0gZnJvbSAnQC9zZXJ2aWNlcy9haS9tYXNzaWNoYXRfc2VydmljZSdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIGNvbnN0IHsgbWVzc2FnZSwgc2Vzc2lvbklkLCBpbmNsdWRlQXNzZXNzbWVudHMsIGluY2x1ZGVXb3Jrb3V0SGlzdG9yeSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBpZiAoIW1lc3NhZ2UgfHwgdHlwZW9mIG1lc3NhZ2UgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01lc3NhZ2UgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBjb25zdCByZXMgPSBhd2FpdCBzZW5kTWFzc2ljaGF0TWVzc2FnZSh7XG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pZCxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBpbmNsdWRlQXNzZXNzbWVudHM6IGluY2x1ZGVBc3Nlc3NtZW50cyA/PyB0cnVlLFxuICAgICAgaW5jbHVkZVdvcmtvdXRIaXN0b3J5OiBpbmNsdWRlV29ya291dEhpc3RvcnkgPz8gdHJ1ZSxcbiAgICB9KVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXMpXG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc3QgcmF3ID0gZXJyPy5tZXNzYWdlIHx8ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXG4gICAgY29uc3QgcmVkYWN0ZWQgPSByZWRhY3RTZWNyZXRzKHJhdylcbiAgICBjb25zb2xlLmVycm9yKCdNYXNzaWNoYXQgUE9TVCBlcnJvcjonLCByZWRhY3RlZClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogcmVkYWN0ZWQgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucylcbiAgICBpZiAoIXNlc3Npb24/LnVzZXI/LmlkKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxuICAgIGNvbnN0IGxpc3QgPSBzZWFyY2hQYXJhbXMuZ2V0KCdsaXN0JykgPT09ICd0cnVlJ1xuICAgIGNvbnN0IHNlc3Npb25JZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3Nlc3Npb25JZCcpXG4gICAgY29uc3QgZGI6IGFueSA9IHByaXNtYSBhcyBhbnlcbiAgICBpZiAoIWRiPy5haV9jaGF0X3Nlc3Npb25zKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01hc3NpY2hhdCB0YWJsZXMgbm90IGF2YWlsYWJsZS4gUnVuIG1pZ3JhdGlvbnMuJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgaWYgKGxpc3QpIHtcbiAgICAgIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgZGIuYWlfY2hhdF9zZXNzaW9ucy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJJZDogc2Vzc2lvbi51c2VyLmlkIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgdXBkYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogMjAsXG4gICAgICAgIGluY2x1ZGU6IHsgYWlfY2hhdF9tZXNzYWdlczogeyBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sIHRha2U6IDEgfSB9LFxuICAgICAgfSlcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHNlc3Npb25zIH0pXG4gICAgfVxuXG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnc2Vzc2lvbklkIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgY29uc3Qgc2VzcyA9IGF3YWl0IGRiLmFpX2NoYXRfc2Vzc2lvbnMuZmluZEZpcnN0KHsgd2hlcmU6IHsgaWQ6IHNlc3Npb25JZCwgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQgfSB9KVxuICAgIGlmICghc2VzcykgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdOb3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSlcbiAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IGRiLmFpX2NoYXRfbWVzc2FnZXMuZmluZE1hbnkoeyB3aGVyZTogeyBzZXNzaW9uSWQgfSwgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdhc2MnIH0gfSlcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzZXNzaW9uOiBzZXNzLCBtZXNzYWdlcyB9KVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnN0IHJhdyA9IGVycj8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xuICAgIGNvbnN0IHJlZGFjdGVkID0gcmVkYWN0U2VjcmV0cyhyYXcpXG4gICAgY29uc29sZS5lcnJvcignTWFzc2ljaGF0IEdFVCBlcnJvcjonLCByZWRhY3RlZClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogcmVkYWN0ZWQgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpIGFzIHsgc2Vzc2lvbklkPzogc3RyaW5nOyB0aXRsZT86IHN0cmluZyB9XG4gICAgY29uc3Qgc2Vzc2lvbklkID0gYm9keS5zZXNzaW9uSWRcbiAgICBjb25zdCB0aXRsZSA9IChib2R5LnRpdGxlIHx8ICcnKS50cmltKClcbiAgICBjb25zdCBkYjogYW55ID0gcHJpc21hIGFzIGFueVxuICAgIGlmICghZGI/LmFpX2NoYXRfc2Vzc2lvbnM/LnVwZGF0ZSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNYXNzaWNoYXQgdGFibGVzIG5vdCBhdmFpbGFibGUnIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICBpZiAoIXNlc3Npb25JZCB8fCAhdGl0bGUpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnc2Vzc2lvbklkIGFuZCB0aXRsZSBhcmUgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgZGIuYWlfY2hhdF9zZXNzaW9ucy51cGRhdGUoeyB3aGVyZTogeyBpZDogc2Vzc2lvbklkLCB1c2VySWQ6IHNlc3Npb24udXNlci5pZCB9LCBkYXRhOiB7IHRpdGxlIH0gfSkuY2F0Y2goKCkgPT4gbnVsbClcbiAgICBpZiAoIXVwZGF0ZWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnN0IHJhdyA9IGVycj8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xuICAgIGNvbnN0IHJlZGFjdGVkID0gcmVkYWN0U2VjcmV0cyhyYXcpXG4gICAgY29uc29sZS5lcnJvcignTWFzc2ljaGF0IFBBVENIIGVycm9yOicsIHJlZGFjdGVkKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiByZWRhY3RlZCB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uaWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gc2VhcmNoUGFyYW1zLmdldCgnc2Vzc2lvbklkJylcbiAgICBjb25zdCBkYjogYW55ID0gcHJpc21hIGFzIGFueVxuICAgIGlmICghZGI/LmFpX2NoYXRfc2Vzc2lvbnM/LmRlbGV0ZU1hbnkpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTWFzc2ljaGF0IHRhYmxlcyBub3QgYXZhaWxhYmxlJyB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgaWYgKCFzZXNzaW9uSWQpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnc2Vzc2lvbklkIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZGIuYWlfY2hhdF9zZXNzaW9ucy5kZWxldGVNYW55KHsgd2hlcmU6IHsgaWQ6IHNlc3Npb25JZCwgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQgfSB9KVxuICAgIGlmIChyZXMuY291bnQgPT09IDApIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnN0IHJhdyA9IGVycj8ubWVzc2FnZSB8fCAnSW50ZXJuYWwgc2VydmVyIGVycm9yJ1xuICAgIGNvbnN0IHJlZGFjdGVkID0gcmVkYWN0U2VjcmV0cyhyYXcpXG4gICAgY29uc29sZS5lcnJvcignTWFzc2ljaGF0IERFTEVURSBlcnJvcjonLCByZWRhY3RlZClcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogcmVkYWN0ZWQgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIHJlZGFjdFNlY3JldHMobXNnOiBzdHJpbmcpOiBzdHJpbmcge1xuICB0cnkge1xuICAgIC8vIFJlZGFjdCBBUEkga2V5cyBsaWtlIHNrLS4uLiBvciBzay1wcm9qLS4uLlxuICAgIHJldHVybiBtc2cucmVwbGFjZSgvc2stW2EtekEtWjAtOV9cXC1dKy9nLCAnc2stKioqJylcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJwcmlzbWEiLCJzZW5kTWFzc2ljaGF0TWVzc2FnZSIsIlBPU1QiLCJyZXF1ZXN0Iiwic2Vzc2lvbiIsInVzZXIiLCJpZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJzZXNzaW9uSWQiLCJpbmNsdWRlQXNzZXNzbWVudHMiLCJpbmNsdWRlV29ya291dEhpc3RvcnkiLCJyZXMiLCJ1c2VySWQiLCJlcnIiLCJyYXciLCJyZWRhY3RlZCIsInJlZGFjdFNlY3JldHMiLCJjb25zb2xlIiwiR0VUIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwibGlzdCIsImdldCIsImRiIiwiYWlfY2hhdF9zZXNzaW9ucyIsInNlc3Npb25zIiwiZmluZE1hbnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJ1cGRhdGVkQXQiLCJ0YWtlIiwiaW5jbHVkZSIsImFpX2NoYXRfbWVzc2FnZXMiLCJjcmVhdGVkQXQiLCJzZXNzIiwiZmluZEZpcnN0IiwibWVzc2FnZXMiLCJQQVRDSCIsImJvZHkiLCJjYXRjaCIsInRpdGxlIiwidHJpbSIsInVwZGF0ZSIsInVwZGF0ZWQiLCJkYXRhIiwic3VjY2VzcyIsIkRFTEVURSIsImRlbGV0ZU1hbnkiLCJjb3VudCIsIm1zZyIsInJlcGxhY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/massichat/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/auth/config.ts":
/*!*********************************!*\
  !*** ./src/core/auth/config.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/linkedin */ \"(rsc)/./node_modules/next-auth/providers/linkedin.js\");\n/* harmony import */ var next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/facebook */ \"(rsc)/./node_modules/next-auth/providers/facebook.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var _prisma_adapter_custom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./prisma-adapter-custom */ \"(rsc)/./src/core/auth/prisma-adapter-custom.ts\");\n// src/lib/auth/config.ts\n/**\n * Authentication Configuration for Massimino\n * Safety-first approach with strict validation and role-based access\n */ // import { PrismaAdapter } from '@next-auth/prisma-adapter'; // Standard adapter doesn't work with lowercase table names\n\n\n\n\n\n\n\n// Define enums as const values since Prisma client may not be available\nconst UserRole = {\n    CLIENT: 'CLIENT',\n    TRAINER: 'TRAINER',\n    ADMIN: 'ADMIN'\n};\nconst UserStatus = {\n    ACTIVE: 'ACTIVE',\n    SUSPENDED: 'SUSPENDED',\n    BANNED: 'BANNED'\n};\n// Environment variable validation\n// Require NEXTAUTH_SECRET always; allow NEXTAUTH_URL to default in development\nconst devDefaultNextAuthUrl =  true ? 'http://localhost:3000' : 0;\nconst requiredEnvVars = {\n    NEXTAUTH_SECRET: process.env.NEXTAUTH_SECRET\n};\n// Ensure NEXTAUTH_URL is defined at runtime for libraries that read it\nif (false) {}\n// Google OAuth configuration (optional)\nconst googleConfig = {\n    GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\n    GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET\n};\n// LinkedIn OAuth configuration (optional)\nconst linkedinConfig = {\n    LINKEDIN_CLIENT_ID: process.env.LINKEDIN_CLIENT_ID,\n    LINKEDIN_CLIENT_SECRET: process.env.LINKEDIN_CLIENT_SECRET\n};\n// Facebook OAuth configuration (optional)\nconst facebookConfig = {\n    FACEBOOK_CLIENT_ID: process.env.FACEBOOK_CLIENT_ID,\n    FACEBOOK_CLIENT_SECRET: process.env.FACEBOOK_CLIENT_SECRET\n};\n// Validate required environment variables\nfor (const [key, value] of Object.entries(requiredEnvVars)){\n    if (!value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n}\n// Admin bootstrap via environment variable list (comma-separated emails)\nconst ADMIN_EMAILS = (process.env.ADMIN_EMAILS || '').split(',').map((e)=>e.trim().toLowerCase()).filter(Boolean);\n// Build providers array dynamically\nconst providers = [\n    // Email/Password authentication\n    (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n        name: 'credentials',\n        credentials: {\n            email: {\n                label: 'Email',\n                type: 'email'\n            },\n            password: {\n                label: 'Password',\n                type: 'password'\n            }\n        },\n        async authorize (credentials) {\n            if (!credentials?.email || !credentials?.password) {\n                return null;\n            }\n            try {\n                // Find user by email\n                const user = await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.findUnique({\n                    where: {\n                        email: credentials.email\n                    },\n                    select: {\n                        id: true,\n                        email: true,\n                        name: true,\n                        password: true,\n                        role: true,\n                        status: true,\n                        reputationScore: true,\n                        warningCount: true,\n                        trainerVerified: true,\n                        suspendedUntil: true\n                    }\n                });\n                if (!user || !user.password) {\n                    return null;\n                }\n                // Check password\n                const isValid = await bcryptjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"].compare(credentials.password, user.password);\n                if (!isValid) {\n                    return null;\n                }\n                // Check if user is active\n                if (user.status !== UserStatus.ACTIVE) {\n                    return null;\n                }\n                // Update last login\n                await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.update({\n                    where: {\n                        id: user.id\n                    },\n                    data: {\n                        lastLoginAt: new Date()\n                    }\n                });\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name || '',\n                    image: null,\n                    role: user.role,\n                    status: user.status,\n                    reputationScore: user.reputationScore,\n                    warningCount: user.warningCount,\n                    trainerVerified: user.trainerVerified,\n                    suspendedUntil: user.suspendedUntil\n                };\n            } catch (error) {\n                console.error('Auth error:', error);\n                return null;\n            }\n        }\n    })\n];\n// Add Google provider if configured\nif (googleConfig.GOOGLE_CLIENT_ID && googleConfig.GOOGLE_CLIENT_SECRET) {\n    providers.push((0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        clientId: googleConfig.GOOGLE_CLIENT_ID,\n        clientSecret: googleConfig.GOOGLE_CLIENT_SECRET,\n        authorization: {\n            params: {\n                scope: 'openid email profile',\n                prompt: 'consent',\n                access_type: 'offline',\n                response_type: 'code'\n            }\n        },\n        profile (profile) {\n            return {\n                id: profile.sub,\n                name: profile.name,\n                email: profile.email,\n                image: profile.picture,\n                role: UserRole.CLIENT,\n                status: UserStatus.ACTIVE,\n                emailVerified: profile.email_verified ? new Date() : null,\n                googleId: profile.sub,\n                reputationScore: 0,\n                warningCount: 0,\n                trainerVerified: false\n            };\n        }\n    }));\n} else if (true) {\n    console.warn('Google OAuth not configured (GOOGLE_CLIENT_ID/SECRET missing).');\n}\n// Add LinkedIn provider if configured\nif (linkedinConfig.LINKEDIN_CLIENT_ID && linkedinConfig.LINKEDIN_CLIENT_SECRET) {\n    providers.push((0,next_auth_providers_linkedin__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n        clientId: linkedinConfig.LINKEDIN_CLIENT_ID,\n        clientSecret: linkedinConfig.LINKEDIN_CLIENT_SECRET,\n        authorization: {\n            params: {\n                scope: 'r_liteprofile r_emailaddress',\n                state: 'random_state_string'\n            }\n        },\n        profile (profile) {\n            return {\n                id: profile.id,\n                name: `${profile.localizedFirstName} ${profile.localizedLastName}`,\n                email: profile.emailAddress,\n                image: profile.profilePicture?.['displayImage~']?.elements?.[0]?.identifiers?.[0]?.identifier || null,\n                role: UserRole.CLIENT,\n                status: UserStatus.ACTIVE,\n                emailVerified: new Date(),\n                linkedinId: profile.id,\n                reputationScore: 0,\n                warningCount: 0,\n                trainerVerified: false\n            };\n        }\n    }));\n} else if (true) {\n    console.warn('LinkedIn OAuth not configured (LINKEDIN_CLIENT_ID/SECRET missing).');\n}\n// Add Facebook provider if configured\nif (facebookConfig.FACEBOOK_CLIENT_ID && facebookConfig.FACEBOOK_CLIENT_SECRET) {\n    providers.push((0,next_auth_providers_facebook__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n        clientId: facebookConfig.FACEBOOK_CLIENT_ID,\n        clientSecret: facebookConfig.FACEBOOK_CLIENT_SECRET,\n        authorization: {\n            params: {\n                scope: 'email,public_profile'\n            }\n        }\n    }));\n} else if (true) {\n    console.warn('Facebook OAuth not configured (FACEBOOK_CLIENT_ID/SECRET missing).');\n}\nconst authOptions = {\n    // Use custom Prisma adapter for lowercase model names (accounts, sessions, verificationtokens)\n    adapter: (0,_prisma_adapter_custom__WEBPACK_IMPORTED_MODULE_6__.CustomPrismaAdapter)(_core_database__WEBPACK_IMPORTED_MODULE_4__.prisma),\n    // Authentication providers\n    providers,\n    // Database session strategy for better security\n    session: {\n        strategy: 'database',\n        // Session expires after 30 days of inactivity\n        maxAge: 30 * 24 * 60 * 60,\n        // Update session activity every 24 hours\n        updateAge: 24 * 60 * 60\n    },\n    // JWT configuration (for API routes)\n    jwt: {\n        // JWT expires after 1 hour for better security\n        maxAge: 60 * 60\n    },\n    // Custom pages for better UX and branding\n    pages: {\n        signIn: '/login',\n        error: '/login',\n        newUser: '/dashboard'\n    },\n    // Security and safety callbacks\n    callbacks: {\n        // Control who can sign in\n        async signIn ({ user, account }) {\n            try {\n                // Safety check: ensure user has a valid email\n                if (!user.email) {\n                    console.warn('Sign-in attempt without email:', {\n                        user,\n                        account\n                    });\n                    return false;\n                }\n                // Check if user exists\n                const existingUser = await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.findUnique({\n                    where: {\n                        email: user.email\n                    },\n                    select: {\n                        status: true,\n                        suspendedUntil: true\n                    }\n                });\n                if (existingUser) {\n                    // Block banned users\n                    if (existingUser.status === UserStatus.BANNED) {\n                        console.warn('Banned user attempted sign-in:', user.email);\n                        return false;\n                    }\n                    // Check if suspension has expired\n                    if (existingUser.status === UserStatus.SUSPENDED && existingUser.suspendedUntil && existingUser.suspendedUntil > new Date()) {\n                        console.warn('Suspended user attempted sign-in:', user.email);\n                        return false;\n                    }\n                    // Auto-activate users whose suspension has expired\n                    if (existingUser.status === UserStatus.SUSPENDED && existingUser.suspendedUntil && existingUser.suspendedUntil <= new Date()) {\n                        await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.update({\n                            where: {\n                                email: user.email\n                            },\n                            data: {\n                                status: UserStatus.ACTIVE,\n                                suspendedUntil: null\n                            }\n                        });\n                    }\n                    // Update last login time for security tracking\n                    await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.update({\n                        where: {\n                            email: user.email\n                        },\n                        data: {\n                            lastLoginAt: new Date()\n                        }\n                    });\n                    // Promote to ADMIN if email is defined in ADMIN_EMAILS list\n                    if (user.email && ADMIN_EMAILS.includes(user.email.toLowerCase())) {\n                        try {\n                            await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.update({\n                                where: {\n                                    email: user.email\n                                },\n                                data: {\n                                    role: UserRole.ADMIN,\n                                    trainerVerified: true\n                                }\n                            });\n                        } catch (e) {\n                            console.warn('Admin promotion skipped:', e);\n                        }\n                    }\n                } else {\n                    // Allow OAuth providers to create new users automatically\n                    if (account?.provider && account.provider !== 'credentials') {\n                        console.log('Allowing automatic user creation for OAuth provider:', account.provider);\n                        return true;\n                    } else {\n                        // Block credentials login for non-existing users\n                        console.warn('Credentials login attempted for non-existing user:', user.email);\n                        return false;\n                    }\n                }\n                return true;\n            } catch (error) {\n                console.error('Sign-in callback error:', error);\n                return false;\n            }\n        },\n        // Customize session data\n        async session ({ session, user }) {\n            if (session.user && user) {\n                // Add user role and safety info to session\n                const dbUser = await _core_database__WEBPACK_IMPORTED_MODULE_4__.prisma.users.findUnique({\n                    where: {\n                        id: user.id\n                    },\n                    select: {\n                        id: true,\n                        role: true,\n                        status: true,\n                        reputationScore: true,\n                        warningCount: true,\n                        trainerVerified: true,\n                        suspendedUntil: true\n                    }\n                });\n                if (dbUser) {\n                    session.user.id = user.id;\n                    session.user.role = dbUser.role;\n                    session.user.status = dbUser.status;\n                    session.user.reputationScore = dbUser.reputationScore;\n                    session.user.warningCount = dbUser.warningCount;\n                    session.user.trainerVerified = dbUser.trainerVerified;\n                    session.user.suspendedUntil = dbUser.suspendedUntil;\n                    // Safety flag for UI\n                    session.user.isSafe = dbUser.status === UserStatus.ACTIVE && dbUser.reputationScore >= 50;\n                }\n            }\n            return session;\n        },\n        // Handle JWT tokens for API routes\n        async jwt ({ token, user }) {\n            // Store user ID in token on first sign in\n            if (user) {\n                token.userId = user.id;\n                token.role = user.role || UserRole.CLIENT;\n            }\n            return token;\n        },\n        // Handle redirects after authentication\n        async redirect ({ url, baseUrl }) {\n            // Always redirect to app domain for security\n            if (url.startsWith('/')) {\n                return `${baseUrl}${url}`;\n            }\n            // Only allow redirects to same domain\n            if (new URL(url).origin === baseUrl) {\n                return url;\n            }\n            return baseUrl;\n        }\n    },\n    // Event handlers for logging and safety\n    events: {\n        async signIn ({ user, account: _account, isNewUser }) {\n            console.log('User signed in:', {\n                userId: user.id,\n                email: user.email,\n                isNewUser,\n                provider: _account?.provider\n            });\n            // Log new user registrations for safety monitoring\n            if (isNewUser) {\n                console.log('New user registered:', {\n                    userId: user.id,\n                    email: user.email,\n                    provider: _account?.provider,\n                    timestamp: new Date().toISOString()\n                });\n            }\n        },\n        async signOut ({ session, token }) {\n            console.log('User signed out:', {\n                userId: session?.user?.id || token?.userId,\n                timestamp: new Date().toISOString()\n            });\n        },\n        async createUser ({ user }) {\n            console.log('User created in database:', {\n                userId: user.id,\n                email: user.email,\n                role: user.role,\n                timestamp: new Date().toISOString()\n            });\n            // Initialize safety settings for new users\n            try {\n                // Note: SafetySettings model needs to be added to Prisma schema\n                // For now, skip this initialization\n                console.log('Safety settings initialization skipped - model not yet defined');\n            } catch (error) {\n                console.error('Failed to create safety settings for new user:', error);\n            }\n        }\n    },\n    // Security configuration\n    debug: \"development\" === 'development',\n    // Custom logger for better security monitoring\n    logger: {\n        error (code, metadata) {\n            console.error('NextAuth Error:', {\n                code,\n                metadata\n            });\n        },\n        warn (code) {\n            console.warn('NextAuth Warning:', code);\n        },\n        debug (code, metadata) {\n            if (true) {\n                console.debug('NextAuth Debug:', {\n                    code,\n                    metadata\n                });\n            }\n        }\n    }\n};\n// Export type-safe auth configuration\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (authOptions);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBQUcsQ0FBQztZQUNkLEVBQUUsT0FBTzFDLE9BQU87Z0JBQ2RDLFFBQVFELEtBQUssQ0FBQyxrREFBa0RBO1lBQ2xFO1FBQ0Y7SUFDRjtJQUVBLHlCQUF5QjtJQUN6QjRELE9BQU9uSCxrQkFBeUI7SUFFaEMsK0NBQStDO0lBQy9Db0gsUUFBUTtRQUNON0QsT0FBTThELElBQUksRUFBRUMsUUFBUTtZQUNsQjlELFFBQVFELEtBQUssQ0FBQyxtQkFBbUI7Z0JBQUU4RDtnQkFBTUM7WUFBUztRQUNwRDtRQUNBOUMsTUFBSzZDLElBQUk7WUFDUDdELFFBQVFnQixJQUFJLENBQUMscUJBQXFCNkM7UUFDcEM7UUFDQUYsT0FBTUUsSUFBSSxFQUFFQyxRQUFRO1lBQ2xCLElBQUl0SCxJQUFzQyxFQUFFO2dCQUMxQ3dELFFBQVEyRCxLQUFLLENBQUMsbUJBQW1CO29CQUFFRTtvQkFBTUM7Z0JBQVM7WUFDcEQ7UUFDRjtJQUNGO0FBQ0YsRUFBRTtBQUVGLHNDQUFzQztBQUN0QyxpRUFBZXBDLFdBQVdBLEVBQUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvY29yZS9hdXRoL2NvbmZpZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL2F1dGgvY29uZmlnLnRzXG4vKipcbiAqIEF1dGhlbnRpY2F0aW9uIENvbmZpZ3VyYXRpb24gZm9yIE1hc3NpbWlub1xuICogU2FmZXR5LWZpcnN0IGFwcHJvYWNoIHdpdGggc3RyaWN0IHZhbGlkYXRpb24gYW5kIHJvbGUtYmFzZWQgYWNjZXNzXG4gKi9cblxuaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbi8vIGltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tICdAbmV4dC1hdXRoL3ByaXNtYS1hZGFwdGVyJzsgLy8gU3RhbmRhcmQgYWRhcHRlciBkb2Vzbid0IHdvcmsgd2l0aCBsb3dlcmNhc2UgdGFibGUgbmFtZXNcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5pbXBvcnQgTGlua2VkSW5Qcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2xpbmtlZGluJztcbmltcG9ydCBGYWNlYm9va1Byb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZmFjZWJvb2snO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscyc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgeyBDdXN0b21QcmlzbWFBZGFwdGVyIH0gZnJvbSAnLi9wcmlzbWEtYWRhcHRlci1jdXN0b20nO1xuXG4vLyBEZWZpbmUgZW51bXMgYXMgY29uc3QgdmFsdWVzIHNpbmNlIFByaXNtYSBjbGllbnQgbWF5IG5vdCBiZSBhdmFpbGFibGVcbmNvbnN0IFVzZXJSb2xlID0ge1xuICBDTElFTlQ6ICdDTElFTlQnLFxuICBUUkFJTkVSOiAnVFJBSU5FUicsXG4gIEFETUlOOiAnQURNSU4nLFxufSBhcyBjb25zdDtcblxuY29uc3QgVXNlclN0YXR1cyA9IHtcbiAgQUNUSVZFOiAnQUNUSVZFJyxcbiAgU1VTUEVOREVEOiAnU1VTUEVOREVEJyxcbiAgQkFOTkVEOiAnQkFOTkVEJyxcbn0gYXMgY29uc3Q7XG5cbi8vIEV4dGVuZCBOZXh0QXV0aCBzZXNzaW9uIHR5cGVzXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aFwiIHtcbiAgaW50ZXJmYWNlIFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBuYW1lOiBzdHJpbmcgfCBudWxsO1xuICAgICAgZW1haWw6IHN0cmluZyB8IG51bGw7XG4gICAgICBpbWFnZT86IHN0cmluZyB8IG51bGw7XG4gICAgICByb2xlOiBpbXBvcnQoJ0BwcmlzbWEvY2xpZW50JykuVXNlclJvbGU7XG4gICAgICBzdGF0dXM6IGltcG9ydCgnQHByaXNtYS9jbGllbnQnKS5Vc2VyU3RhdHVzO1xuICAgICAgcmVwdXRhdGlvblNjb3JlOiBudW1iZXI7XG4gICAgICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgICAgIHRyYWluZXJWZXJpZmllZDogYm9vbGVhbjtcbiAgICAgIHN1c3BlbmRlZFVudGlsPzogRGF0ZSB8IG51bGw7XG4gICAgICBpc1NhZmU6IGJvb2xlYW47XG4gICAgfTtcbiAgfVxuXG4gIGludGVyZmFjZSBVc2VyIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGltYWdlPzogc3RyaW5nIHwgbnVsbDtcbiAgICByb2xlOiBpbXBvcnQoJ0BwcmlzbWEvY2xpZW50JykuVXNlclJvbGU7XG4gICAgc3RhdHVzOiBpbXBvcnQoJ0BwcmlzbWEvY2xpZW50JykuVXNlclN0YXR1cztcbiAgICByZXB1dGF0aW9uU2NvcmU6IG51bWJlcjtcbiAgICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgICB0cmFpbmVyVmVyaWZpZWQ6IGJvb2xlYW47XG4gICAgc3VzcGVuZGVkVW50aWw/OiBEYXRlIHwgbnVsbDtcbiAgfVxufVxuXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aC9qd3RcIiB7XG4gIGludGVyZmFjZSBKV1Qge1xuICAgIHVzZXJJZDogc3RyaW5nO1xuICAgIHJvbGU6IGltcG9ydCgnQHByaXNtYS9jbGllbnQnKS5Vc2VyUm9sZTtcbiAgfVxufVxuXG4vLyBFbnZpcm9ubWVudCB2YXJpYWJsZSB2YWxpZGF0aW9uXG4vLyBSZXF1aXJlIE5FWFRBVVRIX1NFQ1JFVCBhbHdheXM7IGFsbG93IE5FWFRBVVRIX1VSTCB0byBkZWZhdWx0IGluIGRldmVsb3BtZW50XG5jb25zdCBkZXZEZWZhdWx0TmV4dEF1dGhVcmwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnIDogdW5kZWZpbmVkO1xuY29uc3QgcmVxdWlyZWRFbnZWYXJzID0ge1xuICBORVhUQVVUSF9TRUNSRVQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn0gYXMgY29uc3Q7XG5cbi8vIEVuc3VyZSBORVhUQVVUSF9VUkwgaXMgZGVmaW5lZCBhdCBydW50aW1lIGZvciBsaWJyYXJpZXMgdGhhdCByZWFkIGl0XG5pZiAoIXByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCAmJiBkZXZEZWZhdWx0TmV4dEF1dGhVcmwpIHtcbiAgcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMID0gZGV2RGVmYXVsdE5leHRBdXRoVXJsO1xufVxuXG4vLyBHb29nbGUgT0F1dGggY29uZmlndXJhdGlvbiAob3B0aW9uYWwpXG5jb25zdCBnb29nbGVDb25maWcgPSB7XG4gIEdPT0dMRV9DTElFTlRfSUQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXG4gIEdPT0dMRV9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCxcbn0gYXMgY29uc3Q7XG5cbi8vIExpbmtlZEluIE9BdXRoIGNvbmZpZ3VyYXRpb24gKG9wdGlvbmFsKVxuY29uc3QgbGlua2VkaW5Db25maWcgPSB7XG4gIExJTktFRElOX0NMSUVOVF9JRDogcHJvY2Vzcy5lbnYuTElOS0VESU5fQ0xJRU5UX0lELFxuICBMSU5LRURJTl9DTElFTlRfU0VDUkVUOiBwcm9jZXNzLmVudi5MSU5LRURJTl9DTElFTlRfU0VDUkVULFxufSBhcyBjb25zdDtcblxuLy8gRmFjZWJvb2sgT0F1dGggY29uZmlndXJhdGlvbiAob3B0aW9uYWwpXG5jb25zdCBmYWNlYm9va0NvbmZpZyA9IHtcbiAgRkFDRUJPT0tfQ0xJRU5UX0lEOiBwcm9jZXNzLmVudi5GQUNFQk9PS19DTElFTlRfSUQsXG4gIEZBQ0VCT09LX0NMSUVOVF9TRUNSRVQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQsXG59IGFzIGNvbnN0O1xuXG4vLyBWYWxpZGF0ZSByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHJlcXVpcmVkRW52VmFycykpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyByZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZTogJHtrZXl9YCk7XG4gIH1cbn1cblxuLy8gQWRtaW4gYm9vdHN0cmFwIHZpYSBlbnZpcm9ubWVudCB2YXJpYWJsZSBsaXN0IChjb21tYS1zZXBhcmF0ZWQgZW1haWxzKVxuY29uc3QgQURNSU5fRU1BSUxTOiBzdHJpbmdbXSA9IChwcm9jZXNzLmVudi5BRE1JTl9FTUFJTFMgfHwgJycpXG4gIC5zcGxpdCgnLCcpXG4gIC5tYXAoKGUpID0+IGUudHJpbSgpLnRvTG93ZXJDYXNlKCkpXG4gIC5maWx0ZXIoQm9vbGVhbik7XG5cbi8vIEJ1aWxkIHByb3ZpZGVycyBhcnJheSBkeW5hbWljYWxseVxuY29uc3QgcHJvdmlkZXJzOiBhbnlbXSA9IFtcbiAgLy8gRW1haWwvUGFzc3dvcmQgYXV0aGVudGljYXRpb25cbiAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgbmFtZTogJ2NyZWRlbnRpYWxzJyxcbiAgICBjcmVkZW50aWFsczoge1xuICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiAnUGFzc3dvcmQnLCB0eXBlOiAncGFzc3dvcmQnIH1cbiAgICB9LFxuICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgaWYgKCFjcmVkZW50aWFscz8uZW1haWwgfHwgIWNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmluZCB1c2VyIGJ5IGVtYWlsXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICAgIHJlcHV0YXRpb25TY29yZTogdHJ1ZSxcbiAgICAgICAgICAgIHdhcm5pbmdDb3VudDogdHJ1ZSxcbiAgICAgICAgICAgIHRyYWluZXJWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIHN1c3BlbmRlZFVudGlsOiB0cnVlLFxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyIHx8ICF1c2VyLnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBwYXNzd29yZFxuICAgICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWN0aXZlXG4gICAgICAgIGlmICh1c2VyLnN0YXR1cyAhPT0gVXNlclN0YXR1cy5BQ1RJVkUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBsYXN0IGxvZ2luXG4gICAgICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB1c2VyLmlkIH0sXG4gICAgICAgICAgZGF0YTogeyBsYXN0TG9naW5BdDogbmV3IERhdGUoKSB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgbmFtZTogdXNlci5uYW1lIHx8ICcnLFxuICAgICAgICAgIGltYWdlOiBudWxsLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxuICAgICAgICAgIHJlcHV0YXRpb25TY29yZTogdXNlci5yZXB1dGF0aW9uU2NvcmUsXG4gICAgICAgICAgd2FybmluZ0NvdW50OiB1c2VyLndhcm5pbmdDb3VudCxcbiAgICAgICAgICB0cmFpbmVyVmVyaWZpZWQ6IHVzZXIudHJhaW5lclZlcmlmaWVkLFxuICAgICAgICAgIHN1c3BlbmRlZFVudGlsOiB1c2VyLnN1c3BlbmRlZFVudGlsLFxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQXV0aCBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSksXG5dO1xuXG4vLyBBZGQgR29vZ2xlIHByb3ZpZGVyIGlmIGNvbmZpZ3VyZWRcbmlmIChnb29nbGVDb25maWcuR09PR0xFX0NMSUVOVF9JRCAmJiBnb29nbGVDb25maWcuR09PR0xFX0NMSUVOVF9TRUNSRVQpIHtcbiAgcHJvdmlkZXJzLnB1c2goXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IGdvb2dsZUNvbmZpZy5HT09HTEVfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBnb29nbGVDb25maWcuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIGVtYWlsIHByb2ZpbGUnLFxuICAgICAgICAgIHByb21wdDogJ2NvbnNlbnQnLFxuICAgICAgICAgIGFjY2Vzc190eXBlOiAnb2ZmbGluZScsXG4gICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ2NvZGUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcbiAgICAgICAgICByb2xlOiBVc2VyUm9sZS5DTElFTlQsXG4gICAgICAgICAgc3RhdHVzOiBVc2VyU3RhdHVzLkFDVElWRSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8gbmV3IERhdGUoKSA6IG51bGwsXG4gICAgICAgICAgZ29vZ2xlSWQ6IHByb2ZpbGUuc3ViLFxuICAgICAgICAgIHJlcHV0YXRpb25TY29yZTogMCxcbiAgICAgICAgICB3YXJuaW5nQ291bnQ6IDAsXG4gICAgICAgICAgdHJhaW5lclZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSlcbiAgKTtcbn0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBjb25zb2xlLndhcm4oJ0dvb2dsZSBPQXV0aCBub3QgY29uZmlndXJlZCAoR09PR0xFX0NMSUVOVF9JRC9TRUNSRVQgbWlzc2luZykuJyk7XG59XG5cbi8vIEFkZCBMaW5rZWRJbiBwcm92aWRlciBpZiBjb25maWd1cmVkXG5pZiAobGlua2VkaW5Db25maWcuTElOS0VESU5fQ0xJRU5UX0lEICYmIGxpbmtlZGluQ29uZmlnLkxJTktFRElOX0NMSUVOVF9TRUNSRVQpIHtcbiAgcHJvdmlkZXJzLnB1c2goXG4gICAgTGlua2VkSW5Qcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogbGlua2VkaW5Db25maWcuTElOS0VESU5fQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBsaW5rZWRpbkNvbmZpZy5MSU5LRURJTl9DTElFTlRfU0VDUkVULFxuICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogJ3JfbGl0ZXByb2ZpbGUgcl9lbWFpbGFkZHJlc3MnLFxuICAgICAgICAgIHN0YXRlOiAncmFuZG9tX3N0YXRlX3N0cmluZycsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgcHJvZmlsZShwcm9maWxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogYCR7cHJvZmlsZS5sb2NhbGl6ZWRGaXJzdE5hbWV9ICR7cHJvZmlsZS5sb2NhbGl6ZWRMYXN0TmFtZX1gLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsQWRkcmVzcyxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5wcm9maWxlUGljdHVyZT8uWydkaXNwbGF5SW1hZ2V+J10/LmVsZW1lbnRzPy5bMF0/LmlkZW50aWZpZXJzPy5bMF0/LmlkZW50aWZpZXIgfHwgbnVsbCxcbiAgICAgICAgICByb2xlOiBVc2VyUm9sZS5DTElFTlQsXG4gICAgICAgICAgc3RhdHVzOiBVc2VyU3RhdHVzLkFDVElWRSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGxpbmtlZGluSWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgcmVwdXRhdGlvblNjb3JlOiAwLFxuICAgICAgICAgIHdhcm5pbmdDb3VudDogMCxcbiAgICAgICAgICB0cmFpbmVyVmVyaWZpZWQ6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9KVxuICApO1xufSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGNvbnNvbGUud2FybignTGlua2VkSW4gT0F1dGggbm90IGNvbmZpZ3VyZWQgKExJTktFRElOX0NMSUVOVF9JRC9TRUNSRVQgbWlzc2luZykuJyk7XG59XG5cbi8vIEFkZCBGYWNlYm9vayBwcm92aWRlciBpZiBjb25maWd1cmVkXG5pZiAoZmFjZWJvb2tDb25maWcuRkFDRUJPT0tfQ0xJRU5UX0lEICYmIGZhY2Vib29rQ29uZmlnLkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQpIHtcbiAgcHJvdmlkZXJzLnB1c2goXG4gICAgRmFjZWJvb2tQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogZmFjZWJvb2tDb25maWcuRkFDRUJPT0tfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0OiBmYWNlYm9va0NvbmZpZy5GQUNFQk9PS19DTElFTlRfU0VDUkVULFxuICAgICAgYXV0aG9yaXphdGlvbjoge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBzY29wZTogJ2VtYWlsLHB1YmxpY19wcm9maWxlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSlcbiAgKTtcbn0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBjb25zb2xlLndhcm4oJ0ZhY2Vib29rIE9BdXRoIG5vdCBjb25maWd1cmVkIChGQUNFQk9PS19DTElFTlRfSUQvU0VDUkVUIG1pc3NpbmcpLicpO1xufVxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgLy8gVXNlIGN1c3RvbSBQcmlzbWEgYWRhcHRlciBmb3IgbG93ZXJjYXNlIG1vZGVsIG5hbWVzIChhY2NvdW50cywgc2Vzc2lvbnMsIHZlcmlmaWNhdGlvbnRva2VucylcbiAgYWRhcHRlcjogQ3VzdG9tUHJpc21hQWRhcHRlcihwcmlzbWEpLFxuXG4gIC8vIEF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyc1xuICBwcm92aWRlcnMsXG5cbiAgLy8gRGF0YWJhc2Ugc2Vzc2lvbiBzdHJhdGVneSBmb3IgYmV0dGVyIHNlY3VyaXR5XG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2RhdGFiYXNlJyxcbiAgICAvLyBTZXNzaW9uIGV4cGlyZXMgYWZ0ZXIgMzAgZGF5cyBvZiBpbmFjdGl2aXR5XG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICAgIC8vIFVwZGF0ZSBzZXNzaW9uIGFjdGl2aXR5IGV2ZXJ5IDI0IGhvdXJzXG4gICAgdXBkYXRlQWdlOiAyNCAqIDYwICogNjAsIC8vIDI0IGhvdXJzXG4gIH0sXG5cbiAgLy8gSldUIGNvbmZpZ3VyYXRpb24gKGZvciBBUEkgcm91dGVzKVxuICBqd3Q6IHtcbiAgICAvLyBKV1QgZXhwaXJlcyBhZnRlciAxIGhvdXIgZm9yIGJldHRlciBzZWN1cml0eVxuICAgIG1heEFnZTogNjAgKiA2MCwgLy8gMSBob3VyXG4gIH0sXG5cbiAgLy8gQ3VzdG9tIHBhZ2VzIGZvciBiZXR0ZXIgVVggYW5kIGJyYW5kaW5nXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2xvZ2luJyxcbiAgICBlcnJvcjogJy9sb2dpbicsIC8vIFJlZGlyZWN0IGVycm9ycyBiYWNrIHRvIGxvZ2luIHBhZ2VcbiAgICBuZXdVc2VyOiAnL2Rhc2hib2FyZCcsIC8vIFJlZGlyZWN0IG5ldyB1c2VycyB0byBkYXNoYm9hcmRcbiAgfSxcblxuICAvLyBTZWN1cml0eSBhbmQgc2FmZXR5IGNhbGxiYWNrc1xuICBjYWxsYmFja3M6IHtcbiAgICAvLyBDb250cm9sIHdobyBjYW4gc2lnbiBpblxuICAgIGFzeW5jIHNpZ25Jbih7IHVzZXIsIGFjY291bnQgfSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU2FmZXR5IGNoZWNrOiBlbnN1cmUgdXNlciBoYXMgYSB2YWxpZCBlbWFpbFxuICAgICAgICBpZiAoIXVzZXIuZW1haWwpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ1NpZ24taW4gYXR0ZW1wdCB3aXRob3V0IGVtYWlsOicsIHsgdXNlciwgYWNjb3VudCB9KTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0c1xuICAgICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXIuZW1haWwgfSxcbiAgICAgICAgICBzZWxlY3Q6IHsgc3RhdHVzOiB0cnVlLCBzdXNwZW5kZWRVbnRpbDogdHJ1ZSB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICAgICAgLy8gQmxvY2sgYmFubmVkIHVzZXJzXG4gICAgICAgICAgaWYgKGV4aXN0aW5nVXNlci5zdGF0dXMgPT09IFVzZXJTdGF0dXMuQkFOTkVEKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Jhbm5lZCB1c2VyIGF0dGVtcHRlZCBzaWduLWluOicsIHVzZXIuZW1haWwpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENoZWNrIGlmIHN1c3BlbnNpb24gaGFzIGV4cGlyZWRcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBleGlzdGluZ1VzZXIuc3RhdHVzID09PSBVc2VyU3RhdHVzLlNVU1BFTkRFRCAmJlxuICAgICAgICAgICAgZXhpc3RpbmdVc2VyLnN1c3BlbmRlZFVudGlsICYmXG4gICAgICAgICAgICBleGlzdGluZ1VzZXIuc3VzcGVuZGVkVW50aWwgPiBuZXcgRGF0ZSgpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1N1c3BlbmRlZCB1c2VyIGF0dGVtcHRlZCBzaWduLWluOicsIHVzZXIuZW1haWwpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEF1dG8tYWN0aXZhdGUgdXNlcnMgd2hvc2Ugc3VzcGVuc2lvbiBoYXMgZXhwaXJlZFxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGV4aXN0aW5nVXNlci5zdGF0dXMgPT09IFVzZXJTdGF0dXMuU1VTUEVOREVEICYmXG4gICAgICAgICAgICBleGlzdGluZ1VzZXIuc3VzcGVuZGVkVW50aWwgJiZcbiAgICAgICAgICAgIGV4aXN0aW5nVXNlci5zdXNwZW5kZWRVbnRpbCA8PSBuZXcgRGF0ZSgpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBhd2FpdCBwcmlzbWEudXNlcnMudXBkYXRlKHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXIuZW1haWwgfSxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHN0YXR1czogVXNlclN0YXR1cy5BQ1RJVkUsXG4gICAgICAgICAgICAgICAgc3VzcGVuZGVkVW50aWw6IG51bGwsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBVcGRhdGUgbGFzdCBsb2dpbiB0aW1lIGZvciBzZWN1cml0eSB0cmFja2luZ1xuICAgICAgICAgIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoe1xuICAgICAgICAgICAgd2hlcmU6IHsgZW1haWw6IHVzZXIuZW1haWwgfSxcbiAgICAgICAgICAgIGRhdGE6IHsgbGFzdExvZ2luQXQ6IG5ldyBEYXRlKCkgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFByb21vdGUgdG8gQURNSU4gaWYgZW1haWwgaXMgZGVmaW5lZCBpbiBBRE1JTl9FTUFJTFMgbGlzdFxuICAgICAgICAgIGlmICh1c2VyLmVtYWlsICYmIEFETUlOX0VNQUlMUy5pbmNsdWRlcyh1c2VyLmVtYWlsLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBwcmlzbWEudXNlcnMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogdXNlci5lbWFpbCB9LFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgcm9sZTogVXNlclJvbGUuQURNSU4sIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBZG1pbiBwcm9tb3Rpb24gc2tpcHBlZDonLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQWxsb3cgT0F1dGggcHJvdmlkZXJzIHRvIGNyZWF0ZSBuZXcgdXNlcnMgYXV0b21hdGljYWxseVxuICAgICAgICAgIGlmIChhY2NvdW50Py5wcm92aWRlciAmJiBhY2NvdW50LnByb3ZpZGVyICE9PSAnY3JlZGVudGlhbHMnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWxsb3dpbmcgYXV0b21hdGljIHVzZXIgY3JlYXRpb24gZm9yIE9BdXRoIHByb3ZpZGVyOicsIGFjY291bnQucHJvdmlkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEJsb2NrIGNyZWRlbnRpYWxzIGxvZ2luIGZvciBub24tZXhpc3RpbmcgdXNlcnNcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ3JlZGVudGlhbHMgbG9naW4gYXR0ZW1wdGVkIGZvciBub24tZXhpc3RpbmcgdXNlcjonLCB1c2VyLmVtYWlsKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NpZ24taW4gY2FsbGJhY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIEN1c3RvbWl6ZSBzZXNzaW9uIGRhdGFcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdXNlciB9KSB7XG4gICAgICBpZiAoc2Vzc2lvbi51c2VyICYmIHVzZXIpIHtcbiAgICAgICAgLy8gQWRkIHVzZXIgcm9sZSBhbmQgc2FmZXR5IGluZm8gdG8gc2Vzc2lvblxuICAgICAgICBjb25zdCBkYlVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXIuaWQgfSxcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICAgIHJlcHV0YXRpb25TY29yZTogdHJ1ZSxcbiAgICAgICAgICAgIHdhcm5pbmdDb3VudDogdHJ1ZSxcbiAgICAgICAgICAgIHRyYWluZXJWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAgIHN1c3BlbmRlZFVudGlsOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkYlVzZXIpIHtcbiAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB1c2VyLmlkO1xuICAgICAgICAgIHNlc3Npb24udXNlci5yb2xlID0gZGJVc2VyLnJvbGU7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnN0YXR1cyA9IGRiVXNlci5zdGF0dXM7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnJlcHV0YXRpb25TY29yZSA9IGRiVXNlci5yZXB1dGF0aW9uU2NvcmU7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLndhcm5pbmdDb3VudCA9IGRiVXNlci53YXJuaW5nQ291bnQ7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnRyYWluZXJWZXJpZmllZCA9IGRiVXNlci50cmFpbmVyVmVyaWZpZWQ7XG4gICAgICAgICAgc2Vzc2lvbi51c2VyLnN1c3BlbmRlZFVudGlsID0gZGJVc2VyLnN1c3BlbmRlZFVudGlsO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNhZmV0eSBmbGFnIGZvciBVSVxuICAgICAgICAgIHNlc3Npb24udXNlci5pc1NhZmUgPSBkYlVzZXIuc3RhdHVzID09PSBVc2VyU3RhdHVzLkFDVElWRSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYlVzZXIucmVwdXRhdGlvblNjb3JlID49IDUwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBzZXNzaW9uO1xuICAgIH0sXG5cbiAgICAvLyBIYW5kbGUgSldUIHRva2VucyBmb3IgQVBJIHJvdXRlc1xuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcbiAgICAgIC8vIFN0b3JlIHVzZXIgSUQgaW4gdG9rZW4gb24gZmlyc3Qgc2lnbiBpblxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4udXNlcklkID0gdXNlci5pZDtcbiAgICAgICAgdG9rZW4ucm9sZSA9ICh1c2VyIGFzIGFueSkucm9sZSB8fCBVc2VyUm9sZS5DTElFTlQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuXG4gICAgLy8gSGFuZGxlIHJlZGlyZWN0cyBhZnRlciBhdXRoZW50aWNhdGlvblxuICAgIGFzeW5jIHJlZGlyZWN0KHsgdXJsLCBiYXNlVXJsIH0pIHtcbiAgICAgIC8vIEFsd2F5cyByZWRpcmVjdCB0byBhcHAgZG9tYWluIGZvciBzZWN1cml0eVxuICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9JHt1cmx9YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gT25seSBhbGxvdyByZWRpcmVjdHMgdG8gc2FtZSBkb21haW5cbiAgICAgIGlmIChuZXcgVVJMKHVybCkub3JpZ2luID09PSBiYXNlVXJsKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBiYXNlVXJsO1xuICAgIH0sXG4gIH0sXG5cbiAgLy8gRXZlbnQgaGFuZGxlcnMgZm9yIGxvZ2dpbmcgYW5kIHNhZmV0eVxuICBldmVudHM6IHtcbiAgICBhc3luYyBzaWduSW4oeyB1c2VyLCBhY2NvdW50OiBfYWNjb3VudCwgaXNOZXdVc2VyIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHNpZ25lZCBpbjonLCB7XG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgIGlzTmV3VXNlcixcbiAgICAgICAgcHJvdmlkZXI6IF9hY2NvdW50Py5wcm92aWRlcixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBMb2cgbmV3IHVzZXIgcmVnaXN0cmF0aW9ucyBmb3Igc2FmZXR5IG1vbml0b3JpbmdcbiAgICAgIGlmIChpc05ld1VzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyB1c2VyIHJlZ2lzdGVyZWQ6Jywge1xuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBwcm92aWRlcjogX2FjY291bnQ/LnByb3ZpZGVyLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYXN5bmMgc2lnbk91dCh7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIHNpZ25lZCBvdXQ6Jywge1xuICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXI/LmlkIHx8IHRva2VuPy51c2VySWQsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGFzeW5jIGNyZWF0ZVVzZXIoeyB1c2VyIH0pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGNyZWF0ZWQgaW4gZGF0YWJhc2U6Jywge1xuICAgICAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICByb2xlOiAodXNlciBhcyBhbnkpLnJvbGUsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgc2FmZXR5IHNldHRpbmdzIGZvciBuZXcgdXNlcnNcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIE5vdGU6IFNhZmV0eVNldHRpbmdzIG1vZGVsIG5lZWRzIHRvIGJlIGFkZGVkIHRvIFByaXNtYSBzY2hlbWFcbiAgICAgICAgLy8gRm9yIG5vdywgc2tpcCB0aGlzIGluaXRpYWxpemF0aW9uXG4gICAgICAgIGNvbnNvbGUubG9nKCdTYWZldHkgc2V0dGluZ3MgaW5pdGlhbGl6YXRpb24gc2tpcHBlZCAtIG1vZGVsIG5vdCB5ZXQgZGVmaW5lZCcpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBzYWZldHkgc2V0dGluZ3MgZm9yIG5ldyB1c2VyOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIC8vIFNlY3VyaXR5IGNvbmZpZ3VyYXRpb25cbiAgZGVidWc6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnLFxuICBcbiAgLy8gQ3VzdG9tIGxvZ2dlciBmb3IgYmV0dGVyIHNlY3VyaXR5IG1vbml0b3JpbmdcbiAgbG9nZ2VyOiB7XG4gICAgZXJyb3IoY29kZSwgbWV0YWRhdGEpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ05leHRBdXRoIEVycm9yOicsIHsgY29kZSwgbWV0YWRhdGEgfSk7XG4gICAgfSxcbiAgICB3YXJuKGNvZGUpIHtcbiAgICAgIGNvbnNvbGUud2FybignTmV4dEF1dGggV2FybmluZzonLCBjb2RlKTtcbiAgICB9LFxuICAgIGRlYnVnKGNvZGUsIG1ldGFkYXRhKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnTmV4dEF1dGggRGVidWc6JywgeyBjb2RlLCBtZXRhZGF0YSB9KTtcbiAgICAgIH1cbiAgICB9LFxuICB9LFxufTtcblxuLy8gRXhwb3J0IHR5cGUtc2FmZSBhdXRoIGNvbmZpZ3VyYXRpb25cbmV4cG9ydCBkZWZhdWx0IGF1dGhPcHRpb25zO1xuIl0sIm5hbWVzIjpbIkdvb2dsZVByb3ZpZGVyIiwiTGlua2VkSW5Qcm92aWRlciIsIkZhY2Vib29rUHJvdmlkZXIiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwicHJpc21hIiwiYmNyeXB0IiwiQ3VzdG9tUHJpc21hQWRhcHRlciIsIlVzZXJSb2xlIiwiQ0xJRU5UIiwiVFJBSU5FUiIsIkFETUlOIiwiVXNlclN0YXR1cyIsIkFDVElWRSIsIlNVU1BFTkRFRCIsIkJBTk5FRCIsImRldkRlZmF1bHROZXh0QXV0aFVybCIsInByb2Nlc3MiLCJ1bmRlZmluZWQiLCJyZXF1aXJlZEVudlZhcnMiLCJORVhUQVVUSF9TRUNSRVQiLCJlbnYiLCJORVhUQVVUSF9VUkwiLCJnb29nbGVDb25maWciLCJHT09HTEVfQ0xJRU5UX0lEIiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJsaW5rZWRpbkNvbmZpZyIsIkxJTktFRElOX0NMSUVOVF9JRCIsIkxJTktFRElOX0NMSUVOVF9TRUNSRVQiLCJmYWNlYm9va0NvbmZpZyIsIkZBQ0VCT09LX0NMSUVOVF9JRCIsIkZBQ0VCT09LX0NMSUVOVF9TRUNSRVQiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJFcnJvciIsIkFETUlOX0VNQUlMUyIsInNwbGl0IiwibWFwIiwiZSIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsIkJvb2xlYW4iLCJwcm92aWRlcnMiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsInVzZXJzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwic2VsZWN0IiwiaWQiLCJyb2xlIiwic3RhdHVzIiwicmVwdXRhdGlvblNjb3JlIiwid2FybmluZ0NvdW50IiwidHJhaW5lclZlcmlmaWVkIiwic3VzcGVuZGVkVW50aWwiLCJpc1ZhbGlkIiwiY29tcGFyZSIsInVwZGF0ZSIsImRhdGEiLCJsYXN0TG9naW5BdCIsIkRhdGUiLCJpbWFnZSIsImVycm9yIiwiY29uc29sZSIsInB1c2giLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImF1dGhvcml6YXRpb24iLCJwYXJhbXMiLCJzY29wZSIsInByb21wdCIsImFjY2Vzc190eXBlIiwicmVzcG9uc2VfdHlwZSIsInByb2ZpbGUiLCJzdWIiLCJwaWN0dXJlIiwiZW1haWxWZXJpZmllZCIsImVtYWlsX3ZlcmlmaWVkIiwiZ29vZ2xlSWQiLCJ3YXJuIiwic3RhdGUiLCJsb2NhbGl6ZWRGaXJzdE5hbWUiLCJsb2NhbGl6ZWRMYXN0TmFtZSIsImVtYWlsQWRkcmVzcyIsInByb2ZpbGVQaWN0dXJlIiwiZWxlbWVudHMiLCJpZGVudGlmaWVycyIsImlkZW50aWZpZXIiLCJsaW5rZWRpbklkIiwiYXV0aE9wdGlvbnMiLCJhZGFwdGVyIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwidXBkYXRlQWdlIiwiand0IiwicGFnZXMiLCJzaWduSW4iLCJuZXdVc2VyIiwiY2FsbGJhY2tzIiwiYWNjb3VudCIsImV4aXN0aW5nVXNlciIsImluY2x1ZGVzIiwicHJvdmlkZXIiLCJsb2ciLCJkYlVzZXIiLCJpc1NhZmUiLCJ0b2tlbiIsInVzZXJJZCIsInJlZGlyZWN0IiwidXJsIiwiYmFzZVVybCIsInN0YXJ0c1dpdGgiLCJVUkwiLCJvcmlnaW4iLCJldmVudHMiLCJfYWNjb3VudCIsImlzTmV3VXNlciIsInRpbWVzdGFtcCIsInRvSVNPU3RyaW5nIiwic2lnbk91dCIsImNyZWF0ZVVzZXIiLCJkZWJ1ZyIsImxvZ2dlciIsImNvZGUiLCJtZXRhZGF0YSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/auth/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/auth/prisma-adapter-custom.ts":
/*!************************************************!*\
  !*** ./src/core/auth/prisma-adapter-custom.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomPrismaAdapter: () => (/* binding */ CustomPrismaAdapter)\n/* harmony export */ });\n// src/core/auth/prisma-adapter-custom.ts\n// Custom Prisma Adapter for lowercase model names\n// This adapter wraps the standard PrismaAdapter but uses lowercase table names\nfunction CustomPrismaAdapter(prisma) {\n    return {\n        async createUser (user) {\n            const data = {\n                id: crypto.randomUUID(),\n                email: user.email,\n                emailVerified: user.emailVerified ?? null,\n                name: user.name ?? null,\n                image: user.image ?? null,\n                updatedAt: new Date(),\n                createdAt: new Date()\n            };\n            return await prisma.users.create({\n                data\n            });\n        },\n        async getUser (id) {\n            return await prisma.users.findUnique({\n                where: {\n                    id\n                }\n            });\n        },\n        async getUserByEmail (email) {\n            return await prisma.users.findUnique({\n                where: {\n                    email\n                }\n            });\n        },\n        async getUserByAccount ({ providerAccountId, provider }) {\n            const account = await prisma.accounts.findUnique({\n                where: {\n                    provider_providerAccountId: {\n                        provider,\n                        providerAccountId\n                    }\n                },\n                include: {\n                    users: true\n                }\n            });\n            return account?.users ?? null;\n        },\n        async updateUser ({ id, ...data }) {\n            return await prisma.users.update({\n                where: {\n                    id\n                },\n                data\n            });\n        },\n        async deleteUser (userId) {\n            await prisma.users.delete({\n                where: {\n                    id: userId\n                }\n            });\n        },\n        async linkAccount (account) {\n            await prisma.accounts.create({\n                data: {\n                    id: crypto.randomUUID(),\n                    userId: account.userId,\n                    type: account.type,\n                    provider: account.provider,\n                    providerAccountId: account.providerAccountId,\n                    refresh_token: account.refresh_token ?? null,\n                    access_token: account.access_token ?? null,\n                    expires_at: account.expires_at ?? null,\n                    token_type: account.token_type ?? null,\n                    scope: account.scope ?? null,\n                    id_token: account.id_token ?? null,\n                    session_state: account.session_state ?? null\n                }\n            });\n        },\n        async unlinkAccount ({ providerAccountId, provider }) {\n            await prisma.accounts.delete({\n                where: {\n                    provider_providerAccountId: {\n                        provider,\n                        providerAccountId\n                    }\n                }\n            });\n        },\n        async createSession ({ sessionToken, userId, expires }) {\n            return await prisma.sessions.create({\n                data: {\n                    id: crypto.randomUUID(),\n                    sessionToken,\n                    userId,\n                    expires\n                }\n            });\n        },\n        async getSessionAndUser (sessionToken) {\n            const userAndSession = await prisma.sessions.findUnique({\n                where: {\n                    sessionToken\n                },\n                include: {\n                    users: true\n                }\n            });\n            if (!userAndSession) return null;\n            const { users: user, ...session } = userAndSession;\n            return {\n                user: user,\n                session: session\n            };\n        },\n        async updateSession ({ sessionToken, ...data }) {\n            return await prisma.sessions.update({\n                where: {\n                    sessionToken\n                },\n                data\n            });\n        },\n        async deleteSession (sessionToken) {\n            await prisma.sessions.delete({\n                where: {\n                    sessionToken\n                }\n            });\n        },\n        async createVerificationToken ({ identifier, expires, token }) {\n            return await prisma.verificationtokens.create({\n                data: {\n                    identifier,\n                    expires,\n                    token\n                }\n            });\n        },\n        async useVerificationToken ({ identifier, token }) {\n            try {\n                return await prisma.verificationtokens.delete({\n                    where: {\n                        identifier_token: {\n                            identifier,\n                            token\n                        }\n                    }\n                });\n            } catch (error) {\n                return null;\n            }\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9hdXRoL3ByaXNtYS1hZGFwdGVyLWN1c3RvbS50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEseUNBQXlDO0FBRXpDLGtEQUFrRDtBQUNsRCwrRUFBK0U7QUFNeEUsU0FBU0Esb0JBQW9CQyxNQUFvQjtJQUN0RCxPQUFPO1FBQ0wsTUFBTUMsWUFBV0MsSUFBNkI7WUFDNUMsTUFBTUMsT0FBTztnQkFDWEMsSUFBSUMsT0FBT0MsVUFBVTtnQkFDckJDLE9BQU9MLEtBQUtLLEtBQUs7Z0JBQ2pCQyxlQUFlTixLQUFLTSxhQUFhLElBQUk7Z0JBQ3JDQyxNQUFNUCxLQUFLTyxJQUFJLElBQUk7Z0JBQ25CQyxPQUFPUixLQUFLUSxLQUFLLElBQUk7Z0JBQ3JCQyxXQUFXLElBQUlDO2dCQUNmQyxXQUFXLElBQUlEO1lBQ2pCO1lBQ0EsT0FBTyxNQUFNWixPQUFPYyxLQUFLLENBQUNDLE1BQU0sQ0FBQztnQkFBRVo7WUFBSztRQUMxQztRQUNBLE1BQU1hLFNBQVFaLEVBQUU7WUFDZCxPQUFPLE1BQU1KLE9BQU9jLEtBQUssQ0FBQ0csVUFBVSxDQUFDO2dCQUFFQyxPQUFPO29CQUFFZDtnQkFBRztZQUFFO1FBQ3ZEO1FBQ0EsTUFBTWUsZ0JBQWVaLEtBQUs7WUFDeEIsT0FBTyxNQUFNUCxPQUFPYyxLQUFLLENBQUNHLFVBQVUsQ0FBQztnQkFBRUMsT0FBTztvQkFBRVg7Z0JBQU07WUFBRTtRQUMxRDtRQUNBLE1BQU1hLGtCQUFpQixFQUFFQyxpQkFBaUIsRUFBRUMsUUFBUSxFQUFFO1lBQ3BELE1BQU1DLFVBQVUsTUFBTXZCLE9BQU93QixRQUFRLENBQUNQLFVBQVUsQ0FBQztnQkFDL0NDLE9BQU87b0JBQ0xPLDRCQUE0Qjt3QkFDMUJIO3dCQUNBRDtvQkFDRjtnQkFDRjtnQkFDQUssU0FBUztvQkFBRVosT0FBTztnQkFBSztZQUN6QjtZQUNBLE9BQU9TLFNBQVNULFNBQWdCO1FBQ2xDO1FBQ0EsTUFBTWEsWUFBVyxFQUFFdkIsRUFBRSxFQUFFLEdB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QUNuRDtZQUNGLEVBQUUsT0FBT0ksT0FBTztnQkFDZCxPQUFPO1lBQ1Q7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvY29yZS9hdXRoL3ByaXNtYS1hZGFwdGVyLWN1c3RvbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29yZS9hdXRoL3ByaXNtYS1hZGFwdGVyLWN1c3RvbS50c1xuXG4vLyBDdXN0b20gUHJpc21hIEFkYXB0ZXIgZm9yIGxvd2VyY2FzZSBtb2RlbCBuYW1lc1xuLy8gVGhpcyBhZGFwdGVyIHdyYXBzIHRoZSBzdGFuZGFyZCBQcmlzbWFBZGFwdGVyIGJ1dCB1c2VzIGxvd2VyY2FzZSB0YWJsZSBuYW1lc1xuXG5pbXBvcnQgdHlwZSB7IEFkYXB0ZXIgfSBmcm9tIFwibmV4dC1hdXRoL2FkYXB0ZXJzXCJcbmltcG9ydCB0eXBlIHsgQWRhcHRlclVzZXIsIEFkYXB0ZXJBY2NvdW50IH0gZnJvbSBcIm5leHQtYXV0aC9hZGFwdGVyc1wiXG5pbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIlxuXG5leHBvcnQgZnVuY3Rpb24gQ3VzdG9tUHJpc21hQWRhcHRlcihwcmlzbWE6IFByaXNtYUNsaWVudCk6IEFkYXB0ZXIge1xuICByZXR1cm4ge1xuICAgIGFzeW5jIGNyZWF0ZVVzZXIodXNlcjogT21pdDxBZGFwdGVyVXNlciwgXCJpZFwiPikge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsISxcbiAgICAgICAgZW1haWxWZXJpZmllZDogdXNlci5lbWFpbFZlcmlmaWVkID8/IG51bGwsXG4gICAgICAgIG5hbWU6IHVzZXIubmFtZSA/PyBudWxsLFxuICAgICAgICBpbWFnZTogdXNlci5pbWFnZSA/PyBudWxsLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIH07XG4gICAgICByZXR1cm4gYXdhaXQgcHJpc21hLnVzZXJzLmNyZWF0ZSh7IGRhdGEgfSkgYXMgYW55O1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlcihpZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSB9KSBhcyBhbnk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VyQnlFbWFpbChlbWFpbCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSB9KSBhcyBhbnk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VyQnlBY2NvdW50KHsgcHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyIH0pIHtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBhd2FpdCBwcmlzbWEuYWNjb3VudHMuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvdmlkZXJfcHJvdmlkZXJBY2NvdW50SWQ6IHtcbiAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZTogeyB1c2VyczogdHJ1ZSB9LFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjb3VudD8udXNlcnMgYXMgYW55ID8/IG51bGw7XG4gICAgfSxcbiAgICBhc3luYyB1cGRhdGVVc2VyKHsgaWQsIC4uLmRhdGEgfSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS51c2Vycy51cGRhdGUoeyB3aGVyZTogeyBpZCB9LCBkYXRhIH0pIGFzIGFueTtcbiAgICB9LFxuICAgIGFzeW5jIGRlbGV0ZVVzZXIodXNlcklkKSB7XG4gICAgICBhd2FpdCBwcmlzbWEudXNlcnMuZGVsZXRlKHsgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9IH0pO1xuICAgIH0sXG4gICAgYXN5bmMgbGlua0FjY291bnQoYWNjb3VudDogQWRhcHRlckFjY291bnQpIHtcbiAgICAgIGF3YWl0IHByaXNtYS5hY2NvdW50cy5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgdXNlcklkOiBhY2NvdW50LnVzZXJJZCxcbiAgICAgICAgICB0eXBlOiBhY2NvdW50LnR5cGUsXG4gICAgICAgICAgcHJvdmlkZXI6IGFjY291bnQucHJvdmlkZXIsXG4gICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQ6IGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgcmVmcmVzaF90b2tlbjogYWNjb3VudC5yZWZyZXNoX3Rva2VuID8/IG51bGwsXG4gICAgICAgICAgYWNjZXNzX3Rva2VuOiBhY2NvdW50LmFjY2Vzc190b2tlbiA/PyBudWxsLFxuICAgICAgICAgIGV4cGlyZXNfYXQ6IGFjY291bnQuZXhwaXJlc19hdCA/PyBudWxsLFxuICAgICAgICAgIHRva2VuX3R5cGU6IGFjY291bnQudG9rZW5fdHlwZSA/PyBudWxsLFxuICAgICAgICAgIHNjb3BlOiBhY2NvdW50LnNjb3BlID8/IG51bGwsXG4gICAgICAgICAgaWRfdG9rZW46IGFjY291bnQuaWRfdG9rZW4gPz8gbnVsbCxcbiAgICAgICAgICBzZXNzaW9uX3N0YXRlOiBhY2NvdW50LnNlc3Npb25fc3RhdGUgPz8gbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdW5saW5rQWNjb3VudCh7IHByb3ZpZGVyQWNjb3VudElkLCBwcm92aWRlciB9OiB7IHByb3ZpZGVyQWNjb3VudElkOiBzdHJpbmc7IHByb3ZpZGVyOiBzdHJpbmcgfSkge1xuICAgICAgYXdhaXQgcHJpc21hLmFjY291bnRzLmRlbGV0ZSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcHJvdmlkZXJfcHJvdmlkZXJBY2NvdW50SWQ6IHtcbiAgICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgICAgcHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgY3JlYXRlU2Vzc2lvbih7IHNlc3Npb25Ub2tlbiwgdXNlcklkLCBleHBpcmVzIH0pIHtcbiAgICAgIHJldHVybiBhd2FpdCBwcmlzbWEuc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICAgIHNlc3Npb25Ub2tlbixcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgZXhwaXJlcyxcbiAgICAgICAgfSxcbiAgICAgIH0pIGFzIGFueTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFNlc3Npb25BbmRVc2VyKHNlc3Npb25Ub2tlbikge1xuICAgICAgY29uc3QgdXNlckFuZFNlc3Npb24gPSBhd2FpdCBwcmlzbWEuc2Vzc2lvbnMuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IHNlc3Npb25Ub2tlbiB9LFxuICAgICAgICBpbmNsdWRlOiB7IHVzZXJzOiB0cnVlIH0sXG4gICAgICB9KTtcbiAgICAgIGlmICghdXNlckFuZFNlc3Npb24pIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgeyB1c2VyczogdXNlciwgLi4uc2Vzc2lvbiB9ID0gdXNlckFuZFNlc3Npb247XG4gICAgICByZXR1cm4geyB1c2VyOiB1c2VyIGFzIGFueSwgc2Vzc2lvbjogc2Vzc2lvbiBhcyBhbnkgfTtcbiAgICB9LFxuICAgIGFzeW5jIHVwZGF0ZVNlc3Npb24oeyBzZXNzaW9uVG9rZW4sIC4uLmRhdGEgfSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS5zZXNzaW9ucy51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBzZXNzaW9uVG9rZW4gfSxcbiAgICAgICAgZGF0YSxcbiAgICAgIH0pIGFzIGFueTtcbiAgICB9LFxuICAgIGFzeW5jIGRlbGV0ZVNlc3Npb24oc2Vzc2lvblRva2VuKSB7XG4gICAgICBhd2FpdCBwcmlzbWEuc2Vzc2lvbnMuZGVsZXRlKHsgd2hlcmU6IHsgc2Vzc2lvblRva2VuIH0gfSk7XG4gICAgfSxcbiAgICBhc3luYyBjcmVhdGVWZXJpZmljYXRpb25Ub2tlbih7IGlkZW50aWZpZXIsIGV4cGlyZXMsIHRva2VuIH0pIHtcbiAgICAgIHJldHVybiBhd2FpdCBwcmlzbWEudmVyaWZpY2F0aW9udG9rZW5zLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHsgaWRlbnRpZmllciwgZXhwaXJlcywgdG9rZW4gfSxcbiAgICAgIH0pIGFzIGFueTtcbiAgICB9LFxuICAgIGFzeW5jIHVzZVZlcmlmaWNhdGlvblRva2VuKHsgaWRlbnRpZmllciwgdG9rZW4gfSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByaXNtYS52ZXJpZmljYXRpb250b2tlbnMuZGVsZXRlKHtcbiAgICAgICAgICB3aGVyZTogeyBpZGVudGlmaWVyX3Rva2VuOiB7IGlkZW50aWZpZXIsIHRva2VuIH0gfSxcbiAgICAgICAgfSkgYXMgYW55O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJDdXN0b21QcmlzbWFBZGFwdGVyIiwicHJpc21hIiwiY3JlYXRlVXNlciIsInVzZXIiLCJkYXRhIiwiaWQiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiZW1haWwiLCJlbWFpbFZlcmlmaWVkIiwibmFtZSIsImltYWdlIiwidXBkYXRlZEF0IiwiRGF0ZSIsImNyZWF0ZWRBdCIsInVzZXJzIiwiY3JlYXRlIiwiZ2V0VXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImdldFVzZXJCeUVtYWlsIiwiZ2V0VXNlckJ5QWNjb3VudCIsInByb3ZpZGVyQWNjb3VudElkIiwicHJvdmlkZXIiLCJhY2NvdW50IiwiYWNjb3VudHMiLCJwcm92aWRlcl9wcm92aWRlckFjY291bnRJZCIsImluY2x1ZGUiLCJ1cGRhdGVVc2VyIiwidXBkYXRlIiwiZGVsZXRlVXNlciIsInVzZXJJZCIsImRlbGV0ZSIsImxpbmtBY2NvdW50IiwidHlwZSIsInJlZnJlc2hfdG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2F0IiwidG9rZW5fdHlwZSIsInNjb3BlIiwiaWRfdG9rZW4iLCJzZXNzaW9uX3N0YXRlIiwidW5saW5rQWNjb3VudCIsImNyZWF0ZVNlc3Npb24iLCJzZXNzaW9uVG9rZW4iLCJleHBpcmVzIiwic2Vzc2lvbnMiLCJnZXRTZXNzaW9uQW5kVXNlciIsInVzZXJBbmRTZXNzaW9uIiwic2Vzc2lvbiIsInVwZGF0ZVNlc3Npb24iLCJkZWxldGVTZXNzaW9uIiwiY3JlYXRlVmVyaWZpY2F0aW9uVG9rZW4iLCJpZGVudGlmaWVyIiwidG9rZW4iLCJ2ZXJpZmljYXRpb250b2tlbnMiLCJ1c2VWZXJpZmljYXRpb25Ub2tlbiIsImlkZW50aWZpZXJfdG9rZW4iLCJlcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/auth/prisma-adapter-custom.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/database/client.ts":
/*!*************************************!*\
  !*** ./src/core/database/client.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Database Client for Massimino\n * Centralized Prisma client instance\n */ \n// Create a single Prisma client instance\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9kYXRhYmFzZS9jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7OztDQUdDLEdBRTZDO0FBRTlDLHlDQUF5QztBQUN6QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFHO0FBRW5FLElBQUlJLElBQXFDLEVBQUU7SUFDekNILGdCQUFnQkUsTUFBTSxHQUFHQTtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL2RhdGFiYXNlL2NsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERhdGFiYXNlIENsaWVudCBmb3IgTWFzc2ltaW5vXG4gKiBDZW50cmFsaXplZCBQcmlzbWEgY2xpZW50IGluc3RhbmNlXG4gKi9cblxuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vLyBDcmVhdGUgYSBzaW5nbGUgUHJpc21hIGNsaWVudCBpbnN0YW5jZVxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsVGhpcyBhcyB1bmtub3duIGFzIHtcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG59Il0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJwcm9jZXNzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/database/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/database/index.ts":
/*!************************************!*\
  !*** ./src/core/database/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModerationAction: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.ModerationAction),\n/* harmony export */   ModerationSource: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.ModerationSource),\n/* harmony export */   UserRole: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.UserRole),\n/* harmony export */   UserStatus: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.UserStatus),\n/* harmony export */   ViolationType: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.ViolationType),\n/* harmony export */   addClientToTrainer: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.addClientToTrainer),\n/* harmony export */   addCoachFeedback: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.addCoachFeedback),\n/* harmony export */   addPersonalRecord: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.addPersonalRecord),\n/* harmony export */   addProgressMetric: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.addProgressMetric),\n/* harmony export */   approveTeamMembership: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.approveTeamMembership),\n/* harmony export */   calculate_session_experience_points: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.calculate_session_experience_points),\n/* harmony export */   checkAppointmentConflict: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.checkAppointmentConflict),\n/* harmony export */   check_and_award_achievements: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.check_and_award_achievements),\n/* harmony export */   completeWorkoutSession: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.completeWorkoutSession),\n/* harmony export */   createAppointment: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createAppointment),\n/* harmony export */   createChallenge: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createChallenge),\n/* harmony export */   createExercise: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createExercise),\n/* harmony export */   createExerciseVariation: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createExerciseVariation),\n/* harmony export */   createModerationLog: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createModerationLog),\n/* harmony export */   createMollieCustomer: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createMollieCustomer),\n/* harmony export */   createMolliePayment: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createMolliePayment),\n/* harmony export */   createOrUpdateTrainerProfile: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createOrUpdateTrainerProfile),\n/* harmony export */   createPremiumTeam: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createPremiumTeam),\n/* harmony export */   createProgressReport: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createProgressReport),\n/* harmony export */   createSafetyReport: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createSafetyReport),\n/* harmony export */   createTrainingProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createTrainingProgram),\n/* harmony export */   createUserViolation: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.createUserViolation),\n/* harmony export */   createWorkoutLogEntry: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createWorkoutLogEntry),\n/* harmony export */   createWorkoutSession: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createWorkoutSession),\n/* harmony export */   createWorkoutTemplate: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.createWorkoutTemplate),\n/* harmony export */   deleteExercise: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteExercise),\n/* harmony export */   deleteExerciseVariation: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteExerciseVariation),\n/* harmony export */   deleteTrainingProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteTrainingProgram),\n/* harmony export */   deleteWorkoutLogEntry: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteWorkoutLogEntry),\n/* harmony export */   deleteWorkoutSession: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteWorkoutSession),\n/* harmony export */   deleteWorkoutTemplate: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.deleteWorkoutTemplate),\n/* harmony export */   finalise_session_with_gamification: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.finalise_session_with_gamification),\n/* harmony export */   generateSafetyReport: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.generateSafetyReport),\n/* harmony export */   generateWorkoutAnalytics: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.generateWorkoutAnalytics),\n/* harmony export */   getChallengeLeaderboard: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getChallengeLeaderboard),\n/* harmony export */   getChallenges: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getChallenges),\n/* harmony export */   getClientWorkoutLogs: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getClientWorkoutLogs),\n/* harmony export */   getEquipmentTypes: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getEquipmentTypes),\n/* harmony export */   getExercise: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getExercise),\n/* harmony export */   getExerciseCategories: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getExerciseCategories),\n/* harmony export */   getExerciseVariationById: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getExerciseVariationById),\n/* harmony export */   getExerciseVariations: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getExerciseVariations),\n/* harmony export */   getExercises: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getExercises),\n/* harmony export */   getFeaturedContent: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getFeaturedContent),\n/* harmony export */   getFlaggedUsers: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getFlaggedUsers),\n/* harmony export */   getMarketplacePrograms: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getMarketplacePrograms),\n/* harmony export */   getMarketplaceTemplates: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getMarketplaceTemplates),\n/* harmony export */   getModerationLogs: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getModerationLogs),\n/* harmony export */   getModerationStatistics: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getModerationStatistics),\n/* harmony export */   getMuscleGroups: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getMuscleGroups),\n/* harmony export */   getMyPrograms: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getMyPrograms),\n/* harmony export */   getMyTemplates: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getMyTemplates),\n/* harmony export */   getPaymentByMollieId: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getPaymentByMollieId),\n/* harmony export */   getPendingSafetyReports: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getPendingSafetyReports),\n/* harmony export */   getPersonalRecords: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getPersonalRecords),\n/* harmony export */   getPopularContent: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getPopularContent),\n/* harmony export */   getPrivacyControlledLeaderboard: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getPrivacyControlledLeaderboard),\n/* harmony export */   getProgressMetrics: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getProgressMetrics),\n/* harmony export */   getRecommendedContent: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getRecommendedContent),\n/* harmony export */   getSafetyAnalytics: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getSafetyAnalytics),\n/* harmony export */   getTeamAnalytics: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTeamAnalytics),\n/* harmony export */   getTeamMembers: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTeamMembers),\n/* harmony export */   getTeamMembership: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTeamMembership),\n/* harmony export */   getTeams: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTeams),\n/* harmony export */   getTopRatedContent: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getTopRatedContent),\n/* harmony export */   getTrainerAppointments: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerAppointments),\n/* harmony export */   getTrainerAvailability: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerAvailability),\n/* harmony export */   getTrainerClients: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerClients),\n/* harmony export */   getTrainerEarnings: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerEarnings),\n/* harmony export */   getTrainerPaymentAnalytics: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerPaymentAnalytics),\n/* harmony export */   getTrainerProfileWithStats: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerProfileWithStats),\n/* harmony export */   getTrainerProgressReports: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getTrainerProgressReports),\n/* harmony export */   getTrainingProgramById: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getTrainingProgramById),\n/* harmony export */   getTrainingPrograms: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getTrainingPrograms),\n/* harmony export */   getUserPrivacySettings: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getUserPrivacySettings),\n/* harmony export */   getUserProgramSubscriptions: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getUserProgramSubscriptions),\n/* harmony export */   getUserSafetyProfile: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getUserSafetyProfile),\n/* harmony export */   getUserSafetySettings: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getUserSafetySettings),\n/* harmony export */   getUserViolationHistory: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.getUserViolationHistory),\n/* harmony export */   getUserWorkoutsUnified: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getUserWorkoutsUnified),\n/* harmony export */   getWorkoutAnalytics: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutAnalytics),\n/* harmony export */   getWorkoutLogEntries: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutLogEntries),\n/* harmony export */   getWorkoutLogEntry: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutLogEntry),\n/* harmony export */   getWorkoutSession: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutSession),\n/* harmony export */   getWorkoutSessions: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutSessions),\n/* harmony export */   getWorkoutStats: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutStats),\n/* harmony export */   getWorkoutTemplateById: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutTemplateById),\n/* harmony export */   getWorkoutTemplates: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.getWorkoutTemplates),\n/* harmony export */   get_assessment_based_recommendations: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.get_assessment_based_recommendations),\n/* harmony export */   joinChallenge: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.joinChallenge),\n/* harmony export */   joinPremiumTeam: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.joinPremiumTeam),\n/* harmony export */   leaveChallenge: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.leaveChallenge),\n/* harmony export */   leavePremiumTeam: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.leavePremiumTeam),\n/* harmony export */   link_session_to_assessment: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.link_session_to_assessment),\n/* harmony export */   prepare_ai_training_data: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.prepare_ai_training_data),\n/* harmony export */   prisma: () => (/* reexport safe */ _client__WEBPACK_IMPORTED_MODULE_0__.prisma),\n/* harmony export */   processRefund: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.processRefund),\n/* harmony export */   purchaseProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.purchaseProgram),\n/* harmony export */   purchaseTemplate: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.purchaseTemplate),\n/* harmony export */   rateProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.rateProgram),\n/* harmony export */   rateTemplate: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.rateTemplate),\n/* harmony export */   rescheduleAppointment: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.rescheduleAppointment),\n/* harmony export */   searchExercises: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.searchExercises),\n/* harmony export */   searchTrainingPrograms: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.searchTrainingPrograms),\n/* harmony export */   searchWorkoutTemplates: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.searchWorkoutTemplates),\n/* harmony export */   shareProgressReport: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.shareProgressReport),\n/* harmony export */   subscribeToProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.subscribeToProgram),\n/* harmony export */   updateAppointmentStatus: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateAppointmentStatus),\n/* harmony export */   updateChallengeProgress: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateChallengeProgress),\n/* harmony export */   updateExercise: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateExercise),\n/* harmony export */   updateExerciseVariation: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateExerciseVariation),\n/* harmony export */   updatePaymentFromMollie: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updatePaymentFromMollie),\n/* harmony export */   updateProgramProgress: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateProgramProgress),\n/* harmony export */   updateSafetyReport: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateSafetyReport),\n/* harmony export */   updateTrainingProgram: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateTrainingProgram),\n/* harmony export */   updateUserPrivacySettings: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateUserPrivacySettings),\n/* harmony export */   updateUserSafetySettings: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateUserSafetySettings),\n/* harmony export */   updateUserSafetyStatus: () => (/* reexport safe */ _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__.updateUserSafetyStatus),\n/* harmony export */   updateWorkoutLogEntry: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateWorkoutLogEntry),\n/* harmony export */   updateWorkoutSession: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateWorkoutSession),\n/* harmony export */   updateWorkoutTemplate: () => (/* reexport safe */ _workout_queries__WEBPACK_IMPORTED_MODULE_2__.updateWorkoutTemplate)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./src/core/database/client.ts\");\n/* harmony import */ var _safety_business_queries__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./safety-business-queries */ \"(rsc)/./src/core/database/safety-business-queries.ts\");\n/* harmony import */ var _workout_queries__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./workout-queries */ \"(rsc)/./src/core/database/workout-queries.ts\");\n/**\n * Database Exports\n * Centralized export point for all database functionality\n */ // Database client\n\n// Safety, moderation, and business operation queries\n\n// Workout domain queries\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9kYXRhYmFzZS9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFRCxrQkFBa0I7QUFDTztBQUV6QixxREFBcUQ7QUFDWDtBQUUxQyx5QkFBeUI7QUFDUyIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL2RhdGFiYXNlL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgRXhwb3J0c1xuICogQ2VudHJhbGl6ZWQgZXhwb3J0IHBvaW50IGZvciBhbGwgZGF0YWJhc2UgZnVuY3Rpb25hbGl0eVxuICovXG5cbi8vIERhdGFiYXNlIGNsaWVudFxuZXhwb3J0ICogZnJvbSAnLi9jbGllbnQnO1xuXG4vLyBTYWZldHksIG1vZGVyYXRpb24sIGFuZCBidXNpbmVzcyBvcGVyYXRpb24gcXVlcmllc1xuZXhwb3J0ICogZnJvbSAnLi9zYWZldHktYnVzaW5lc3MtcXVlcmllcyc7XG5cbi8vIFdvcmtvdXQgZG9tYWluIHF1ZXJpZXNcbmV4cG9ydCAqIGZyb20gJy4vd29ya291dC1xdWVyaWVzJzsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/database/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/database/safety-business-queries.ts":
/*!******************************************************!*\
  !*** ./src/core/database/safety-business-queries.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModerationAction: () => (/* binding */ ModerationAction),\n/* harmony export */   ModerationSource: () => (/* binding */ ModerationSource),\n/* harmony export */   UserRole: () => (/* binding */ UserRole),\n/* harmony export */   UserStatus: () => (/* binding */ UserStatus),\n/* harmony export */   ViolationType: () => (/* binding */ ViolationType),\n/* harmony export */   addClientToTrainer: () => (/* binding */ addClientToTrainer),\n/* harmony export */   approveTeamMembership: () => (/* binding */ approveTeamMembership),\n/* harmony export */   checkAppointmentConflict: () => (/* binding */ checkAppointmentConflict),\n/* harmony export */   createAppointment: () => (/* binding */ createAppointment),\n/* harmony export */   createChallenge: () => (/* binding */ createChallenge),\n/* harmony export */   createModerationLog: () => (/* binding */ createModerationLog),\n/* harmony export */   createMollieCustomer: () => (/* binding */ createMollieCustomer),\n/* harmony export */   createMolliePayment: () => (/* binding */ createMolliePayment),\n/* harmony export */   createOrUpdateTrainerProfile: () => (/* binding */ createOrUpdateTrainerProfile),\n/* harmony export */   createPremiumTeam: () => (/* binding */ createPremiumTeam),\n/* harmony export */   createProgressReport: () => (/* binding */ createProgressReport),\n/* harmony export */   createSafetyReport: () => (/* binding */ createSafetyReport),\n/* harmony export */   createUserViolation: () => (/* binding */ createUserViolation),\n/* harmony export */   generateSafetyReport: () => (/* binding */ generateSafetyReport),\n/* harmony export */   getChallengeLeaderboard: () => (/* binding */ getChallengeLeaderboard),\n/* harmony export */   getChallenges: () => (/* binding */ getChallenges),\n/* harmony export */   getFlaggedUsers: () => (/* binding */ getFlaggedUsers),\n/* harmony export */   getModerationLogs: () => (/* binding */ getModerationLogs),\n/* harmony export */   getModerationStatistics: () => (/* binding */ getModerationStatistics),\n/* harmony export */   getPaymentByMollieId: () => (/* binding */ getPaymentByMollieId),\n/* harmony export */   getPendingSafetyReports: () => (/* binding */ getPendingSafetyReports),\n/* harmony export */   getPrivacyControlledLeaderboard: () => (/* binding */ getPrivacyControlledLeaderboard),\n/* harmony export */   getSafetyAnalytics: () => (/* binding */ getSafetyAnalytics),\n/* harmony export */   getTeamAnalytics: () => (/* binding */ getTeamAnalytics),\n/* harmony export */   getTeamMembers: () => (/* binding */ getTeamMembers),\n/* harmony export */   getTeamMembership: () => (/* binding */ getTeamMembership),\n/* harmony export */   getTeams: () => (/* binding */ getTeams),\n/* harmony export */   getTrainerAppointments: () => (/* binding */ getTrainerAppointments),\n/* harmony export */   getTrainerAvailability: () => (/* binding */ getTrainerAvailability),\n/* harmony export */   getTrainerClients: () => (/* binding */ getTrainerClients),\n/* harmony export */   getTrainerEarnings: () => (/* binding */ getTrainerEarnings),\n/* harmony export */   getTrainerPaymentAnalytics: () => (/* binding */ getTrainerPaymentAnalytics),\n/* harmony export */   getTrainerProfileWithStats: () => (/* binding */ getTrainerProfileWithStats),\n/* harmony export */   getTrainerProgressReports: () => (/* binding */ getTrainerProgressReports),\n/* harmony export */   getUserPrivacySettings: () => (/* binding */ getUserPrivacySettings),\n/* harmony export */   getUserSafetyProfile: () => (/* binding */ getUserSafetyProfile),\n/* harmony export */   getUserSafetySettings: () => (/* binding */ getUserSafetySettings),\n/* harmony export */   getUserViolationHistory: () => (/* binding */ getUserViolationHistory),\n/* harmony export */   joinChallenge: () => (/* binding */ joinChallenge),\n/* harmony export */   joinPremiumTeam: () => (/* binding */ joinPremiumTeam),\n/* harmony export */   leaveChallenge: () => (/* binding */ leaveChallenge),\n/* harmony export */   leavePremiumTeam: () => (/* binding */ leavePremiumTeam),\n/* harmony export */   processRefund: () => (/* binding */ processRefund),\n/* harmony export */   rescheduleAppointment: () => (/* binding */ rescheduleAppointment),\n/* harmony export */   shareProgressReport: () => (/* binding */ shareProgressReport),\n/* harmony export */   updateAppointmentStatus: () => (/* binding */ updateAppointmentStatus),\n/* harmony export */   updateChallengeProgress: () => (/* binding */ updateChallengeProgress),\n/* harmony export */   updatePaymentFromMollie: () => (/* binding */ updatePaymentFromMollie),\n/* harmony export */   updateSafetyReport: () => (/* binding */ updateSafetyReport),\n/* harmony export */   updateUserPrivacySettings: () => (/* binding */ updateUserPrivacySettings),\n/* harmony export */   updateUserSafetySettings: () => (/* binding */ updateUserSafetySettings),\n/* harmony export */   updateUserSafetyStatus: () => (/* binding */ updateUserSafetyStatus)\n/* harmony export */ });\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client */ \"(rsc)/./src/core/database/client.ts\");\n// src/lib/database/queries.ts\n/**\n * Safety-Related Database Queries for Massimino\n * Optimized queries for user safety, moderation, and security operations\n */ \n// Define types locally since Prisma client may not be available\nconst UserRole = {\n    CLIENT: 'CLIENT',\n    TRAINER: 'TRAINER',\n    ADMIN: 'ADMIN'\n};\nconst UserStatus = {\n    ACTIVE: 'ACTIVE',\n    SUSPENDED: 'SUSPENDED',\n    BANNED: 'BANNED'\n};\nconst ViolationType = {\n    HARASSMENT: 'HARASSMENT',\n    HATE_SPEECH: 'HATE_SPEECH',\n    THREAT: 'THREAT',\n    INAPPROPRIATE_CONTENT: 'INAPPROPRIATE_CONTENT',\n    SPAM: 'SPAM',\n    PRIVACY_VIOLATION: 'PRIVACY_VIOLATION'\n};\nconst ModerationAction = {\n    APPROVED: 'APPROVED',\n    FLAGGED: 'FLAGGED',\n    BLOCKED: 'BLOCKED',\n    DELETED: 'DELETED'\n};\nconst ModerationSource = {\n    OPENAI: 'OPENAI',\n    CUSTOM_RULES: 'CUSTOM_RULES',\n    MANUAL: 'MANUAL'\n};\n// ============================================================================\n// USER SAFETY QUERIES\n// ============================================================================\n/**\n * Get comprehensive user safety information\n */ async function getUserSafetyProfile(userId) {\n    const user = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            id: true,\n            email: true,\n            name: true,\n            image: true,\n            role: true,\n            status: true,\n            reputationScore: true,\n            warningCount: true,\n            trainerVerified: true,\n            suspendedUntil: true,\n            createdAt: true,\n            lastLoginAt: true\n        }\n    });\n    if (!user) {\n        return {\n            user: null,\n            violationCount: 0,\n            recentViolations: 0,\n            suspensionHistory: 0,\n            riskLevel: 'LOW',\n            restrictions: []\n        };\n    }\n    // Get violation statistics\n    const [violationCount, recentViolations, suspensionHistory, lastViolationResult] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.count({\n            where: {\n                userId\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.count({\n            where: {\n                userId,\n                createdAt: {\n                    gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n                }\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.count({\n            where: {\n                userId,\n                suspensionHours: {\n                    gt: 0\n                }\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.findFirst({\n            where: {\n                userId\n            },\n            orderBy: {\n                createdAt: 'desc'\n            },\n            select: {\n                createdAt: true\n            }\n        })\n    ]);\n    // Calculate risk level\n    const riskLevel = calculateUserRiskLevel(user.reputationScore, violationCount, recentViolations, user.warningCount);\n    // Determine active restrictions\n    const restrictions = determineUserRestrictions(user, violationCount, recentViolations);\n    return {\n        user: user ? {\n            id: user.id,\n            email: user.email,\n            name: user.name || 'Unknown',\n            ...user.image && {\n                image: user.image\n            },\n            role: user.role,\n            status: user.status,\n            reputationScore: user.reputationScore,\n            warningCount: user.warningCount,\n            trainerVerified: user.trainerVerified,\n            suspendedUntil: user.suspendedUntil || null,\n            isSafe: riskLevel === 'LOW' && user.status === UserStatus.ACTIVE,\n            createdAt: user.createdAt,\n            lastLoginAt: user.lastLoginAt || null\n        } : null,\n        violationCount,\n        recentViolations,\n        suspensionHistory,\n        ...lastViolationResult?.createdAt && {\n            lastViolation: lastViolationResult.createdAt\n        },\n        riskLevel,\n        restrictions\n    };\n}\n/**\n * Get users flagged for potential safety concerns\n */ async function getFlaggedUsers(params) {\n    const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    // Get users with safety concerns\n    const users = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findMany({\n        where: {\n            OR: [\n                {\n                    reputationScore: {\n                        lt: 50\n                    }\n                },\n                {\n                    warningCount: {\n                        gte: 2\n                    }\n                },\n                {\n                    status: {\n                        in: [\n                            UserStatus.SUSPENDED\n                        ]\n                    }\n                }\n            ],\n            ...params.includeRecent && {\n                violations: {\n                    some: {\n                        createdAt: {\n                            gte: thirtyDaysAgo\n                        }\n                    }\n                }\n            }\n        },\n        select: {\n            id: true,\n            name: true,\n            email: true,\n            role: true,\n            reputationScore: true,\n            warningCount: true,\n            user_violations: {\n                select: {\n                    createdAt: true\n                },\n                orderBy: {\n                    createdAt: 'desc'\n                }\n            }\n        },\n        orderBy: [\n            {\n                reputationScore: 'asc'\n            },\n            {\n                warningCount: 'desc'\n            }\n        ],\n        take: params.limit || 50,\n        skip: params.offset || 0\n    });\n    return users.map((user)=>{\n        const violationCount = user.violations.length;\n        const recentViolations = user.violations.filter((v)=>v.createdAt >= thirtyDaysAgo).length;\n        const lastViolation = user.violations[0]?.createdAt;\n        const riskLevel = calculateUserRiskLevel(user.reputationScore, violationCount, recentViolations, user.warningCount);\n        return {\n            id: user.id,\n            name: user.name || 'Unknown',\n            email: user.email,\n            role: user.role,\n            reputationScore: user.reputationScore,\n            warningCount: user.warningCount,\n            violationCount,\n            recentViolations,\n            ...lastViolation && {\n                lastViolation\n            },\n            riskLevel\n        };\n    });\n}\n/**\n * Update user safety status after enforcement action\n */ async function updateUserSafetyStatus(userId, updates) {\n    // Use regular prisma transaction instead of safeTransaction for now\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction(async (tx)=>{\n        const currentUser = await tx.users.findUniqueOrThrow({\n            where: {\n                id: userId\n            },\n            select: {\n                reputationScore: true\n            }\n        });\n        const newReputationScore = updates.reputationChange ? Math.max(0, currentUser.reputationScore + updates.reputationChange) : undefined;\n        return tx.users.update({\n            where: {\n                id: userId\n            },\n            data: {\n                ...newReputationScore !== undefined && {\n                    reputationScore: newReputationScore\n                },\n                ...updates.warningCount !== undefined && {\n                    warningCount: updates.warningCount\n                },\n                ...updates.status && {\n                    status: updates.status\n                },\n                ...updates.suspendedUntil !== undefined && {\n                    suspendedUntil: updates.suspendedUntil\n                }\n            }\n        });\n    });\n}\n// ============================================================================\n// MODERATION LOG QUERIES\n// ============================================================================\n/**\n * Create moderation log entry\n */ async function createModerationLog(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.create({\n        data: {\n            ...data,\n            processedAt: new Date()\n        }\n    });\n}\n/**\n * Get moderation logs with advanced filtering\n */ async function getModerationLogs(params) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n        where: {\n            ...params.userId && {\n                userId: params.userId\n            },\n            ...params.action && {\n                action: params.action\n            },\n            ...params.contentType && {\n                contentType: params.contentType\n            },\n            ...(params.dateFrom || params.dateTo) && {\n                createdAt: {\n                    ...params.dateFrom && {\n                        gte: params.dateFrom\n                    },\n                    ...params.dateTo && {\n                        lte: params.dateTo\n                    }\n                }\n            }\n        },\n        ...params.includeUser && {\n            include: {\n                users: {\n                    select: {\n                        name: true,\n                        role: true\n                    }\n                }\n            }\n        },\n        orderBy: {\n            createdAt: 'desc'\n        },\n        take: params.limit || 50,\n        skip: params.offset || 0\n    });\n}\n/**\n * Get moderation statistics for dashboard\n */ async function getModerationStatistics(timeframe = 'day') {\n    const hoursMap = {\n        day: 24,\n        week: 168,\n        month: 720\n    };\n    const since = new Date(Date.now() - hoursMap[timeframe] * 60 * 60 * 1000);\n    const [logs, reasonCounts] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n            where: {\n                createdAt: {\n                    gte: since\n                }\n            },\n            select: {\n                action: true,\n                contentType: true,\n                confidence: true,\n                userId: true,\n                flaggedReason: true,\n                users: {\n                    select: {\n                        name: true\n                    }\n                }\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.groupBy({\n            by: [\n                'flaggedReason'\n            ],\n            where: {\n                createdAt: {\n                    gte: since\n                },\n                flaggedReason: {\n                    not: null\n                }\n            },\n            _count: {\n                flaggedReason: true\n            },\n            orderBy: {\n                _count: {\n                    flaggedReason: 'desc'\n                }\n            },\n            take: 10\n        })\n    ]);\n    // Calculate statistics\n    const totalActions = logs.length;\n    const actionBreakdown = {};\n    const contentTypeBreakdown = {};\n    const userActivity = {};\n    let totalConfidence = 0;\n    let confidenceCount = 0;\n    logs.forEach((log)=>{\n        // Action breakdown\n        actionBreakdown[log.action] = (actionBreakdown[log.action] || 0) + 1;\n        // Content type breakdown\n        contentTypeBreakdown[log.contentType] = (contentTypeBreakdown[log.contentType] || 0) + 1;\n        // User activity\n        if (log.userId) {\n            if (!userActivity[log.userId]) {\n                const userData = {\n                    count: 0\n                };\n                if (log.users?.name) {\n                    userData.name = log.users.name;\n                }\n                userActivity[log.userId] = userData;\n            }\n            if (userActivity[log.userId]) {\n                userActivity[log.userId].count++;\n            }\n        }\n        // Confidence calculation\n        if (log.confidence !== null) {\n            totalConfidence += log.confidence;\n            confidenceCount++;\n        }\n    });\n    const averageConfidence = confidenceCount > 0 ? totalConfidence / confidenceCount : 0;\n    const topViolationReasons = reasonCounts.map((r)=>({\n            reason: r.flaggedReason ?? 'Unknown',\n            count: r._count.flaggedReason\n        }));\n    const userActivityArray = Object.entries(userActivity).map(([userId, data])=>({\n            userId,\n            actionCount: data.count,\n            ...data.name && {\n                userName: data.name\n            }\n        })).sort((a, b)=>b.actionCount - a.actionCount).slice(0, 10);\n    return {\n        totalActions,\n        actionBreakdown,\n        contentTypeBreakdown,\n        averageConfidence,\n        topViolationReasons,\n        userActivity: userActivityArray\n    };\n}\n// ============================================================================\n// SAFETY REPORTS QUERIES\n// ============================================================================\n/**\n * Create safety report\n */ async function createSafetyReport(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safety_reports.create({\n        data: {\n            id: crypto.randomUUID(),\n            ...data,\n            status: 'PENDING',\n            priority: determinePriority(data.violationType, data.description),\n            createdAt: new Date()\n        }\n    });\n}\n/**\n * Get pending safety reports for review\n */ async function getPendingSafetyReports(params) {\n    // @ts-expect-error Prisma type mismatch with local types\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safety_reports.findMany({\n        where: {\n            status: {\n                in: [\n                    'PENDING',\n                    'INVESTIGATING'\n                ]\n            },\n            ...params.priority && {\n                priority: params.priority\n            }\n        },\n        include: {\n            users_safety_reports_reporterIdTousers: {\n                select: {\n                    name: true,\n                    role: true\n                }\n            },\n            users_safety_reports_reportedUserIdTousers: {\n                select: {\n                    name: true,\n                    role: true,\n                    reputationScore: true\n                }\n            }\n        },\n        orderBy: [\n            {\n                priority: 'desc'\n            },\n            {\n                createdAt: 'asc'\n            }\n        ],\n        take: params.limit || 20,\n        skip: params.offset || 0\n    });\n}\n/**\n * Update safety report status\n */ async function updateSafetyReport(reportId, updates) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safety_reports.update({\n        where: {\n            id: reportId\n        },\n        data: {\n            ...updates,\n            ...updates.status === 'RESOLVED' && {\n                resolvedAt: new Date()\n            },\n            ...updates.assignedTo && {\n                status: updates.status || 'INVESTIGATING'\n            }\n        }\n    });\n}\n// ============================================================================\n// USER VIOLATIONS QUERIES\n// ============================================================================\n/**\n * Create user violation record\n */ async function createUserViolation(data) {\n    // Use regular prisma transaction instead of safeTransaction for now\n    // @ts-expect-error Prisma type mismatch with local types\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction(async (tx)=>{\n        // Create violation record\n        const violation = await tx.user_violations.create({\n            data: {\n                id: crypto.randomUUID(),\n                ...data,\n                createdAt: new Date()\n            }\n        });\n        // Update user statistics\n        if (data.warningIssued) {\n            await tx.users.update({\n                where: {\n                    id: data.userId\n                },\n                data: {\n                    warningCount: {\n                        increment: 1\n                    },\n                    reputationScore: {\n                        decrement: data.reputationHit\n                    }\n                }\n            });\n        }\n        return violation;\n    });\n}\n/**\n * Get user violation history\n */ async function getUserViolationHistory(userId, params) {\n    // @ts-expect-error Prisma type mismatch with local types\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.findMany({\n        where: {\n            userId,\n            ...params?.includeResolved === false && {\n                resolved: false\n            }\n        },\n        orderBy: {\n            createdAt: 'desc'\n        },\n        take: params?.limit || 20,\n        skip: params?.offset || 0\n    });\n}\n// ============================================================================\n// SAFETY SETTINGS QUERIES\n// ============================================================================\n/**\n * Get user safety settings\n */ async function getUserSafetySettings(userId) {\n    // @ts-expect-error Prisma type mismatch with local types\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safetySettings.findUnique({\n        where: {\n            userId\n        }\n    });\n}\n/**\n * Update user safety settings\n */ async function updateUserSafetySettings(userId, settings) {\n    // @ts-expect-error Prisma type mismatch with local types\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safetySettings.upsert({\n        where: {\n            userId\n        },\n        create: {\n            userId,\n            ...settings\n        },\n        update: settings\n    });\n}\n// ============================================================================\n// ANALYTICS AND REPORTING QUERIES\n// ============================================================================\n/**\n * Get safety analytics for admin dashboard\n */ async function getSafetyAnalytics(_timeframe = 'month') {\n    // This would be implemented with complex aggregation queries\n    // For now, returning a structured response for the interface\n    return {\n        userGrowth: [],\n        violationTrends: [],\n        moderationEfficiency: {\n            averageResponseTime: 0,\n            automationRate: 0,\n            appealRate: 0\n        },\n        riskDistribution: {\n            'LOW': 0,\n            'MEDIUM': 0,\n            'HIGH': 0,\n            'CRITICAL': 0\n        },\n        trainerSafety: {\n            verifiedTrainers: 0,\n            flaggedTrainers: 0,\n            averageRating: 0\n        }\n    };\n}\n/**\n * Generate safety report for export\n */ async function generateSafetyReport(params) {\n    const summary = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.count(),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.count({\n            where: {\n                status: UserStatus.ACTIVE\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.count({\n            where: {\n                status: UserStatus.SUSPENDED\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.count({\n            where: {\n                status: UserStatus.BANNED\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.count({\n            where: {\n                createdAt: {\n                    gte: params.startDate,\n                    lte: params.endDate\n                }\n            }\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.safety_reports.count({\n            where: {\n                status: 'RESOLVED',\n                createdAt: {\n                    gte: params.startDate,\n                    lte: params.endDate\n                }\n            }\n        })\n    ]);\n    return {\n        summary: {\n            totalUsers: summary[0],\n            activeUsers: summary[1],\n            suspendedUsers: summary[2],\n            bannedUsers: summary[3],\n            totalViolations: summary[4],\n            resolvedReports: summary[5]\n        },\n        details: []\n    };\n}\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Calculate user risk level based on various factors\n */ function calculateUserRiskLevel(reputationScore, totalViolations, recentViolations, warningCount) {\n    // High risk indicators\n    if (recentViolations >= 3 || totalViolations >= 10 || warningCount >= 5) {\n        return 'CRITICAL';\n    }\n    if (recentViolations >= 2 || totalViolations >= 5 || warningCount >= 3 || reputationScore < 25) {\n        return 'HIGH';\n    }\n    if (recentViolations >= 1 || totalViolations >= 2 || warningCount >= 1 || reputationScore < 50) {\n        return 'MEDIUM';\n    }\n    return 'LOW';\n}\n/**\n * Determine user restrictions based on safety profile\n */ function determineUserRestrictions(user, totalViolations, recentViolations) {\n    const restrictions = [];\n    if (user.status === UserStatus.SUSPENDED) {\n        restrictions.push('ACCOUNT_SUSPENDED');\n    }\n    if (user.status === UserStatus.BANNED) {\n        restrictions.push('ACCOUNT_BANNED');\n    }\n    if (user.reputationScore < 25) {\n        restrictions.push('NO_DIRECT_MESSAGES');\n    }\n    if (user.warningCount >= 3 || recentViolations >= 2) {\n        restrictions.push('NO_POST_CREATION');\n        restrictions.push('NO_COMMUNITY_CREATION');\n    }\n    if (totalViolations >= 5) {\n        restrictions.push('LIMITED_INTERACTIONS');\n    }\n    return restrictions;\n}\n/**\n * Determine priority for safety reports\n */ function determinePriority(category, description) {\n    // High priority categories\n    if (category === ViolationType.THREAT || category === ViolationType.HATE_SPEECH || category === ViolationType.PRIVACY_VIOLATION) {\n        return 'URGENT';\n    }\n    if (category === ViolationType.HARASSMENT || category === ViolationType.INAPPROPRIATE_CONTENT) {\n        return 'HIGH';\n    }\n    if (category === ViolationType.SPAM) {\n        return 'LOW';\n    }\n    // Check description for urgent keywords\n    const urgentKeywords = [\n        'threat',\n        'danger',\n        'harm',\n        'suicide',\n        'violence'\n    ];\n    if (urgentKeywords.some((keyword)=>description.toLowerCase().includes(keyword))) {\n        return 'URGENT';\n    }\n    return 'MEDIUM';\n}\n// ============================================================================\n// PHASE 5: TRAINER BUSINESS QUERIES\n// ============================================================================\n/**\n * Create or update trainer profile\n */ async function createOrUpdateTrainerProfile(userId, data) {\n    const existingProfile = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.findUnique({\n        where: {\n            userId\n        }\n    });\n    if (existingProfile) {\n        return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.update({\n            where: {\n                userId\n            },\n            data\n        });\n    } else {\n        return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.create({\n            data: {\n                id: crypto.randomUUID(),\n                userId,\n                ...data\n            }\n        });\n    }\n}\n/**\n * Get trainer profile with business stats\n */ async function getTrainerProfileWithStats(trainerId) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.findUnique({\n        where: {\n            id: trainerId\n        },\n        include: {\n            user: {\n                select: {\n                    id: true,\n                    name: true,\n                    email: true,\n                    image: true,\n                    role: true\n                }\n            },\n            _count: {\n                select: {\n                    trainer_clients: {\n                        where: {\n                            status: 'ACTIVE'\n                        }\n                    },\n                    appointments: true,\n                    trainer_reviews: true\n                }\n            }\n        }\n    });\n}\n/**\n * Get trainer clients with pagination and filters\n */ async function getTrainerClients(trainerId, filters = {}) {\n    const { status, search, page = 1, limit = 20 } = filters;\n    const skip = (page - 1) * limit;\n    const where = {\n        trainerId,\n        ...status && {\n            status\n        },\n        ...search && {\n            client: {\n                OR: [\n                    {\n                        name: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    },\n                    {\n                        email: {\n                            contains: search,\n                            mode: 'insensitive'\n                        }\n                    }\n                ]\n            }\n        }\n    };\n    const [clients, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_clients.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true\n                    }\n                },\n                _count: {\n                    select: {\n                        appointments: true,\n                        progress_reports: true\n                    }\n                }\n            },\n            orderBy: {\n                createdAt: 'desc'\n            },\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_clients.count({\n            where\n        })\n    ]);\n    return {\n        clients,\n        total,\n        page,\n        totalPages: Math.ceil(total / limit)\n    };\n}\n/**\n * Add client to trainer\n */ async function addClientToTrainer(trainerId, clientId, data) {\n    // Check if relationship already exists\n    const existing = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_clients.findUnique({\n        where: {\n            trainerId_clientId: {\n                trainerId,\n                clientId\n            }\n        }\n    });\n    if (existing) {\n        throw new Error('Client is already associated with this trainer');\n    }\n    const relationship = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_clients.create({\n        data: {\n            id: crypto.randomUUID(),\n            trainerId,\n            clientId,\n            status: 'ACTIVE',\n            ...data\n        }\n    });\n    // Update trainer's client counts\n    await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.update({\n        where: {\n            id: trainerId\n        },\n        data: {\n            activeClients: {\n                increment: 1\n            },\n            totalClients: {\n                increment: 1\n            }\n        }\n    });\n    return relationship;\n}\n/**\n * Create appointment\n */ async function createAppointment(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.create({\n        data: {\n            id: crypto.randomUUID(),\n            trainerId: data.trainerId,\n            clientId: data.clientId,\n            title: data.title,\n            description: data.description ?? null,\n            scheduledAt: data.scheduledAt,\n            duration: data.duration || 60,\n            type: data.type || 'PERSONAL_TRAINING',\n            location: data.location ?? null,\n            isVirtual: data.isVirtual ?? false,\n            price: data.price ?? null,\n            currency: data.currency ?? 'USD',\n            status: 'SCHEDULED'\n        }\n    });\n}\n/**\n * Get trainer appointments with filters\n */ async function getTrainerAppointments(trainerId, filters = {}) {\n    const { status, dateRange, clientId, page = 1, limit = 20 } = filters;\n    const skip = (page - 1) * limit;\n    const where = {\n        trainerId,\n        ...status && {\n            status: {\n                in: status\n            }\n        },\n        ...dateRange && {\n            scheduledAt: {\n                gte: dateRange.start,\n                lte: dateRange.end\n            }\n        },\n        ...clientId && {\n            clientId\n        }\n    };\n    const [appointments, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true\n                    }\n                },\n                workout_sessions: {\n                    select: {\n                        id: true,\n                        title: true,\n                        isComplete: true\n                    }\n                }\n            },\n            orderBy: {\n                scheduledAt: 'asc'\n            },\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.count({\n            where\n        })\n    ]);\n    return {\n        appointments,\n        total,\n        page,\n        totalPages: Math.ceil(total / limit)\n    };\n}\n/**\n * Update appointment status\n */ async function updateAppointmentStatus(appointmentId, status, updates = {}) {\n    const updateData = {\n        status,\n        ...updates\n    };\n    if (status === 'CANCELLED') {\n        updateData.cancelledAt = new Date();\n    } else if (status === 'COMPLETED') {\n        updateData.completedAt = new Date();\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.update({\n        where: {\n            id: appointmentId\n        },\n        data: updateData\n    });\n}\n/**\n * Create progress report\n */ async function createProgressReport(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.progress_reports.create({\n        data: {\n            id: crypto.randomUUID(),\n            ...data,\n            reportDate: new Date(),\n            period: data.period || 'MONTHLY'\n        }\n    });\n}\n/**\n * Get trainer's progress reports\n */ async function getTrainerProgressReports(trainerId, filters = {}) {\n    const { clientId, period, isShared, page = 1, limit = 20 } = filters;\n    const skip = (page - 1) * limit;\n    const where = {\n        trainerId,\n        ...clientId && {\n            clientId\n        },\n        ...period && {\n            period\n        },\n        ...isShared !== undefined && {\n            isShared\n        }\n    };\n    const [reports, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.progress_reports.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        email: true,\n                        image: true\n                    }\n                }\n            },\n            orderBy: {\n                reportDate: 'desc'\n            },\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.progress_reports.count({\n            where\n        })\n    ]);\n    return {\n        reports,\n        total,\n        page,\n        totalPages: Math.ceil(total / limit)\n    };\n}\n/**\n * Share progress report with client\n */ async function shareProgressReport(reportId) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.progress_reports.update({\n        where: {\n            id: reportId\n        },\n        data: {\n            isShared: true\n        }\n    });\n}\n/**\n * Get trainer earnings summary\n */ async function getTrainerEarnings(trainerId, period = 'month') {\n    const now = new Date();\n    let startDate;\n    switch(period){\n        case 'week':\n            startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n            break;\n        case 'year':\n            startDate = new Date(now.getFullYear(), 0, 1);\n            break;\n        default:\n            startDate = new Date(now.getFullYear(), now.getMonth(), 1);\n    }\n    const earnings = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.aggregate({\n        where: {\n            trainerId,\n            status: 'COMPLETED',\n            paymentDate: {\n                gte: startDate\n            }\n        },\n        _sum: {\n            amount: true,\n            trainerEarnings: true,\n            platformFee: true\n        },\n        _count: true\n    });\n    return {\n        totalAmount: earnings._sum.amount || 0,\n        trainerEarnings: earnings._sum.trainerEarnings || 0,\n        platformFee: earnings._sum.platformFee || 0,\n        transactionCount: earnings._count,\n        period\n    };\n}\n/**\n * Check for appointment scheduling conflicts\n */ async function checkAppointmentConflict(trainerId, scheduledAt, duration = 60, excludeAppointmentId) {\n    const endTime = new Date(scheduledAt.getTime() + duration * 60 * 1000);\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.findFirst({\n        where: {\n            trainerId,\n            ...excludeAppointmentId && {\n                id: {\n                    not: excludeAppointmentId\n                }\n            },\n            status: {\n                in: [\n                    'SCHEDULED',\n                    'CONFIRMED',\n                    'IN_PROGRESS'\n                ]\n            },\n            OR: [\n                // Appointment starts during new appointment\n                {\n                    AND: [\n                        {\n                            scheduledAt: {\n                                lte: scheduledAt\n                            }\n                        },\n                        {\n                            scheduledAt: {\n                                gte: new Date(scheduledAt.getTime() - 60 * 60 * 1000)\n                            }\n                        }\n                    ]\n                },\n                // Appointment ends during new appointment\n                {\n                    AND: [\n                        {\n                            scheduledAt: {\n                                lte: endTime\n                            }\n                        },\n                        {\n                            scheduledAt: {\n                                gte: scheduledAt\n                            }\n                        }\n                    ]\n                }\n            ]\n        }\n    });\n}\n/**\n * Get trainer availability for date range\n */ async function getTrainerAvailability(trainerId, startDate, endDate) {\n    // Get trainer's available hours\n    const trainerProfile = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.findUnique({\n        where: {\n            id: trainerId\n        },\n        select: {\n            availableHours: true,\n            timezone: true\n        }\n    });\n    // Get existing appointments\n    const appointments = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.findMany({\n        where: {\n            trainerId,\n            scheduledAt: {\n                gte: startDate,\n                lte: endDate\n            },\n            status: {\n                in: [\n                    'SCHEDULED',\n                    'CONFIRMED',\n                    'IN_PROGRESS'\n                ]\n            }\n        },\n        select: {\n            id: true,\n            scheduledAt: true,\n            duration: true,\n            type: true,\n            title: true\n        }\n    });\n    return {\n        trainerProfile,\n        appointments,\n        dateRange: {\n            startDate,\n            endDate\n        }\n    };\n}\n/**\n * Reschedule appointment\n */ async function rescheduleAppointment(appointmentId, newScheduledAt, reason) {\n    const appointment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.findUnique({\n        where: {\n            id: appointmentId\n        }\n    });\n    if (!appointment) {\n        throw new Error('Appointment not found');\n    }\n    // Check for conflicts\n    const conflict = await checkAppointmentConflict(appointment.trainerId, newScheduledAt, appointment.duration, appointmentId);\n    if (conflict) {\n        throw new Error('New time conflicts with existing appointment');\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.appointments.update({\n        where: {\n            id: appointmentId\n        },\n        data: {\n            scheduledAt: newScheduledAt,\n            status: 'RESCHEDULED',\n            trainerNotes: reason ? `Rescheduled: ${reason}` : 'Appointment rescheduled'\n        }\n    });\n}\n// ============================================================================\n// PHASE 5: MOLLIE PAYMENT INTEGRATION\n// ============================================================================\n/**\n * Create payment record with Mollie integration\n */ async function createMolliePayment(data) {\n    const payment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.create({\n        data: {\n            id: crypto.randomUUID(),\n            trainerId: data.trainerId,\n            clientId: data.clientId,\n            trainerClientId: data.trainerClientId ?? null,\n            amount: data.amount,\n            currency: data.currency,\n            type: data.type,\n            status: 'PENDING',\n            method: 'MOLLIE',\n            molliePaymentId: data.molliePaymentId,\n            mollieCustomerId: data.mollieCustomerId ?? null,\n            description: data.description,\n            ...data.sessionDate ? {\n                sessionDate: data.sessionDate\n            } : {},\n            packageId: data.packageId ?? null,\n            metadata: data.metadata\n        }\n    });\n    console.log('Payment record created:', {\n        paymentId: payment.id,\n        molliePaymentId: data.molliePaymentId,\n        amount: data.amount,\n        currency: data.currency\n    });\n    return payment;\n}\n/**\n * Update payment status from Mollie webhook\n */ async function updatePaymentFromMollie(molliePaymentId, updates) {\n    const payment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.findFirst({\n        where: {\n            molliePaymentId\n        }\n    });\n    if (!payment) {\n        throw new Error(`Payment not found for Mollie ID: ${molliePaymentId}`);\n    }\n    const updatedPayment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.update({\n        where: {\n            id: payment.id\n        },\n        data: {\n            status: updates.status,\n            ...updates.paymentDate ? {\n                paymentDate: updates.paymentDate\n            } : {},\n            ...updates.failureReason ? {\n                failureReason: updates.failureReason\n            } : {},\n            ...typeof updates.trainerEarnings === 'number' ? {\n                trainerEarnings: updates.trainerEarnings\n            } : {},\n            ...typeof updates.platformFee === 'number' ? {\n                platformFee: updates.platformFee\n            } : {}\n        }\n    });\n    // Update trainer earnings if payment completed\n    if (updates.status === 'COMPLETED' && updates.trainerEarnings) {\n        await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.update({\n            where: {\n                id: payment.trainerId\n            },\n            data: {\n                totalEarnings: {\n                    increment: updates.trainerEarnings\n                },\n                monthlyEarnings: {\n                    increment: updates.trainerEarnings\n                }\n            }\n        });\n    }\n    console.log('Payment updated from Mollie:', {\n        paymentId: payment.id,\n        molliePaymentId,\n        status: updates.status\n    });\n    return updatedPayment;\n}\n/**\n * Create Mollie customer record\n */ async function createMollieCustomer(userId, mollieCustomerId) {\n    // Update user record with Mollie customer ID\n    const user = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: userId\n        }\n    });\n    if (!user) {\n        throw new Error('User not found');\n    }\n    // Store Mollie customer ID in user metadata or separate field\n    // For now, we'll use the payment records to track this\n    console.log('Mollie customer created for user:', userId, mollieCustomerId);\n    return {\n        userId,\n        mollieCustomerId\n    };\n}\n/**\n * Get payment by Mollie payment ID\n */ async function getPaymentByMollieId(molliePaymentId) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.findFirst({\n        where: {\n            molliePaymentId\n        },\n        include: {\n            trainer_profiles: {\n                include: {\n                    user: {\n                        select: {\n                            id: true,\n                            name: true,\n                            email: true\n                        }\n                    }\n                }\n            },\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    email: true\n                }\n            }\n        }\n    });\n}\n/**\n * Process refund through Mollie\n */ async function processRefund(paymentId, refundAmount, reason) {\n    const payment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.findUnique({\n        where: {\n            id: paymentId\n        }\n    });\n    if (!payment) {\n        throw new Error('Payment not found');\n    }\n    if (!payment.molliePaymentId) {\n        throw new Error('No Mollie payment ID found');\n    }\n    // Update payment record with refund\n    const updatedPayment = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.update({\n        where: {\n            id: paymentId\n        },\n        data: {\n            refundAmount,\n            status: refundAmount >= payment.amount ? 'REFUNDED' : 'PARTIALLY_REFUNDED',\n            metadata: {\n                ...payment.metadata,\n                refundReason: reason,\n                refundDate: new Date()\n            }\n        }\n    });\n    // Update trainer earnings\n    if (payment.trainerEarnings && refundAmount > 0) {\n        const refundFromEarnings = Math.min(refundAmount, payment.trainerEarnings);\n        await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.trainer_profiles.update({\n            where: {\n                id: payment.trainerId\n            },\n            data: {\n                totalEarnings: {\n                    decrement: refundFromEarnings\n                },\n                monthlyEarnings: {\n                    decrement: refundFromEarnings\n                }\n            }\n        });\n    }\n    console.log('Refund processed:', {\n        paymentId,\n        refundAmount,\n        reason\n    });\n    return updatedPayment;\n}\n/**\n * Get trainer payment analytics\n */ async function getTrainerPaymentAnalytics(trainerId, period = 'month') {\n    const now = new Date();\n    let startDate;\n    switch(period){\n        case 'week':\n            startDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n            break;\n        case 'year':\n            startDate = new Date(now.getFullYear(), 0, 1);\n            break;\n        default:\n            startDate = new Date(now.getFullYear(), now.getMonth(), 1);\n    }\n    const [payments, paymentsByType, paymentsByStatus] = await Promise.all([\n        // Total earnings\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.aggregate({\n            where: {\n                trainerId,\n                paymentDate: {\n                    gte: startDate\n                },\n                status: 'COMPLETED'\n            },\n            _sum: {\n                amount: true,\n                trainerEarnings: true,\n                platformFee: true\n            },\n            _count: true\n        }),\n        // Payments by type\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.groupBy({\n            by: [\n                'type'\n            ],\n            where: {\n                trainerId,\n                paymentDate: {\n                    gte: startDate\n                }\n            },\n            _sum: {\n                amount: true\n            },\n            _count: true\n        }),\n        // Payments by status\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.groupBy({\n            by: [\n                'status'\n            ],\n            where: {\n                trainerId,\n                paymentDate: {\n                    gte: startDate\n                }\n            },\n            _count: true\n        })\n    ]);\n    return {\n        totalAmount: payments._sum.amount || 0,\n        trainerEarnings: payments._sum.trainerEarnings || 0,\n        platformFee: payments._sum.platformFee || 0,\n        transactionCount: payments._count,\n        paymentsByType,\n        paymentsByStatus,\n        period\n    };\n}\n// ============================================================================\n// PREMIUM TEAMS MANAGEMENT\n// ============================================================================\n/**\n * Create premium team with validation\n */ async function createPremiumTeam(data) {\n    // Validate owner is a trainer\n    const owner = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: data.ownerId\n        },\n        select: {\n            role: true\n        }\n    });\n    if (!owner || owner.role !== 'TRAINER') {\n        throw new Error('Only trainers can create premium teams');\n    }\n    const team = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.create({\n        data: {\n            id: crypto.randomUUID(),\n            name: data.name,\n            description: data.description,\n            ownerId: data.ownerId,\n            price: data.price,\n            currency: data.currency,\n            billingCycle: data.billingCycle,\n            maxMembers: data.maxMembers ?? null,\n            category: data.category,\n            tags: data.tags || [],\n            features: data.features || [],\n            rules: data.rules ?? null,\n            isPublic: data.isPublic ?? false,\n            requireApproval: data.requireApproval ?? true,\n            trialPeriodDays: data.trialPeriodDays ?? 0,\n            coverImage: data.coverImage ?? null,\n            currentMembers: 0\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    image: true,\n                    trainerVerified: true\n                }\n            }\n        }\n    });\n    console.log('Premium team created:', {\n        teamId: team.id,\n        name: team.name,\n        ownerId: data.ownerId\n    });\n    return team;\n}\n/**\n * Get teams with filtering and pagination\n */ async function getTeams(params) {\n    const page = params.page || 1;\n    const limit = params.limit || 20;\n    const skip = (page - 1) * limit;\n    const where = {\n        isActive: true,\n        ...params.ownerId && {\n            ownerId: params.ownerId\n        },\n        ...params.category && {\n            category: params.category\n        },\n        ...params.isPublic !== undefined && {\n            isPublic: params.isPublic\n        },\n        ...params.search && {\n            OR: [\n                {\n                    name: {\n                        contains: params.search,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    description: {\n                        contains: params.search,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    tags: {\n                        has: params.search\n                    }\n                }\n            ]\n        }\n    };\n    const [teams, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        image: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        premium_memberships: {\n                            where: {\n                                status: 'ACTIVE'\n                            }\n                        }\n                    }\n                },\n                ...params.userId && {\n                    premium_memberships: {\n                        where: {\n                            userId: params.userId\n                        },\n                        select: {\n                            status: true,\n                            startDate: true,\n                            endDate: true,\n                            isTrialActive: true\n                        }\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    currentMembers: 'desc'\n                },\n                {\n                    createdAt: 'desc'\n                }\n            ],\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.count({\n            where\n        })\n    ]);\n    return {\n        teams: teams.map((team)=>({\n                ...team,\n                userMembership: team.premium_memberships?.[0] || null\n            })),\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Join premium team\n */ async function joinPremiumTeam(teamId, userId, paymentId) {\n    // Get team details\n    const team = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.findUnique({\n        where: {\n            id: teamId\n        },\n        select: {\n            id: true,\n            maxMembers: true,\n            currentMembers: true,\n            isActive: true,\n            requireApproval: true,\n            trialPeriodDays: true,\n            price: true\n        }\n    });\n    if (!team) {\n        throw new Error('Team not found');\n    }\n    if (!team.isActive) {\n        throw new Error('Team is not active');\n    }\n    // Check member limits\n    if (team.maxMembers && team.currentMembers >= team.maxMembers) {\n        throw new Error('Team is full');\n    }\n    // Check existing membership\n    const existingMembership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findUnique({\n        where: {\n            communityId_userId: {\n                communityId: teamId,\n                userId\n            }\n        }\n    });\n    if (existingMembership && existingMembership.status === 'ACTIVE') {\n        throw new Error('Already a team member');\n    }\n    // Determine membership status and dates\n    const now = new Date();\n    let status = 'ACTIVE';\n    let endDate;\n    let isTrialActive = false;\n    let trialEndsAt;\n    if (team.price > 0 && !paymentId) {\n        status = 'SUSPENDED';\n    } else if (team.requireApproval) {\n        status = 'SUSPENDED';\n    } else if (team.trialPeriodDays > 0) {\n        isTrialActive = true;\n        trialEndsAt = new Date(now.getTime() + team.trialPeriodDays * 24 * 60 * 60 * 1000);\n        endDate = trialEndsAt;\n        status = 'TRIAL';\n    }\n    // Create or update membership\n    const membership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.upsert({\n        where: {\n            communityId_userId: {\n                communityId: teamId,\n                userId\n            }\n        },\n        update: {\n            status,\n            startDate: now,\n            endDate: endDate ?? null,\n            isTrialActive,\n            trialEndsAt: trialEndsAt ?? null,\n            ...paymentId ? {\n                paymentId\n            } : {},\n            cancelledAt: null,\n            cancellationReason: null\n        },\n        create: {\n            communityId: teamId,\n            userId,\n            status,\n            startDate: now,\n            endDate: endDate ?? null,\n            isTrialActive,\n            trialEndsAt: trialEndsAt ?? null,\n            ...paymentId ? {\n                paymentId\n            } : {}\n        }\n    });\n    // Update team member count if membership is active\n    if (status === 'ACTIVE') {\n        await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.update({\n            where: {\n                id: teamId\n            },\n            data: {\n                currentMembers: {\n                    increment: 1\n                }\n            }\n        });\n    }\n    console.log('User joined premium team:', {\n        teamId,\n        userId,\n        membershipId: membership.id,\n        status\n    });\n    return membership;\n}\n/**\n * Leave premium team\n */ async function leavePremiumTeam(teamId, userId, reason) {\n    const membership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findUnique({\n        where: {\n            communityId_userId: {\n                communityId: teamId,\n                userId\n            }\n        }\n    });\n    if (!membership) {\n        throw new Error('Not a team member');\n    }\n    if (membership.status !== 'ACTIVE') {\n        throw new Error('Membership not active');\n    }\n    // Cancel membership\n    const updatedMembership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.update({\n        where: {\n            id: membership.id\n        },\n        data: {\n            status: 'CANCELLED',\n            cancelledAt: new Date(),\n            cancellationReason: reason || 'User requested cancellation'\n        }\n    });\n    // Update team member count\n    await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.update({\n        where: {\n            id: teamId\n        },\n        data: {\n            currentMembers: {\n                decrement: 1\n            }\n        }\n    });\n    console.log('User left premium team:', {\n        teamId,\n        userId,\n        membershipId: membership.id\n    });\n    return updatedMembership;\n}\n/**\n * Get team membership details\n */ async function getTeamMembership(teamId, userId) {\n    return _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findUnique({\n        where: {\n            communityId_userId: {\n                communityId: teamId,\n                userId\n            }\n        },\n        include: {\n            premium_communities: {\n                select: {\n                    id: true,\n                    name: true,\n                    ownerId: true\n                }\n            },\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    image: true\n                }\n            }\n        }\n    });\n}\n/**\n * Get team members with pagination\n */ async function getTeamMembers(teamId, params) {\n    const page = params.page || 1;\n    const limit = params.limit || 20;\n    const skip = (page - 1) * limit;\n    const where = {\n        communityId: teamId,\n        ...params.status && {\n            status: params.status\n        }\n    };\n    const [members, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        image: true,\n                        email: true\n                    }\n                }\n            },\n            orderBy: {\n                startDate: 'desc'\n            },\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.count({\n            where\n        })\n    ]);\n    return {\n        members,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Approve team membership\n */ async function approveTeamMembership(membershipId, approverId) {\n    const membership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findUnique({\n        where: {\n            id: membershipId\n        },\n        include: {\n            premium_communities: {\n                select: {\n                    ownerId: true,\n                    maxMembers: true,\n                    currentMembers: true\n                }\n            }\n        }\n    });\n    if (!membership) {\n        throw new Error('Membership not found');\n    }\n    if (membership.premium_communities.ownerId !== approverId) {\n        throw new Error('Only team owner can approve memberships');\n    }\n    if (membership.status !== 'SUSPENDED') {\n        throw new Error('Membership not pending approval');\n    }\n    // Check member limits\n    if (membership.premium_communities.maxMembers && membership.premium_communities.currentMembers >= membership.premium_communities.maxMembers) {\n        throw new Error('Team is full');\n    }\n    // Approve membership\n    const updatedMembership = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.update({\n        where: {\n            id: membershipId\n        },\n        data: {\n            status: 'ACTIVE',\n            startDate: new Date()\n        }\n    });\n    // Update team member count\n    await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.update({\n        where: {\n            id: membership.communityId\n        },\n        data: {\n            currentMembers: {\n                increment: 1\n            }\n        }\n    });\n    console.log('Team membership approved:', {\n        membershipId,\n        teamId: membership.communityId,\n        userId: membership.userId,\n        approverId\n    });\n    return updatedMembership;\n}\n/**\n * Get team analytics for owner\n */ async function getTeamAnalytics(teamId, ownerId) {\n    // Verify ownership\n    const team = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.findUnique({\n        where: {\n            id: teamId\n        },\n        select: {\n            ownerId: true\n        }\n    });\n    if (!team || team.ownerId !== ownerId) {\n        throw new Error('Access denied - team owner only');\n    }\n    const [memberStats, revenueStats, membershipTrends] = await Promise.all([\n        // Member statistics\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.groupBy({\n            by: [\n                'status'\n            ],\n            where: {\n                communityId: teamId\n            },\n            _count: true\n        }),\n        // Revenue statistics (simplified)\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.payments.aggregate({\n            where: {\n                metadata: {\n                    path: [\n                        'teamId'\n                    ],\n                    equals: teamId\n                },\n                status: 'COMPLETED'\n            },\n            _sum: {\n                amount: true,\n                trainerEarnings: true\n            },\n            _count: true\n        }),\n        // Membership trends (last 30 days)\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_memberships.findMany({\n            where: {\n                communityId: teamId,\n                startDate: {\n                    gte: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)\n                }\n            },\n            select: {\n                startDate: true,\n                status: true\n            },\n            orderBy: {\n                startDate: 'asc'\n            }\n        })\n    ]);\n    return {\n        memberStats: memberStats.reduce((acc, stat)=>{\n            acc[stat.status] = stat._count;\n            return acc;\n        }, {}),\n        revenue: {\n            totalRevenue: revenueStats._sum.amount || 0,\n            trainerEarnings: revenueStats._sum.trainerEarnings || 0,\n            totalPayments: revenueStats._count\n        },\n        trends: {\n            recentJoins: membershipTrends.length,\n            dailyJoins: membershipTrends.reduce((acc, membership)=>{\n                const date = membership.startDate.toISOString().split('T')[0];\n                acc[date] = (acc[date] || 0) + 1;\n                return acc;\n            }, {})\n        }\n    };\n}\n// ============================================================================\n// CHALLENGES & COMPETITIONS\n// ============================================================================\n/**\n * Create challenge with validation\n */ async function createChallenge(data) {\n    const challenge = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.create({\n        data: {\n            id: crypto.randomUUID(),\n            title: data.title,\n            description: data.description,\n            creatorId: data.creatorId,\n            type: data.type,\n            category: data.category,\n            difficulty: data.difficulty,\n            startDate: data.startDate,\n            endDate: data.endDate,\n            isPublic: data.isPublic ?? true,\n            maxParticipants: data.maxParticipants ?? null,\n            entryFee: data.entryFee ?? 0,\n            currency: data.currency ?? 'EUR',\n            prizePool: data.prizePool ?? 0,\n            rules: data.rules ?? null,\n            metrics: data.metrics ?? {},\n            rewards: data.rewards ?? [],\n            coverImage: data.coverImage ?? null,\n            tags: data.tags ?? [],\n            status: 'UPCOMING'\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    image: true,\n                    trainerVerified: true\n                }\n            }\n        }\n    });\n    console.log('Challenge created:', {\n        challengeId: challenge.id,\n        title: challenge.title,\n        creatorId: data.creatorId\n    });\n    return challenge;\n}\n/**\n * Get challenges with filtering\n */ async function getChallenges(params) {\n    const page = params.page || 1;\n    const limit = params.limit || 20;\n    const skip = (page - 1) * limit;\n    const where = {\n        ...params.creatorId && {\n            creatorId: params.creatorId\n        },\n        ...params.category && {\n            category: params.category\n        },\n        ...params.difficulty && {\n            difficulty: params.difficulty\n        },\n        ...params.status && {\n            status: params.status\n        },\n        ...params.type && {\n            type: params.type\n        },\n        ...params.isPublic !== undefined && {\n            isPublic: params.isPublic\n        },\n        ...params.search && {\n            OR: [\n                {\n                    title: {\n                        contains: params.search,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    description: {\n                        contains: params.search,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    tags: {\n                        has: params.search\n                    }\n                }\n            ]\n        }\n    };\n    const [challenges, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.findMany({\n            where,\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        image: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        challenge_participants: {\n                            where: {\n                                status: 'REGISTERED'\n                            }\n                        }\n                    }\n                },\n                ...params.userId && {\n                    challenge_participants: {\n                        where: {\n                            userId: params.userId\n                        },\n                        select: {\n                            status: true,\n                            joinedAt: true,\n                            rank: true\n                        }\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    status: 'asc'\n                },\n                {\n                    startDate: 'asc'\n                },\n                {\n                    createdAt: 'desc'\n                }\n            ],\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.count({\n            where\n        })\n    ]);\n    return {\n        challenges: challenges.map((challenge)=>({\n                ...challenge,\n                userParticipation: challenge.participants?.[0] || null\n            })),\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Join challenge\n */ async function joinChallenge(challengeId, userId, paymentId) {\n    // Get challenge details\n    const challenge = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.findUnique({\n        where: {\n            id: challengeId\n        },\n        select: {\n            id: true,\n            status: true,\n            maxParticipants: true,\n            currentParticipants: true,\n            entryFee: true\n        }\n    });\n    if (!challenge) {\n        throw new Error('Challenge not found');\n    }\n    if (challenge.status !== 'UPCOMING') {\n        throw new Error('Challenge is not accepting new participants');\n    }\n    // Check participant limits\n    if (challenge.maxParticipants && challenge.currentParticipants >= challenge.maxParticipants) {\n        throw new Error('Challenge is full');\n    }\n    // Check existing participation\n    const existingParticipation = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.findUnique({\n        where: {\n            challengeId_userId: {\n                challengeId,\n                userId\n            }\n        }\n    });\n    if (existingParticipation) {\n        throw new Error('Already participating in this challenge');\n    }\n    // Determine status based on entry fee\n    const status = challenge.entryFee && challenge.entryFee > 0 && !paymentId ? 'PENDING_PAYMENT' : 'REGISTERED';\n    // Create participation\n    const participation = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.create({\n        data: {\n            id: crypto.randomUUID(),\n            challengeId,\n            userId,\n            status: status,\n            paymentId: paymentId ?? null,\n            currentProgress: {}\n        }\n    });\n    // Update challenge participant count if registered\n    if (status === 'REGISTERED') {\n        await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.update({\n            where: {\n                id: challengeId\n            },\n            data: {\n                currentParticipants: {\n                    increment: 1\n                }\n            }\n        });\n    }\n    console.log('User joined challenge:', {\n        challengeId,\n        userId,\n        participationId: participation.id,\n        status\n    });\n    return participation;\n}\n/**\n * Leave challenge\n */ async function leaveChallenge(challengeId, userId) {\n    const participation = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.findUnique({\n        where: {\n            challengeId_userId: {\n                challengeId,\n                userId\n            }\n        },\n        include: {\n            challenges: {\n                select: {\n                    status: true\n                }\n            }\n        }\n    });\n    if (!participation) {\n        throw new Error('Not participating in this challenge');\n    }\n    if (participation.challenges.status === 'ACTIVE') {\n        throw new Error('Cannot leave active challenge');\n    }\n    if (participation.challenges.status === 'COMPLETED') {\n        throw new Error('Cannot leave completed challenge');\n    }\n    // Remove participation\n    await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.delete({\n        where: {\n            id: participation.id\n        }\n    });\n    // Update challenge participant count\n    if (participation.status === 'REGISTERED') {\n        await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenges.update({\n            where: {\n                id: challengeId\n            },\n            data: {\n                currentParticipants: {\n                    decrement: 1\n                }\n            }\n        });\n    }\n    console.log('User left challenge:', {\n        challengeId,\n        userId,\n        participationId: participation.id\n    });\n    return {\n        success: true\n    };\n}\n/**\n * Update challenge progress\n */ async function updateChallengeProgress(challengeId, userId, data) {\n    // Get participation\n    const participation = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.findUnique({\n        where: {\n            challengeId_userId: {\n                challengeId,\n                userId\n            }\n        }\n    });\n    if (!participation) {\n        throw new Error('Not participating in this challenge');\n    }\n    if (participation.status !== 'REGISTERED') {\n        throw new Error('Must be registered to update progress');\n    }\n    // Create progress entry\n    const progressEntry = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_progress.create({\n        data: {\n            id: crypto.randomUUID(),\n            participantId: participation.id,\n            date: data.date,\n            metrics: data.metrics,\n            notes: data.notes ?? null,\n            proofImages: data.proofImages || [],\n            isVerified: false\n        }\n    });\n    // Update aggregated progress\n    const allProgress = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_progress.findMany({\n        where: {\n            participantId: participation.id\n        },\n        orderBy: {\n            date: 'asc'\n        }\n    });\n    const aggregatedProgress = calculateProgressAggregation(allProgress);\n    await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_participants.update({\n        where: {\n            id: participation.id\n        },\n        data: {\n            currentProgress: aggregatedProgress,\n            updatedAt: new Date()\n        }\n    });\n    console.log('Challenge progress updated:', {\n        challengeId,\n        userId,\n        progressId: progressEntry.id\n    });\n    return {\n        progressEntry,\n        aggregatedProgress\n    };\n}\n/**\n * Get challenge leaderboard\n */ async function getChallengeLeaderboard(challengeId, params) {\n    const page = params.page || 1;\n    const limit = params.limit || 50;\n    const skip = (page - 1) * limit;\n    const [leaderboard, total] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_leaderboard.findMany({\n            where: {\n                challengeId\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        image: true\n                    }\n                }\n            },\n            orderBy: {\n                rank: 'asc'\n            },\n            skip,\n            take: limit\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_leaderboard.count({\n            where: {\n                challengeId\n            }\n        })\n    ]);\n    return {\n        leaderboard,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Calculate progress aggregation\n */ function calculateProgressAggregation(progressEntries) {\n    const aggregated = {};\n    progressEntries.forEach((entry)=>{\n        if (entry.metrics && typeof entry.metrics === 'object') {\n            Object.keys(entry.metrics).forEach((metric)=>{\n                if (!aggregated[metric]) {\n                    aggregated[metric] = {\n                        total: 0,\n                        count: 0,\n                        latest: 0\n                    };\n                }\n                const value = parseFloat(entry.metrics[metric]) || 0;\n                aggregated[metric].total += value;\n                aggregated[metric].count += 1;\n                aggregated[metric].latest = value;\n            });\n        }\n    });\n    // Calculate averages\n    Object.keys(aggregated).forEach((metric)=>{\n        if (aggregated[metric].count > 0) {\n            aggregated[metric].average = aggregated[metric].total / aggregated[metric].count;\n        }\n    });\n    return aggregated;\n}\n// ============================================================================\n// PRIVACY-CONTROLLED LEADERBOARDS\n// ============================================================================\n/**\n * Get privacy-controlled leaderboard data\n */ async function getPrivacyControlledLeaderboard(params) {\n    const page = params.page || 1;\n    const limit = Math.min(params.limit || 50, 100);\n    const skip = (page - 1) * limit;\n    // Calculate timeframe dates\n    const timeframeDates = calculateTimeframeRange(params.timeframe || 'all_time');\n    let leaderboardData = [];\n    let total = 0;\n    switch(params.type){\n        case 'workout':\n            ({ leaderboardData, total } = await buildWorkoutLeaderboard({\n                category: params.category,\n                timeframe: timeframeDates,\n                metric: params.metric || 'total_volume',\n                skip,\n                limit,\n                userId: params.userId\n            }));\n            break;\n        case 'challenge':\n            ({ leaderboardData, total } = await buildChallengeLeaderboard({\n                timeframe: timeframeDates,\n                skip,\n                limit,\n                userId: params.userId\n            }));\n            break;\n        case 'team':\n            ({ leaderboardData, total } = await buildTeamLeaderboard({\n                timeframe: timeframeDates,\n                skip,\n                limit,\n                userId: params.userId\n            }));\n            break;\n        default:\n            // Default to workout leaderboard for global\n            ({ leaderboardData, total } = await buildWorkoutLeaderboard({\n                category: null,\n                timeframe: timeframeDates,\n                metric: params.metric || 'total_volume',\n                skip,\n                limit,\n                userId: params.userId\n            }));\n    }\n    // Apply privacy controls\n    const processedLeaderboard = leaderboardData.map((entry, index)=>applyLeaderboardPrivacyControls(entry, params.userId, skip + index + 1, params.includeAnonymous)).filter((entry)=>entry !== null);\n    return {\n        leaderboard: processedLeaderboard,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Update user privacy settings\n */ async function updateUserPrivacySettings(userId, settings) {\n    // Model no longer stores privacy settings on User. Simulate update by returning merged object.\n    const updatedUser = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            id: true\n        }\n    });\n    const updatedSettings = {\n        ...settings,\n        lastUpdated: new Date().toISOString()\n    };\n    return {\n        id: updatedUser?.id || userId,\n        privacySettings: updatedSettings\n    };\n}\n/**\n * Get user's privacy settings\n */ async function getUserPrivacySettings(userId) {\n    const user = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            id: true\n        }\n    });\n    if (!user) {\n        throw new Error('User not found');\n    }\n    // Default privacy settings\n    const defaultSettings = {\n        allowLeaderboards: true,\n        allowPublicProfile: true,\n        allowWorkoutSharing: true,\n        allowChallengeParticipation: true,\n        allowTeamVisibility: true,\n        leaderboardVisibilityLevel: 'public',\n        profileVisibilityLevel: 'public',\n        workoutDataVisibility: 'summary',\n        showRealName: true,\n        showProfileImage: true,\n        showLocation: false,\n        showPersonalRecords: true,\n        allowDirectMessages: true\n    };\n    return defaultSettings;\n}\n/**\n * Build workout leaderboard\n */ async function buildWorkoutLeaderboard(params) {\n    const { category, timeframe, metric, skip, limit } = params;\n    const whereClause = {\n        isComplete: true,\n        ...timeframe.start && {\n            startTime: {\n                gte: timeframe.start,\n                lte: timeframe.end\n            }\n        },\n        ...category && {\n            entries: {\n                some: {\n                    exercise: {\n                        category: category\n                    }\n                }\n            }\n        }\n    };\n    const workoutStats = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.workout_sessions.groupBy({\n        by: [\n            'userId'\n        ],\n        where: whereClause,\n        _sum: {\n            totalVolume: true,\n            duration: true\n        },\n        _count: {\n            id: true\n        },\n        _avg: {\n            totalVolume: true,\n            duration: true\n        }\n    });\n    // Sort by metric\n    const sortedStats = workoutStats.sort((a, b)=>{\n        const valueA = getLeaderboardMetricValue(a, metric);\n        const valueB = getLeaderboardMetricValue(b, metric);\n        return valueB - valueA;\n    });\n    const total = sortedStats.length;\n    const paginatedStats = sortedStats.slice(skip, skip + limit);\n    // Get user details\n    const userIds = paginatedStats.map((stat)=>stat.userId);\n    const users = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findMany({\n        where: {\n            id: {\n                in: userIds\n            }\n        },\n        select: {\n            id: true,\n            name: true,\n            image: true\n        }\n    });\n    const userMap = users.reduce((acc, user)=>{\n        acc[user.id] = user;\n        return acc;\n    }, {});\n    const leaderboardData = paginatedStats.map((stat, index)=>({\n            userId: stat.userId,\n            user: userMap[stat.userId],\n            rank: skip + index + 1,\n            score: getLeaderboardMetricValue(stat, metric),\n            metrics: {\n                totalVolume: stat._sum.totalVolume || 0,\n                totalWorkouts: stat._count.id,\n                avgVolume: stat._avg.totalVolume || 0,\n                totalDuration: stat._sum.duration || 0,\n                avgDuration: stat._avg.duration || 0\n            },\n            type: 'workout'\n        }));\n    return {\n        leaderboardData,\n        total\n    };\n}\n/**\n * Build challenge leaderboard\n */ async function buildChallengeLeaderboard(params) {\n    const { timeframe, skip, limit } = params;\n    const whereClause = {\n        ...timeframe.start && {\n            lastUpdated: {\n                gte: timeframe.start,\n                lte: timeframe.end\n            }\n        }\n    };\n    const challengeStats = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.challenge_leaderboard.groupBy({\n        by: [\n            'userId'\n        ],\n        where: whereClause,\n        _sum: {\n            score: true\n        },\n        _count: {\n            id: true\n        },\n        _avg: {\n            score: true,\n            rank: true\n        }\n    });\n    const sortedStats = challengeStats.sort((a, b)=>(b._sum.score || 0) - (a._sum.score || 0));\n    const total = sortedStats.length;\n    const paginatedStats = sortedStats.slice(skip, skip + limit);\n    const userIds = paginatedStats.map((stat)=>stat.userId);\n    const users = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findMany({\n        where: {\n            id: {\n                in: userIds\n            }\n        },\n        select: {\n            id: true,\n            name: true,\n            image: true\n        }\n    });\n    const userMap = users.reduce((acc, user)=>{\n        acc[user.id] = user;\n        return acc;\n    }, {});\n    const leaderboardData = paginatedStats.map((stat, index)=>({\n            userId: stat.userId,\n            user: userMap[stat.userId],\n            rank: skip + index + 1,\n            score: stat._sum.score || 0,\n            metrics: {\n                totalChallengeScore: stat._sum.score || 0,\n                challengesParticipated: stat._count.id,\n                avgScore: stat._avg.score || 0,\n                avgRank: stat._avg.rank || 0\n            },\n            type: 'challenge'\n        }));\n    return {\n        leaderboardData,\n        total\n    };\n}\n/**\n * Build team leaderboard\n */ async function buildTeamLeaderboard(params) {\n    const { timeframe, skip, limit } = params;\n    const teamStats = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.premium_communities.findMany({\n        where: {\n            isActive: true,\n            ...timeframe.start && {\n                createdAt: {\n                    gte: timeframe.start,\n                    lte: timeframe.end\n                }\n            }\n        },\n        select: {\n            ownerId: true,\n            currentMembers: true,\n            name: true\n        }\n    });\n    // Aggregate by owner\n    const ownerStats = teamStats.reduce((acc, team)=>{\n        if (!acc[team.ownerId]) {\n            acc[team.ownerId] = {\n                userId: team.ownerId,\n                totalMembers: 0,\n                teamsCreated: 0\n            };\n        }\n        acc[team.ownerId].totalMembers += team.currentMembers;\n        acc[team.ownerId].teamsCreated += 1;\n        return acc;\n    }, {});\n    const sortedStats = Object.values(ownerStats).sort((a, b)=>b.totalMembers - a.totalMembers);\n    const total = sortedStats.length;\n    const paginatedStats = sortedStats.slice(skip, skip + limit);\n    const userIds = paginatedStats.map((stat)=>stat.userId);\n    const users = await _client__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findMany({\n        where: {\n            id: {\n                in: userIds\n            }\n        },\n        select: {\n            id: true,\n            name: true,\n            image: true\n        }\n    });\n    const userMap = users.reduce((acc, user)=>{\n        acc[user.id] = user;\n        return acc;\n    }, {});\n    const leaderboardData = paginatedStats.map((stat, index)=>({\n            userId: stat.userId,\n            user: userMap[stat.userId],\n            rank: skip + index + 1,\n            score: stat.totalMembers,\n            metrics: {\n                totalMembers: stat.totalMembers,\n                teamsCreated: stat.teamsCreated,\n                avgMembersPerTeam: stat.totalMembers / stat.teamsCreated\n            },\n            type: 'team'\n        }));\n    return {\n        leaderboardData,\n        total\n    };\n}\n/**\n * Apply privacy controls to leaderboard entry\n */ function applyLeaderboardPrivacyControls(entry, currentUserId, position, includeAnonymous) {\n    const isOwnEntry = entry.userId === currentUserId;\n    const user = entry.user;\n    if (!user) return null;\n    // Check user privacy settings\n    const privacySettings = user.privacySettings || {};\n    const allowLeaderboards = privacySettings.allowLeaderboards !== false;\n    const allowPublicProfile = privacySettings.allowPublicProfile !== false;\n    // If user doesn't allow leaderboards and it's not their own entry, hide completely\n    if (!allowLeaderboards && !isOwnEntry && !includeAnonymous) {\n        return null;\n    }\n    // If user doesn't allow public profile, anonymize\n    if (!allowPublicProfile && !isOwnEntry) {\n        return {\n            ...entry,\n            user: {\n                id: 'anonymous',\n                name: `User #${position}`,\n                image: null,\n                isAnonymized: true\n            },\n            isAnonymized: true\n        };\n    }\n    // Show normal entry\n    return {\n        ...entry,\n        isCurrentUser: isOwnEntry,\n        isAnonymized: false\n    };\n}\n/**\n * Calculate timeframe range\n */ function calculateTimeframeRange(timeframe) {\n    const now = new Date();\n    switch(timeframe){\n        case 'daily':\n            return {\n                start: new Date(now.getFullYear(), now.getMonth(), now.getDate()),\n                end: new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1)\n            };\n        case 'weekly':\n            const weekStart = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n            return {\n                start: weekStart,\n                end: now\n            };\n        case 'monthly':\n            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n            return {\n                start: monthStart,\n                end: now\n            };\n        case 'yearly':\n            const yearStart = new Date(now.getFullYear(), 0, 1);\n            return {\n                start: yearStart,\n                end: now\n            };\n        default:\n            return {\n                start: null,\n                end: null\n            };\n    }\n}\n/**\n * Get metric value for leaderboard sorting\n */ function getLeaderboardMetricValue(stat, metric) {\n    switch(metric){\n        case 'total_volume':\n            return stat._sum.totalVolume || 0;\n        case 'total_workouts':\n            return stat._count.id;\n        case 'avg_volume':\n            return stat._avg.totalVolume || 0;\n        case 'total_duration':\n            return stat._sum.duration || 0;\n        default:\n            return stat._sum.totalVolume || 0;\n    }\n} // Note: named exports are declared inline above; avoid re-export block to prevent duplicate symbol errors\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9kYXRhYmFzZS9zYWZldHktYnVzaW5lc3MtcXVlcmllcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsOEJBQThCO0FBRTlCOzs7Q0FHQyxHQUVpQztBQUVsQyxnRUFBZ0U7QUFDekQsTUFBTUMsV0FBVztJQUN0QkMsUUFBUTtJQUNSQyxTQUFTO0lBQ1RDLE9BQU87QUFDVCxFQUFXO0FBRUosTUFBTUMsYUFBYTtJQUN4QkMsUUFBUTtJQUNSQyxXQUFXO0lBQ1hDLFFBQVE7QUFDVixFQUFXO0FBRUosTUFBTUMsZ0JBQWdCO0lBQzNCQyxZQUFZO0lBQ1pDLGFBQWE7SUFDYkMsUUFBUTtJQUNSQyx1QkFBdUI7SUFDdkJDLE1BQU07SUFDTkMsbUJBQW1CO0FBQ3JCLEVBQVc7QUFFSixNQUFNQyxtQkFBbUI7SUFDOUJDLFVBQVU7SUFDVkMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLFNBQVM7QUFDWCxFQUFXO0FBRUosTUFBTUMsbUJBQW1CO0lBQzlCQyxRQUFRO0lBQ1JDLGNBQWM7SUFDZEMsUUFBUTtBQUNWLEVBQVc7QUE0RlgsK0VBQStFO0FBQy9FLHNCQUFzQjtBQUN0QiwrRUFBK0U7QUFFL0U7O0NBRUMsR0FDTSxlQUFlQyxxQkFBcUJDLE1BQWM7SUFTdkQsTUFBTUMsT0FBTyxNQUFNM0IsMkNBQU1BLENBQUM0QixLQUFLLENBQUNDLFVBQVUsQ0FBQztRQUN6Q0MsT0FBTztZQUFFQyxJQUFJTDtRQUFPO1FBQ3BCTSxRQUFRO1lBQ05ELElBQUk7WUFDSkUsT0FBTztZQUNQQyxNQUFNO1lBQ05DLE9BQU87WUFDUEMsTUFBTTtZQUNOQyxRQUFRO1lBQ1JDLGlCQUFpQjtZQUNqQkMsY0FBYztZQUNkQyxpQkFBaUI7WUFDakJDLGdCQUFnQjtZQUNoQkMsV0FBVztZQUNYQyxhQUFhO1FBQ2Y7SUFDRjtJQUVBLElBQUksQ0FBQ2hCLE1BQU07UUFD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LEtBQUs1TDtZQUFJO1FBQ3RDLEtBQUs7WUFDSCxNQUFNZ2IsYUFBYSxJQUFJamIsS0FBS0MsSUFBSTZNLFdBQVcsSUFBSTdNLElBQUk4TSxRQUFRLElBQUk7WUFDL0QsT0FBTztnQkFBRW5CLE9BQU9xUDtnQkFBWXBQLEtBQUs1TDtZQUFJO1FBQ3ZDLEtBQUs7WUFDSCxNQUFNaWIsWUFBWSxJQUFJbGIsS0FBS0MsSUFBSTZNLFdBQVcsSUFBSSxHQUFHO1lBQ2pELE9BQU87Z0JBQUVsQixPQUFPc1A7Z0JBQVdyUCxLQUFLNUw7WUFBSTtRQUN0QztZQUNFLE9BQU87Z0JBQUUyTCxPQUFPO2dCQUFNQyxLQUFLO1lBQUs7SUFDcEM7QUFDRjtBQUVBOztDQUVDLEdBQ0QsU0FBU3dOLDBCQUEwQnBHLElBQVMsRUFBRXdELE1BQWM7SUFDMUQsT0FBUUE7UUFDTixLQUFLO1lBQ0gsT0FBT3hELEtBQUs3RixJQUFJLENBQUM2TCxXQUFXLElBQUk7UUFDbEMsS0FBSztZQUNILE9BQU9oRyxLQUFLOU8sTUFBTSxDQUFDM0YsRUFBRTtRQUN2QixLQUFLO1lBQ0gsT0FBT3lVLEtBQUtpRyxJQUFJLENBQUNELFdBQVcsSUFBSTtRQUNsQyxLQUFLO1lBQ0gsT0FBT2hHLEtBQUs3RixJQUFJLENBQUNoQyxRQUFRLElBQUk7UUFDL0I7WUFDRSxPQUFPNkgsS0FBSzdGLElBQUksQ0FBQzZMLFdBQVcsSUFBSTtJQUNwQztBQUNGLEVBRUEsMEdBQTBHIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2NvcmUvZGF0YWJhc2Uvc2FmZXR5LWJ1c2luZXNzLXF1ZXJpZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9kYXRhYmFzZS9xdWVyaWVzLnRzXG5cbi8qKlxuICogU2FmZXR5LVJlbGF0ZWQgRGF0YWJhc2UgUXVlcmllcyBmb3IgTWFzc2ltaW5vXG4gKiBPcHRpbWl6ZWQgcXVlcmllcyBmb3IgdXNlciBzYWZldHksIG1vZGVyYXRpb24sIGFuZCBzZWN1cml0eSBvcGVyYXRpb25zXG4gKi9cblxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnLi9jbGllbnQnO1xuXG4vLyBEZWZpbmUgdHlwZXMgbG9jYWxseSBzaW5jZSBQcmlzbWEgY2xpZW50IG1heSBub3QgYmUgYXZhaWxhYmxlXG5leHBvcnQgY29uc3QgVXNlclJvbGUgPSB7XG4gIENMSUVOVDogJ0NMSUVOVCcsXG4gIFRSQUlORVI6ICdUUkFJTkVSJyxcbiAgQURNSU46ICdBRE1JTicsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgVXNlclN0YXR1cyA9IHtcbiAgQUNUSVZFOiAnQUNUSVZFJyxcbiAgU1VTUEVOREVEOiAnU1VTUEVOREVEJyxcbiAgQkFOTkVEOiAnQkFOTkVEJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBWaW9sYXRpb25UeXBlID0ge1xuICBIQVJBU1NNRU5UOiAnSEFSQVNTTUVOVCcsXG4gIEhBVEVfU1BFRUNIOiAnSEFURV9TUEVFQ0gnLFxuICBUSFJFQVQ6ICdUSFJFQVQnLFxuICBJTkFQUFJPUFJJQVRFX0NPTlRFTlQ6ICdJTkFQUFJPUFJJQVRFX0NPTlRFTlQnLFxuICBTUEFNOiAnU1BBTScsXG4gIFBSSVZBQ1lfVklPTEFUSU9OOiAnUFJJVkFDWV9WSU9MQVRJT04nLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IE1vZGVyYXRpb25BY3Rpb24gPSB7XG4gIEFQUFJPVkVEOiAnQVBQUk9WRUQnLFxuICBGTEFHR0VEOiAnRkxBR0dFRCcsXG4gIEJMT0NLRUQ6ICdCTE9DS0VEJyxcbiAgREVMRVRFRDogJ0RFTEVURUQnLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IGNvbnN0IE1vZGVyYXRpb25Tb3VyY2UgPSB7XG4gIE9QRU5BSTogJ09QRU5BSScsXG4gIENVU1RPTV9SVUxFUzogJ0NVU1RPTV9SVUxFUycsXG4gIE1BTlVBTDogJ01BTlVBTCcsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBVc2VyUm9sZVR5cGUgPSB0eXBlb2YgVXNlclJvbGVba2V5b2YgdHlwZW9mIFVzZXJSb2xlXTtcbmV4cG9ydCB0eXBlIFVzZXJTdGF0dXNUeXBlID0gdHlwZW9mIFVzZXJTdGF0dXNba2V5b2YgdHlwZW9mIFVzZXJTdGF0dXNdO1xuZXhwb3J0IHR5cGUgVmlvbGF0aW9uVHlwZVR5cGUgPSB0eXBlb2YgVmlvbGF0aW9uVHlwZVtrZXlvZiB0eXBlb2YgVmlvbGF0aW9uVHlwZV07XG5leHBvcnQgdHlwZSBNb2RlcmF0aW9uQWN0aW9uVHlwZSA9IHR5cGVvZiBNb2RlcmF0aW9uQWN0aW9uW2tleW9mIHR5cGVvZiBNb2RlcmF0aW9uQWN0aW9uXTtcbmV4cG9ydCB0eXBlIE1vZGVyYXRpb25Tb3VyY2VUeXBlID0gdHlwZW9mIE1vZGVyYXRpb25Tb3VyY2Vba2V5b2YgdHlwZW9mIE1vZGVyYXRpb25Tb3VyY2VdO1xuXG4vLyBEZWZpbmUgaW50ZXJmYWNlcyBsb2NhbGx5XG5leHBvcnQgaW50ZXJmYWNlIFNhZmVVc2VyIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgZW1haWw6IHN0cmluZztcbiAgcm9sZTogVXNlclJvbGVUeXBlO1xuICBpbWFnZT86IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1czogVXNlclN0YXR1c1R5cGU7XG4gIHJlcHV0YXRpb25TY29yZTogbnVtYmVyO1xuICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgdHJhaW5lclZlcmlmaWVkOiBib29sZWFuO1xuICBzdXNwZW5kZWRVbnRpbD86IERhdGUgfCBudWxsO1xuICBpc1NhZmU/OiBib29sZWFuO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIGxhc3RMb2dpbkF0PzogRGF0ZSB8IG51bGw7XG59XG5cbi8vIERlZmluZSBtaXNzaW5nIFByaXNtYS1saWtlIHR5cGVzIGxvY2FsbHlcbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XG4gIGlkOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGltYWdlOiBzdHJpbmcgfCBudWxsO1xuICByb2xlOiBVc2VyUm9sZVR5cGU7XG4gIHN0YXR1czogVXNlclN0YXR1c1R5cGU7XG4gIHJlcHV0YXRpb25TY29yZTogbnVtYmVyO1xuICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgdHJhaW5lclZlcmlmaWVkOiBib29sZWFuO1xuICBzdXNwZW5kZWRVbnRpbDogRGF0ZSB8IG51bGw7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xuICBsYXN0TG9naW5BdDogRGF0ZSB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvbkxvZyB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcbiAgY29udGVudFR5cGU6IHN0cmluZztcbiAgY29udGVudElkOiBzdHJpbmc7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uVHlwZTtcbiAgc291cmNlOiBNb2RlcmF0aW9uU291cmNlVHlwZTtcbiAgZmxhZ2dlZFJlYXNvbjogc3RyaW5nIHwgbnVsbDtcbiAgY29uZmlkZW5jZTogbnVtYmVyIHwgbnVsbDtcbiAgb3BlbmFpUmVzcG9uc2U6IGFueTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FmZXR5UmVwb3J0IHtcbiAgaWQ6IHN0cmluZztcbiAgcmVwb3J0ZXJJZDogc3RyaW5nO1xuICByZXBvcnRlZFVzZXJJZDogc3RyaW5nO1xuICByZXBvcnRlZENvbnRlbnRJZDogc3RyaW5nIHwgbnVsbDtcbiAgdmlvbGF0aW9uVHlwZTogVmlvbGF0aW9uVHlwZVR5cGU7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByaW9yaXR5OiBzdHJpbmc7XG4gIHN0YXR1czogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVwZGF0ZWRBdDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2VyVmlvbGF0aW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIHZpb2xhdGlvblR5cGU6IFZpb2xhdGlvblR5cGVUeXBlO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBzZXZlcml0eTogc3RyaW5nO1xuICBhY3Rpb25UYWtlbjogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2FmZXR5U2V0dGluZ3Mge1xuICBpZDogc3RyaW5nO1xuICB1c2VySWQ6IHN0cmluZztcbiAgYXV0b01vZGVyYXRpb25FbmFibGVkOiBib29sZWFuO1xuICByZXBvcnRpbmdFbmFibGVkOiBib29sZWFuO1xuICByZXN0cmljdGVkTW9kZTogYm9vbGVhbjtcbiAgYmxvY2tlZFVzZXJzOiBzdHJpbmdbXTtcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVTRVIgU0FGRVRZIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXQgY29tcHJlaGVuc2l2ZSB1c2VyIHNhZmV0eSBpbmZvcm1hdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclNhZmV0eVByb2ZpbGUodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgdXNlcjogU2FmZVVzZXIgfCBudWxsO1xuICB2aW9sYXRpb25Db3VudDogbnVtYmVyO1xuICByZWNlbnRWaW9sYXRpb25zOiBudW1iZXI7XG4gIHN1c3BlbnNpb25IaXN0b3J5OiBudW1iZXI7XG4gIGxhc3RWaW9sYXRpb24/OiBEYXRlO1xuICByaXNrTGV2ZWw6ICdMT1cnIHwgJ01FRElVTScgfCAnSElHSCcgfCAnQ1JJVElDQUwnO1xuICByZXN0cmljdGlvbnM6IHN0cmluZ1tdO1xufT4ge1xuICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgZW1haWw6IHRydWUsXG4gICAgICBuYW1lOiB0cnVlLFxuICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICByb2xlOiB0cnVlLFxuICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgcmVwdXRhdGlvblNjb3JlOiB0cnVlLFxuICAgICAgd2FybmluZ0NvdW50OiB0cnVlLFxuICAgICAgdHJhaW5lclZlcmlmaWVkOiB0cnVlLFxuICAgICAgc3VzcGVuZGVkVW50aWw6IHRydWUsXG4gICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICBsYXN0TG9naW5BdDogdHJ1ZSxcbiAgICB9LFxuICB9KSBhcyBhbnk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IG51bGwsXG4gICAgICB2aW9sYXRpb25Db3VudDogMCxcbiAgICAgIHJlY2VudFZpb2xhdGlvbnM6IDAsXG4gICAgICBzdXNwZW5zaW9uSGlzdG9yeTogMCxcbiAgICAgIHJpc2tMZXZlbDogJ0xPVycsXG4gICAgICByZXN0cmljdGlvbnM6IFtdLFxuICAgIH07XG4gIH1cblxuICAvLyBHZXQgdmlvbGF0aW9uIHN0YXRpc3RpY3NcbiAgY29uc3QgW3Zpb2xhdGlvbkNvdW50LCByZWNlbnRWaW9sYXRpb25zLCBzdXNwZW5zaW9uSGlzdG9yeSwgbGFzdFZpb2xhdGlvblJlc3VsdF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLnVzZXJfdmlvbGF0aW9ucy5jb3VudCh7IHdoZXJlOiB7IHVzZXJJZCB9IH0pLFxuICAgIHByaXNtYS51c2VyX3Zpb2xhdGlvbnMuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBjcmVhdGVkQXQ6IHsgZ3RlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB9LCAvLyBMYXN0IDMwIGRheXNcbiAgICAgIH0sXG4gICAgfSksXG4gICAgcHJpc21hLnVzZXJfdmlvbGF0aW9ucy5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICB1c2VySWQsXG4gICAgICAgIHN1c3BlbnNpb25Ib3VyczogeyBndDogMCB9LFxuICAgICAgfSxcbiAgICB9KSxcbiAgICBwcmlzbWEudXNlcl92aW9sYXRpb25zLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgIHNlbGVjdDogeyBjcmVhdGVkQXQ6IHRydWUgfSxcbiAgICB9KSxcbiAgXSk7XG5cbiAgLy8gQ2FsY3VsYXRlIHJpc2sgbGV2ZWxcbiAgY29uc3Qgcmlza0xldmVsID0gY2FsY3VsYXRlVXNlclJpc2tMZXZlbChcbiAgICB1c2VyLnJlcHV0YXRpb25TY29yZSxcbiAgICB2aW9sYXRpb25Db3VudCxcbiAgICByZWNlbnRWaW9sYXRpb25zLFxuICAgIHVzZXIud2FybmluZ0NvdW50XG4gICk7XG5cbiAgLy8gRGV0ZXJtaW5lIGFjdGl2ZSByZXN0cmljdGlvbnNcbiAgY29uc3QgcmVzdHJpY3Rpb25zID0gZGV0ZXJtaW5lVXNlclJlc3RyaWN0aW9ucyh1c2VyLCB2aW9sYXRpb25Db3VudCwgcmVjZW50VmlvbGF0aW9ucyk7XG5cbiAgcmV0dXJuIHtcbiAgICB1c2VyOiB1c2VyID8ge1xuICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCAnVW5rbm93bicsXG4gICAgICAuLi4odXNlci5pbWFnZSAmJiB7IGltYWdlOiB1c2VyLmltYWdlIH0pLFxuICAgICAgcm9sZTogdXNlci5yb2xlIGFzIFVzZXJSb2xlVHlwZSxcbiAgICAgIHN0YXR1czogdXNlci5zdGF0dXMgYXMgVXNlclN0YXR1c1R5cGUsXG4gICAgICByZXB1dGF0aW9uU2NvcmU6IHVzZXIucmVwdXRhdGlvblNjb3JlLFxuICAgICAgd2FybmluZ0NvdW50OiB1c2VyLndhcm5pbmdDb3VudCxcbiAgICAgIHRyYWluZXJWZXJpZmllZDogdXNlci50cmFpbmVyVmVyaWZpZWQsXG4gICAgICBzdXNwZW5kZWRVbnRpbDogdXNlci5zdXNwZW5kZWRVbnRpbCB8fCBudWxsLFxuICAgICAgaXNTYWZlOiByaXNrTGV2ZWwgPT09ICdMT1cnICYmIHVzZXIuc3RhdHVzID09PSBVc2VyU3RhdHVzLkFDVElWRSxcbiAgICAgIGNyZWF0ZWRBdDogdXNlci5jcmVhdGVkQXQsXG4gICAgICBsYXN0TG9naW5BdDogdXNlci5sYXN0TG9naW5BdCB8fCBudWxsLFxuICAgIH0gYXMgU2FmZVVzZXIgOiBudWxsLFxuICAgIHZpb2xhdGlvbkNvdW50LFxuICAgIHJlY2VudFZpb2xhdGlvbnMsXG4gICAgc3VzcGVuc2lvbkhpc3RvcnksXG4gICAgLi4uKGxhc3RWaW9sYXRpb25SZXN1bHQ/LmNyZWF0ZWRBdCAmJiB7IGxhc3RWaW9sYXRpb246IGxhc3RWaW9sYXRpb25SZXN1bHQuY3JlYXRlZEF0IH0pLFxuICAgIHJpc2tMZXZlbCxcbiAgICByZXN0cmljdGlvbnMsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHVzZXJzIGZsYWdnZWQgZm9yIHBvdGVudGlhbCBzYWZldHkgY29uY2VybnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZsYWdnZWRVc2VycyhwYXJhbXM6IHtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIG9mZnNldD86IG51bWJlcjtcbiAgcmlza0xldmVsPzogJ01FRElVTScgfCAnSElHSCcgfCAnQ1JJVElDQUwnO1xuICBpbmNsdWRlUmVjZW50PzogYm9vbGVhbjtcbn0pOiBQcm9taXNlPEFycmF5PHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICByb2xlOiBVc2VyUm9sZVR5cGU7XG4gIHJlcHV0YXRpb25TY29yZTogbnVtYmVyO1xuICB3YXJuaW5nQ291bnQ6IG51bWJlcjtcbiAgdmlvbGF0aW9uQ291bnQ6IG51bWJlcjtcbiAgcmVjZW50VmlvbGF0aW9uczogbnVtYmVyO1xuICBsYXN0VmlvbGF0aW9uPzogRGF0ZTtcbiAgcmlza0xldmVsOiBzdHJpbmc7XG59Pj4ge1xuICBjb25zdCB0aGlydHlEYXlzQWdvID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwICogMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gIFxuICAvLyBHZXQgdXNlcnMgd2l0aCBzYWZldHkgY29uY2VybnNcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBPUjogW1xuICAgICAgICB7IHJlcHV0YXRpb25TY29yZTogeyBsdDogNTAgfSB9LFxuICAgICAgICB7IHdhcm5pbmdDb3VudDogeyBndGU6IDIgfSB9LFxuICAgICAgICB7IHN0YXR1czogeyBpbjogW1VzZXJTdGF0dXMuU1VTUEVOREVEXSB9IH0sXG4gICAgICBdLFxuICAgICAgLi4uKHBhcmFtcy5pbmNsdWRlUmVjZW50ICYmIHtcbiAgICAgICAgdmlvbGF0aW9uczoge1xuICAgICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogeyBndGU6IHRoaXJ0eURheXNBZ28gfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgcm9sZTogdHJ1ZSxcbiAgICAgIHJlcHV0YXRpb25TY29yZTogdHJ1ZSxcbiAgICAgIHdhcm5pbmdDb3VudDogdHJ1ZSxcbiAgICAgIHVzZXJfdmlvbGF0aW9uczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBjcmVhdGVkQXQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBvcmRlckJ5OiBbXG4gICAgICB7IHJlcHV0YXRpb25TY29yZTogJ2FzYycgfSxcbiAgICAgIHsgd2FybmluZ0NvdW50OiAnZGVzYycgfSxcbiAgICBdLFxuICAgIHRha2U6IHBhcmFtcy5saW1pdCB8fCA1MCxcbiAgICBza2lwOiBwYXJhbXMub2Zmc2V0IHx8IDAsXG4gIH0pO1xuXG4gIHJldHVybiB1c2Vycy5tYXAoKHVzZXI6IGFueSkgPT4ge1xuICAgIGNvbnN0IHZpb2xhdGlvbkNvdW50ID0gdXNlci52aW9sYXRpb25zLmxlbmd0aDtcbiAgICBjb25zdCByZWNlbnRWaW9sYXRpb25zID0gdXNlci52aW9sYXRpb25zLmZpbHRlcigodjogYW55KSA9PiB2LmNyZWF0ZWRBdCA+PSB0aGlydHlEYXlzQWdvKS5sZW5ndGg7XG4gICAgY29uc3QgbGFzdFZpb2xhdGlvbiA9IHVzZXIudmlvbGF0aW9uc1swXT8uY3JlYXRlZEF0O1xuICAgIFxuICAgIGNvbnN0IHJpc2tMZXZlbCA9IGNhbGN1bGF0ZVVzZXJSaXNrTGV2ZWwoXG4gICAgICB1c2VyLnJlcHV0YXRpb25TY29yZSxcbiAgICAgIHZpb2xhdGlvbkNvdW50LFxuICAgICAgcmVjZW50VmlvbGF0aW9ucyxcbiAgICAgIHVzZXIud2FybmluZ0NvdW50XG4gICAgKTtcblxuICAgIHJldHVybiB7XG4gICAgICBpZDogdXNlci5pZCxcbiAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCAnVW5rbm93bicsXG4gICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgIHJlcHV0YXRpb25TY29yZTogdXNlci5yZXB1dGF0aW9uU2NvcmUsXG4gICAgICB3YXJuaW5nQ291bnQ6IHVzZXIud2FybmluZ0NvdW50LFxuICAgICAgdmlvbGF0aW9uQ291bnQsXG4gICAgICByZWNlbnRWaW9sYXRpb25zLFxuICAgICAgLi4uKGxhc3RWaW9sYXRpb24gJiYgeyBsYXN0VmlvbGF0aW9uIH0pLFxuICAgICAgcmlza0xldmVsLFxuICAgIH07XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyIHNhZmV0eSBzdGF0dXMgYWZ0ZXIgZW5mb3JjZW1lbnQgYWN0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVVc2VyU2FmZXR5U3RhdHVzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgdXBkYXRlczoge1xuICAgIHJlcHV0YXRpb25DaGFuZ2U/OiBudW1iZXI7XG4gICAgd2FybmluZ0NvdW50PzogbnVtYmVyO1xuICAgIHN0YXR1cz86IFVzZXJTdGF0dXNUeXBlO1xuICAgIHN1c3BlbmRlZFVudGlsPzogRGF0ZSB8IG51bGw7XG4gIH1cbik6IFByb21pc2U8VXNlcj4ge1xuICAvLyBVc2UgcmVndWxhciBwcmlzbWEgdHJhbnNhY3Rpb24gaW5zdGVhZCBvZiBzYWZlVHJhbnNhY3Rpb24gZm9yIG5vd1xuICByZXR1cm4gcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHR4LnVzZXJzLmZpbmRVbmlxdWVPclRocm93KHtcbiAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgIHNlbGVjdDogeyByZXB1dGF0aW9uU2NvcmU6IHRydWUgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IG5ld1JlcHV0YXRpb25TY29yZSA9IHVwZGF0ZXMucmVwdXRhdGlvbkNoYW5nZVxuICAgICAgPyBNYXRoLm1heCgwLCBjdXJyZW50VXNlci5yZXB1dGF0aW9uU2NvcmUgKyB1cGRhdGVzLnJlcHV0YXRpb25DaGFuZ2UpXG4gICAgICA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiB0eC51c2Vycy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICAuLi4obmV3UmVwdXRhdGlvblNjb3JlICE9PSB1bmRlZmluZWQgJiYgeyByZXB1dGF0aW9uU2NvcmU6IG5ld1JlcHV0YXRpb25TY29yZSB9KSxcbiAgICAgICAgLi4uKHVwZGF0ZXMud2FybmluZ0NvdW50ICE9PSB1bmRlZmluZWQgJiYgeyB3YXJuaW5nQ291bnQ6IHVwZGF0ZXMud2FybmluZ0NvdW50IH0pLFxuICAgICAgICAuLi4odXBkYXRlcy5zdGF0dXMgJiYgeyBzdGF0dXM6IHVwZGF0ZXMuc3RhdHVzIH0pLFxuICAgICAgICAuLi4odXBkYXRlcy5zdXNwZW5kZWRVbnRpbCAhPT0gdW5kZWZpbmVkICYmIHsgc3VzcGVuZGVkVW50aWw6IHVwZGF0ZXMuc3VzcGVuZGVkVW50aWwgfSksXG4gICAgICB9LFxuICAgIH0pIGFzIFByb21pc2U8VXNlcj47XG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNT0RFUkFUSU9OIExPRyBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIG1vZGVyYXRpb24gbG9nIGVudHJ5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVNb2RlcmF0aW9uTG9nKGRhdGE6IHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICBjb250ZW50SWQ6IHN0cmluZztcbiAgY29udGVudDogc3RyaW5nO1xuICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb25UeXBlO1xuICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2VUeXBlO1xuICBmbGFnZ2VkUmVhc29uPzogc3RyaW5nO1xuICBjb25maWRlbmNlPzogbnVtYmVyO1xuICBvcGVuYWlSZXNwb25zZT86IGFueTtcbn0pOiBQcm9taXNlPE1vZGVyYXRpb25Mb2c+IHtcbiAgcmV0dXJuIHByaXNtYS5tb2RlcmF0aW9uX2xvZ3MuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICAuLi5kYXRhLFxuICAgICAgcHJvY2Vzc2VkQXQ6IG5ldyBEYXRlKCksXG4gICAgfSBhcyBhbnksXG4gIH0pIGFzIFByb21pc2U8TW9kZXJhdGlvbkxvZz47XG59XG5cbi8qKlxuICogR2V0IG1vZGVyYXRpb24gbG9ncyB3aXRoIGFkdmFuY2VkIGZpbHRlcmluZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TW9kZXJhdGlvbkxvZ3MocGFyYW1zOiB7XG4gIHVzZXJJZD86IHN0cmluZztcbiAgYWN0aW9uPzogTW9kZXJhdGlvbkFjdGlvblR5cGU7XG4gIGNvbnRlbnRUeXBlPzogc3RyaW5nO1xuICBkYXRlRnJvbT86IERhdGU7XG4gIGRhdGVUbz86IERhdGU7XG4gIGxpbWl0PzogbnVtYmVyO1xuICBvZmZzZXQ/OiBudW1iZXI7XG4gIGluY2x1ZGVVc2VyPzogYm9vbGVhbjtcbn0pOiBQcm9taXNlPEFycmF5PE1vZGVyYXRpb25Mb2cgJiB7IHVzZXI/OiB7IG5hbWU6IHN0cmluZzsgcm9sZTogVXNlclJvbGVUeXBlIH0gfT4+IHtcbiAgcmV0dXJuIHByaXNtYS5tb2RlcmF0aW9uX2xvZ3MuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICAuLi4ocGFyYW1zLnVzZXJJZCAmJiB7IHVzZXJJZDogcGFyYW1zLnVzZXJJZCB9KSxcbiAgICAgIC4uLihwYXJhbXMuYWN0aW9uICYmIHsgYWN0aW9uOiBwYXJhbXMuYWN0aW9uIGFzIGFueSB9KSxcbiAgICAgIC4uLihwYXJhbXMuY29udGVudFR5cGUgJiYgeyBjb250ZW50VHlwZTogcGFyYW1zLmNvbnRlbnRUeXBlIH0pLFxuICAgICAgLi4uKHBhcmFtcy5kYXRlRnJvbSB8fCBwYXJhbXMuZGF0ZVRvKSAmJiB7XG4gICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgIC4uLihwYXJhbXMuZGF0ZUZyb20gJiYgeyBndGU6IHBhcmFtcy5kYXRlRnJvbSB9KSxcbiAgICAgICAgICAuLi4ocGFyYW1zLmRhdGVUbyAmJiB7IGx0ZTogcGFyYW1zLmRhdGVUbyB9KSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAuLi4ocGFyYW1zLmluY2x1ZGVVc2VyICYmIHtcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pLFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICB0YWtlOiBwYXJhbXMubGltaXQgfHwgNTAsXG4gICAgc2tpcDogcGFyYW1zLm9mZnNldCB8fCAwLFxuICB9KSBhcyBhbnk7XG59XG5cbi8qKlxuICogR2V0IG1vZGVyYXRpb24gc3RhdGlzdGljcyBmb3IgZGFzaGJvYXJkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb2RlcmF0aW9uU3RhdGlzdGljcyh0aW1lZnJhbWU6ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyA9ICdkYXknKTogUHJvbWlzZTx7XG4gIHRvdGFsQWN0aW9uczogbnVtYmVyO1xuICBhY3Rpb25CcmVha2Rvd246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGNvbnRlbnRUeXBlQnJlYWtkb3duOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICBhdmVyYWdlQ29uZmlkZW5jZTogbnVtYmVyO1xuICB0b3BWaW9sYXRpb25SZWFzb25zOiBBcnJheTx7IHJlYXNvbjogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+O1xuICB1c2VyQWN0aXZpdHk6IEFycmF5PHsgdXNlcklkOiBzdHJpbmc7IGFjdGlvbkNvdW50OiBudW1iZXI7IHVzZXJOYW1lPzogc3RyaW5nIH0+O1xufT4ge1xuICBjb25zdCBob3Vyc01hcCA9IHsgZGF5OiAyNCwgd2VlazogMTY4LCBtb250aDogNzIwIH07XG4gIGNvbnN0IHNpbmNlID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIGhvdXJzTWFwW3RpbWVmcmFtZV0gKiA2MCAqIDYwICogMTAwMCk7XG5cbiAgY29uc3QgW2xvZ3MsIHJlYXNvbkNvdW50c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLm1vZGVyYXRpb25fbG9ncy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBjcmVhdGVkQXQ6IHsgZ3RlOiBzaW5jZSB9IH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgYWN0aW9uOiB0cnVlLFxuICAgICAgICBjb250ZW50VHlwZTogdHJ1ZSxcbiAgICAgICAgY29uZmlkZW5jZTogdHJ1ZSxcbiAgICAgICAgdXNlcklkOiB0cnVlLFxuICAgICAgICBmbGFnZ2VkUmVhc29uOiB0cnVlLFxuICAgICAgICB1c2Vyczoge1xuICAgICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pLFxuICAgIHByaXNtYS5tb2RlcmF0aW9uX2xvZ3MuZ3JvdXBCeSh7XG4gICAgICBieTogWydmbGFnZ2VkUmVhc29uJ10sXG4gICAgICB3aGVyZToge1xuICAgICAgICBjcmVhdGVkQXQ6IHsgZ3RlOiBzaW5jZSB9LFxuICAgICAgICBmbGFnZ2VkUmVhc29uOiB7IG5vdDogbnVsbCB9LFxuICAgICAgfSxcbiAgICAgIF9jb3VudDogeyBmbGFnZ2VkUmVhc29uOiB0cnVlIH0sXG4gICAgICBvcmRlckJ5OiB7IF9jb3VudDogeyBmbGFnZ2VkUmVhc29uOiAnZGVzYycgfSB9LFxuICAgICAgdGFrZTogMTAsXG4gICAgfSksXG4gIF0pO1xuXG4gIC8vIENhbGN1bGF0ZSBzdGF0aXN0aWNzXG4gIGNvbnN0IHRvdGFsQWN0aW9ucyA9IGxvZ3MubGVuZ3RoO1xuICBcbiAgY29uc3QgYWN0aW9uQnJlYWtkb3duOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIGNvbnN0IGNvbnRlbnRUeXBlQnJlYWtkb3duOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIGNvbnN0IHVzZXJBY3Rpdml0eTogUmVjb3JkPHN0cmluZywgeyBjb3VudDogbnVtYmVyOyBuYW1lPzogc3RyaW5nIH0+ID0ge307XG4gIFxuICBsZXQgdG90YWxDb25maWRlbmNlID0gMDtcbiAgbGV0IGNvbmZpZGVuY2VDb3VudCA9IDA7XG5cbiAgbG9ncy5mb3JFYWNoKGxvZyA9PiB7XG4gICAgLy8gQWN0aW9uIGJyZWFrZG93blxuICAgIGFjdGlvbkJyZWFrZG93bltsb2cuYWN0aW9uXSA9IChhY3Rpb25CcmVha2Rvd25bbG9nLmFjdGlvbl0gfHwgMCkgKyAxO1xuICAgIFxuICAgIC8vIENvbnRlbnQgdHlwZSBicmVha2Rvd25cbiAgICBjb250ZW50VHlwZUJyZWFrZG93bltsb2cuY29udGVudFR5cGVdID0gKGNvbnRlbnRUeXBlQnJlYWtkb3duW2xvZy5jb250ZW50VHlwZV0gfHwgMCkgKyAxO1xuICAgIFxuICAgIC8vIFVzZXIgYWN0aXZpdHlcbiAgICBpZiAobG9nLnVzZXJJZCkge1xuICAgICAgaWYgKCF1c2VyQWN0aXZpdHlbbG9nLnVzZXJJZF0pIHtcbiAgICAgICAgY29uc3QgdXNlckRhdGE6IHsgY291bnQ6IG51bWJlcjsgbmFtZT86IHN0cmluZyB9ID0geyBjb3VudDogMCB9O1xuICAgICAgICBpZiAobG9nLnVzZXJzPy5uYW1lKSB7XG4gICAgICAgICAgdXNlckRhdGEubmFtZSA9IGxvZy51c2Vycy5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHVzZXJBY3Rpdml0eVtsb2cudXNlcklkXSA9IHVzZXJEYXRhO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXJBY3Rpdml0eVtsb2cudXNlcklkXSkge1xuICAgICAgICB1c2VyQWN0aXZpdHlbbG9nLnVzZXJJZF0hLmNvdW50Kys7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENvbmZpZGVuY2UgY2FsY3VsYXRpb25cbiAgICBpZiAobG9nLmNvbmZpZGVuY2UgIT09IG51bGwpIHtcbiAgICAgIHRvdGFsQ29uZmlkZW5jZSArPSBsb2cuY29uZmlkZW5jZTtcbiAgICAgIGNvbmZpZGVuY2VDb3VudCsrO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgYXZlcmFnZUNvbmZpZGVuY2UgPSBjb25maWRlbmNlQ291bnQgPiAwID8gdG90YWxDb25maWRlbmNlIC8gY29uZmlkZW5jZUNvdW50IDogMDtcbiAgXG4gIGNvbnN0IHRvcFZpb2xhdGlvblJlYXNvbnMgPSByZWFzb25Db3VudHMubWFwKHIgPT4gKHtcbiAgICByZWFzb246IHIuZmxhZ2dlZFJlYXNvbiA/PyAnVW5rbm93bicsXG4gICAgY291bnQ6IHIuX2NvdW50LmZsYWdnZWRSZWFzb24sXG4gIH0pKTtcblxuICBjb25zdCB1c2VyQWN0aXZpdHlBcnJheSA9IE9iamVjdC5lbnRyaWVzKHVzZXJBY3Rpdml0eSlcbiAgICAubWFwKChbdXNlcklkLCBkYXRhXSkgPT4gKHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGFjdGlvbkNvdW50OiBkYXRhLmNvdW50LFxuICAgICAgLi4uKGRhdGEubmFtZSAmJiB7IHVzZXJOYW1lOiBkYXRhLm5hbWUgfSksXG4gICAgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuYWN0aW9uQ291bnQgLSBhLmFjdGlvbkNvdW50KVxuICAgIC5zbGljZSgwLCAxMCk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbEFjdGlvbnMsXG4gICAgYWN0aW9uQnJlYWtkb3duLFxuICAgIGNvbnRlbnRUeXBlQnJlYWtkb3duLFxuICAgIGF2ZXJhZ2VDb25maWRlbmNlLFxuICAgIHRvcFZpb2xhdGlvblJlYXNvbnMsXG4gICAgdXNlckFjdGl2aXR5OiB1c2VyQWN0aXZpdHlBcnJheSxcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0FGRVRZIFJFUE9SVFMgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBzYWZldHkgcmVwb3J0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTYWZldHlSZXBvcnQoZGF0YToge1xuICByZXBvcnRlcklkOiBzdHJpbmc7XG4gIHJlcG9ydGVkVXNlcklkOiBzdHJpbmc7XG4gIHZpb2xhdGlvblR5cGU6IFZpb2xhdGlvblR5cGVUeXBlO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBldmlkZW5jZT86IGFueTtcbiAgY29udGVudElkPzogc3RyaW5nO1xuICBjb250ZW50VHlwZT86IHN0cmluZztcbn0pOiBQcm9taXNlPFNhZmV0eVJlcG9ydD4ge1xuICByZXR1cm4gcHJpc21hLnNhZmV0eV9yZXBvcnRzLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAuLi5kYXRhLFxuICAgICAgc3RhdHVzOiAnUEVORElORycsXG4gICAgICBwcmlvcml0eTogZGV0ZXJtaW5lUHJpb3JpdHkoZGF0YS52aW9sYXRpb25UeXBlLCBkYXRhLmRlc2NyaXB0aW9uKSxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9LFxuICB9KSBhcyBhbnk7XG59XG5cbi8qKlxuICogR2V0IHBlbmRpbmcgc2FmZXR5IHJlcG9ydHMgZm9yIHJldmlld1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGVuZGluZ1NhZmV0eVJlcG9ydHMocGFyYW1zOiB7XG4gIHByaW9yaXR5PzogJ0xPVycgfCAnTUVESVVNJyB8ICdISUdIJyB8ICdVUkdFTlQnO1xuICBsaW1pdD86IG51bWJlcjtcbiAgb2Zmc2V0PzogbnVtYmVyO1xufSk6IFByb21pc2U8QXJyYXk8U2FmZXR5UmVwb3J0ICYge1xuICByZXBvcnRlcjogeyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBVc2VyUm9sZVR5cGUgfTtcbiAgcmVwb3J0ZWRVc2VyOiB7IG5hbWU6IHN0cmluZyB8IG51bGw7IHJvbGU6IFVzZXJSb2xlVHlwZTsgcmVwdXRhdGlvblNjb3JlOiBudW1iZXIgfTtcbn0+PiB7XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgUHJpc21hIHR5cGUgbWlzbWF0Y2ggd2l0aCBsb2NhbCB0eXBlc1xuICByZXR1cm4gcHJpc21hLnNhZmV0eV9yZXBvcnRzLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgc3RhdHVzOiB7IGluOiBbJ1BFTkRJTkcnLCAnSU5WRVNUSUdBVElORyddIH0sXG4gICAgICAuLi4ocGFyYW1zLnByaW9yaXR5ICYmIHsgcHJpb3JpdHk6IHBhcmFtcy5wcmlvcml0eSB9KSxcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzX3NhZmV0eV9yZXBvcnRzX3JlcG9ydGVySWRUb3VzZXJzOiB7XG4gICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlLCByb2xlOiB0cnVlIH0sXG4gICAgICB9LFxuICAgICAgdXNlcnNfc2FmZXR5X3JlcG9ydHNfcmVwb3J0ZWRVc2VySWRUb3VzZXJzOiB7XG4gICAgICAgIHNlbGVjdDogeyBuYW1lOiB0cnVlLCByb2xlOiB0cnVlLCByZXB1dGF0aW9uU2NvcmU6IHRydWUgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBvcmRlckJ5OiBbXG4gICAgICB7IHByaW9yaXR5OiAnZGVzYycgfSxcbiAgICAgIHsgY3JlYXRlZEF0OiAnYXNjJyB9LFxuICAgIF0sXG4gICAgdGFrZTogcGFyYW1zLmxpbWl0IHx8IDIwLFxuICAgIHNraXA6IHBhcmFtcy5vZmZzZXQgfHwgMCxcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIHNhZmV0eSByZXBvcnQgc3RhdHVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVTYWZldHlSZXBvcnQoXG4gIHJlcG9ydElkOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IHtcbiAgICBzdGF0dXM/OiAnUEVORElORycgfCAnSU5WRVNUSUdBVElORycgfCAnUkVTT0xWRUQnIHwgJ0RJU01JU1NFRCc7XG4gICAgYXNzaWduZWRUbz86IHN0cmluZztcbiAgICByZXNvbHV0aW9uPzogc3RyaW5nO1xuICAgIGFjdGlvblRha2VuPzogc3RyaW5nO1xuICB9XG4pOiBQcm9taXNlPFNhZmV0eVJlcG9ydD4ge1xuICByZXR1cm4gcHJpc21hLnNhZmV0eV9yZXBvcnRzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHJlcG9ydElkIH0sXG4gICAgZGF0YToge1xuICAgICAgLi4udXBkYXRlcyxcbiAgICAgIC4uLih1cGRhdGVzLnN0YXR1cyA9PT0gJ1JFU09MVkVEJyAmJiB7IHJlc29sdmVkQXQ6IG5ldyBEYXRlKCkgfSksXG4gICAgICAuLi4odXBkYXRlcy5hc3NpZ25lZFRvICYmIHsgXG4gICAgICAgIHN0YXR1czogdXBkYXRlcy5zdGF0dXMgfHwgJ0lOVkVTVElHQVRJTkcnLFxuICAgICAgfSksXG4gICAgfSxcbiAgfSkgYXMgYW55O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVU0VSIFZJT0xBVElPTlMgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSB1c2VyIHZpb2xhdGlvbiByZWNvcmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJWaW9sYXRpb24oZGF0YToge1xuICB1c2VySWQ6IHN0cmluZztcbiAgdmlvbGF0aW9uVHlwZTogVmlvbGF0aW9uVHlwZVR5cGU7XG4gIHNldmVyaXR5OiBudW1iZXI7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbnRlbnRJZD86IHN0cmluZztcbiAgY29udGVudFR5cGU/OiBzdHJpbmc7XG4gIHdhcm5pbmdJc3N1ZWQ6IGJvb2xlYW47XG4gIHN1c3BlbnNpb25Ib3Vycz86IG51bWJlcjtcbiAgcmVwdXRhdGlvbkhpdDogbnVtYmVyO1xuICBtb2RlcmF0aW9uTG9nSWQ/OiBzdHJpbmc7XG59KTogUHJvbWlzZTxVc2VyVmlvbGF0aW9uPiB7XG4gIC8vIFVzZSByZWd1bGFyIHByaXNtYSB0cmFuc2FjdGlvbiBpbnN0ZWFkIG9mIHNhZmVUcmFuc2FjdGlvbiBmb3Igbm93XG4gIC8vIEB0cy1leHBlY3QtZXJyb3IgUHJpc21hIHR5cGUgbWlzbWF0Y2ggd2l0aCBsb2NhbCB0eXBlc1xuICByZXR1cm4gcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICAvLyBDcmVhdGUgdmlvbGF0aW9uIHJlY29yZFxuICAgIGNvbnN0IHZpb2xhdGlvbiA9IGF3YWl0IHR4LnVzZXJfdmlvbGF0aW9ucy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXRpc3RpY3NcbiAgICBpZiAoZGF0YS53YXJuaW5nSXNzdWVkKSB7XG4gICAgICBhd2FpdCB0eC51c2Vycy51cGRhdGUoe1xuICAgICAgICB3aGVyZTogeyBpZDogZGF0YS51c2VySWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHdhcm5pbmdDb3VudDogeyBpbmNyZW1lbnQ6IDEgfSxcbiAgICAgICAgICByZXB1dGF0aW9uU2NvcmU6IHsgZGVjcmVtZW50OiBkYXRhLnJlcHV0YXRpb25IaXQgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB2aW9sYXRpb247XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB1c2VyIHZpb2xhdGlvbiBoaXN0b3J5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyVmlvbGF0aW9uSGlzdG9yeShcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhcmFtcz86IHtcbiAgICBsaW1pdD86IG51bWJlcjtcbiAgICBvZmZzZXQ/OiBudW1iZXI7XG4gICAgaW5jbHVkZVJlc29sdmVkPzogYm9vbGVhbjtcbiAgfVxuKTogUHJvbWlzZTxVc2VyVmlvbGF0aW9uW10+IHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBQcmlzbWEgdHlwZSBtaXNtYXRjaCB3aXRoIGxvY2FsIHR5cGVzXG4gIHJldHVybiBwcmlzbWEudXNlcl92aW9sYXRpb25zLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkLFxuICAgICAgLi4uKHBhcmFtcz8uaW5jbHVkZVJlc29sdmVkID09PSBmYWxzZSAmJiB7IHJlc29sdmVkOiBmYWxzZSB9KSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICB0YWtlOiBwYXJhbXM/LmxpbWl0IHx8IDIwLFxuICAgIHNraXA6IHBhcmFtcz8ub2Zmc2V0IHx8IDAsXG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTQUZFVFkgU0VUVElOR1MgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldCB1c2VyIHNhZmV0eSBzZXR0aW5nc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclNhZmV0eVNldHRpbmdzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxTYWZldHlTZXR0aW5ncyB8IG51bGw+IHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBQcmlzbWEgdHlwZSBtaXNtYXRjaCB3aXRoIGxvY2FsIHR5cGVzXG4gIHJldHVybiBwcmlzbWEuc2FmZXR5U2V0dGluZ3MuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyIHNhZmV0eSBzZXR0aW5nc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclNhZmV0eVNldHRpbmdzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgc2V0dGluZ3M6IFBhcnRpYWw8e1xuICAgIGFsbG93RGlyZWN0TWVzc2FnZXM6IGJvb2xlYW47XG4gICAgYWxsb3dUcmFpbmVyTWVzc2FnZXM6IGJvb2xlYW47XG4gICAgYWxsb3dHcm91cE1lc3NhZ2VzOiBib29sZWFuO1xuICAgIHByb2ZpbGVWaXNpYmlsaXR5OiBzdHJpbmc7XG4gICAgc2hvd09ubGluZVN0YXR1czogYm9vbGVhbjtcbiAgICBzaG93TGFzdFNlZW46IGJvb2xlYW47XG4gICAgYXV0b0Jsb2NrRmxhZ2dlZFVzZXJzOiBib29sZWFuO1xuICAgIHJlcXVpcmVWZXJpZmllZFRyYWluZXJzOiBib29sZWFuO1xuICAgIGNvbnRlbnRGaWx0ZXJTdHJlbmd0aDogc3RyaW5nO1xuICAgIHNhZmV0eUFsZXJ0czogYm9vbGVhbjtcbiAgICBtb2RlcmF0aW9uTm90aWZpY2F0aW9uczogYm9vbGVhbjtcbiAgfT5cbik6IFByb21pc2U8U2FmZXR5U2V0dGluZ3M+IHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvciBQcmlzbWEgdHlwZSBtaXNtYXRjaCB3aXRoIGxvY2FsIHR5cGVzXG4gIHJldHVybiBwcmlzbWEuc2FmZXR5U2V0dGluZ3MudXBzZXJ0KHtcbiAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICBjcmVhdGU6IHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIC4uLnNldHRpbmdzLFxuICAgIH0sXG4gICAgdXBkYXRlOiBzZXR0aW5ncyxcbiAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFOQUxZVElDUyBBTkQgUkVQT1JUSU5HIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXQgc2FmZXR5IGFuYWx5dGljcyBmb3IgYWRtaW4gZGFzaGJvYXJkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTYWZldHlBbmFseXRpY3MoX3RpbWVmcmFtZTogJ3dlZWsnIHwgJ21vbnRoJyB8ICdxdWFydGVyJyA9ICdtb250aCcpOiBQcm9taXNlPHtcbiAgdXNlckdyb3d0aDogQXJyYXk8eyBkYXRlOiBzdHJpbmc7IG5ld1VzZXJzOiBudW1iZXI7IGFjdGl2ZVVzZXJzOiBudW1iZXIgfT47XG4gIHZpb2xhdGlvblRyZW5kczogQXJyYXk8eyBkYXRlOiBzdHJpbmc7IHZpb2xhdGlvbnM6IG51bWJlcjsgc2V2ZXJpdHk6IG51bWJlciB9PjtcbiAgbW9kZXJhdGlvbkVmZmljaWVuY3k6IHtcbiAgICBhdmVyYWdlUmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gICAgYXV0b21hdGlvblJhdGU6IG51bWJlcjtcbiAgICBhcHBlYWxSYXRlOiBudW1iZXI7XG4gIH07XG4gIHJpc2tEaXN0cmlidXRpb246IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIHRyYWluZXJTYWZldHk6IHtcbiAgICB2ZXJpZmllZFRyYWluZXJzOiBudW1iZXI7XG4gICAgZmxhZ2dlZFRyYWluZXJzOiBudW1iZXI7XG4gICAgYXZlcmFnZVJhdGluZzogbnVtYmVyO1xuICB9O1xufT4ge1xuICAvLyBUaGlzIHdvdWxkIGJlIGltcGxlbWVudGVkIHdpdGggY29tcGxleCBhZ2dyZWdhdGlvbiBxdWVyaWVzXG4gIC8vIEZvciBub3csIHJldHVybmluZyBhIHN0cnVjdHVyZWQgcmVzcG9uc2UgZm9yIHRoZSBpbnRlcmZhY2VcbiAgXG4gIHJldHVybiB7XG4gICAgdXNlckdyb3d0aDogW10sXG4gICAgdmlvbGF0aW9uVHJlbmRzOiBbXSxcbiAgICBtb2RlcmF0aW9uRWZmaWNpZW5jeToge1xuICAgICAgYXZlcmFnZVJlc3BvbnNlVGltZTogMCxcbiAgICAgIGF1dG9tYXRpb25SYXRlOiAwLFxuICAgICAgYXBwZWFsUmF0ZTogMCxcbiAgICB9LFxuICAgIHJpc2tEaXN0cmlidXRpb246IHtcbiAgICAgICdMT1cnOiAwLFxuICAgICAgJ01FRElVTSc6IDAsXG4gICAgICAnSElHSCc6IDAsXG4gICAgICAnQ1JJVElDQUwnOiAwLFxuICAgIH0sXG4gICAgdHJhaW5lclNhZmV0eToge1xuICAgICAgdmVyaWZpZWRUcmFpbmVyczogMCxcbiAgICAgIGZsYWdnZWRUcmFpbmVyczogMCxcbiAgICAgIGF2ZXJhZ2VSYXRpbmc6IDAsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBzYWZldHkgcmVwb3J0IGZvciBleHBvcnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU2FmZXR5UmVwb3J0KHBhcmFtczoge1xuICBzdGFydERhdGU6IERhdGU7XG4gIGVuZERhdGU6IERhdGU7XG4gIGluY2x1ZGVVc2VyRGF0YT86IGJvb2xlYW47XG4gIGluY2x1ZGVWaW9sYXRpb25zPzogYm9vbGVhbjtcbiAgaW5jbHVkZU1vZGVyYXRpb24/OiBib29sZWFuO1xufSk6IFByb21pc2U8e1xuICBzdW1tYXJ5OiB7XG4gICAgdG90YWxVc2VyczogbnVtYmVyO1xuICAgIGFjdGl2ZVVzZXJzOiBudW1iZXI7XG4gICAgc3VzcGVuZGVkVXNlcnM6IG51bWJlcjtcbiAgICBiYW5uZWRVc2VyczogbnVtYmVyO1xuICAgIHRvdGFsVmlvbGF0aW9uczogbnVtYmVyO1xuICAgIHJlc29sdmVkUmVwb3J0czogbnVtYmVyO1xuICB9O1xuICBkZXRhaWxzOiBhbnlbXTtcbn0+IHtcbiAgY29uc3Qgc3VtbWFyeSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEudXNlcnMuY291bnQoKSxcbiAgICBwcmlzbWEudXNlcnMuY291bnQoeyB3aGVyZTogeyBzdGF0dXM6IFVzZXJTdGF0dXMuQUNUSVZFIH0gfSksXG4gICAgcHJpc21hLnVzZXJzLmNvdW50KHsgd2hlcmU6IHsgc3RhdHVzOiBVc2VyU3RhdHVzLlNVU1BFTkRFRCB9IH0pLFxuICAgIHByaXNtYS51c2Vycy5jb3VudCh7IHdoZXJlOiB7IHN0YXR1czogVXNlclN0YXR1cy5CQU5ORUQgfSB9KSxcbiAgICBwcmlzbWEudXNlcl92aW9sYXRpb25zLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGNyZWF0ZWRBdDoge1xuICAgICAgICAgIGd0ZTogcGFyYW1zLnN0YXJ0RGF0ZSxcbiAgICAgICAgICBsdGU6IHBhcmFtcy5lbmREYXRlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KSxcbiAgICBwcmlzbWEuc2FmZXR5X3JlcG9ydHMuY291bnQoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3RhdHVzOiAnUkVTT0xWRUQnLFxuICAgICAgICBjcmVhdGVkQXQ6IHtcbiAgICAgICAgICBndGU6IHBhcmFtcy5zdGFydERhdGUsXG4gICAgICAgICAgbHRlOiBwYXJhbXMuZW5kRGF0ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgc3VtbWFyeToge1xuICAgICAgdG90YWxVc2Vyczogc3VtbWFyeVswXSxcbiAgICAgIGFjdGl2ZVVzZXJzOiBzdW1tYXJ5WzFdLFxuICAgICAgc3VzcGVuZGVkVXNlcnM6IHN1bW1hcnlbMl0sXG4gICAgICBiYW5uZWRVc2Vyczogc3VtbWFyeVszXSxcbiAgICAgIHRvdGFsVmlvbGF0aW9uczogc3VtbWFyeVs0XSxcbiAgICAgIHJlc29sdmVkUmVwb3J0czogc3VtbWFyeVs1XSxcbiAgICB9LFxuICAgIGRldGFpbHM6IFtdLCAvLyBXb3VsZCBpbmNsdWRlIGRldGFpbGVkIGRhdGEgYmFzZWQgb24gcGFyYW1zXG4gIH07XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJVFkgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ2FsY3VsYXRlIHVzZXIgcmlzayBsZXZlbCBiYXNlZCBvbiB2YXJpb3VzIGZhY3RvcnNcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlVXNlclJpc2tMZXZlbChcbiAgcmVwdXRhdGlvblNjb3JlOiBudW1iZXIsXG4gIHRvdGFsVmlvbGF0aW9uczogbnVtYmVyLFxuICByZWNlbnRWaW9sYXRpb25zOiBudW1iZXIsXG4gIHdhcm5pbmdDb3VudDogbnVtYmVyXG4pOiAnTE9XJyB8ICdNRURJVU0nIHwgJ0hJR0gnIHwgJ0NSSVRJQ0FMJyB7XG4gIC8vIEhpZ2ggcmlzayBpbmRpY2F0b3JzXG4gIGlmIChyZWNlbnRWaW9sYXRpb25zID49IDMgfHwgdG90YWxWaW9sYXRpb25zID49IDEwIHx8IHdhcm5pbmdDb3VudCA+PSA1KSB7XG4gICAgcmV0dXJuICdDUklUSUNBTCc7XG4gIH1cbiAgXG4gIGlmIChyZWNlbnRWaW9sYXRpb25zID49IDIgfHwgdG90YWxWaW9sYXRpb25zID49IDUgfHwgd2FybmluZ0NvdW50ID49IDMgfHwgcmVwdXRhdGlvblNjb3JlIDwgMjUpIHtcbiAgICByZXR1cm4gJ0hJR0gnO1xuICB9XG4gIFxuICBpZiAocmVjZW50VmlvbGF0aW9ucyA+PSAxIHx8IHRvdGFsVmlvbGF0aW9ucyA+PSAyIHx8IHdhcm5pbmdDb3VudCA+PSAxIHx8IHJlcHV0YXRpb25TY29yZSA8IDUwKSB7XG4gICAgcmV0dXJuICdNRURJVU0nO1xuICB9XG4gIFxuICByZXR1cm4gJ0xPVyc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHVzZXIgcmVzdHJpY3Rpb25zIGJhc2VkIG9uIHNhZmV0eSBwcm9maWxlXG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZVVzZXJSZXN0cmljdGlvbnMoXG4gIHVzZXI6IGFueSxcbiAgdG90YWxWaW9sYXRpb25zOiBudW1iZXIsXG4gIHJlY2VudFZpb2xhdGlvbnM6IG51bWJlclxuKTogc3RyaW5nW10ge1xuICBjb25zdCByZXN0cmljdGlvbnM6IHN0cmluZ1tdID0gW107XG4gIFxuICBpZiAodXNlci5zdGF0dXMgPT09IFVzZXJTdGF0dXMuU1VTUEVOREVEKSB7XG4gICAgcmVzdHJpY3Rpb25zLnB1c2goJ0FDQ09VTlRfU1VTUEVOREVEJyk7XG4gIH1cbiAgXG4gIGlmICh1c2VyLnN0YXR1cyA9PT0gVXNlclN0YXR1cy5CQU5ORUQpIHtcbiAgICByZXN0cmljdGlvbnMucHVzaCgnQUNDT1VOVF9CQU5ORUQnKTtcbiAgfVxuICBcbiAgaWYgKHVzZXIucmVwdXRhdGlvblNjb3JlIDwgMjUpIHtcbiAgICByZXN0cmljdGlvbnMucHVzaCgnTk9fRElSRUNUX01FU1NBR0VTJyk7XG4gIH1cbiAgXG4gIGlmICh1c2VyLndhcm5pbmdDb3VudCA+PSAzIHx8IHJlY2VudFZpb2xhdGlvbnMgPj0gMikge1xuICAgIHJlc3RyaWN0aW9ucy5wdXNoKCdOT19QT1NUX0NSRUFUSU9OJyk7XG4gICAgcmVzdHJpY3Rpb25zLnB1c2goJ05PX0NPTU1VTklUWV9DUkVBVElPTicpO1xuICB9XG4gIFxuICBpZiAodG90YWxWaW9sYXRpb25zID49IDUpIHtcbiAgICByZXN0cmljdGlvbnMucHVzaCgnTElNSVRFRF9JTlRFUkFDVElPTlMnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHJlc3RyaWN0aW9ucztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgcHJpb3JpdHkgZm9yIHNhZmV0eSByZXBvcnRzXG4gKi9cbmZ1bmN0aW9uIGRldGVybWluZVByaW9yaXR5KGNhdGVnb3J5OiBWaW9sYXRpb25UeXBlVHlwZSwgZGVzY3JpcHRpb246IHN0cmluZyk6ICdMT1cnIHwgJ01FRElVTScgfCAnSElHSCcgfCAnVVJHRU5UJyB7XG4gIC8vIEhpZ2ggcHJpb3JpdHkgY2F0ZWdvcmllc1xuICBpZiAoY2F0ZWdvcnkgPT09IFZpb2xhdGlvblR5cGUuVEhSRUFUIHx8IGNhdGVnb3J5ID09PSBWaW9sYXRpb25UeXBlLkhBVEVfU1BFRUNIIHx8IGNhdGVnb3J5ID09PSBWaW9sYXRpb25UeXBlLlBSSVZBQ1lfVklPTEFUSU9OKSB7XG4gICAgcmV0dXJuICdVUkdFTlQnO1xuICB9XG4gIFxuICBpZiAoY2F0ZWdvcnkgPT09IFZpb2xhdGlvblR5cGUuSEFSQVNTTUVOVCB8fCBjYXRlZ29yeSA9PT0gVmlvbGF0aW9uVHlwZS5JTkFQUFJPUFJJQVRFX0NPTlRFTlQpIHtcbiAgICByZXR1cm4gJ0hJR0gnO1xuICB9XG4gIFxuICBpZiAoY2F0ZWdvcnkgPT09IFZpb2xhdGlvblR5cGUuU1BBTSkge1xuICAgIHJldHVybiAnTE9XJztcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZGVzY3JpcHRpb24gZm9yIHVyZ2VudCBrZXl3b3Jkc1xuICBjb25zdCB1cmdlbnRLZXl3b3JkcyA9IFsndGhyZWF0JywgJ2RhbmdlcicsICdoYXJtJywgJ3N1aWNpZGUnLCAndmlvbGVuY2UnXTtcbiAgaWYgKHVyZ2VudEtleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBkZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgIHJldHVybiAnVVJHRU5UJztcbiAgfVxuICBcbiAgcmV0dXJuICdNRURJVU0nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQSEFTRSA1OiBUUkFJTkVSIEJVU0lORVNTIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgb3IgdXBkYXRlIHRyYWluZXIgcHJvZmlsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVUcmFpbmVyUHJvZmlsZSh1c2VySWQ6IHN0cmluZywgZGF0YToge1xuICBidXNpbmVzc05hbWU/OiBzdHJpbmc7XG4gIGJ1c2luZXNzRGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGhvdXJseVJhdGU/OiBudW1iZXI7XG4gIGN1cnJlbmN5Pzogc3RyaW5nO1xuICBzcGVjaWFsaXphdGlvbnM/OiBzdHJpbmdbXTtcbiAgZXhwZXJpZW5jZVllYXJzPzogbnVtYmVyO1xuICBhdmFpbGFibGVIb3Vycz86IGFueTtcbiAgdGltZXpvbmU/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IGV4aXN0aW5nUHJvZmlsZSA9IGF3YWl0IHByaXNtYS50cmFpbmVyX3Byb2ZpbGVzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IHVzZXJJZCB9XG4gIH0pO1xuXG4gIGlmIChleGlzdGluZ1Byb2ZpbGUpIHtcbiAgICByZXR1cm4gcHJpc21hLnRyYWluZXJfcHJvZmlsZXMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZCB9LFxuICAgICAgZGF0YVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwcmlzbWEudHJhaW5lcl9wcm9maWxlcy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICAuLi5kYXRhXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lciBwcm9maWxlIHdpdGggYnVzaW5lc3Mgc3RhdHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWluZXJQcm9maWxlV2l0aFN0YXRzKHRyYWluZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEudHJhaW5lcl9wcm9maWxlcy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdHJhaW5lcklkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcjoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIGVtYWlsOiB0cnVlLFxuICAgICAgICAgIGltYWdlOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9jb3VudDoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICB0cmFpbmVyX2NsaWVudHM6IHsgd2hlcmU6IHsgc3RhdHVzOiAnQUNUSVZFJyB9IH0sXG4gICAgICAgICAgYXBwb2ludG1lbnRzOiB0cnVlLFxuICAgICAgICAgIHRyYWluZXJfcmV2aWV3czogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lciBjbGllbnRzIHdpdGggcGFnaW5hdGlvbiBhbmQgZmlsdGVyc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhaW5lckNsaWVudHMoXG4gIHRyYWluZXJJZDogc3RyaW5nLFxuICBmaWx0ZXJzOiB7XG4gICAgc3RhdHVzPzogc3RyaW5nO1xuICAgIHNlYXJjaD86IHN0cmluZztcbiAgICBwYWdlPzogbnVtYmVyO1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICB9ID0ge31cbikge1xuICBjb25zdCB7IHN0YXR1cywgc2VhcmNoLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gZmlsdGVycztcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICBjb25zdCB3aGVyZTogYW55ID0ge1xuICAgIHRyYWluZXJJZCxcbiAgICAuLi4oc3RhdHVzICYmIHsgc3RhdHVzIH0pLFxuICAgIC4uLihzZWFyY2ggJiYge1xuICAgICAgY2xpZW50OiB7XG4gICAgICAgIE9SOiBbXG4gICAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBzZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICAgIHsgZW1haWw6IHsgY29udGFpbnM6IHNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIH0pXG4gIH07XG5cbiAgY29uc3QgW2NsaWVudHMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEudHJhaW5lcl9jbGllbnRzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2Vyczoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICBpbWFnZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgX2NvdW50OiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBhcHBvaW50bWVudHM6IHRydWUsXG4gICAgICAgICAgICBwcm9ncmVzc19yZXBvcnRzOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0XG4gICAgfSksXG4gICAgcHJpc21hLnRyYWluZXJfY2xpZW50cy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgY2xpZW50cyxcbiAgICB0b3RhbCxcbiAgICBwYWdlLFxuICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICB9O1xufVxuXG4vKipcbiAqIEFkZCBjbGllbnQgdG8gdHJhaW5lclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkQ2xpZW50VG9UcmFpbmVyKHRyYWluZXJJZDogc3RyaW5nLCBjbGllbnRJZDogc3RyaW5nLCBkYXRhOiB7XG4gIG1vbnRobHlSYXRlPzogbnVtYmVyO1xuICBnb2Fscz86IHN0cmluZ1tdO1xuICBub3Rlcz86IHN0cmluZztcbiAgbWVkaWNhbENvbmRpdGlvbnM/OiBzdHJpbmdbXTtcbiAgcHJlZmVyZW5jZXM/OiBhbnk7XG59KSB7XG4gIC8vIENoZWNrIGlmIHJlbGF0aW9uc2hpcCBhbHJlYWR5IGV4aXN0c1xuICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHByaXNtYS50cmFpbmVyX2NsaWVudHMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHRyYWluZXJJZF9jbGllbnRJZDogeyB0cmFpbmVySWQsIGNsaWVudElkIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmIChleGlzdGluZykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdHJhaW5lcicpO1xuICB9XG5cbiAgY29uc3QgcmVsYXRpb25zaGlwID0gYXdhaXQgcHJpc21hLnRyYWluZXJfY2xpZW50cy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdHJhaW5lcklkLFxuICAgICAgY2xpZW50SWQsXG4gICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgLi4uZGF0YVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gVXBkYXRlIHRyYWluZXIncyBjbGllbnQgY291bnRzXG4gIGF3YWl0IHByaXNtYS50cmFpbmVyX3Byb2ZpbGVzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHRyYWluZXJJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGFjdGl2ZUNsaWVudHM6IHsgaW5jcmVtZW50OiAxIH0sXG4gICAgICB0b3RhbENsaWVudHM6IHsgaW5jcmVtZW50OiAxIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiByZWxhdGlvbnNoaXA7XG59XG5cbi8qKlxuICogQ3JlYXRlIGFwcG9pbnRtZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBcHBvaW50bWVudChkYXRhOiB7XG4gIHRyYWluZXJJZDogc3RyaW5nO1xuICBjbGllbnRJZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgc2NoZWR1bGVkQXQ6IERhdGU7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xuICB0eXBlPzogc3RyaW5nO1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgaXNWaXJ0dWFsPzogYm9vbGVhbjtcbiAgcHJpY2U/OiBudW1iZXI7XG4gIGN1cnJlbmN5Pzogc3RyaW5nO1xufSkge1xuICByZXR1cm4gcHJpc21hLmFwcG9pbnRtZW50cy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdHJhaW5lcklkOiBkYXRhLnRyYWluZXJJZCxcbiAgICAgIGNsaWVudElkOiBkYXRhLmNsaWVudElkLFxuICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiA/PyBudWxsLFxuICAgICAgc2NoZWR1bGVkQXQ6IGRhdGEuc2NoZWR1bGVkQXQsXG4gICAgICBkdXJhdGlvbjogZGF0YS5kdXJhdGlvbiB8fCA2MCxcbiAgICAgIHR5cGU6IChkYXRhLnR5cGUgYXMgYW55KSB8fCAnUEVSU09OQUxfVFJBSU5JTkcnLFxuICAgICAgbG9jYXRpb246IGRhdGEubG9jYXRpb24gPz8gbnVsbCxcbiAgICAgIGlzVmlydHVhbDogZGF0YS5pc1ZpcnR1YWwgPz8gZmFsc2UsXG4gICAgICBwcmljZTogZGF0YS5wcmljZSA/PyBudWxsLFxuICAgICAgY3VycmVuY3k6IGRhdGEuY3VycmVuY3kgPz8gJ1VTRCcsXG4gICAgICBzdGF0dXM6ICdTQ0hFRFVMRUQnXG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lciBhcHBvaW50bWVudHMgd2l0aCBmaWx0ZXJzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFpbmVyQXBwb2ludG1lbnRzKFxuICB0cmFpbmVySWQ6IHN0cmluZyxcbiAgZmlsdGVyczoge1xuICAgIHN0YXR1cz86IHN0cmluZ1tdO1xuICAgIGRhdGVSYW5nZT86IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9O1xuICAgIGNsaWVudElkPzogc3RyaW5nO1xuICAgIHBhZ2U/OiBudW1iZXI7XG4gICAgbGltaXQ/OiBudW1iZXI7XG4gIH0gPSB7fVxuKSB7XG4gIGNvbnN0IHsgc3RhdHVzLCBkYXRlUmFuZ2UsIGNsaWVudElkLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gZmlsdGVycztcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICBjb25zdCB3aGVyZTogYW55ID0ge1xuICAgIHRyYWluZXJJZCxcbiAgICAuLi4oc3RhdHVzICYmIHsgc3RhdHVzOiB7IGluOiBzdGF0dXMgfSB9KSxcbiAgICAuLi4oZGF0ZVJhbmdlICYmIHtcbiAgICAgIHNjaGVkdWxlZEF0OiB7XG4gICAgICAgIGd0ZTogZGF0ZVJhbmdlLnN0YXJ0LFxuICAgICAgICBsdGU6IGRhdGVSYW5nZS5lbmRcbiAgICAgIH1cbiAgICB9KSxcbiAgICAuLi4oY2xpZW50SWQgJiYgeyBjbGllbnRJZCB9KVxuICB9O1xuXG4gIGNvbnN0IFthcHBvaW50bWVudHMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEuYXBwb2ludG1lbnRzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2Vyczoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICBpbWFnZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgd29ya291dF9zZXNzaW9uczoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICB0aXRsZTogdHJ1ZSxcbiAgICAgICAgICAgIGlzQ29tcGxldGU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IHNjaGVkdWxlZEF0OiAnYXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0XG4gICAgfSksXG4gICAgcHJpc21hLmFwcG9pbnRtZW50cy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgYXBwb2ludG1lbnRzLFxuICAgIHRvdGFsLFxuICAgIHBhZ2UsXG4gICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gIH07XG59XG5cbi8qKlxuICogVXBkYXRlIGFwcG9pbnRtZW50IHN0YXR1c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQXBwb2ludG1lbnRTdGF0dXMoXG4gIGFwcG9pbnRtZW50SWQ6IHN0cmluZyxcbiAgc3RhdHVzOiBzdHJpbmcsXG4gIHVwZGF0ZXM6IHtcbiAgICB0cmFpbmVyTm90ZXM/OiBzdHJpbmc7XG4gICAgY2xpZW50Tm90ZXM/OiBzdHJpbmc7XG4gICAgcmF0aW5nPzogbnVtYmVyO1xuICAgIGZlZWRiYWNrPzogc3RyaW5nO1xuICAgIGNhbmNlbGxhdGlvblJlYXNvbj86IHN0cmluZztcbiAgICBjYW5jZWxsZWRCeT86IHN0cmluZztcbiAgfSA9IHt9XG4pIHtcbiAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0geyBzdGF0dXMsIC4uLnVwZGF0ZXMgfTtcblxuICBpZiAoc3RhdHVzID09PSAnQ0FOQ0VMTEVEJykge1xuICAgIHVwZGF0ZURhdGEuY2FuY2VsbGVkQXQgPSBuZXcgRGF0ZSgpO1xuICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ0NPTVBMRVRFRCcpIHtcbiAgICB1cGRhdGVEYXRhLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKTtcbiAgfVxuXG4gIHJldHVybiBwcmlzbWEuYXBwb2ludG1lbnRzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IGFwcG9pbnRtZW50SWQgfSxcbiAgICBkYXRhOiB1cGRhdGVEYXRhXG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBwcm9ncmVzcyByZXBvcnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2dyZXNzUmVwb3J0KGRhdGE6IHtcbiAgdHJhaW5lcklkOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIHRyYWluZXJDbGllbnRJZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBzdW1tYXJ5OiBzdHJpbmc7XG4gIHBlcmlvZD86IHN0cmluZztcbiAgZ29hbHM/OiBhbnlbXTtcbiAgYWNoaWV2ZW1lbnRzPzogYW55W107XG4gIG1ldHJpY3M/OiBhbnk7XG4gIHdvcmtvdXRTdGF0cz86IGFueTtcbiAgcmVjb21tZW5kYXRpb25zPzogc3RyaW5nO1xuICBuZXh0R29hbHM/OiBhbnlbXTtcbn0pIHtcbiAgcmV0dXJuIHByaXNtYS5wcm9ncmVzc19yZXBvcnRzLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAuLi5kYXRhLFxuICAgICAgcmVwb3J0RGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIHBlcmlvZDogZGF0YS5wZXJpb2QgfHwgJ01PTlRITFknXG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lcidzIHByb2dyZXNzIHJlcG9ydHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWluZXJQcm9ncmVzc1JlcG9ydHMoXG4gIHRyYWluZXJJZDogc3RyaW5nLFxuICBmaWx0ZXJzOiB7XG4gICAgY2xpZW50SWQ/OiBzdHJpbmc7XG4gICAgcGVyaW9kPzogc3RyaW5nO1xuICAgIGlzU2hhcmVkPzogYm9vbGVhbjtcbiAgICBwYWdlPzogbnVtYmVyO1xuICAgIGxpbWl0PzogbnVtYmVyO1xuICB9ID0ge31cbikge1xuICBjb25zdCB7IGNsaWVudElkLCBwZXJpb2QsIGlzU2hhcmVkLCBwYWdlID0gMSwgbGltaXQgPSAyMCB9ID0gZmlsdGVycztcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICBjb25zdCB3aGVyZTogYW55ID0ge1xuICAgIHRyYWluZXJJZCxcbiAgICAuLi4oY2xpZW50SWQgJiYgeyBjbGllbnRJZCB9KSxcbiAgICAuLi4ocGVyaW9kICYmIHsgcGVyaW9kIH0pLFxuICAgIC4uLihpc1NoYXJlZCAhPT0gdW5kZWZpbmVkICYmIHsgaXNTaGFyZWQgfSlcbiAgfTtcblxuICBjb25zdCBbcmVwb3J0cywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHByaXNtYS5wcm9ncmVzc19yZXBvcnRzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2Vyczoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgICAgICBpbWFnZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHsgcmVwb3J0RGF0ZTogJ2Rlc2MnIH0sXG4gICAgICBza2lwLFxuICAgICAgdGFrZTogbGltaXRcbiAgICB9KSxcbiAgICBwcmlzbWEucHJvZ3Jlc3NfcmVwb3J0cy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgcmVwb3J0cyxcbiAgICB0b3RhbCxcbiAgICBwYWdlLFxuICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICB9O1xufVxuXG4vKipcbiAqIFNoYXJlIHByb2dyZXNzIHJlcG9ydCB3aXRoIGNsaWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hhcmVQcm9ncmVzc1JlcG9ydChyZXBvcnRJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEucHJvZ3Jlc3NfcmVwb3J0cy51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiByZXBvcnRJZCB9LFxuICAgIGRhdGE6IHsgaXNTaGFyZWQ6IHRydWUgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lciBlYXJuaW5ncyBzdW1tYXJ5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFpbmVyRWFybmluZ3MoXG4gIHRyYWluZXJJZDogc3RyaW5nLFxuICBwZXJpb2Q6ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicgPSAnbW9udGgnXG4pIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgbGV0IHN0YXJ0RGF0ZTogRGF0ZTtcblxuICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3llYXInOlxuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDogLy8gbW9udGhcbiAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMSk7XG4gIH1cblxuICBjb25zdCBlYXJuaW5ncyA9IGF3YWl0IHByaXNtYS5wYXltZW50cy5hZ2dyZWdhdGUoe1xuICAgIHdoZXJlOiB7XG4gICAgICB0cmFpbmVySWQsXG4gICAgICBzdGF0dXM6ICdDT01QTEVURUQnLFxuICAgICAgcGF5bWVudERhdGU6IHsgZ3RlOiBzdGFydERhdGUgfVxuICAgIH0sXG4gICAgX3N1bToge1xuICAgICAgYW1vdW50OiB0cnVlLFxuICAgICAgdHJhaW5lckVhcm5pbmdzOiB0cnVlLFxuICAgICAgcGxhdGZvcm1GZWU6IHRydWVcbiAgICB9LFxuICAgIF9jb3VudDogdHJ1ZVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsQW1vdW50OiBlYXJuaW5ncy5fc3VtLmFtb3VudCB8fCAwLFxuICAgIHRyYWluZXJFYXJuaW5nczogZWFybmluZ3MuX3N1bS50cmFpbmVyRWFybmluZ3MgfHwgMCxcbiAgICBwbGF0Zm9ybUZlZTogZWFybmluZ3MuX3N1bS5wbGF0Zm9ybUZlZSB8fCAwLFxuICAgIHRyYW5zYWN0aW9uQ291bnQ6IGVhcm5pbmdzLl9jb3VudCxcbiAgICBwZXJpb2RcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgYXBwb2ludG1lbnQgc2NoZWR1bGluZyBjb25mbGljdHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrQXBwb2ludG1lbnRDb25mbGljdChcbiAgdHJhaW5lcklkOiBzdHJpbmcsXG4gIHNjaGVkdWxlZEF0OiBEYXRlLFxuICBkdXJhdGlvbjogbnVtYmVyID0gNjAsXG4gIGV4Y2x1ZGVBcHBvaW50bWVudElkPzogc3RyaW5nXG4pIHtcbiAgY29uc3QgZW5kVGltZSA9IG5ldyBEYXRlKHNjaGVkdWxlZEF0LmdldFRpbWUoKSArIChkdXJhdGlvbiAqIDYwICogMTAwMCkpO1xuXG4gIHJldHVybiBwcmlzbWEuYXBwb2ludG1lbnRzLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHRyYWluZXJJZCxcbiAgICAgIC4uLihleGNsdWRlQXBwb2ludG1lbnRJZCAmJiB7IGlkOiB7IG5vdDogZXhjbHVkZUFwcG9pbnRtZW50SWQgfSB9KSxcbiAgICAgIHN0YXR1czogeyBpbjogWydTQ0hFRFVMRUQnLCAnQ09ORklSTUVEJywgJ0lOX1BST0dSRVNTJ10gfSxcbiAgICAgIE9SOiBbXG4gICAgICAgIC8vIEFwcG9pbnRtZW50IHN0YXJ0cyBkdXJpbmcgbmV3IGFwcG9pbnRtZW50XG4gICAgICAgIHtcbiAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgIHsgc2NoZWR1bGVkQXQ6IHsgbHRlOiBzY2hlZHVsZWRBdCB9IH0sXG4gICAgICAgICAgICB7IHNjaGVkdWxlZEF0OiB7IGd0ZTogbmV3IERhdGUoc2NoZWR1bGVkQXQuZ2V0VGltZSgpIC0gKDYwICogNjAgKiAxMDAwKSkgfSB9XG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICAvLyBBcHBvaW50bWVudCBlbmRzIGR1cmluZyBuZXcgYXBwb2ludG1lbnRcbiAgICAgICAge1xuICAgICAgICAgIEFORDogW1xuICAgICAgICAgICAgeyBzY2hlZHVsZWRBdDogeyBsdGU6IGVuZFRpbWUgfSB9LFxuICAgICAgICAgICAgeyBzY2hlZHVsZWRBdDogeyBndGU6IHNjaGVkdWxlZEF0IH0gfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IHRyYWluZXIgYXZhaWxhYmlsaXR5IGZvciBkYXRlIHJhbmdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUcmFpbmVyQXZhaWxhYmlsaXR5KFxuICB0cmFpbmVySWQ6IHN0cmluZyxcbiAgc3RhcnREYXRlOiBEYXRlLFxuICBlbmREYXRlOiBEYXRlXG4pIHtcbiAgLy8gR2V0IHRyYWluZXIncyBhdmFpbGFibGUgaG91cnNcbiAgY29uc3QgdHJhaW5lclByb2ZpbGUgPSBhd2FpdCBwcmlzbWEudHJhaW5lcl9wcm9maWxlcy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdHJhaW5lcklkIH0sXG4gICAgc2VsZWN0OiB7IGF2YWlsYWJsZUhvdXJzOiB0cnVlLCB0aW1lem9uZTogdHJ1ZSB9XG4gIH0pO1xuXG4gIC8vIEdldCBleGlzdGluZyBhcHBvaW50bWVudHNcbiAgY29uc3QgYXBwb2ludG1lbnRzID0gYXdhaXQgcHJpc21hLmFwcG9pbnRtZW50cy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHRyYWluZXJJZCxcbiAgICAgIHNjaGVkdWxlZEF0OiB7IGd0ZTogc3RhcnREYXRlLCBsdGU6IGVuZERhdGUgfSxcbiAgICAgIHN0YXR1czogeyBpbjogWydTQ0hFRFVMRUQnLCAnQ09ORklSTUVEJywgJ0lOX1BST0dSRVNTJ10gfVxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIHNjaGVkdWxlZEF0OiB0cnVlLFxuICAgICAgZHVyYXRpb246IHRydWUsXG4gICAgICB0eXBlOiB0cnVlLFxuICAgICAgdGl0bGU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB7XG4gICAgdHJhaW5lclByb2ZpbGUsXG4gICAgYXBwb2ludG1lbnRzLFxuICAgIGRhdGVSYW5nZTogeyBzdGFydERhdGUsIGVuZERhdGUgfVxuICB9O1xufVxuXG4vKipcbiAqIFJlc2NoZWR1bGUgYXBwb2ludG1lbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlc2NoZWR1bGVBcHBvaW50bWVudChcbiAgYXBwb2ludG1lbnRJZDogc3RyaW5nLFxuICBuZXdTY2hlZHVsZWRBdDogRGF0ZSxcbiAgcmVhc29uPzogc3RyaW5nXG4pIHtcbiAgY29uc3QgYXBwb2ludG1lbnQgPSBhd2FpdCBwcmlzbWEuYXBwb2ludG1lbnRzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBhcHBvaW50bWVudElkIH1cbiAgfSk7XG5cbiAgaWYgKCFhcHBvaW50bWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQXBwb2ludG1lbnQgbm90IGZvdW5kJyk7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgY29uZmxpY3RzXG4gIGNvbnN0IGNvbmZsaWN0ID0gYXdhaXQgY2hlY2tBcHBvaW50bWVudENvbmZsaWN0KFxuICAgIGFwcG9pbnRtZW50LnRyYWluZXJJZCxcbiAgICBuZXdTY2hlZHVsZWRBdCxcbiAgICBhcHBvaW50bWVudC5kdXJhdGlvbixcbiAgICBhcHBvaW50bWVudElkXG4gICk7XG5cbiAgaWYgKGNvbmZsaWN0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOZXcgdGltZSBjb25mbGljdHMgd2l0aCBleGlzdGluZyBhcHBvaW50bWVudCcpO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS5hcHBvaW50bWVudHMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogYXBwb2ludG1lbnRJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHNjaGVkdWxlZEF0OiBuZXdTY2hlZHVsZWRBdCxcbiAgICAgIHN0YXR1czogJ1JFU0NIRURVTEVEJyxcbiAgICAgIHRyYWluZXJOb3RlczogcmVhc29uID8gYFJlc2NoZWR1bGVkOiAke3JlYXNvbn1gIDogJ0FwcG9pbnRtZW50IHJlc2NoZWR1bGVkJ1xuICAgIH1cbiAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBIQVNFIDU6IE1PTExJRSBQQVlNRU5UIElOVEVHUkFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIHBheW1lbnQgcmVjb3JkIHdpdGggTW9sbGllIGludGVncmF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVNb2xsaWVQYXltZW50KGRhdGE6IHtcbiAgdHJhaW5lcklkOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIHRyYWluZXJDbGllbnRJZD86IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIHR5cGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgbW9sbGllUGF5bWVudElkOiBzdHJpbmc7XG4gIG1vbGxpZUN1c3RvbWVySWQ/OiBzdHJpbmc7XG4gIHNlc3Npb25EYXRlPzogRGF0ZTtcbiAgcGFja2FnZUlkPzogc3RyaW5nO1xuICBtZXRhZGF0YT86IGFueTtcbn0pIHtcbiAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHByaXNtYS5wYXltZW50cy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdHJhaW5lcklkOiBkYXRhLnRyYWluZXJJZCxcbiAgICAgIGNsaWVudElkOiBkYXRhLmNsaWVudElkLFxuICAgICAgdHJhaW5lckNsaWVudElkOiBkYXRhLnRyYWluZXJDbGllbnRJZCA/PyBudWxsLFxuICAgICAgYW1vdW50OiBkYXRhLmFtb3VudCxcbiAgICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5LFxuICAgICAgdHlwZTogZGF0YS50eXBlIGFzIGFueSxcbiAgICAgIHN0YXR1czogJ1BFTkRJTkcnLFxuICAgICAgbWV0aG9kOiAnTU9MTElFJyxcbiAgICAgIG1vbGxpZVBheW1lbnRJZDogZGF0YS5tb2xsaWVQYXltZW50SWQsXG4gICAgICBtb2xsaWVDdXN0b21lcklkOiBkYXRhLm1vbGxpZUN1c3RvbWVySWQgPz8gbnVsbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgLi4uKGRhdGEuc2Vzc2lvbkRhdGUgPyB7IHNlc3Npb25EYXRlOiBkYXRhLnNlc3Npb25EYXRlIH0gOiB7fSksXG4gICAgICBwYWNrYWdlSWQ6IGRhdGEucGFja2FnZUlkID8/IG51bGwsXG4gICAgICBtZXRhZGF0YTogZGF0YS5tZXRhZGF0YVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc29sZS5sb2coJ1BheW1lbnQgcmVjb3JkIGNyZWF0ZWQ6Jywge1xuICAgIHBheW1lbnRJZDogcGF5bWVudC5pZCxcbiAgICBtb2xsaWVQYXltZW50SWQ6IGRhdGEubW9sbGllUGF5bWVudElkLFxuICAgIGFtb3VudDogZGF0YS5hbW91bnQsXG4gICAgY3VycmVuY3k6IGRhdGEuY3VycmVuY3lcbiAgfSk7XG5cbiAgcmV0dXJuIHBheW1lbnQ7XG59XG5cbi8qKlxuICogVXBkYXRlIHBheW1lbnQgc3RhdHVzIGZyb20gTW9sbGllIHdlYmhvb2tcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBheW1lbnRGcm9tTW9sbGllKG1vbGxpZVBheW1lbnRJZDogc3RyaW5nLCB1cGRhdGVzOiB7XG4gIHN0YXR1czogc3RyaW5nO1xuICBwYXltZW50RGF0ZT86IERhdGU7XG4gIGZhaWx1cmVSZWFzb24/OiBzdHJpbmc7XG4gIHRyYWluZXJFYXJuaW5ncz86IG51bWJlcjtcbiAgcGxhdGZvcm1GZWU/OiBudW1iZXI7XG59KSB7XG4gIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBwcmlzbWEucGF5bWVudHMuZmluZEZpcnN0KHtcbiAgICB3aGVyZTogeyBtb2xsaWVQYXltZW50SWQgfVxuICB9KTtcblxuICBpZiAoIXBheW1lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFBheW1lbnQgbm90IGZvdW5kIGZvciBNb2xsaWUgSUQ6ICR7bW9sbGllUGF5bWVudElkfWApO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlZFBheW1lbnQgPSBhd2FpdCBwcmlzbWEucGF5bWVudHMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogcGF5bWVudC5pZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHN0YXR1czogdXBkYXRlcy5zdGF0dXMgYXMgYW55LFxuICAgICAgLi4uKHVwZGF0ZXMucGF5bWVudERhdGUgPyB7IHBheW1lbnREYXRlOiB1cGRhdGVzLnBheW1lbnREYXRlIH0gOiB7fSksXG4gICAgICAuLi4odXBkYXRlcy5mYWlsdXJlUmVhc29uID8geyBmYWlsdXJlUmVhc29uOiB1cGRhdGVzLmZhaWx1cmVSZWFzb24gfSA6IHt9KSxcbiAgICAgIC4uLih0eXBlb2YgdXBkYXRlcy50cmFpbmVyRWFybmluZ3MgPT09ICdudW1iZXInID8geyB0cmFpbmVyRWFybmluZ3M6IHVwZGF0ZXMudHJhaW5lckVhcm5pbmdzIH0gOiB7fSksXG4gICAgICAuLi4odHlwZW9mIHVwZGF0ZXMucGxhdGZvcm1GZWUgPT09ICdudW1iZXInID8geyBwbGF0Zm9ybUZlZTogdXBkYXRlcy5wbGF0Zm9ybUZlZSB9IDoge30pLFxuICAgIH1cbiAgfSk7XG5cbiAgLy8gVXBkYXRlIHRyYWluZXIgZWFybmluZ3MgaWYgcGF5bWVudCBjb21wbGV0ZWRcbiAgaWYgKHVwZGF0ZXMuc3RhdHVzID09PSAnQ09NUExFVEVEJyAmJiB1cGRhdGVzLnRyYWluZXJFYXJuaW5ncykge1xuICAgIGF3YWl0IHByaXNtYS50cmFpbmVyX3Byb2ZpbGVzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGF5bWVudC50cmFpbmVySWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdG90YWxFYXJuaW5nczogeyBpbmNyZW1lbnQ6IHVwZGF0ZXMudHJhaW5lckVhcm5pbmdzIH0sXG4gICAgICAgIG1vbnRobHlFYXJuaW5nczogeyBpbmNyZW1lbnQ6IHVwZGF0ZXMudHJhaW5lckVhcm5pbmdzIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdQYXltZW50IHVwZGF0ZWQgZnJvbSBNb2xsaWU6Jywge1xuICAgIHBheW1lbnRJZDogcGF5bWVudC5pZCxcbiAgICBtb2xsaWVQYXltZW50SWQsXG4gICAgc3RhdHVzOiB1cGRhdGVzLnN0YXR1c1xuICB9KTtcblxuICByZXR1cm4gdXBkYXRlZFBheW1lbnQ7XG59XG5cbi8qKlxuICogQ3JlYXRlIE1vbGxpZSBjdXN0b21lciByZWNvcmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1vbGxpZUN1c3RvbWVyKHVzZXJJZDogc3RyaW5nLCBtb2xsaWVDdXN0b21lcklkOiBzdHJpbmcpIHtcbiAgLy8gVXBkYXRlIHVzZXIgcmVjb3JkIHdpdGggTW9sbGllIGN1c3RvbWVyIElEXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9XG4gIH0pO1xuXG4gIGlmICghdXNlcikge1xuICAgIHRocm93IG5ldyBFcnJvcignVXNlciBub3QgZm91bmQnKTtcbiAgfVxuXG4gIC8vIFN0b3JlIE1vbGxpZSBjdXN0b21lciBJRCBpbiB1c2VyIG1ldGFkYXRhIG9yIHNlcGFyYXRlIGZpZWxkXG4gIC8vIEZvciBub3csIHdlJ2xsIHVzZSB0aGUgcGF5bWVudCByZWNvcmRzIHRvIHRyYWNrIHRoaXNcbiAgY29uc29sZS5sb2coJ01vbGxpZSBjdXN0b21lciBjcmVhdGVkIGZvciB1c2VyOicsIHVzZXJJZCwgbW9sbGllQ3VzdG9tZXJJZCk7XG5cbiAgcmV0dXJuIHsgdXNlcklkLCBtb2xsaWVDdXN0b21lcklkIH07XG59XG5cbi8qKlxuICogR2V0IHBheW1lbnQgYnkgTW9sbGllIHBheW1lbnQgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnRCeU1vbGxpZUlkKG1vbGxpZVBheW1lbnRJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEucGF5bWVudHMuZmluZEZpcnN0KHtcbiAgICB3aGVyZTogeyBtb2xsaWVQYXltZW50SWQgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB0cmFpbmVyX3Byb2ZpbGVzOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIGVtYWlsOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBlbWFpbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHJlZnVuZCB0aHJvdWdoIE1vbGxpZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1JlZnVuZChwYXltZW50SWQ6IHN0cmluZywgcmVmdW5kQW1vdW50OiBudW1iZXIsIHJlYXNvbj86IHN0cmluZykge1xuICBjb25zdCBwYXltZW50ID0gYXdhaXQgcHJpc21hLnBheW1lbnRzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBwYXltZW50SWQgfVxuICB9KTtcblxuICBpZiAoIXBheW1lbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1BheW1lbnQgbm90IGZvdW5kJyk7XG4gIH1cblxuICBpZiAoIXBheW1lbnQubW9sbGllUGF5bWVudElkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBNb2xsaWUgcGF5bWVudCBJRCBmb3VuZCcpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHBheW1lbnQgcmVjb3JkIHdpdGggcmVmdW5kXG4gIGNvbnN0IHVwZGF0ZWRQYXltZW50ID0gYXdhaXQgcHJpc21hLnBheW1lbnRzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHBheW1lbnRJZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHJlZnVuZEFtb3VudCxcbiAgICAgIHN0YXR1czogcmVmdW5kQW1vdW50ID49IHBheW1lbnQuYW1vdW50ID8gJ1JFRlVOREVEJyA6ICdQQVJUSUFMTFlfUkVGVU5ERUQnLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgLi4ucGF5bWVudC5tZXRhZGF0YSBhcyBhbnksXG4gICAgICAgIHJlZnVuZFJlYXNvbjogcmVhc29uLFxuICAgICAgICByZWZ1bmREYXRlOiBuZXcgRGF0ZSgpXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgdHJhaW5lciBlYXJuaW5nc1xuICBpZiAocGF5bWVudC50cmFpbmVyRWFybmluZ3MgJiYgcmVmdW5kQW1vdW50ID4gMCkge1xuICAgIGNvbnN0IHJlZnVuZEZyb21FYXJuaW5ncyA9IE1hdGgubWluKHJlZnVuZEFtb3VudCwgcGF5bWVudC50cmFpbmVyRWFybmluZ3MpO1xuICAgIGF3YWl0IHByaXNtYS50cmFpbmVyX3Byb2ZpbGVzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGF5bWVudC50cmFpbmVySWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdG90YWxFYXJuaW5nczogeyBkZWNyZW1lbnQ6IHJlZnVuZEZyb21FYXJuaW5ncyB9LFxuICAgICAgICBtb250aGx5RWFybmluZ3M6IHsgZGVjcmVtZW50OiByZWZ1bmRGcm9tRWFybmluZ3MgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY29uc29sZS5sb2coJ1JlZnVuZCBwcm9jZXNzZWQ6Jywge1xuICAgIHBheW1lbnRJZCxcbiAgICByZWZ1bmRBbW91bnQsXG4gICAgcmVhc29uXG4gIH0pO1xuXG4gIHJldHVybiB1cGRhdGVkUGF5bWVudDtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5lciBwYXltZW50IGFuYWx5dGljc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhaW5lclBheW1lbnRBbmFseXRpY3MoXG4gIHRyYWluZXJJZDogc3RyaW5nLFxuICBwZXJpb2Q6ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicgPSAnbW9udGgnXG4pIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgbGV0IHN0YXJ0RGF0ZTogRGF0ZTtcblxuICBzd2l0Y2ggKHBlcmlvZCkge1xuICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3llYXInOlxuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUobm93LmdldEZ1bGxZZWFyKCksIDAsIDEpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDogLy8gbW9udGhcbiAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgMSk7XG4gIH1cblxuICBjb25zdCBbcGF5bWVudHMsIHBheW1lbnRzQnlUeXBlLCBwYXltZW50c0J5U3RhdHVzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAvLyBUb3RhbCBlYXJuaW5nc1xuICAgIHByaXNtYS5wYXltZW50cy5hZ2dyZWdhdGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgdHJhaW5lcklkLFxuICAgICAgICBwYXltZW50RGF0ZTogeyBndGU6IHN0YXJ0RGF0ZSB9LFxuICAgICAgICBzdGF0dXM6ICdDT01QTEVURUQnXG4gICAgICB9LFxuICAgICAgX3N1bToge1xuICAgICAgICBhbW91bnQ6IHRydWUsXG4gICAgICAgIHRyYWluZXJFYXJuaW5nczogdHJ1ZSxcbiAgICAgICAgcGxhdGZvcm1GZWU6IHRydWVcbiAgICAgIH0sXG4gICAgICBfY291bnQ6IHRydWVcbiAgICB9KSxcblxuICAgIC8vIFBheW1lbnRzIGJ5IHR5cGVcbiAgICBwcmlzbWEucGF5bWVudHMuZ3JvdXBCeSh7XG4gICAgICBieTogWyd0eXBlJ10sXG4gICAgICB3aGVyZToge1xuICAgICAgICB0cmFpbmVySWQsXG4gICAgICAgIHBheW1lbnREYXRlOiB7IGd0ZTogc3RhcnREYXRlIH1cbiAgICAgIH0sXG4gICAgICBfc3VtOiB7IGFtb3VudDogdHJ1ZSB9LFxuICAgICAgX2NvdW50OiB0cnVlXG4gICAgfSksXG5cbiAgICAvLyBQYXltZW50cyBieSBzdGF0dXNcbiAgICBwcmlzbWEucGF5bWVudHMuZ3JvdXBCeSh7XG4gICAgICBieTogWydzdGF0dXMnXSxcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHRyYWluZXJJZCxcbiAgICAgICAgcGF5bWVudERhdGU6IHsgZ3RlOiBzdGFydERhdGUgfVxuICAgICAgfSxcbiAgICAgIF9jb3VudDogdHJ1ZVxuICAgIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgdG90YWxBbW91bnQ6IHBheW1lbnRzLl9zdW0uYW1vdW50IHx8IDAsXG4gICAgdHJhaW5lckVhcm5pbmdzOiBwYXltZW50cy5fc3VtLnRyYWluZXJFYXJuaW5ncyB8fCAwLFxuICAgIHBsYXRmb3JtRmVlOiBwYXltZW50cy5fc3VtLnBsYXRmb3JtRmVlIHx8IDAsXG4gICAgdHJhbnNhY3Rpb25Db3VudDogcGF5bWVudHMuX2NvdW50LFxuICAgIHBheW1lbnRzQnlUeXBlLFxuICAgIHBheW1lbnRzQnlTdGF0dXMsXG4gICAgcGVyaW9kXG4gIH07XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBSRU1JVU0gVEVBTVMgTUFOQUdFTUVOVFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBwcmVtaXVtIHRlYW0gd2l0aCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQcmVtaXVtVGVhbShkYXRhOiB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgb3duZXJJZDogc3RyaW5nO1xuICBwcmljZTogbnVtYmVyO1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBiaWxsaW5nQ3ljbGU6IHN0cmluZztcbiAgbWF4TWVtYmVycz86IG51bWJlcjtcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgdGFncz86IHN0cmluZ1tdO1xuICBmZWF0dXJlcz86IHN0cmluZ1tdO1xuICBydWxlcz86IHN0cmluZztcbiAgaXNQdWJsaWM/OiBib29sZWFuO1xuICByZXF1aXJlQXBwcm92YWw/OiBib29sZWFuO1xuICB0cmlhbFBlcmlvZERheXM/OiBudW1iZXI7XG4gIGNvdmVySW1hZ2U/OiBzdHJpbmc7XG59KSB7XG4gIC8vIFZhbGlkYXRlIG93bmVyIGlzIGEgdHJhaW5lclxuICBjb25zdCBvd25lciA9IGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogZGF0YS5vd25lcklkIH0sXG4gICAgc2VsZWN0OiB7IHJvbGU6IHRydWUgfVxuICB9KTtcblxuICBpZiAoIW93bmVyIHx8IG93bmVyLnJvbGUgIT09ICdUUkFJTkVSJykge1xuICAgIHRocm93IG5ldyBFcnJvcignT25seSB0cmFpbmVycyBjYW4gY3JlYXRlIHByZW1pdW0gdGVhbXMnKTtcbiAgfVxuXG4gIGNvbnN0IHRlYW0gPSBhd2FpdCBwcmlzbWEucHJlbWl1bV9jb21tdW5pdGllcy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBvd25lcklkOiBkYXRhLm93bmVySWQsXG4gICAgICBwcmljZTogZGF0YS5wcmljZSxcbiAgICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5LFxuICAgICAgYmlsbGluZ0N5Y2xlOiBkYXRhLmJpbGxpbmdDeWNsZSxcbiAgICAgIG1heE1lbWJlcnM6IGRhdGEubWF4TWVtYmVycyA/PyBudWxsLFxuICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnksXG4gICAgICB0YWdzOiBkYXRhLnRhZ3MgfHwgW10sXG4gICAgICBmZWF0dXJlczogZGF0YS5mZWF0dXJlcyB8fCBbXSxcbiAgICAgIHJ1bGVzOiBkYXRhLnJ1bGVzID8/IG51bGwsXG4gICAgICBpc1B1YmxpYzogZGF0YS5pc1B1YmxpYyA/PyBmYWxzZSxcbiAgICAgIHJlcXVpcmVBcHByb3ZhbDogZGF0YS5yZXF1aXJlQXBwcm92YWwgPz8gdHJ1ZSxcbiAgICAgIHRyaWFsUGVyaW9kRGF5czogZGF0YS50cmlhbFBlcmlvZERheXMgPz8gMCxcbiAgICAgIGNvdmVySW1hZ2U6IGRhdGEuY292ZXJJbWFnZSA/PyBudWxsLFxuICAgICAgY3VycmVudE1lbWJlcnM6IDBcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzOiB7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICAgICAgdHJhaW5lclZlcmlmaWVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKCdQcmVtaXVtIHRlYW0gY3JlYXRlZDonLCB7XG4gICAgdGVhbUlkOiB0ZWFtLmlkLFxuICAgIG5hbWU6IHRlYW0ubmFtZSxcbiAgICBvd25lcklkOiBkYXRhLm93bmVySWRcbiAgfSk7XG5cbiAgcmV0dXJuIHRlYW07XG59XG5cbi8qKlxuICogR2V0IHRlYW1zIHdpdGggZmlsdGVyaW5nIGFuZCBwYWdpbmF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUZWFtcyhwYXJhbXM6IHtcbiAgb3duZXJJZD86IHN0cmluZztcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIGlzUHVibGljPzogYm9vbGVhbjtcbiAgc2VhcmNoPzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbiAgdXNlcklkPzogc3RyaW5nOyAvLyBGb3IgbWVtYmVyc2hpcCBmaWx0ZXJpbmdcbn0pIHtcbiAgY29uc3QgcGFnZSA9IHBhcmFtcy5wYWdlIHx8IDE7XG4gIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0IHx8IDIwO1xuICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7XG4gICAgaXNBY3RpdmU6IHRydWUsXG4gICAgLi4uKHBhcmFtcy5vd25lcklkICYmIHsgb3duZXJJZDogcGFyYW1zLm93bmVySWQgfSksXG4gICAgLi4uKHBhcmFtcy5jYXRlZ29yeSAmJiB7IGNhdGVnb3J5OiBwYXJhbXMuY2F0ZWdvcnkgfSksXG4gICAgLi4uKHBhcmFtcy5pc1B1YmxpYyAhPT0gdW5kZWZpbmVkICYmIHsgaXNQdWJsaWM6IHBhcmFtcy5pc1B1YmxpYyB9KSxcbiAgICAuLi4ocGFyYW1zLnNlYXJjaCAmJiB7XG4gICAgICBPUjogW1xuICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IHBhcmFtcy5zZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IGRlc2NyaXB0aW9uOiB7IGNvbnRhaW5zOiBwYXJhbXMuc2VhcmNoLCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyB0YWdzOiB7IGhhczogcGFyYW1zLnNlYXJjaCB9IH1cbiAgICAgIF1cbiAgICB9KVxuICB9O1xuXG4gIGNvbnN0IFt0ZWFtcywgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlLFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2Vyczoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICAgICAgICB0cmFpbmVyVmVyaWZpZWQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgcHJlbWl1bV9tZW1iZXJzaGlwczoge1xuICAgICAgICAgICAgICB3aGVyZTogeyBzdGF0dXM6ICdBQ1RJVkUnIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC4uLihwYXJhbXMudXNlcklkICYmIHtcbiAgICAgICAgICBwcmVtaXVtX21lbWJlcnNoaXBzOiB7XG4gICAgICAgICAgICB3aGVyZTogeyB1c2VySWQ6IHBhcmFtcy51c2VySWQgfSxcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBzdGF0dXM6IHRydWUsXG4gICAgICAgICAgICAgIHN0YXJ0RGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgZW5kRGF0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNUcmlhbEFjdGl2ZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiBbXG4gICAgICAgIHsgY3VycmVudE1lbWJlcnM6ICdkZXNjJyB9LFxuICAgICAgICB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgICAgIF0sXG4gICAgICBza2lwLFxuICAgICAgdGFrZTogbGltaXRcbiAgICB9KSxcblxuICAgIHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLmNvdW50KHsgd2hlcmUgfSlcbiAgXSk7XG5cbiAgcmV0dXJuIHtcbiAgICB0ZWFtczogdGVhbXMubWFwKHRlYW0gPT4gKHtcbiAgICAgIC4uLnRlYW0sXG4gICAgICB1c2VyTWVtYmVyc2hpcDogdGVhbS5wcmVtaXVtX21lbWJlcnNoaXBzPy5bMF0gfHwgbnVsbFxuICAgIH0pKSxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBKb2luIHByZW1pdW0gdGVhbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gam9pblByZW1pdW1UZWFtKHRlYW1JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgcGF5bWVudElkPzogc3RyaW5nKSB7XG4gIC8vIEdldCB0ZWFtIGRldGFpbHNcbiAgY29uc3QgdGVhbSA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB0ZWFtSWQgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgbWF4TWVtYmVyczogdHJ1ZSxcbiAgICAgIGN1cnJlbnRNZW1iZXJzOiB0cnVlLFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICByZXF1aXJlQXBwcm92YWw6IHRydWUsXG4gICAgICB0cmlhbFBlcmlvZERheXM6IHRydWUsXG4gICAgICBwcmljZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCF0ZWFtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUZWFtIG5vdCBmb3VuZCcpO1xuICB9XG5cbiAgaWYgKCF0ZWFtLmlzQWN0aXZlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUZWFtIGlzIG5vdCBhY3RpdmUnKTtcbiAgfVxuXG4gIC8vIENoZWNrIG1lbWJlciBsaW1pdHNcbiAgaWYgKHRlYW0ubWF4TWVtYmVycyAmJiB0ZWFtLmN1cnJlbnRNZW1iZXJzID49IHRlYW0ubWF4TWVtYmVycykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGVhbSBpcyBmdWxsJyk7XG4gIH1cblxuICAvLyBDaGVjayBleGlzdGluZyBtZW1iZXJzaGlwXG4gIGNvbnN0IGV4aXN0aW5nTWVtYmVyc2hpcCA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX21lbWJlcnNoaXBzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjb21tdW5pdHlJZF91c2VySWQ6IHtcbiAgICAgICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAgICAgdXNlcklkXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoZXhpc3RpbmdNZW1iZXJzaGlwICYmIGV4aXN0aW5nTWVtYmVyc2hpcC5zdGF0dXMgPT09ICdBQ1RJVkUnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBbHJlYWR5IGEgdGVhbSBtZW1iZXInKTtcbiAgfVxuXG4gIC8vIERldGVybWluZSBtZW1iZXJzaGlwIHN0YXR1cyBhbmQgZGF0ZXNcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgbGV0IHN0YXR1czogJ0FDVElWRScgfCAnU1VTUEVOREVEJyB8ICdUUklBTCcgPSAnQUNUSVZFJztcbiAgbGV0IGVuZERhdGU6IERhdGUgfCB1bmRlZmluZWQ7XG4gIGxldCBpc1RyaWFsQWN0aXZlID0gZmFsc2U7XG4gIGxldCB0cmlhbEVuZHNBdDogRGF0ZSB8IHVuZGVmaW5lZDtcblxuICBpZiAodGVhbS5wcmljZSA+IDAgJiYgIXBheW1lbnRJZCkge1xuICAgIHN0YXR1cyA9ICdTVVNQRU5ERUQnO1xuICB9IGVsc2UgaWYgKHRlYW0ucmVxdWlyZUFwcHJvdmFsKSB7XG4gICAgc3RhdHVzID0gJ1NVU1BFTkRFRCc7XG4gIH0gZWxzZSBpZiAodGVhbS50cmlhbFBlcmlvZERheXMgPiAwKSB7XG4gICAgaXNUcmlhbEFjdGl2ZSA9IHRydWU7XG4gICAgdHJpYWxFbmRzQXQgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgdGVhbS50cmlhbFBlcmlvZERheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgICBlbmREYXRlID0gdHJpYWxFbmRzQXQ7XG4gICAgc3RhdHVzID0gJ1RSSUFMJztcbiAgfVxuXG4gIC8vIENyZWF0ZSBvciB1cGRhdGUgbWVtYmVyc2hpcFxuICBjb25zdCBtZW1iZXJzaGlwID0gYXdhaXQgcHJpc21hLnByZW1pdW1fbWVtYmVyc2hpcHMudXBzZXJ0KHtcbiAgICB3aGVyZToge1xuICAgICAgY29tbXVuaXR5SWRfdXNlcklkOiB7XG4gICAgICAgIGNvbW11bml0eUlkOiB0ZWFtSWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlOiB7XG4gICAgICBzdGF0dXMsXG4gICAgICBzdGFydERhdGU6IG5vdyxcbiAgICAgIGVuZERhdGU6IGVuZERhdGUgPz8gbnVsbCxcbiAgICAgIGlzVHJpYWxBY3RpdmUsXG4gICAgICB0cmlhbEVuZHNBdDogdHJpYWxFbmRzQXQgPz8gbnVsbCxcbiAgICAgIC4uLihwYXltZW50SWQgPyB7IHBheW1lbnRJZCB9IDoge30pLFxuICAgICAgY2FuY2VsbGVkQXQ6IG51bGwsXG4gICAgICBjYW5jZWxsYXRpb25SZWFzb246IG51bGxcbiAgICB9LFxuICAgIGNyZWF0ZToge1xuICAgICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIHN0YXJ0RGF0ZTogbm93LFxuICAgICAgZW5kRGF0ZTogZW5kRGF0ZSA/PyBudWxsLFxuICAgICAgaXNUcmlhbEFjdGl2ZSxcbiAgICAgIHRyaWFsRW5kc0F0OiB0cmlhbEVuZHNBdCA/PyBudWxsLFxuICAgICAgLi4uKHBheW1lbnRJZCA/IHsgcGF5bWVudElkIH0gOiB7fSlcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSB0ZWFtIG1lbWJlciBjb3VudCBpZiBtZW1iZXJzaGlwIGlzIGFjdGl2ZVxuICBpZiAoc3RhdHVzID09PSAnQUNUSVZFJykge1xuICAgIGF3YWl0IHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogdGVhbUlkIH0sXG4gICAgICBkYXRhOiB7IGN1cnJlbnRNZW1iZXJzOiB7IGluY3JlbWVudDogMSB9IH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdVc2VyIGpvaW5lZCBwcmVtaXVtIHRlYW06Jywge1xuICAgIHRlYW1JZCxcbiAgICB1c2VySWQsXG4gICAgbWVtYmVyc2hpcElkOiBtZW1iZXJzaGlwLmlkLFxuICAgIHN0YXR1c1xuICB9KTtcblxuICByZXR1cm4gbWVtYmVyc2hpcDtcbn1cblxuLyoqXG4gKiBMZWF2ZSBwcmVtaXVtIHRlYW1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxlYXZlUHJlbWl1bVRlYW0odGVhbUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCByZWFzb24/OiBzdHJpbmcpIHtcbiAgY29uc3QgbWVtYmVyc2hpcCA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX21lbWJlcnNoaXBzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjb21tdW5pdHlJZF91c2VySWQ6IHtcbiAgICAgICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAgICAgdXNlcklkXG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoIW1lbWJlcnNoaXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHRlYW0gbWVtYmVyJyk7XG4gIH1cblxuICBpZiAobWVtYmVyc2hpcC5zdGF0dXMgIT09ICdBQ1RJVkUnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZW1iZXJzaGlwIG5vdCBhY3RpdmUnKTtcbiAgfVxuXG4gIC8vIENhbmNlbCBtZW1iZXJzaGlwXG4gIGNvbnN0IHVwZGF0ZWRNZW1iZXJzaGlwID0gYXdhaXQgcHJpc21hLnByZW1pdW1fbWVtYmVyc2hpcHMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogbWVtYmVyc2hpcC5pZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIHN0YXR1czogJ0NBTkNFTExFRCcsXG4gICAgICBjYW5jZWxsZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGNhbmNlbGxhdGlvblJlYXNvbjogcmVhc29uIHx8ICdVc2VyIHJlcXVlc3RlZCBjYW5jZWxsYXRpb24nXG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgdGVhbSBtZW1iZXIgY291bnRcbiAgYXdhaXQgcHJpc21hLnByZW1pdW1fY29tbXVuaXRpZXMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogdGVhbUlkIH0sXG4gICAgZGF0YTogeyBjdXJyZW50TWVtYmVyczogeyBkZWNyZW1lbnQ6IDEgfSB9XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKCdVc2VyIGxlZnQgcHJlbWl1bSB0ZWFtOicsIHtcbiAgICB0ZWFtSWQsXG4gICAgdXNlcklkLFxuICAgIG1lbWJlcnNoaXBJZDogbWVtYmVyc2hpcC5pZFxuICB9KTtcblxuICByZXR1cm4gdXBkYXRlZE1lbWJlcnNoaXA7XG59XG5cbi8qKlxuICogR2V0IHRlYW0gbWVtYmVyc2hpcCBkZXRhaWxzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUZWFtTWVtYmVyc2hpcCh0ZWFtSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHByaXNtYS5wcmVtaXVtX21lbWJlcnNoaXBzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjb21tdW5pdHlJZF91c2VySWQ6IHtcbiAgICAgICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAgICAgdXNlcklkXG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBwcmVtaXVtX2NvbW11bml0aWVzOiB7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgb3duZXJJZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBpbWFnZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdGVhbSBtZW1iZXJzIHdpdGggcGFnaW5hdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVhbU1lbWJlcnModGVhbUlkOiBzdHJpbmcsIHBhcmFtczoge1xuICBzdGF0dXM/OiAnQUNUSVZFJyB8ICdQRU5ESU5HX0FQUFJPVkFMJyB8ICdDQU5DRUxMRUQnO1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbn0pIHtcbiAgY29uc3QgcGFnZSA9IHBhcmFtcy5wYWdlIHx8IDE7XG4gIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0IHx8IDIwO1xuICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7XG4gICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAuLi4ocGFyYW1zLnN0YXR1cyAmJiB7IHN0YXR1czogcGFyYW1zLnN0YXR1cyB9KVxuICB9O1xuXG4gIGNvbnN0IFttZW1iZXJzLCB0b3RhbF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLnByZW1pdW1fbWVtYmVyc2hpcHMuZmluZE1hbnkoe1xuICAgICAgd2hlcmUsXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHVzZXJzOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICBpbWFnZTogdHJ1ZSxcbiAgICAgICAgICAgIGVtYWlsOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBzdGFydERhdGU6ICdkZXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0XG4gICAgfSksXG5cbiAgICBwcmlzbWEucHJlbWl1bV9tZW1iZXJzaGlwcy5jb3VudCh7IHdoZXJlIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7XG4gICAgbWVtYmVycyxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBBcHByb3ZlIHRlYW0gbWVtYmVyc2hpcFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwcm92ZVRlYW1NZW1iZXJzaGlwKG1lbWJlcnNoaXBJZDogc3RyaW5nLCBhcHByb3ZlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgbWVtYmVyc2hpcCA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX21lbWJlcnNoaXBzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBtZW1iZXJzaGlwSWQgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBwcmVtaXVtX2NvbW11bml0aWVzOiB7XG4gICAgICAgIHNlbGVjdDogeyBvd25lcklkOiB0cnVlLCBtYXhNZW1iZXJzOiB0cnVlLCBjdXJyZW50TWVtYmVyczogdHJ1ZSB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBpZiAoIW1lbWJlcnNoaXApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01lbWJlcnNoaXAgbm90IGZvdW5kJyk7XG4gIH1cblxuICBpZiAobWVtYmVyc2hpcC5wcmVtaXVtX2NvbW11bml0aWVzLm93bmVySWQgIT09IGFwcHJvdmVySWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgdGVhbSBvd25lciBjYW4gYXBwcm92ZSBtZW1iZXJzaGlwcycpO1xuICB9XG5cbiAgaWYgKG1lbWJlcnNoaXAuc3RhdHVzICE9PSAnU1VTUEVOREVEJykge1xuICAgIHRocm93IG5ldyBFcnJvcignTWVtYmVyc2hpcCBub3QgcGVuZGluZyBhcHByb3ZhbCcpO1xuICB9XG5cbiAgLy8gQ2hlY2sgbWVtYmVyIGxpbWl0c1xuICBpZiAobWVtYmVyc2hpcC5wcmVtaXVtX2NvbW11bml0aWVzLm1heE1lbWJlcnMgJiZcbiAgICAgIG1lbWJlcnNoaXAucHJlbWl1bV9jb21tdW5pdGllcy5jdXJyZW50TWVtYmVycyA+PSBtZW1iZXJzaGlwLnByZW1pdW1fY29tbXVuaXRpZXMubWF4TWVtYmVycykge1xuICAgIHRocm93IG5ldyBFcnJvcignVGVhbSBpcyBmdWxsJyk7XG4gIH1cblxuICAvLyBBcHByb3ZlIG1lbWJlcnNoaXBcbiAgY29uc3QgdXBkYXRlZE1lbWJlcnNoaXAgPSBhd2FpdCBwcmlzbWEucHJlbWl1bV9tZW1iZXJzaGlwcy51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiBtZW1iZXJzaGlwSWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBzdGF0dXM6ICdBQ1RJVkUnLFxuICAgICAgc3RhcnREYXRlOiBuZXcgRGF0ZSgpXG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgdGVhbSBtZW1iZXIgY291bnRcbiAgYXdhaXQgcHJpc21hLnByZW1pdW1fY29tbXVuaXRpZXMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogbWVtYmVyc2hpcC5jb21tdW5pdHlJZCB9LFxuICAgIGRhdGE6IHsgY3VycmVudE1lbWJlcnM6IHsgaW5jcmVtZW50OiAxIH0gfVxuICB9KTtcblxuICBjb25zb2xlLmxvZygnVGVhbSBtZW1iZXJzaGlwIGFwcHJvdmVkOicsIHtcbiAgICBtZW1iZXJzaGlwSWQsXG4gICAgdGVhbUlkOiBtZW1iZXJzaGlwLmNvbW11bml0eUlkLFxuICAgIHVzZXJJZDogbWVtYmVyc2hpcC51c2VySWQsXG4gICAgYXBwcm92ZXJJZFxuICB9KTtcblxuICByZXR1cm4gdXBkYXRlZE1lbWJlcnNoaXA7XG59XG5cbi8qKlxuICogR2V0IHRlYW0gYW5hbHl0aWNzIGZvciBvd25lclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGVhbUFuYWx5dGljcyh0ZWFtSWQ6IHN0cmluZywgb3duZXJJZDogc3RyaW5nKSB7XG4gIC8vIFZlcmlmeSBvd25lcnNoaXBcbiAgY29uc3QgdGVhbSA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiB0ZWFtSWQgfSxcbiAgICBzZWxlY3Q6IHsgb3duZXJJZDogdHJ1ZSB9XG4gIH0pO1xuXG4gIGlmICghdGVhbSB8fCB0ZWFtLm93bmVySWQgIT09IG93bmVySWQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjY2VzcyBkZW5pZWQgLSB0ZWFtIG93bmVyIG9ubHknKTtcbiAgfVxuXG4gIGNvbnN0IFtcbiAgICBtZW1iZXJTdGF0cyxcbiAgICByZXZlbnVlU3RhdHMsXG4gICAgbWVtYmVyc2hpcFRyZW5kc1xuICBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIC8vIE1lbWJlciBzdGF0aXN0aWNzXG4gICAgcHJpc21hLnByZW1pdW1fbWVtYmVyc2hpcHMuZ3JvdXBCeSh7XG4gICAgICBieTogWydzdGF0dXMnXSxcbiAgICAgIHdoZXJlOiB7IGNvbW11bml0eUlkOiB0ZWFtSWQgfSxcbiAgICAgIF9jb3VudDogdHJ1ZVxuICAgIH0pLFxuXG4gICAgLy8gUmV2ZW51ZSBzdGF0aXN0aWNzIChzaW1wbGlmaWVkKVxuICAgIHByaXNtYS5wYXltZW50cy5hZ2dyZWdhdGUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBwYXRoOiBbJ3RlYW1JZCddLFxuICAgICAgICAgIGVxdWFsczogdGVhbUlkXG4gICAgICAgIH0sXG4gICAgICAgIHN0YXR1czogJ0NPTVBMRVRFRCdcbiAgICAgIH0sXG4gICAgICBfc3VtOiB7IGFtb3VudDogdHJ1ZSwgdHJhaW5lckVhcm5pbmdzOiB0cnVlIH0sXG4gICAgICBfY291bnQ6IHRydWVcbiAgICB9KSxcblxuICAgIC8vIE1lbWJlcnNoaXAgdHJlbmRzIChsYXN0IDMwIGRheXMpXG4gICAgcHJpc21hLnByZW1pdW1fbWVtYmVyc2hpcHMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgY29tbXVuaXR5SWQ6IHRlYW1JZCxcbiAgICAgICAgc3RhcnREYXRlOiB7XG4gICAgICAgICAgZ3RlOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIHN0YXJ0RGF0ZTogdHJ1ZSxcbiAgICAgICAgc3RhdHVzOiB0cnVlXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyBzdGFydERhdGU6ICdhc2MnIH1cbiAgICB9KVxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIG1lbWJlclN0YXRzOiBtZW1iZXJTdGF0cy5yZWR1Y2UoKGFjYywgc3RhdCkgPT4ge1xuICAgICAgYWNjW3N0YXQuc3RhdHVzXSA9IHN0YXQuX2NvdW50O1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSxcbiAgICByZXZlbnVlOiB7XG4gICAgICB0b3RhbFJldmVudWU6IHJldmVudWVTdGF0cy5fc3VtLmFtb3VudCB8fCAwLFxuICAgICAgdHJhaW5lckVhcm5pbmdzOiByZXZlbnVlU3RhdHMuX3N1bS50cmFpbmVyRWFybmluZ3MgfHwgMCxcbiAgICAgIHRvdGFsUGF5bWVudHM6IHJldmVudWVTdGF0cy5fY291bnRcbiAgICB9LFxuICAgIHRyZW5kczoge1xuICAgICAgcmVjZW50Sm9pbnM6IG1lbWJlcnNoaXBUcmVuZHMubGVuZ3RoLFxuICAgICAgZGFpbHlKb2luczogbWVtYmVyc2hpcFRyZW5kcy5yZWR1Y2UoKGFjYywgbWVtYmVyc2hpcCkgPT4ge1xuICAgICAgICBjb25zdCBkYXRlID0gbWVtYmVyc2hpcC5zdGFydERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdITtcbiAgICAgICAgYWNjW2RhdGVdID0gKGFjY1tkYXRlXSB8fCAwKSArIDE7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KVxuICAgIH1cbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ0hBTExFTkdFUyAmIENPTVBFVElUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBjaGFsbGVuZ2Ugd2l0aCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDaGFsbGVuZ2UoZGF0YToge1xuICB0aXRsZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjcmVhdG9ySWQ6IHN0cmluZztcbiAgdHlwZTogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICBkaWZmaWN1bHR5OiBzdHJpbmc7XG4gIHN0YXJ0RGF0ZTogRGF0ZTtcbiAgZW5kRGF0ZTogRGF0ZTtcbiAgaXNQdWJsaWM/OiBib29sZWFuO1xuICBtYXhQYXJ0aWNpcGFudHM/OiBudW1iZXI7XG4gIGVudHJ5RmVlPzogbnVtYmVyO1xuICBjdXJyZW5jeT86IHN0cmluZztcbiAgcHJpemVQb29sPzogbnVtYmVyO1xuICBydWxlczogc3RyaW5nO1xuICBtZXRyaWNzPzogYW55O1xuICByZXdhcmRzPzogYW55W107XG4gIGNvdmVySW1hZ2U/OiBzdHJpbmc7XG4gIHRhZ3M/OiBzdHJpbmdbXTtcbn0pIHtcbiAgY29uc3QgY2hhbGxlbmdlID0gYXdhaXQgcHJpc21hLmNoYWxsZW5nZXMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBjcmVhdG9ySWQ6IGRhdGEuY3JlYXRvcklkLFxuICAgICAgdHlwZTogZGF0YS50eXBlIGFzIGFueSxcbiAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxuICAgICAgZGlmZmljdWx0eTogZGF0YS5kaWZmaWN1bHR5LFxuICAgICAgc3RhcnREYXRlOiBkYXRhLnN0YXJ0RGF0ZSxcbiAgICAgIGVuZERhdGU6IGRhdGEuZW5kRGF0ZSxcbiAgICAgIGlzUHVibGljOiBkYXRhLmlzUHVibGljID8/IHRydWUsXG4gICAgICBtYXhQYXJ0aWNpcGFudHM6IGRhdGEubWF4UGFydGljaXBhbnRzID8/IG51bGwsXG4gICAgICBlbnRyeUZlZTogZGF0YS5lbnRyeUZlZSA/PyAwLFxuICAgICAgY3VycmVuY3k6IGRhdGEuY3VycmVuY3kgPz8gJ0VVUicsXG4gICAgICBwcml6ZVBvb2w6IGRhdGEucHJpemVQb29sID8/IDAsXG4gICAgICBydWxlczogZGF0YS5ydWxlcyA/PyBudWxsLFxuICAgICAgbWV0cmljczogZGF0YS5tZXRyaWNzID8/IHt9LFxuICAgICAgcmV3YXJkczogZGF0YS5yZXdhcmRzID8/IFtdLFxuICAgICAgY292ZXJJbWFnZTogZGF0YS5jb3ZlckltYWdlID8/IG51bGwsXG4gICAgICB0YWdzOiBkYXRhLnRhZ3MgPz8gW10sXG4gICAgICBzdGF0dXM6ICdVUENPTUlORydcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzOiB7XG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgaW1hZ2U6IHRydWUsXG4gICAgICAgICAgdHJhaW5lclZlcmlmaWVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKCdDaGFsbGVuZ2UgY3JlYXRlZDonLCB7XG4gICAgY2hhbGxlbmdlSWQ6IGNoYWxsZW5nZS5pZCxcbiAgICB0aXRsZTogY2hhbGxlbmdlLnRpdGxlLFxuICAgIGNyZWF0b3JJZDogZGF0YS5jcmVhdG9ySWRcbiAgfSk7XG5cbiAgcmV0dXJuIGNoYWxsZW5nZTtcbn1cblxuLyoqXG4gKiBHZXQgY2hhbGxlbmdlcyB3aXRoIGZpbHRlcmluZ1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q2hhbGxlbmdlcyhwYXJhbXM6IHtcbiAgY3JlYXRvcklkPzogc3RyaW5nO1xuICBjYXRlZ29yeT86IHN0cmluZztcbiAgZGlmZmljdWx0eT86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICB0eXBlPzogc3RyaW5nO1xuICBpc1B1YmxpYz86IGJvb2xlYW47XG4gIHNlYXJjaD86IHN0cmluZztcbiAgcGFnZT86IG51bWJlcjtcbiAgbGltaXQ/OiBudW1iZXI7XG4gIHVzZXJJZD86IHN0cmluZzsgLy8gRm9yIHBhcnRpY2lwYXRpb24gZmlsdGVyaW5nXG59KSB7XG4gIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSB8fCAxO1xuICBjb25zdCBsaW1pdCA9IHBhcmFtcy5saW1pdCB8fCAyMDtcbiAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICBjb25zdCB3aGVyZTogYW55ID0ge1xuICAgIC4uLihwYXJhbXMuY3JlYXRvcklkICYmIHsgY3JlYXRvcklkOiBwYXJhbXMuY3JlYXRvcklkIH0pLFxuICAgIC4uLihwYXJhbXMuY2F0ZWdvcnkgJiYgeyBjYXRlZ29yeTogcGFyYW1zLmNhdGVnb3J5IH0pLFxuICAgIC4uLihwYXJhbXMuZGlmZmljdWx0eSAmJiB7IGRpZmZpY3VsdHk6IHBhcmFtcy5kaWZmaWN1bHR5IH0pLFxuICAgIC4uLihwYXJhbXMuc3RhdHVzICYmIHsgc3RhdHVzOiBwYXJhbXMuc3RhdHVzIH0pLFxuICAgIC4uLihwYXJhbXMudHlwZSAmJiB7IHR5cGU6IHBhcmFtcy50eXBlIH0pLFxuICAgIC4uLihwYXJhbXMuaXNQdWJsaWMgIT09IHVuZGVmaW5lZCAmJiB7IGlzUHVibGljOiBwYXJhbXMuaXNQdWJsaWMgfSksXG4gICAgLi4uKHBhcmFtcy5zZWFyY2ggJiYge1xuICAgICAgT1I6IFtcbiAgICAgICAgeyB0aXRsZTogeyBjb250YWluczogcGFyYW1zLnNlYXJjaCwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgIHsgZGVzY3JpcHRpb246IHsgY29udGFpbnM6IHBhcmFtcy5zZWFyY2gsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IHRhZ3M6IHsgaGFzOiBwYXJhbXMuc2VhcmNoIH0gfVxuICAgICAgXVxuICAgIH0pXG4gIH07XG5cbiAgY29uc3QgW2NoYWxsZW5nZXMsIHRvdGFsXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBwcmlzbWEuY2hhbGxlbmdlcy5maW5kTWFueSh7XG4gICAgICB3aGVyZSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGltYWdlOiB0cnVlLFxuICAgICAgICAgICAgdHJhaW5lclZlcmlmaWVkOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGNoYWxsZW5nZV9wYXJ0aWNpcGFudHM6IHtcbiAgICAgICAgICAgICAgd2hlcmU6IHsgc3RhdHVzOiAnUkVHSVNURVJFRCcgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLi4uKHBhcmFtcy51c2VySWQgJiYge1xuICAgICAgICAgIGNoYWxsZW5nZV9wYXJ0aWNpcGFudHM6IHtcbiAgICAgICAgICAgIHdoZXJlOiB7IHVzZXJJZDogcGFyYW1zLnVzZXJJZCB9LFxuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgICAgICAgam9pbmVkQXQ6IHRydWUsXG4gICAgICAgICAgICAgIHJhbms6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogW1xuICAgICAgICB7IHN0YXR1czogJ2FzYycgfSxcbiAgICAgICAgeyBzdGFydERhdGU6ICdhc2MnIH0sXG4gICAgICAgIHsgY3JlYXRlZEF0OiAnZGVzYycgfVxuICAgICAgXSxcbiAgICAgIHNraXAsXG4gICAgICB0YWtlOiBsaW1pdFxuICAgIH0pLFxuXG4gICAgcHJpc21hLmNoYWxsZW5nZXMuY291bnQoeyB3aGVyZSB9KVxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIGNoYWxsZW5nZXM6IGNoYWxsZW5nZXMubWFwKGNoYWxsZW5nZSA9PiAoe1xuICAgICAgLi4uY2hhbGxlbmdlLFxuICAgICAgdXNlclBhcnRpY2lwYXRpb246IGNoYWxsZW5nZS5wYXJ0aWNpcGFudHM/LlswXSB8fCBudWxsXG4gICAgfSkpLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHRvdGFsLFxuICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIEpvaW4gY2hhbGxlbmdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBqb2luQ2hhbGxlbmdlKGNoYWxsZW5nZUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBwYXltZW50SWQ/OiBzdHJpbmcpIHtcbiAgLy8gR2V0IGNoYWxsZW5nZSBkZXRhaWxzXG4gIGNvbnN0IGNoYWxsZW5nZSA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBjaGFsbGVuZ2VJZCB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBzdGF0dXM6IHRydWUsXG4gICAgICBtYXhQYXJ0aWNpcGFudHM6IHRydWUsXG4gICAgICBjdXJyZW50UGFydGljaXBhbnRzOiB0cnVlLFxuICAgICAgZW50cnlGZWU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghY2hhbGxlbmdlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDaGFsbGVuZ2Ugbm90IGZvdW5kJyk7XG4gIH1cblxuICBpZiAoY2hhbGxlbmdlLnN0YXR1cyAhPT0gJ1VQQ09NSU5HJykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2hhbGxlbmdlIGlzIG5vdCBhY2NlcHRpbmcgbmV3IHBhcnRpY2lwYW50cycpO1xuICB9XG5cbiAgLy8gQ2hlY2sgcGFydGljaXBhbnQgbGltaXRzXG4gIGlmIChjaGFsbGVuZ2UubWF4UGFydGljaXBhbnRzICYmIGNoYWxsZW5nZS5jdXJyZW50UGFydGljaXBhbnRzID49IGNoYWxsZW5nZS5tYXhQYXJ0aWNpcGFudHMpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoYWxsZW5nZSBpcyBmdWxsJyk7XG4gIH1cblxuICAvLyBDaGVjayBleGlzdGluZyBwYXJ0aWNpcGF0aW9uXG4gIGNvbnN0IGV4aXN0aW5nUGFydGljaXBhdGlvbiA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcGFydGljaXBhbnRzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjaGFsbGVuZ2VJZF91c2VySWQ6IHtcbiAgICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGV4aXN0aW5nUGFydGljaXBhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignQWxyZWFkeSBwYXJ0aWNpcGF0aW5nIGluIHRoaXMgY2hhbGxlbmdlJyk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgc3RhdHVzIGJhc2VkIG9uIGVudHJ5IGZlZVxuICBjb25zdCBzdGF0dXMgPSAoY2hhbGxlbmdlLmVudHJ5RmVlICYmIGNoYWxsZW5nZS5lbnRyeUZlZSA+IDAgJiYgIXBheW1lbnRJZClcbiAgICA/ICdQRU5ESU5HX1BBWU1FTlQnXG4gICAgOiAnUkVHSVNURVJFRCc7XG5cbiAgLy8gQ3JlYXRlIHBhcnRpY2lwYXRpb25cbiAgY29uc3QgcGFydGljaXBhdGlvbiA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcGFydGljaXBhbnRzLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICBjaGFsbGVuZ2VJZCxcbiAgICAgIHVzZXJJZCxcbiAgICAgIHN0YXR1czogc3RhdHVzIGFzIGFueSxcbiAgICAgIHBheW1lbnRJZDogcGF5bWVudElkID8/IG51bGwsXG4gICAgICBjdXJyZW50UHJvZ3Jlc3M6IHt9XG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgY2hhbGxlbmdlIHBhcnRpY2lwYW50IGNvdW50IGlmIHJlZ2lzdGVyZWRcbiAgaWYgKHN0YXR1cyA9PT0gJ1JFR0lTVEVSRUQnKSB7XG4gICAgYXdhaXQgcHJpc21hLmNoYWxsZW5nZXMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBjaGFsbGVuZ2VJZCB9LFxuICAgICAgZGF0YTogeyBjdXJyZW50UGFydGljaXBhbnRzOiB7IGluY3JlbWVudDogMSB9IH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdVc2VyIGpvaW5lZCBjaGFsbGVuZ2U6Jywge1xuICAgIGNoYWxsZW5nZUlkLFxuICAgIHVzZXJJZCxcbiAgICBwYXJ0aWNpcGF0aW9uSWQ6IHBhcnRpY2lwYXRpb24uaWQsXG4gICAgc3RhdHVzXG4gIH0pO1xuXG4gIHJldHVybiBwYXJ0aWNpcGF0aW9uO1xufVxuXG4vKipcbiAqIExlYXZlIGNoYWxsZW5nZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGVhdmVDaGFsbGVuZ2UoY2hhbGxlbmdlSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydGljaXBhdGlvbiA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcGFydGljaXBhbnRzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjaGFsbGVuZ2VJZF91c2VySWQ6IHtcbiAgICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgfVxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgY2hhbGxlbmdlczoge1xuICAgICAgICBzZWxlY3Q6IHsgc3RhdHVzOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmICghcGFydGljaXBhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignTm90IHBhcnRpY2lwYXRpbmcgaW4gdGhpcyBjaGFsbGVuZ2UnKTtcbiAgfVxuXG4gIGlmIChwYXJ0aWNpcGF0aW9uLmNoYWxsZW5nZXMuc3RhdHVzID09PSAnQUNUSVZFJykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxlYXZlIGFjdGl2ZSBjaGFsbGVuZ2UnKTtcbiAgfVxuXG4gIGlmIChwYXJ0aWNpcGF0aW9uLmNoYWxsZW5nZXMuc3RhdHVzID09PSAnQ09NUExFVEVEJykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGxlYXZlIGNvbXBsZXRlZCBjaGFsbGVuZ2UnKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBwYXJ0aWNpcGF0aW9uXG4gIGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcGFydGljaXBhbnRzLmRlbGV0ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHBhcnRpY2lwYXRpb24uaWQgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgY2hhbGxlbmdlIHBhcnRpY2lwYW50IGNvdW50XG4gIGlmIChwYXJ0aWNpcGF0aW9uLnN0YXR1cyA9PT0gJ1JFR0lTVEVSRUQnKSB7XG4gICAgYXdhaXQgcHJpc21hLmNoYWxsZW5nZXMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBjaGFsbGVuZ2VJZCB9LFxuICAgICAgZGF0YTogeyBjdXJyZW50UGFydGljaXBhbnRzOiB7IGRlY3JlbWVudDogMSB9IH1cbiAgICB9KTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdVc2VyIGxlZnQgY2hhbGxlbmdlOicsIHtcbiAgICBjaGFsbGVuZ2VJZCxcbiAgICB1c2VySWQsXG4gICAgcGFydGljaXBhdGlvbklkOiBwYXJ0aWNpcGF0aW9uLmlkXG4gIH0pO1xuXG4gIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgY2hhbGxlbmdlIHByb2dyZXNzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVDaGFsbGVuZ2VQcm9ncmVzcyhcbiAgY2hhbGxlbmdlSWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGRhdGE6IHtcbiAgICBkYXRlOiBEYXRlO1xuICAgIG1ldHJpY3M6IGFueTtcbiAgICBub3Rlcz86IHN0cmluZztcbiAgICBwcm9vZkltYWdlcz86IHN0cmluZ1tdO1xuICB9XG4pIHtcbiAgLy8gR2V0IHBhcnRpY2lwYXRpb25cbiAgY29uc3QgcGFydGljaXBhdGlvbiA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcGFydGljaXBhbnRzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBjaGFsbGVuZ2VJZF91c2VySWQ6IHtcbiAgICAgICAgY2hhbGxlbmdlSWQsXG4gICAgICAgIHVzZXJJZFxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCFwYXJ0aWNpcGF0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgcGFydGljaXBhdGluZyBpbiB0aGlzIGNoYWxsZW5nZScpO1xuICB9XG5cbiAgaWYgKHBhcnRpY2lwYXRpb24uc3RhdHVzICE9PSAnUkVHSVNURVJFRCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3QgYmUgcmVnaXN0ZXJlZCB0byB1cGRhdGUgcHJvZ3Jlc3MnKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBwcm9ncmVzcyBlbnRyeVxuICBjb25zdCBwcm9ncmVzc0VudHJ5ID0gYXdhaXQgcHJpc21hLmNoYWxsZW5nZV9wcm9ncmVzcy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgcGFydGljaXBhbnRJZDogcGFydGljaXBhdGlvbi5pZCxcbiAgICAgIGRhdGU6IGRhdGEuZGF0ZSxcbiAgICAgIG1ldHJpY3M6IGRhdGEubWV0cmljcyxcbiAgICAgIG5vdGVzOiBkYXRhLm5vdGVzID8/IG51bGwsXG4gICAgICBwcm9vZkltYWdlczogZGF0YS5wcm9vZkltYWdlcyB8fCBbXSxcbiAgICAgIGlzVmVyaWZpZWQ6IGZhbHNlXG4gICAgfVxuICB9KTtcblxuICAvLyBVcGRhdGUgYWdncmVnYXRlZCBwcm9ncmVzc1xuICBjb25zdCBhbGxQcm9ncmVzcyA9IGF3YWl0IHByaXNtYS5jaGFsbGVuZ2VfcHJvZ3Jlc3MuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IHBhcnRpY2lwYW50SWQ6IHBhcnRpY2lwYXRpb24uaWQgfSxcbiAgICBvcmRlckJ5OiB7IGRhdGU6ICdhc2MnIH1cbiAgfSk7XG5cbiAgY29uc3QgYWdncmVnYXRlZFByb2dyZXNzID0gY2FsY3VsYXRlUHJvZ3Jlc3NBZ2dyZWdhdGlvbihhbGxQcm9ncmVzcyk7XG5cbiAgYXdhaXQgcHJpc21hLmNoYWxsZW5nZV9wYXJ0aWNpcGFudHMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogcGFydGljaXBhdGlvbi5pZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGN1cnJlbnRQcm9ncmVzczogYWdncmVnYXRlZFByb2dyZXNzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfVxuICB9KTtcblxuICBjb25zb2xlLmxvZygnQ2hhbGxlbmdlIHByb2dyZXNzIHVwZGF0ZWQ6Jywge1xuICAgIGNoYWxsZW5nZUlkLFxuICAgIHVzZXJJZCxcbiAgICBwcm9ncmVzc0lkOiBwcm9ncmVzc0VudHJ5LmlkXG4gIH0pO1xuXG4gIHJldHVybiB7IHByb2dyZXNzRW50cnksIGFnZ3JlZ2F0ZWRQcm9ncmVzcyB9O1xufVxuXG4vKipcbiAqIEdldCBjaGFsbGVuZ2UgbGVhZGVyYm9hcmRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENoYWxsZW5nZUxlYWRlcmJvYXJkKGNoYWxsZW5nZUlkOiBzdHJpbmcsIHBhcmFtczoge1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbiAgdXNlcklkPzogc3RyaW5nOyAvLyBGb3IgcHJpdmFjeSBmaWx0ZXJpbmdcbn0pIHtcbiAgY29uc3QgcGFnZSA9IHBhcmFtcy5wYWdlIHx8IDE7XG4gIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0IHx8IDUwO1xuICBjb25zdCBza2lwID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gIGNvbnN0IFtsZWFkZXJib2FyZCwgdG90YWxdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHByaXNtYS5jaGFsbGVuZ2VfbGVhZGVyYm9hcmQuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgY2hhbGxlbmdlSWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIGltYWdlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb3JkZXJCeTogeyByYW5rOiAnYXNjJyB9LFxuICAgICAgc2tpcCxcbiAgICAgIHRha2U6IGxpbWl0XG4gICAgfSksXG5cbiAgICBwcmlzbWEuY2hhbGxlbmdlX2xlYWRlcmJvYXJkLmNvdW50KHtcbiAgICAgIHdoZXJlOiB7IGNoYWxsZW5nZUlkIH1cbiAgICB9KVxuICBdKTtcblxuICByZXR1cm4ge1xuICAgIGxlYWRlcmJvYXJkLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHRvdGFsLFxuICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBwcm9ncmVzcyBhZ2dyZWdhdGlvblxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVQcm9ncmVzc0FnZ3JlZ2F0aW9uKHByb2dyZXNzRW50cmllczogYW55W10pIHtcbiAgY29uc3QgYWdncmVnYXRlZDogYW55ID0ge307XG5cbiAgcHJvZ3Jlc3NFbnRyaWVzLmZvckVhY2goZW50cnkgPT4ge1xuICAgIGlmIChlbnRyeS5tZXRyaWNzICYmIHR5cGVvZiBlbnRyeS5tZXRyaWNzID09PSAnb2JqZWN0Jykge1xuICAgICAgT2JqZWN0LmtleXMoZW50cnkubWV0cmljcykuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgICAgICBpZiAoIWFnZ3JlZ2F0ZWRbbWV0cmljXSkge1xuICAgICAgICAgIGFnZ3JlZ2F0ZWRbbWV0cmljXSA9IHtcbiAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgICBsYXRlc3Q6IDBcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUZsb2F0KGVudHJ5Lm1ldHJpY3NbbWV0cmljXSkgfHwgMDtcbiAgICAgICAgYWdncmVnYXRlZFttZXRyaWNdLnRvdGFsICs9IHZhbHVlO1xuICAgICAgICBhZ2dyZWdhdGVkW21ldHJpY10uY291bnQgKz0gMTtcbiAgICAgICAgYWdncmVnYXRlZFttZXRyaWNdLmxhdGVzdCA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBDYWxjdWxhdGUgYXZlcmFnZXNcbiAgT2JqZWN0LmtleXMoYWdncmVnYXRlZCkuZm9yRWFjaChtZXRyaWMgPT4ge1xuICAgIGlmIChhZ2dyZWdhdGVkW21ldHJpY10uY291bnQgPiAwKSB7XG4gICAgICBhZ2dyZWdhdGVkW21ldHJpY10uYXZlcmFnZSA9IGFnZ3JlZ2F0ZWRbbWV0cmljXS50b3RhbCAvIGFnZ3JlZ2F0ZWRbbWV0cmljXS5jb3VudDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBhZ2dyZWdhdGVkO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQUklWQUNZLUNPTlRST0xMRUQgTEVBREVSQk9BUkRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHByaXZhY3ktY29udHJvbGxlZCBsZWFkZXJib2FyZCBkYXRhXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcml2YWN5Q29udHJvbGxlZExlYWRlcmJvYXJkKHBhcmFtczoge1xuICB0eXBlOiAnd29ya291dCcgfCAnY2hhbGxlbmdlJyB8ICd0ZWFtJyB8ICdnbG9iYWwnO1xuICBjYXRlZ29yeT86IHN0cmluZztcbiAgdGltZWZyYW1lPzogc3RyaW5nO1xuICBtZXRyaWM/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIGxpbWl0PzogbnVtYmVyO1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIGluY2x1ZGVBbm9ueW1vdXM/OiBib29sZWFuO1xufSkge1xuICBjb25zdCBwYWdlID0gcGFyYW1zLnBhZ2UgfHwgMTtcbiAgY29uc3QgbGltaXQgPSBNYXRoLm1pbihwYXJhbXMubGltaXQgfHwgNTAsIDEwMCk7XG4gIGNvbnN0IHNraXAgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgLy8gQ2FsY3VsYXRlIHRpbWVmcmFtZSBkYXRlc1xuICBjb25zdCB0aW1lZnJhbWVEYXRlcyA9IGNhbGN1bGF0ZVRpbWVmcmFtZVJhbmdlKHBhcmFtcy50aW1lZnJhbWUgfHwgJ2FsbF90aW1lJyk7XG5cbiAgbGV0IGxlYWRlcmJvYXJkRGF0YSA9IFtdO1xuICBsZXQgdG90YWwgPSAwO1xuXG4gIHN3aXRjaCAocGFyYW1zLnR5cGUpIHtcbiAgICBjYXNlICd3b3Jrb3V0JzpcbiAgICAgICh7IGxlYWRlcmJvYXJkRGF0YSwgdG90YWwgfSA9IGF3YWl0IGJ1aWxkV29ya291dExlYWRlcmJvYXJkKHtcbiAgICAgICAgY2F0ZWdvcnk6IHBhcmFtcy5jYXRlZ29yeSxcbiAgICAgICAgdGltZWZyYW1lOiB0aW1lZnJhbWVEYXRlcyxcbiAgICAgICAgbWV0cmljOiBwYXJhbXMubWV0cmljIHx8ICd0b3RhbF92b2x1bWUnLFxuICAgICAgICBza2lwLFxuICAgICAgICBsaW1pdCxcbiAgICAgICAgdXNlcklkOiBwYXJhbXMudXNlcklkXG4gICAgICB9KSk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ2NoYWxsZW5nZSc6XG4gICAgICAoeyBsZWFkZXJib2FyZERhdGEsIHRvdGFsIH0gPSBhd2FpdCBidWlsZENoYWxsZW5nZUxlYWRlcmJvYXJkKHtcbiAgICAgICAgdGltZWZyYW1lOiB0aW1lZnJhbWVEYXRlcyxcbiAgICAgICAgc2tpcCxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHVzZXJJZDogcGFyYW1zLnVzZXJJZFxuICAgICAgfSkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlICd0ZWFtJzpcbiAgICAgICh7IGxlYWRlcmJvYXJkRGF0YSwgdG90YWwgfSA9IGF3YWl0IGJ1aWxkVGVhbUxlYWRlcmJvYXJkKHtcbiAgICAgICAgdGltZWZyYW1lOiB0aW1lZnJhbWVEYXRlcyxcbiAgICAgICAgc2tpcCxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHVzZXJJZDogcGFyYW1zLnVzZXJJZFxuICAgICAgfSkpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgLy8gRGVmYXVsdCB0byB3b3Jrb3V0IGxlYWRlcmJvYXJkIGZvciBnbG9iYWxcbiAgICAgICh7IGxlYWRlcmJvYXJkRGF0YSwgdG90YWwgfSA9IGF3YWl0IGJ1aWxkV29ya291dExlYWRlcmJvYXJkKHtcbiAgICAgICAgY2F0ZWdvcnk6IG51bGwsXG4gICAgICAgIHRpbWVmcmFtZTogdGltZWZyYW1lRGF0ZXMsXG4gICAgICAgIG1ldHJpYzogcGFyYW1zLm1ldHJpYyB8fCAndG90YWxfdm9sdW1lJyxcbiAgICAgICAgc2tpcCxcbiAgICAgICAgbGltaXQsXG4gICAgICAgIHVzZXJJZDogcGFyYW1zLnVzZXJJZFxuICAgICAgfSkpO1xuICB9XG5cbiAgLy8gQXBwbHkgcHJpdmFjeSBjb250cm9sc1xuICBjb25zdCBwcm9jZXNzZWRMZWFkZXJib2FyZCA9IGxlYWRlcmJvYXJkRGF0YS5tYXAoKGVudHJ5LCBpbmRleCkgPT5cbiAgICBhcHBseUxlYWRlcmJvYXJkUHJpdmFjeUNvbnRyb2xzKGVudHJ5LCBwYXJhbXMudXNlcklkLCBza2lwICsgaW5kZXggKyAxLCBwYXJhbXMuaW5jbHVkZUFub255bW91cylcbiAgKS5maWx0ZXIoZW50cnkgPT4gZW50cnkgIT09IG51bGwpO1xuXG4gIHJldHVybiB7XG4gICAgbGVhZGVyYm9hcmQ6IHByb2Nlc3NlZExlYWRlcmJvYXJkLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHRvdGFsLFxuICAgICAgdG90YWxQYWdlczogTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpXG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIFVwZGF0ZSB1c2VyIHByaXZhY3kgc2V0dGluZ3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJQcml2YWN5U2V0dGluZ3ModXNlcklkOiBzdHJpbmcsIHNldHRpbmdzOiBhbnkpIHtcbiAgLy8gTW9kZWwgbm8gbG9uZ2VyIHN0b3JlcyBwcml2YWN5IHNldHRpbmdzIG9uIFVzZXIuIFNpbXVsYXRlIHVwZGF0ZSBieSByZXR1cm5pbmcgbWVyZ2VkIG9iamVjdC5cbiAgY29uc3QgdXBkYXRlZFVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB1c2VySWQgfSwgc2VsZWN0OiB7IGlkOiB0cnVlIH0gfSk7XG4gIGNvbnN0IHVwZGF0ZWRTZXR0aW5ncyA9IHtcbiAgICAuLi5zZXR0aW5ncyxcbiAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICB9O1xuICByZXR1cm4geyBpZDogdXBkYXRlZFVzZXI/LmlkIHx8IHVzZXJJZCwgcHJpdmFjeVNldHRpbmdzOiB1cGRhdGVkU2V0dGluZ3MgfSBhcyBhbnk7XG59XG5cbi8qKlxuICogR2V0IHVzZXIncyBwcml2YWN5IHNldHRpbmdzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyUHJpdmFjeVNldHRpbmdzKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkOiB1c2VySWQgfSwgc2VsZWN0OiB7IGlkOiB0cnVlIH0gfSk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVc2VyIG5vdCBmb3VuZCcpO1xuICB9XG5cbiAgLy8gRGVmYXVsdCBwcml2YWN5IHNldHRpbmdzXG4gIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IHtcbiAgICBhbGxvd0xlYWRlcmJvYXJkczogdHJ1ZSxcbiAgICBhbGxvd1B1YmxpY1Byb2ZpbGU6IHRydWUsXG4gICAgYWxsb3dXb3Jrb3V0U2hhcmluZzogdHJ1ZSxcbiAgICBhbGxvd0NoYWxsZW5nZVBhcnRpY2lwYXRpb246IHRydWUsXG4gICAgYWxsb3dUZWFtVmlzaWJpbGl0eTogdHJ1ZSxcbiAgICBsZWFkZXJib2FyZFZpc2liaWxpdHlMZXZlbDogJ3B1YmxpYycsXG4gICAgcHJvZmlsZVZpc2liaWxpdHlMZXZlbDogJ3B1YmxpYycsXG4gICAgd29ya291dERhdGFWaXNpYmlsaXR5OiAnc3VtbWFyeScsXG4gICAgc2hvd1JlYWxOYW1lOiB0cnVlLFxuICAgIHNob3dQcm9maWxlSW1hZ2U6IHRydWUsXG4gICAgc2hvd0xvY2F0aW9uOiBmYWxzZSxcbiAgICBzaG93UGVyc29uYWxSZWNvcmRzOiB0cnVlLFxuICAgIGFsbG93RGlyZWN0TWVzc2FnZXM6IHRydWVcbiAgfTtcblxuICByZXR1cm4gZGVmYXVsdFNldHRpbmdzO1xufVxuXG4vKipcbiAqIEJ1aWxkIHdvcmtvdXQgbGVhZGVyYm9hcmRcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRXb3Jrb3V0TGVhZGVyYm9hcmQocGFyYW1zOiBhbnkpIHtcbiAgY29uc3QgeyBjYXRlZ29yeSwgdGltZWZyYW1lLCBtZXRyaWMsIHNraXAsIGxpbWl0IH0gPSBwYXJhbXM7XG5cbiAgY29uc3Qgd2hlcmVDbGF1c2U6IGFueSA9IHtcbiAgICBpc0NvbXBsZXRlOiB0cnVlLFxuICAgIC4uLih0aW1lZnJhbWUuc3RhcnQgJiYge1xuICAgICAgc3RhcnRUaW1lOiB7XG4gICAgICAgIGd0ZTogdGltZWZyYW1lLnN0YXJ0LFxuICAgICAgICBsdGU6IHRpbWVmcmFtZS5lbmRcbiAgICAgIH1cbiAgICB9KSxcbiAgICAuLi4oY2F0ZWdvcnkgJiYge1xuICAgICAgZW50cmllczoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgZXhlcmNpc2U6IHtcbiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH07XG5cbiAgY29uc3Qgd29ya291dFN0YXRzID0gYXdhaXQgcHJpc21hLndvcmtvdXRfc2Vzc2lvbnMuZ3JvdXBCeSh7XG4gICAgYnk6IFsndXNlcklkJ10sXG4gICAgd2hlcmU6IHdoZXJlQ2xhdXNlLFxuICAgIF9zdW06IHtcbiAgICAgIHRvdGFsVm9sdW1lOiB0cnVlLFxuICAgICAgZHVyYXRpb246IHRydWVcbiAgICB9LFxuICAgIF9jb3VudDoge1xuICAgICAgaWQ6IHRydWVcbiAgICB9LFxuICAgIF9hdmc6IHtcbiAgICAgIHRvdGFsVm9sdW1lOiB0cnVlLFxuICAgICAgZHVyYXRpb246IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFNvcnQgYnkgbWV0cmljXG4gIGNvbnN0IHNvcnRlZFN0YXRzID0gd29ya291dFN0YXRzLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCB2YWx1ZUEgPSBnZXRMZWFkZXJib2FyZE1ldHJpY1ZhbHVlKGEsIG1ldHJpYyk7XG4gICAgY29uc3QgdmFsdWVCID0gZ2V0TGVhZGVyYm9hcmRNZXRyaWNWYWx1ZShiLCBtZXRyaWMpO1xuICAgIHJldHVybiB2YWx1ZUIgLSB2YWx1ZUE7XG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsID0gc29ydGVkU3RhdHMubGVuZ3RoO1xuICBjb25zdCBwYWdpbmF0ZWRTdGF0cyA9IHNvcnRlZFN0YXRzLnNsaWNlKHNraXAsIHNraXAgKyBsaW1pdCk7XG5cbiAgLy8gR2V0IHVzZXIgZGV0YWlsc1xuICBjb25zdCB1c2VySWRzID0gcGFnaW5hdGVkU3RhdHMubWFwKHN0YXQgPT4gc3RhdC51c2VySWQpO1xuICBjb25zdCB1c2VycyA9IGF3YWl0IHByaXNtYS51c2Vycy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHsgaWQ6IHsgaW46IHVzZXJJZHMgfSB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBuYW1lOiB0cnVlLFxuICAgICAgaW1hZ2U6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVzZXJNYXAgPSB1c2Vycy5yZWR1Y2UoKGFjYywgdXNlcikgPT4ge1xuICAgIGFjY1t1c2VyLmlkXSA9IHVzZXI7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgYW55Pik7XG5cbiAgY29uc3QgbGVhZGVyYm9hcmREYXRhID0gcGFnaW5hdGVkU3RhdHMubWFwKChzdGF0LCBpbmRleCkgPT4gKHtcbiAgICB1c2VySWQ6IHN0YXQudXNlcklkLFxuICAgIHVzZXI6IHVzZXJNYXBbc3RhdC51c2VySWRdLFxuICAgIHJhbms6IHNraXAgKyBpbmRleCArIDEsXG4gICAgc2NvcmU6IGdldExlYWRlcmJvYXJkTWV0cmljVmFsdWUoc3RhdCwgbWV0cmljKSxcbiAgICBtZXRyaWNzOiB7XG4gICAgICB0b3RhbFZvbHVtZTogc3RhdC5fc3VtLnRvdGFsVm9sdW1lIHx8IDAsXG4gICAgICB0b3RhbFdvcmtvdXRzOiBzdGF0Ll9jb3VudC5pZCxcbiAgICAgIGF2Z1ZvbHVtZTogc3RhdC5fYXZnLnRvdGFsVm9sdW1lIHx8IDAsXG4gICAgICB0b3RhbER1cmF0aW9uOiBzdGF0Ll9zdW0uZHVyYXRpb24gfHwgMCxcbiAgICAgIGF2Z0R1cmF0aW9uOiBzdGF0Ll9hdmcuZHVyYXRpb24gfHwgMFxuICAgIH0sXG4gICAgdHlwZTogJ3dvcmtvdXQnXG4gIH0pKTtcblxuICByZXR1cm4geyBsZWFkZXJib2FyZERhdGEsIHRvdGFsIH07XG59XG5cbi8qKlxuICogQnVpbGQgY2hhbGxlbmdlIGxlYWRlcmJvYXJkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQ2hhbGxlbmdlTGVhZGVyYm9hcmQocGFyYW1zOiBhbnkpIHtcbiAgY29uc3QgeyB0aW1lZnJhbWUsIHNraXAsIGxpbWl0IH0gPSBwYXJhbXM7XG5cbiAgY29uc3Qgd2hlcmVDbGF1c2U6IGFueSA9IHtcbiAgICAuLi4odGltZWZyYW1lLnN0YXJ0ICYmIHtcbiAgICAgIGxhc3RVcGRhdGVkOiB7XG4gICAgICAgIGd0ZTogdGltZWZyYW1lLnN0YXJ0LFxuICAgICAgICBsdGU6IHRpbWVmcmFtZS5lbmRcbiAgICAgIH1cbiAgICB9KVxuICB9O1xuXG4gIGNvbnN0IGNoYWxsZW5nZVN0YXRzID0gYXdhaXQgcHJpc21hLmNoYWxsZW5nZV9sZWFkZXJib2FyZC5ncm91cEJ5KHtcbiAgICBieTogWyd1c2VySWQnXSxcbiAgICB3aGVyZTogd2hlcmVDbGF1c2UsXG4gICAgX3N1bToge1xuICAgICAgc2NvcmU6IHRydWVcbiAgICB9LFxuICAgIF9jb3VudDoge1xuICAgICAgaWQ6IHRydWVcbiAgICB9LFxuICAgIF9hdmc6IHtcbiAgICAgIHNjb3JlOiB0cnVlLFxuICAgICAgcmFuazogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc29ydGVkU3RhdHMgPSBjaGFsbGVuZ2VTdGF0cy5zb3J0KChhLCBiKSA9PiAoYi5fc3VtLnNjb3JlIHx8IDApIC0gKGEuX3N1bS5zY29yZSB8fCAwKSk7XG4gIGNvbnN0IHRvdGFsID0gc29ydGVkU3RhdHMubGVuZ3RoO1xuICBjb25zdCBwYWdpbmF0ZWRTdGF0cyA9IHNvcnRlZFN0YXRzLnNsaWNlKHNraXAsIHNraXAgKyBsaW1pdCk7XG5cbiAgY29uc3QgdXNlcklkcyA9IHBhZ2luYXRlZFN0YXRzLm1hcChzdGF0ID0+IHN0YXQudXNlcklkKTtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IGlkOiB7IGluOiB1c2VySWRzIH0gfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgIGltYWdlOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1c2VyTWFwID0gdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICBhY2NbdXNlci5pZF0gPSB1c2VyO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pO1xuXG4gIGNvbnN0IGxlYWRlcmJvYXJkRGF0YSA9IHBhZ2luYXRlZFN0YXRzLm1hcCgoc3RhdCwgaW5kZXgpID0+ICh7XG4gICAgdXNlcklkOiBzdGF0LnVzZXJJZCxcbiAgICB1c2VyOiB1c2VyTWFwW3N0YXQudXNlcklkXSxcbiAgICByYW5rOiBza2lwICsgaW5kZXggKyAxLFxuICAgIHNjb3JlOiBzdGF0Ll9zdW0uc2NvcmUgfHwgMCxcbiAgICBtZXRyaWNzOiB7XG4gICAgICB0b3RhbENoYWxsZW5nZVNjb3JlOiBzdGF0Ll9zdW0uc2NvcmUgfHwgMCxcbiAgICAgIGNoYWxsZW5nZXNQYXJ0aWNpcGF0ZWQ6IHN0YXQuX2NvdW50LmlkLFxuICAgICAgYXZnU2NvcmU6IHN0YXQuX2F2Zy5zY29yZSB8fCAwLFxuICAgICAgYXZnUmFuazogc3RhdC5fYXZnLnJhbmsgfHwgMFxuICAgIH0sXG4gICAgdHlwZTogJ2NoYWxsZW5nZSdcbiAgfSkpO1xuXG4gIHJldHVybiB7IGxlYWRlcmJvYXJkRGF0YSwgdG90YWwgfTtcbn1cblxuLyoqXG4gKiBCdWlsZCB0ZWFtIGxlYWRlcmJvYXJkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkVGVhbUxlYWRlcmJvYXJkKHBhcmFtczogYW55KSB7XG4gIGNvbnN0IHsgdGltZWZyYW1lLCBza2lwLCBsaW1pdCB9ID0gcGFyYW1zO1xuXG4gIGNvbnN0IHRlYW1TdGF0cyA9IGF3YWl0IHByaXNtYS5wcmVtaXVtX2NvbW11bml0aWVzLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAuLi4odGltZWZyYW1lLnN0YXJ0ICYmIHtcbiAgICAgICAgY3JlYXRlZEF0OiB7XG4gICAgICAgICAgZ3RlOiB0aW1lZnJhbWUuc3RhcnQsXG4gICAgICAgICAgbHRlOiB0aW1lZnJhbWUuZW5kXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIG93bmVySWQ6IHRydWUsXG4gICAgICBjdXJyZW50TWVtYmVyczogdHJ1ZSxcbiAgICAgIG5hbWU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEFnZ3JlZ2F0ZSBieSBvd25lclxuICBjb25zdCBvd25lclN0YXRzID0gdGVhbVN0YXRzLnJlZHVjZSgoYWNjLCB0ZWFtKSA9PiB7XG4gICAgaWYgKCFhY2NbdGVhbS5vd25lcklkXSkge1xuICAgICAgYWNjW3RlYW0ub3duZXJJZF0gPSB7XG4gICAgICAgIHVzZXJJZDogdGVhbS5vd25lcklkLFxuICAgICAgICB0b3RhbE1lbWJlcnM6IDAsXG4gICAgICAgIHRlYW1zQ3JlYXRlZDogMFxuICAgICAgfTtcbiAgICB9XG4gICAgYWNjW3RlYW0ub3duZXJJZF0udG90YWxNZW1iZXJzICs9IHRlYW0uY3VycmVudE1lbWJlcnM7XG4gICAgYWNjW3RlYW0ub3duZXJJZF0udGVhbXNDcmVhdGVkICs9IDE7XG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgYW55Pik7XG5cbiAgY29uc3Qgc29ydGVkU3RhdHMgPSBPYmplY3QudmFsdWVzKG93bmVyU3RhdHMpLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiBiLnRvdGFsTWVtYmVycyAtIGEudG90YWxNZW1iZXJzKTtcbiAgY29uc3QgdG90YWwgPSBzb3J0ZWRTdGF0cy5sZW5ndGg7XG4gIGNvbnN0IHBhZ2luYXRlZFN0YXRzID0gc29ydGVkU3RhdHMuc2xpY2Uoc2tpcCwgc2tpcCArIGxpbWl0KTtcblxuICBjb25zdCB1c2VySWRzID0gcGFnaW5hdGVkU3RhdHMubWFwKChzdGF0OiBhbnkpID0+IHN0YXQudXNlcklkKTtcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IGlkOiB7IGluOiB1c2VySWRzIH0gfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgIGltYWdlOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1c2VyTWFwID0gdXNlcnMucmVkdWNlKChhY2MsIHVzZXIpID0+IHtcbiAgICBhY2NbdXNlci5pZF0gPSB1c2VyO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIGFueT4pO1xuXG4gIGNvbnN0IGxlYWRlcmJvYXJkRGF0YSA9IHBhZ2luYXRlZFN0YXRzLm1hcCgoc3RhdDogYW55LCBpbmRleCkgPT4gKHtcbiAgICB1c2VySWQ6IHN0YXQudXNlcklkLFxuICAgIHVzZXI6IHVzZXJNYXBbc3RhdC51c2VySWRdLFxuICAgIHJhbms6IHNraXAgKyBpbmRleCArIDEsXG4gICAgc2NvcmU6IHN0YXQudG90YWxNZW1iZXJzLFxuICAgIG1ldHJpY3M6IHtcbiAgICAgIHRvdGFsTWVtYmVyczogc3RhdC50b3RhbE1lbWJlcnMsXG4gICAgICB0ZWFtc0NyZWF0ZWQ6IHN0YXQudGVhbXNDcmVhdGVkLFxuICAgICAgYXZnTWVtYmVyc1BlclRlYW06IHN0YXQudG90YWxNZW1iZXJzIC8gc3RhdC50ZWFtc0NyZWF0ZWRcbiAgICB9LFxuICAgIHR5cGU6ICd0ZWFtJ1xuICB9KSk7XG5cbiAgcmV0dXJuIHsgbGVhZGVyYm9hcmREYXRhLCB0b3RhbCB9O1xufVxuXG4vKipcbiAqIEFwcGx5IHByaXZhY3kgY29udHJvbHMgdG8gbGVhZGVyYm9hcmQgZW50cnlcbiAqL1xuZnVuY3Rpb24gYXBwbHlMZWFkZXJib2FyZFByaXZhY3lDb250cm9scyhlbnRyeTogYW55LCBjdXJyZW50VXNlcklkPzogc3RyaW5nLCBwb3NpdGlvbj86IG51bWJlciwgaW5jbHVkZUFub255bW91cz86IGJvb2xlYW4pIHtcbiAgY29uc3QgaXNPd25FbnRyeSA9IGVudHJ5LnVzZXJJZCA9PT0gY3VycmVudFVzZXJJZDtcbiAgY29uc3QgdXNlciA9IGVudHJ5LnVzZXI7XG5cbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcblxuICAvLyBDaGVjayB1c2VyIHByaXZhY3kgc2V0dGluZ3NcbiAgY29uc3QgcHJpdmFjeVNldHRpbmdzID0gdXNlci5wcml2YWN5U2V0dGluZ3MgfHwge307XG4gIGNvbnN0IGFsbG93TGVhZGVyYm9hcmRzID0gcHJpdmFjeVNldHRpbmdzLmFsbG93TGVhZGVyYm9hcmRzICE9PSBmYWxzZTtcbiAgY29uc3QgYWxsb3dQdWJsaWNQcm9maWxlID0gcHJpdmFjeVNldHRpbmdzLmFsbG93UHVibGljUHJvZmlsZSAhPT0gZmFsc2U7XG5cbiAgLy8gSWYgdXNlciBkb2Vzbid0IGFsbG93IGxlYWRlcmJvYXJkcyBhbmQgaXQncyBub3QgdGhlaXIgb3duIGVudHJ5LCBoaWRlIGNvbXBsZXRlbHlcbiAgaWYgKCFhbGxvd0xlYWRlcmJvYXJkcyAmJiAhaXNPd25FbnRyeSAmJiAhaW5jbHVkZUFub255bW91cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gSWYgdXNlciBkb2Vzbid0IGFsbG93IHB1YmxpYyBwcm9maWxlLCBhbm9ueW1pemVcbiAgaWYgKCFhbGxvd1B1YmxpY1Byb2ZpbGUgJiYgIWlzT3duRW50cnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZW50cnksXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiAnYW5vbnltb3VzJyxcbiAgICAgICAgbmFtZTogYFVzZXIgIyR7cG9zaXRpb259YCxcbiAgICAgICAgaW1hZ2U6IG51bGwsXG4gICAgICAgIGlzQW5vbnltaXplZDogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGlzQW5vbnltaXplZDogdHJ1ZVxuICAgIH07XG4gIH1cblxuICAvLyBTaG93IG5vcm1hbCBlbnRyeVxuICByZXR1cm4ge1xuICAgIC4uLmVudHJ5LFxuICAgIGlzQ3VycmVudFVzZXI6IGlzT3duRW50cnksXG4gICAgaXNBbm9ueW1pemVkOiBmYWxzZVxuICB9O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB0aW1lZnJhbWUgcmFuZ2VcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlVGltZWZyYW1lUmFuZ2UodGltZWZyYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcblxuICBzd2l0Y2ggKHRpbWVmcmFtZSkge1xuICAgIGNhc2UgJ2RhaWx5JzpcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIG5vdy5nZXREYXRlKCkpLFxuICAgICAgICBlbmQ6IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCBub3cuZ2V0TW9udGgoKSwgbm93LmdldERhdGUoKSArIDEpXG4gICAgICB9O1xuICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgICBjb25zdCB3ZWVrU3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgcmV0dXJuIHsgc3RhcnQ6IHdlZWtTdGFydCwgZW5kOiBub3cgfTtcbiAgICBjYXNlICdtb250aGx5JzpcbiAgICAgIGNvbnN0IG1vbnRoU3RhcnQgPSBuZXcgRGF0ZShub3cuZ2V0RnVsbFllYXIoKSwgbm93LmdldE1vbnRoKCksIDEpO1xuICAgICAgcmV0dXJuIHsgc3RhcnQ6IG1vbnRoU3RhcnQsIGVuZDogbm93IH07XG4gICAgY2FzZSAneWVhcmx5JzpcbiAgICAgIGNvbnN0IHllYXJTdGFydCA9IG5ldyBEYXRlKG5vdy5nZXRGdWxsWWVhcigpLCAwLCAxKTtcbiAgICAgIHJldHVybiB7IHN0YXJ0OiB5ZWFyU3RhcnQsIGVuZDogbm93IH07XG4gICAgZGVmYXVsdDogLy8gYWxsX3RpbWVcbiAgICAgIHJldHVybiB7IHN0YXJ0OiBudWxsLCBlbmQ6IG51bGwgfTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBtZXRyaWMgdmFsdWUgZm9yIGxlYWRlcmJvYXJkIHNvcnRpbmdcbiAqL1xuZnVuY3Rpb24gZ2V0TGVhZGVyYm9hcmRNZXRyaWNWYWx1ZShzdGF0OiBhbnksIG1ldHJpYzogc3RyaW5nKTogbnVtYmVyIHtcbiAgc3dpdGNoIChtZXRyaWMpIHtcbiAgICBjYXNlICd0b3RhbF92b2x1bWUnOlxuICAgICAgcmV0dXJuIHN0YXQuX3N1bS50b3RhbFZvbHVtZSB8fCAwO1xuICAgIGNhc2UgJ3RvdGFsX3dvcmtvdXRzJzpcbiAgICAgIHJldHVybiBzdGF0Ll9jb3VudC5pZDtcbiAgICBjYXNlICdhdmdfdm9sdW1lJzpcbiAgICAgIHJldHVybiBzdGF0Ll9hdmcudG90YWxWb2x1bWUgfHwgMDtcbiAgICBjYXNlICd0b3RhbF9kdXJhdGlvbic6XG4gICAgICByZXR1cm4gc3RhdC5fc3VtLmR1cmF0aW9uIHx8IDA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0Ll9zdW0udG90YWxWb2x1bWUgfHwgMDtcbiAgfVxufVxuXG4vLyBOb3RlOiBuYW1lZCBleHBvcnRzIGFyZSBkZWNsYXJlZCBpbmxpbmUgYWJvdmU7IGF2b2lkIHJlLWV4cG9ydCBibG9jayB0byBwcmV2ZW50IGR1cGxpY2F0ZSBzeW1ib2wgZXJyb3JzXG4iXSwibmFtZXMiOlsicHJpc21hIiwiVXNlclJvbGUiLCJDTElFTlQiLCJUUkFJTkVSIiwiQURNSU4iLCJVc2VyU3RhdHVzIiwiQUNUSVZFIiwiU1VTUEVOREVEIiwiQkFOTkVEIiwiVmlvbGF0aW9uVHlwZSIsIkhBUkFTU01FTlQiLCJIQVRFX1NQRUVDSCIsIlRIUkVBVCIsIklOQVBQUk9QUklBVEVfQ09OVEVOVCIsIlNQQU0iLCJQUklWQUNZX1ZJT0xBVElPTiIsIk1vZGVyYXRpb25BY3Rpb24iLCJBUFBST1ZFRCIsIkZMQUdHRUQiLCJCTE9DS0VEIiwiREVMRVRFRCIsIk1vZGVyYXRpb25Tb3VyY2UiLCJPUEVOQUkiLCJDVVNUT01fUlVMRVMiLCJNQU5VQUwiLCJnZXRVc2VyU2FmZXR5UHJvZmlsZSIsInVzZXJJZCIsInVzZXIiLCJ1c2VycyIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlkIiwic2VsZWN0IiwiZW1haWwiLCJuYW1lIiwiaW1hZ2UiLCJyb2xlIiwic3RhdHVzIiwicmVwdXRhdGlvblNjb3JlIiwid2FybmluZ0NvdW50IiwidHJhaW5lclZlcmlmaWVkIiwic3VzcGVuZGVkVW50aWwiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsInZpb2xhdGlvbkNvdW50IiwicmVjZW50VmlvbGF0aW9ucyIsInN1c3BlbnNpb25IaXN0b3J5Iiwicmlza0xldmVsIiwicmVzdHJpY3Rpb25zIiwibGFzdFZpb2xhdGlvblJlc3VsdCIsIlByb21pc2UiLCJhbGwiLCJ1c2VyX3Zpb2xhdGlvbnMiLCJjb3VudCIsImd0ZSIsIkRhdGUiLCJub3ciLCJzdXNwZW5zaW9uSG91cnMiLCJndCIsImZpbmRGaXJzdCIsIm9yZGVyQnkiLCJjYWxjdWxhdGVVc2VyUmlza0xldmVsIiwiZGV0ZXJtaW5lVXNlclJlc3RyaWN0aW9ucyIsImlzU2FmZSIsImxhc3RWaW9sYXRpb24iLCJnZXRGbGFnZ2VkVXNlcnMiLCJwYXJhbXMiLCJ0aGlydHlEYXlzQWdvIiwiZmluZE1hbnkiLCJPUiIsImx0IiwiaW4iLCJpbmNsdWRlUmVjZW50IiwidmlvbGF0aW9ucyIsInNvbWUiLCJ0YWtlIiwibGltaXQiLCJza2lwIiwib2Zmc2V0IiwibWFwIiwibGVuZ3RoIiwiZmlsdGVyIiwidiIsInVwZGF0ZVVzZXJTYWZldHlTdGF0dXMiLCJ1cGRhdGVzIiwiJHRyYW5zYWN0aW9uIiwidHgiLCJjdXJyZW50VXNlciIsImZpbmRVbmlxdWVPclRocm93IiwibmV3UmVwdXRhdGlvblNjb3JlIiwicmVwdXRhdGlvbkNoYW5nZSIsIk1hdGgiLCJtYXgiLCJ1bmRlZmluZWQiLCJ1cGRhdGUiLCJkYXRhIiwiY3JlYXRlTW9kZXJhdGlvbkxvZyIsIm1vZGVyYXRpb25fbG9ncyIsImNyZWF0ZSIsInByb2Nlc3NlZEF0IiwiZ2V0TW9kZXJhdGlvbkxvZ3MiLCJhY3Rpb24iLCJjb250ZW50VHlwZSIsImRhdGVGcm9tIiwiZGF0ZVRvIiwibHRlIiwiaW5jbHVkZVVzZXIiLCJpbmNsdWRlIiwiZ2V0TW9kZXJhdGlvblN0YXRpc3RpY3MiLCJ0aW1lZnJhbWUiLCJob3Vyc01hcCIsImRheSIsIndlZWsiLCJtb250aCIsInNpbmNlIiwibG9ncyIsInJlYXNvbkNvdW50cyIsImNvbmZpZGVuY2UiLCJmbGFnZ2VkUmVhc29uIiwiZ3JvdXBCeSIsImJ5Iiwibm90IiwiX2NvdW50IiwidG90YWxBY3Rpb25zIiwiYWN0aW9uQnJlYWtkb3duIiwiY29udGVudFR5cGVCcmVha2Rvd24iLCJ1c2VyQWN0aXZpdHkiLCJ0b3RhbENvbmZpZGVuY2UiLCJjb25maWRlbmNlQ291bnQiLCJmb3JFYWNoIiwibG9nIiwidXNlckRhdGEiLCJhdmVyYWdlQ29uZmlkZW5jZSIsInRvcFZpb2xhdGlvblJlYXNvbnMiLCJyIiwicmVhc29uIiwidXNlckFjdGl2aXR5QXJyYXkiLCJPYmplY3QiLCJlbnRyaWVzIiwiYWN0aW9uQ291bnQiLCJ1c2VyTmFtZSIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwiY3JlYXRlU2FmZXR5UmVwb3J0Iiwic2FmZXR5X3JlcG9ydHMiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwicHJpb3JpdHkiLCJkZXRlcm1pbmVQcmlvcml0eSIsInZpb2xhdGlvblR5cGUiLCJkZXNjcmlwdGlvbiIsImdldFBlbmRpbmdTYWZldHlSZXBvcnRzIiwidXNlcnNfc2FmZXR5X3JlcG9ydHNfcmVwb3J0ZXJJZFRvdXNlcnMiLCJ1c2Vyc19zYWZldHlfcmVwb3J0c19yZXBvcnRlZFVzZXJJZFRvdXNlcnMiLCJ1cGRhdGVTYWZldHlSZXBvcnQiLCJyZXBvcnRJZCIsInJlc29sdmVkQXQiLCJhc3NpZ25lZFRvIiwiY3JlYXRlVXNlclZpb2xhdGlvbiIsInZpb2xhdGlvbiIsIndhcm5pbmdJc3N1ZWQiLCJpbmNyZW1lbnQiLCJkZWNyZW1lbnQiLCJyZXB1dGF0aW9uSGl0IiwiZ2V0VXNlclZpb2xhdGlvbkhpc3RvcnkiLCJpbmNsdWRlUmVzb2x2ZWQiLCJyZXNvbHZlZCIsImdldFVzZXJTYWZldHlTZXR0aW5ncyIsInNhZmV0eVNldHRpbmdzIiwidXBkYXRlVXNlclNhZmV0eVNldHRpbmdzIiwic2V0dGluZ3MiLCJ1cHNlcnQiLCJnZXRTYWZldHlBbmFseXRpY3MiLCJfdGltZWZyYW1lIiwidXNlckdyb3d0aCIsInZpb2xhdGlvblRyZW5kcyIsIm1vZGVyYXRpb25FZmZpY2llbmN5IiwiYXZlcmFnZVJlc3BvbnNlVGltZSIsImF1dG9tYXRpb25SYXRlIiwiYXBwZWFsUmF0ZSIsInJpc2tEaXN0cmlidXRpb24iLCJ0cmFpbmVyU2FmZXR5IiwidmVyaWZpZWRUcmFpbmVycyIsImZsYWdnZWRUcmFpbmVycyIsImF2ZXJhZ2VSYXRpbmciLCJnZW5lcmF0ZVNhZmV0eVJlcG9ydCIsInN1bW1hcnkiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidG90YWxVc2VycyIsImFjdGl2ZVVzZXJzIiwic3VzcGVuZGVkVXNlcnMiLCJiYW5uZWRVc2VycyIsInRvdGFsVmlvbGF0aW9ucyIsInJlc29sdmVkUmVwb3J0cyIsImRldGFpbHMiLCJwdXNoIiwiY2F0ZWdvcnkiLCJ1cmdlbnRLZXl3b3JkcyIsImtleXdvcmQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiY3JlYXRlT3JVcGRhdGVUcmFpbmVyUHJvZmlsZSIsImV4aXN0aW5nUHJvZmlsZSIsInRyYWluZXJfcHJvZmlsZXMiLCJnZXRUcmFpbmVyUHJvZmlsZVdpdGhTdGF0cyIsInRyYWluZXJJZCIsInRyYWluZXJfY2xpZW50cyIsImFwcG9pbnRtZW50cyIsInRyYWluZXJfcmV2aWV3cyIsImdldFRyYWluZXJDbGllbnRzIiwiZmlsdGVycyIsInNlYXJjaCIsInBhZ2UiLCJjbGllbnQiLCJjb250YWlucyIsIm1vZGUiLCJjbGllbnRzIiwidG90YWwiLCJwcm9ncmVzc19yZXBvcnRzIiwidG90YWxQYWdlcyIsImNlaWwiLCJhZGRDbGllbnRUb1RyYWluZXIiLCJjbGllbnRJZCIsImV4aXN0aW5nIiwidHJhaW5lcklkX2NsaWVudElkIiwiRXJyb3IiLCJyZWxhdGlvbnNoaXAiLCJhY3RpdmVDbGllbnRzIiwidG90YWxDbGllbnRzIiwiY3JlYXRlQXBwb2ludG1lbnQiLCJ0aXRsZSIsInNjaGVkdWxlZEF0IiwiZHVyYXRpb24iLCJ0eXBlIiwibG9jYXRpb24iLCJpc1ZpcnR1YWwiLCJwcmljZSIsImN1cnJlbmN5IiwiZ2V0VHJhaW5lckFwcG9pbnRtZW50cyIsImRhdGVSYW5nZSIsInN0YXJ0IiwiZW5kIiwid29ya291dF9zZXNzaW9ucyIsImlzQ29tcGxldGUiLCJ1cGRhdGVBcHBvaW50bWVudFN0YXR1cyIsImFwcG9pbnRtZW50SWQiLCJ1cGRhdGVEYXRhIiwiY2FuY2VsbGVkQXQiLCJjb21wbGV0ZWRBdCIsImNyZWF0ZVByb2dyZXNzUmVwb3J0IiwicmVwb3J0RGF0ZSIsInBlcmlvZCIsImdldFRyYWluZXJQcm9ncmVzc1JlcG9ydHMiLCJpc1NoYXJlZCIsInJlcG9ydHMiLCJzaGFyZVByb2dyZXNzUmVwb3J0IiwiZ2V0VHJhaW5lckVhcm5pbmdzIiwiZ2V0VGltZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJlYXJuaW5ncyIsInBheW1lbnRzIiwiYWdncmVnYXRlIiwicGF5bWVudERhdGUiLCJfc3VtIiwiYW1vdW50IiwidHJhaW5lckVhcm5pbmdzIiwicGxhdGZvcm1GZWUiLCJ0b3RhbEFtb3VudCIsInRyYW5zYWN0aW9uQ291bnQiLCJjaGVja0FwcG9pbnRtZW50Q29uZmxpY3QiLCJleGNsdWRlQXBwb2ludG1lbnRJZCIsImVuZFRpbWUiLCJBTkQiLCJnZXRUcmFpbmVyQXZhaWxhYmlsaXR5IiwidHJhaW5lclByb2ZpbGUiLCJhdmFpbGFibGVIb3VycyIsInRpbWV6b25lIiwicmVzY2hlZHVsZUFwcG9pbnRtZW50IiwibmV3U2NoZWR1bGVkQXQiLCJhcHBvaW50bWVudCIsImNvbmZsaWN0IiwidHJhaW5lck5vdGVzIiwiY3JlYXRlTW9sbGllUGF5bWVudCIsInBheW1lbnQiLCJ0cmFpbmVyQ2xpZW50SWQiLCJtZXRob2QiLCJtb2xsaWVQYXltZW50SWQiLCJtb2xsaWVDdXN0b21lcklkIiwic2Vzc2lvbkRhdGUiLCJwYWNrYWdlSWQiLCJtZXRhZGF0YSIsImNvbnNvbGUiLCJwYXltZW50SWQiLCJ1cGRhdGVQYXltZW50RnJvbU1vbGxpZSIsInVwZGF0ZWRQYXltZW50IiwiZmFpbHVyZVJlYXNvbiIsInRvdGFsRWFybmluZ3MiLCJtb250aGx5RWFybmluZ3MiLCJjcmVhdGVNb2xsaWVDdXN0b21lciIsImdldFBheW1lbnRCeU1vbGxpZUlkIiwicHJvY2Vzc1JlZnVuZCIsInJlZnVuZEFtb3VudCIsInJlZnVuZFJlYXNvbiIsInJlZnVuZERhdGUiLCJyZWZ1bmRGcm9tRWFybmluZ3MiLCJtaW4iLCJnZXRUcmFpbmVyUGF5bWVudEFuYWx5dGljcyIsInBheW1lbnRzQnlUeXBlIiwicGF5bWVudHNCeVN0YXR1cyIsImNyZWF0ZVByZW1pdW1UZWFtIiwib3duZXIiLCJvd25lcklkIiwidGVhbSIsInByZW1pdW1fY29tbXVuaXRpZXMiLCJiaWxsaW5nQ3ljbGUiLCJtYXhNZW1iZXJzIiwidGFncyIsImZlYXR1cmVzIiwicnVsZXMiLCJpc1B1YmxpYyIsInJlcXVpcmVBcHByb3ZhbCIsInRyaWFsUGVyaW9kRGF5cyIsImNvdmVySW1hZ2UiLCJjdXJyZW50TWVtYmVycyIsInRlYW1JZCIsImdldFRlYW1zIiwiaXNBY3RpdmUiLCJoYXMiLCJ0ZWFtcyIsInByZW1pdW1fbWVtYmVyc2hpcHMiLCJpc1RyaWFsQWN0aXZlIiwidXNlck1lbWJlcnNoaXAiLCJwYWdpbmF0aW9uIiwiam9pblByZW1pdW1UZWFtIiwiZXhpc3RpbmdNZW1iZXJzaGlwIiwiY29tbXVuaXR5SWRfdXNlcklkIiwiY29tbXVuaXR5SWQiLCJ0cmlhbEVuZHNBdCIsIm1lbWJlcnNoaXAiLCJjYW5jZWxsYXRpb25SZWFzb24iLCJtZW1iZXJzaGlwSWQiLCJsZWF2ZVByZW1pdW1UZWFtIiwidXBkYXRlZE1lbWJlcnNoaXAiLCJnZXRUZWFtTWVtYmVyc2hpcCIsImdldFRlYW1NZW1iZXJzIiwibWVtYmVycyIsImFwcHJvdmVUZWFtTWVtYmVyc2hpcCIsImFwcHJvdmVySWQiLCJnZXRUZWFtQW5hbHl0aWNzIiwibWVtYmVyU3RhdHMiLCJyZXZlbnVlU3RhdHMiLCJtZW1iZXJzaGlwVHJlbmRzIiwicGF0aCIsImVxdWFscyIsInJlZHVjZSIsImFjYyIsInN0YXQiLCJyZXZlbnVlIiwidG90YWxSZXZlbnVlIiwidG90YWxQYXltZW50cyIsInRyZW5kcyIsInJlY2VudEpvaW5zIiwiZGFpbHlKb2lucyIsImRhdGUiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwiY3JlYXRlQ2hhbGxlbmdlIiwiY2hhbGxlbmdlIiwiY2hhbGxlbmdlcyIsImNyZWF0b3JJZCIsImRpZmZpY3VsdHkiLCJtYXhQYXJ0aWNpcGFudHMiLCJlbnRyeUZlZSIsInByaXplUG9vbCIsIm1ldHJpY3MiLCJyZXdhcmRzIiwiY2hhbGxlbmdlSWQiLCJnZXRDaGFsbGVuZ2VzIiwiY2hhbGxlbmdlX3BhcnRpY2lwYW50cyIsImpvaW5lZEF0IiwicmFuayIsInVzZXJQYXJ0aWNpcGF0aW9uIiwicGFydGljaXBhbnRzIiwiam9pbkNoYWxsZW5nZSIsImN1cnJlbnRQYXJ0aWNpcGFudHMiLCJleGlzdGluZ1BhcnRpY2lwYXRpb24iLCJjaGFsbGVuZ2VJZF91c2VySWQiLCJwYXJ0aWNpcGF0aW9uIiwiY3VycmVudFByb2dyZXNzIiwicGFydGljaXBhdGlvbklkIiwibGVhdmVDaGFsbGVuZ2UiLCJkZWxldGUiLCJzdWNjZXNzIiwidXBkYXRlQ2hhbGxlbmdlUHJvZ3Jlc3MiLCJwcm9ncmVzc0VudHJ5IiwiY2hhbGxlbmdlX3Byb2dyZXNzIiwicGFydGljaXBhbnRJZCIsIm5vdGVzIiwicHJvb2ZJbWFnZXMiLCJpc1ZlcmlmaWVkIiwiYWxsUHJvZ3Jlc3MiLCJhZ2dyZWdhdGVkUHJvZ3Jlc3MiLCJjYWxjdWxhdGVQcm9ncmVzc0FnZ3JlZ2F0aW9uIiwidXBkYXRlZEF0IiwicHJvZ3Jlc3NJZCIsImdldENoYWxsZW5nZUxlYWRlcmJvYXJkIiwibGVhZGVyYm9hcmQiLCJjaGFsbGVuZ2VfbGVhZGVyYm9hcmQiLCJwcm9ncmVzc0VudHJpZXMiLCJhZ2dyZWdhdGVkIiwiZW50cnkiLCJrZXlzIiwibWV0cmljIiwibGF0ZXN0IiwidmFsdWUiLCJwYXJzZUZsb2F0IiwiYXZlcmFnZSIsImdldFByaXZhY3lDb250cm9sbGVkTGVhZGVyYm9hcmQiLCJ0aW1lZnJhbWVEYXRlcyIsImNhbGN1bGF0ZVRpbWVmcmFtZVJhbmdlIiwibGVhZGVyYm9hcmREYXRhIiwiYnVpbGRXb3Jrb3V0TGVhZGVyYm9hcmQiLCJidWlsZENoYWxsZW5nZUxlYWRlcmJvYXJkIiwiYnVpbGRUZWFtTGVhZGVyYm9hcmQiLCJwcm9jZXNzZWRMZWFkZXJib2FyZCIsImluZGV4IiwiYXBwbHlMZWFkZXJib2FyZFByaXZhY3lDb250cm9scyIsImluY2x1ZGVBbm9ueW1vdXMiLCJ1cGRhdGVVc2VyUHJpdmFjeVNldHRpbmdzIiwidXBkYXRlZFVzZXIiLCJ1cGRhdGVkU2V0dGluZ3MiLCJsYXN0VXBkYXRlZCIsInByaXZhY3lTZXR0aW5ncyIsImdldFVzZXJQcml2YWN5U2V0dGluZ3MiLCJkZWZhdWx0U2V0dGluZ3MiLCJhbGxvd0xlYWRlcmJvYXJkcyIsImFsbG93UHVibGljUHJvZmlsZSIsImFsbG93V29ya291dFNoYXJpbmciLCJhbGxvd0NoYWxsZW5nZVBhcnRpY2lwYXRpb24iLCJhbGxvd1RlYW1WaXNpYmlsaXR5IiwibGVhZGVyYm9hcmRWaXNpYmlsaXR5TGV2ZWwiLCJwcm9maWxlVmlzaWJpbGl0eUxldmVsIiwid29ya291dERhdGFWaXNpYmlsaXR5Iiwic2hvd1JlYWxOYW1lIiwic2hvd1Byb2ZpbGVJbWFnZSIsInNob3dMb2NhdGlvbiIsInNob3dQZXJzb25hbFJlY29yZHMiLCJhbGxvd0RpcmVjdE1lc3NhZ2VzIiwid2hlcmVDbGF1c2UiLCJzdGFydFRpbWUiLCJleGVyY2lzZSIsIndvcmtvdXRTdGF0cyIsInRvdGFsVm9sdW1lIiwiX2F2ZyIsInNvcnRlZFN0YXRzIiwidmFsdWVBIiwiZ2V0TGVhZGVyYm9hcmRNZXRyaWNWYWx1ZSIsInZhbHVlQiIsInBhZ2luYXRlZFN0YXRzIiwidXNlcklkcyIsInVzZXJNYXAiLCJzY29yZSIsInRvdGFsV29ya291dHMiLCJhdmdWb2x1bWUiLCJ0b3RhbER1cmF0aW9uIiwiYXZnRHVyYXRpb24iLCJjaGFsbGVuZ2VTdGF0cyIsInRvdGFsQ2hhbGxlbmdlU2NvcmUiLCJjaGFsbGVuZ2VzUGFydGljaXBhdGVkIiwiYXZnU2NvcmUiLCJhdmdSYW5rIiwidGVhbVN0YXRzIiwib3duZXJTdGF0cyIsInRvdGFsTWVtYmVycyIsInRlYW1zQ3JlYXRlZCIsInZhbHVlcyIsImF2Z01lbWJlcnNQZXJUZWFtIiwiY3VycmVudFVzZXJJZCIsInBvc2l0aW9uIiwiaXNPd25FbnRyeSIsImlzQW5vbnltaXplZCIsImlzQ3VycmVudFVzZXIiLCJnZXREYXRlIiwid2Vla1N0YXJ0IiwibW9udGhTdGFydCIsInllYXJTdGFydCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/database/safety-business-queries.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/database/workout-queries.ts":
/*!**********************************************!*\
  !*** ./src/core/database/workout-queries.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCoachFeedback: () => (/* binding */ addCoachFeedback),\n/* harmony export */   addPersonalRecord: () => (/* binding */ addPersonalRecord),\n/* harmony export */   addProgressMetric: () => (/* binding */ addProgressMetric),\n/* harmony export */   calculate_session_experience_points: () => (/* binding */ calculate_session_experience_points),\n/* harmony export */   check_and_award_achievements: () => (/* binding */ check_and_award_achievements),\n/* harmony export */   completeWorkoutSession: () => (/* binding */ completeWorkoutSession),\n/* harmony export */   createExercise: () => (/* binding */ createExercise),\n/* harmony export */   createExerciseVariation: () => (/* binding */ createExerciseVariation),\n/* harmony export */   createTrainingProgram: () => (/* binding */ createTrainingProgram),\n/* harmony export */   createWorkoutLogEntry: () => (/* binding */ createWorkoutLogEntry),\n/* harmony export */   createWorkoutSession: () => (/* binding */ createWorkoutSession),\n/* harmony export */   createWorkoutTemplate: () => (/* binding */ createWorkoutTemplate),\n/* harmony export */   deleteExercise: () => (/* binding */ deleteExercise),\n/* harmony export */   deleteExerciseVariation: () => (/* binding */ deleteExerciseVariation),\n/* harmony export */   deleteTrainingProgram: () => (/* binding */ deleteTrainingProgram),\n/* harmony export */   deleteWorkoutLogEntry: () => (/* binding */ deleteWorkoutLogEntry),\n/* harmony export */   deleteWorkoutSession: () => (/* binding */ deleteWorkoutSession),\n/* harmony export */   deleteWorkoutTemplate: () => (/* binding */ deleteWorkoutTemplate),\n/* harmony export */   finalise_session_with_gamification: () => (/* binding */ finalise_session_with_gamification),\n/* harmony export */   generateWorkoutAnalytics: () => (/* binding */ generateWorkoutAnalytics),\n/* harmony export */   getClientWorkoutLogs: () => (/* binding */ getClientWorkoutLogs),\n/* harmony export */   getEquipmentTypes: () => (/* binding */ getEquipmentTypes),\n/* harmony export */   getExercise: () => (/* binding */ getExercise),\n/* harmony export */   getExerciseCategories: () => (/* binding */ getExerciseCategories),\n/* harmony export */   getExerciseVariationById: () => (/* binding */ getExerciseVariationById),\n/* harmony export */   getExerciseVariations: () => (/* binding */ getExerciseVariations),\n/* harmony export */   getExercises: () => (/* binding */ getExercises),\n/* harmony export */   getFeaturedContent: () => (/* binding */ getFeaturedContent),\n/* harmony export */   getMarketplacePrograms: () => (/* binding */ getMarketplacePrograms),\n/* harmony export */   getMarketplaceTemplates: () => (/* binding */ getMarketplaceTemplates),\n/* harmony export */   getMuscleGroups: () => (/* binding */ getMuscleGroups),\n/* harmony export */   getMyPrograms: () => (/* binding */ getMyPrograms),\n/* harmony export */   getMyTemplates: () => (/* binding */ getMyTemplates),\n/* harmony export */   getPersonalRecords: () => (/* binding */ getPersonalRecords),\n/* harmony export */   getPopularContent: () => (/* binding */ getPopularContent),\n/* harmony export */   getProgressMetrics: () => (/* binding */ getProgressMetrics),\n/* harmony export */   getRecommendedContent: () => (/* binding */ getRecommendedContent),\n/* harmony export */   getTopRatedContent: () => (/* binding */ getTopRatedContent),\n/* harmony export */   getTrainingProgramById: () => (/* binding */ getTrainingProgramById),\n/* harmony export */   getTrainingPrograms: () => (/* binding */ getTrainingPrograms),\n/* harmony export */   getUserProgramSubscriptions: () => (/* binding */ getUserProgramSubscriptions),\n/* harmony export */   getUserWorkoutsUnified: () => (/* binding */ getUserWorkoutsUnified),\n/* harmony export */   getWorkoutAnalytics: () => (/* binding */ getWorkoutAnalytics),\n/* harmony export */   getWorkoutLogEntries: () => (/* binding */ getWorkoutLogEntries),\n/* harmony export */   getWorkoutLogEntry: () => (/* binding */ getWorkoutLogEntry),\n/* harmony export */   getWorkoutSession: () => (/* binding */ getWorkoutSession),\n/* harmony export */   getWorkoutSessions: () => (/* binding */ getWorkoutSessions),\n/* harmony export */   getWorkoutStats: () => (/* binding */ getWorkoutStats),\n/* harmony export */   getWorkoutTemplateById: () => (/* binding */ getWorkoutTemplateById),\n/* harmony export */   getWorkoutTemplates: () => (/* binding */ getWorkoutTemplates),\n/* harmony export */   get_assessment_based_recommendations: () => (/* binding */ get_assessment_based_recommendations),\n/* harmony export */   link_session_to_assessment: () => (/* binding */ link_session_to_assessment),\n/* harmony export */   prepare_ai_training_data: () => (/* binding */ prepare_ai_training_data),\n/* harmony export */   purchaseProgram: () => (/* binding */ purchaseProgram),\n/* harmony export */   purchaseTemplate: () => (/* binding */ purchaseTemplate),\n/* harmony export */   rateProgram: () => (/* binding */ rateProgram),\n/* harmony export */   rateTemplate: () => (/* binding */ rateTemplate),\n/* harmony export */   searchExercises: () => (/* binding */ searchExercises),\n/* harmony export */   searchTrainingPrograms: () => (/* binding */ searchTrainingPrograms),\n/* harmony export */   searchWorkoutTemplates: () => (/* binding */ searchWorkoutTemplates),\n/* harmony export */   subscribeToProgram: () => (/* binding */ subscribeToProgram),\n/* harmony export */   updateExercise: () => (/* binding */ updateExercise),\n/* harmony export */   updateExerciseVariation: () => (/* binding */ updateExerciseVariation),\n/* harmony export */   updateProgramProgress: () => (/* binding */ updateProgramProgress),\n/* harmony export */   updateTrainingProgram: () => (/* binding */ updateTrainingProgram),\n/* harmony export */   updateWorkoutLogEntry: () => (/* binding */ updateWorkoutLogEntry),\n/* harmony export */   updateWorkoutSession: () => (/* binding */ updateWorkoutSession),\n/* harmony export */   updateWorkoutTemplate: () => (/* binding */ updateWorkoutTemplate)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./client */ \"(rsc)/./src/core/database/client.ts\");\n/* harmony import */ var _types_workout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/types/workout */ \"(rsc)/./src/types/workout.ts\");\n/* harmony import */ var _services_ai_workout_suggestions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/services/ai/workout-suggestions */ \"(rsc)/./src/services/ai/workout-suggestions.ts\");\n// src/core/database/workout-queries.ts\n/**\n * Workout Log Database Queries for Massimino\n * Comprehensive query functions for workout tracking and management\n */ \n\n\n\n// ============================================================================\n// WORKOUT LOG ENTRY QUERIES\n// ============================================================================\n/**\n * Get unified workout entries (personal + team workouts) with filtering, sorting, and pagination\n */ async function getUserWorkoutsUnified(userId, options = {}) {\n    const { filters = {}, sort = {\n        field: 'date',\n        direction: 'desc'\n    }, pagination = {}, includeTeamWorkouts = true } = options;\n    const page = pagination.page || 1;\n    const limit = pagination.limit || 50;\n    const offset = (page - 1) * limit;\n    // Build where clause\n    const where = {\n        userId\n    };\n    if (filters.dateRange) {\n        where.date = {\n            gte: filters.dateRange.start,\n            lte: filters.dateRange.end\n        };\n    }\n    if (filters.exercises && filters.exercises.length > 0) {\n        where.exerciseId = {\n            in: filters.exercises\n        };\n    }\n    if (filters.setTypes && filters.setTypes.length > 0) {\n        where.setType = {\n            in: filters.setTypes\n        };\n    }\n    if (filters.coachId) {\n        where.coachId = filters.coachId;\n    }\n    // Filter by team workout status if specified\n    if (!includeTeamWorkouts) {\n        where.isTeamWorkout = false;\n    }\n    // Get total count\n    const total = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.count({\n        where\n    });\n    // Get entries with relationships\n    const entries = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where,\n        include: {\n            exercises: true,\n            users_workout_log_entries_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            users_workout_log_entries_coachIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            }\n        },\n        orderBy: {\n            [sort.field]: sort.direction\n        },\n        skip: offset,\n        take: limit\n    });\n    const totalPages = Math.ceil(total / limit);\n    // Map the Prisma relation names to the expected format\n    const mappedEntries = entries.map((entry)=>({\n            ...entry,\n            exercise: entry.exercises,\n            user: entry.users_workout_log_entries_userIdTousers,\n            coach: entry.users_workout_log_entries_coachIdTousers\n        }));\n    return {\n        entries: mappedEntries,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages,\n            hasMore: page < totalPages\n        }\n    };\n}\n/**\n * Get workout log entries with filtering, sorting, and pagination\n */ async function getWorkoutLogEntries(userId, options = {}) {\n    const { filters = {}, sort = {\n        field: 'date',\n        direction: 'desc'\n    }, pagination = {} } = options;\n    const page = pagination.page || 1;\n    const limit = pagination.limit || 50;\n    const offset = (page - 1) * limit;\n    // Build where clause\n    const where = {\n        userId\n    };\n    if (filters.dateRange) {\n        where.date = {\n            gte: filters.dateRange.start,\n            lte: filters.dateRange.end\n        };\n    }\n    if (filters.exercises && filters.exercises.length > 0) {\n        where.exerciseId = {\n            in: filters.exercises\n        };\n    }\n    if (filters.setTypes && filters.setTypes.length > 0) {\n        where.setType = {\n            in: filters.setTypes\n        };\n    }\n    if (filters.coachId) {\n        where.coachId = filters.coachId;\n    }\n    // Get total count\n    const total = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.count({\n        where\n    });\n    // Get entries with relationships\n    const entries = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where,\n        include: {\n            exercises: true,\n            users_workout_log_entries_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            users_workout_log_entries_coachIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            }\n        },\n        orderBy: {\n            [sort.field]: sort.direction\n        },\n        skip: offset,\n        take: limit\n    });\n    const totalPages = Math.ceil(total / limit);\n    // Map the Prisma relation names to the expected format\n    const mappedEntries = entries.map((entry)=>({\n            ...entry,\n            exercise: entry.exercises,\n            user: entry.users_workout_log_entries_userIdTousers,\n            coach: entry.users_workout_log_entries_coachIdTousers\n        }));\n    return {\n        entries: mappedEntries,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages,\n            hasMore: page < totalPages\n        }\n    };\n}\n/**\n * Get a single workout log entry by ID\n */ async function getWorkoutLogEntry(id, userId) {\n    const entry = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findFirst({\n        where: {\n            id,\n            userId\n        },\n        include: {\n            exercises: true,\n            users_workout_log_entries_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            users_workout_log_entries_coachIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            }\n        }\n    });\n    if (!entry) return null;\n    // Map the Prisma relation names to the expected format\n    return {\n        ...entry,\n        exercise: entry.exercises,\n        user: entry.users_workout_log_entries_userIdTousers,\n        coach: entry.users_workout_log_entries_coachIdTousers\n    };\n}\n/**\n * Create a new workout log entry\n */ async function createWorkoutLogEntry(userId, data, coachId) {\n    // Calculate training volume\n    const averageWeight = (0,_types_workout__WEBPACK_IMPORTED_MODULE_2__.calculateAverageWeight)(data.weight);\n    const trainingVolume = (0,_types_workout__WEBPACK_IMPORTED_MODULE_2__.calculateTrainingVolume)(1, data.reps, averageWeight, data.unit);\n    // Check for personal records\n    const is_weight_pr = await check_personal_record(userId, data.exerciseId, averageWeight, data.reps);\n    const is_volume_pr = await check_volume_record(userId, data.exerciseId, trainingVolume);\n    // Entry is a PR if it's either a weight PR or volume PR\n    const is_personal_record = is_weight_pr || is_volume_pr;\n    // Generate order based on set type\n    const context = {\n        currentSetType: data.setType,\n        currentGroupNumber: data.setNumber,\n        currentSubOrder: 'A',\n        totalEntries: 0\n    };\n    const order = (0,_types_workout__WEBPACK_IMPORTED_MODULE_2__.generateOrder)(data.setType, context);\n    // Create entry and update exercise usage metrics in a transaction\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n        const entry = await tx.workout_log_entries.create({\n            data: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                coachId: coachId ?? null,\n                date: new Date(data.date),\n                exerciseId: data.exerciseId,\n                order,\n                setNumber: data.setNumber,\n                setType: data.setType,\n                reps: data.reps,\n                weight: data.weight,\n                unit: data.unit,\n                ...data.intensity !== undefined && {\n                    intensity: data.intensity\n                },\n                ...data.intensityType !== undefined && {\n                    intensityType: data.intensityType\n                },\n                ...data.tempo !== undefined && {\n                    tempo: data.tempo\n                },\n                ...data.restSeconds !== undefined && {\n                    restSeconds: data.restSeconds\n                },\n                trainingVolume,\n                personalRecord: is_personal_record,\n                ...data.userComments !== undefined && {\n                    userComments: data.userComments\n                },\n                ...data.coachFeedback !== undefined && {\n                    coachFeedback: data.coachFeedback\n                },\n                updatedAt: new Date()\n            }\n        });\n        await tx.exercises.update({\n            where: {\n                id: data.exerciseId\n            },\n            data: {\n                usageCount: {\n                    increment: 1\n                },\n                lastUsed: new Date()\n            }\n        });\n        return entry;\n    });\n}\n/**\n * Update a workout log entry\n */ async function updateWorkoutLogEntry(id, userId, data) {\n    // Get existing entry\n    const existing = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findFirst({\n        where: {\n            id,\n            userId\n        }\n    });\n    if (!existing) {\n        return null;\n    }\n    // Calculate new training volume if weight or reps changed\n    let trainingVolume = existing.trainingVolume;\n    if (data.weight || data.reps) {\n        const newWeight = data.weight || existing.weight;\n        const newReps = data.reps || existing.reps;\n        const averageWeight = (0,_types_workout__WEBPACK_IMPORTED_MODULE_2__.calculateAverageWeight)(newWeight);\n        trainingVolume = (0,_types_workout__WEBPACK_IMPORTED_MODULE_2__.calculateTrainingVolume)(1, newReps, averageWeight, data.unit || existing.unit);\n    }\n    const updated = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.update({\n        where: {\n            id\n        },\n        data: {\n            ...data.date && {\n                date: new Date(data.date)\n            },\n            ...data.exerciseId && {\n                exerciseId: data.exerciseId\n            },\n            ...data.setNumber && {\n                setNumber: data.setNumber\n            },\n            ...data.setType && {\n                setType: data.setType\n            },\n            ...data.reps && {\n                reps: data.reps\n            },\n            ...data.weight && {\n                weight: data.weight\n            },\n            ...data.unit && {\n                unit: data.unit\n            },\n            ...data.intensity && {\n                intensity: data.intensity\n            },\n            ...data.intensityType && {\n                intensityType: data.intensityType\n            },\n            ...data.tempo && {\n                tempo: data.tempo\n            },\n            ...data.restSeconds && {\n                restSeconds: data.restSeconds\n            },\n            ...trainingVolume !== undefined && {\n                trainingVolume\n            },\n            ...data.userComments && {\n                userComments: data.userComments\n            },\n            ...data.coachFeedback && {\n                coachFeedback: data.coachFeedback\n            }\n        }\n    });\n    // If exercise changed, update usage metrics for the new exercise\n    if (data.exerciseId && data.exerciseId !== existing.exerciseId) {\n        await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.update({\n            where: {\n                id: data.exerciseId\n            },\n            data: {\n                usageCount: {\n                    increment: 1\n                },\n                lastUsed: new Date()\n            }\n        });\n    }\n    return updated;\n}\n/**\n * Delete a workout log entry\n */ async function deleteWorkoutLogEntry(id, userId) {\n    const result = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.deleteMany({\n        where: {\n            id,\n            userId\n        }\n    });\n    return result.count > 0;\n}\n/**\n * Get workout statistics for a user\n */ async function getWorkoutStats(userId, dateRange) {\n    const where = {\n        userId\n    };\n    if (dateRange) {\n        where.date = {\n            gte: dateRange.start,\n            lte: dateRange.end\n        };\n    }\n    const entries = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where,\n        include: {\n            exercises: true\n        }\n    });\n    const totalWorkouts = new Set(entries.map((e)=>e.date.toDateString())).size;\n    const totalVolume = entries.reduce((sum, e)=>sum + (e.trainingVolume || 0), 0);\n    const totalSets = entries.length;\n    const totalReps = entries.reduce((sum, e)=>sum + e.reps, 0);\n    // Calculate average workout duration\n    const sessions = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findMany({\n        where,\n        select: {\n            duration: true\n        }\n    });\n    const averageWorkoutDuration = sessions.length > 0 ? sessions.reduce((sum, s)=>sum + (s.duration || 0), 0) / sessions.length : 0;\n    // Most used exercises\n    const exerciseCounts = entries.reduce((acc, entry)=>{\n        const key = entry.exerciseId;\n        acc[key] = (acc[key] || 0) + 1;\n        return acc;\n    }, {});\n    const mostUsedExercises = Object.entries(exerciseCounts).map(([exerciseId, count])=>({\n            exerciseId,\n            count,\n            name: entries.find((e)=>e.exerciseId === exerciseId)?.exercises.name || ''\n        })).sort((a, b)=>b.count - a.count).slice(0, 10);\n    // Volume by muscle group\n    const volumeByMuscleGroup = entries.reduce((acc, entry)=>{\n        entry.exercises.muscleGroups.forEach((muscleGroup)=>{\n            acc[muscleGroup] = (acc[muscleGroup] || 0) + (entry.trainingVolume || 0);\n        });\n        return acc;\n    }, {});\n    return {\n        totalWorkouts,\n        totalVolume,\n        totalSets,\n        totalReps,\n        averageWorkoutDuration,\n        mostUsedExercises,\n        volumeByMuscleGroup: Object.entries(volumeByMuscleGroup).map(([muscleGroup, volume])=>({\n                muscleGroup,\n                volume\n            }))\n    };\n}\n// ============================================================================\n// EXERCISE QUERIES\n// ============================================================================\n/**\n * Get all exercises with optional filtering\n */ async function getExercises(options = {}) {\n    const where = {};\n    if (options.category) {\n        where.category = options.category;\n    }\n    if (options.muscleGroups && options.muscleGroups.length > 0) {\n        where.muscleGroups = {\n            hasSome: options.muscleGroups\n        };\n    }\n    if (options.equipment && options.equipment.length > 0) {\n        where.equipment = {\n            hasSome: options.equipment\n        };\n    }\n    if (options.difficulty) {\n        where.difficulty = options.difficulty;\n    }\n    if (options.isActive !== undefined) {\n        where.isActive = options.isActive;\n    }\n    if (options.search) {\n        where.name = {\n            contains: options.search,\n            mode: 'insensitive'\n        };\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findMany({\n        where,\n        orderBy: {\n            name: 'asc'\n        }\n    });\n}\n/**\n * Get exercise by ID\n */ async function getExercise(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findUnique({\n        where: {\n            id\n        }\n    });\n}\n/**\n * Create a new exercise\n */ async function createExercise(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            name: data.name,\n            category: data.category,\n            muscleGroups: data.muscleGroups,\n            equipment: data.equipment,\n            instructions: data.instructions ?? null,\n            videoUrl: data.videoUrl ?? null,\n            imageUrl: data.imageUrl ?? null,\n            difficulty: data.difficulty || 'BEGINNER',\n            safetyNotes: data.safetyNotes ?? null,\n            formCues: data.formCues || [],\n            commonMistakes: data.commonMistakes || [],\n            createdBy: data.createdBy ?? null,\n            isCustom: data.isCustom || false,\n            updatedAt: new Date()\n        }\n    });\n}\n/**\n * Update an exercise\n */ async function updateExercise(id, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.update({\n        where: {\n            id\n        },\n        data\n    });\n}\n/**\n * Delete an exercise (soft delete by setting isActive to false)\n */ async function deleteExercise(id) {\n    const result = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.update({\n        where: {\n            id\n        },\n        data: {\n            isActive: false\n        }\n    });\n    return result.isActive === false;\n}\n// ============================================================================\n// EXERCISE VARIATION QUERIES\n// ============================================================================\n/**\n * Get exercise variations for an exercise\n */ async function getExerciseVariations(exerciseId, options = {}) {\n    const where = {\n        exerciseId,\n        isActive: true\n    };\n    if (options.difficulty) {\n        where.difficulty = options.difficulty;\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercise_variations.findMany({\n        where,\n        include: {\n            exercises: {\n                select: {\n                    id: true,\n                    name: true,\n                    category: true\n                }\n            }\n        },\n        orderBy: {\n            difficulty: 'asc'\n        }\n    });\n}\n/**\n * Get exercise variation by ID\n */ async function getExerciseVariationById(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercise_variations.findUnique({\n        where: {\n            id\n        },\n        include: {\n            exercises: {\n                select: {\n                    id: true,\n                    name: true,\n                    category: true\n                }\n            }\n        }\n    });\n}\n/**\n * Create exercise variation\n */ async function createExerciseVariation(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercise_variations.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            exerciseId: data.exerciseId,\n            name: data.name,\n            description: data.description ?? null,\n            difficulty: data.difficulty || 'BEGINNER',\n            videoUrl: data.videoUrl ?? null,\n            imageUrl: data.imageUrl ?? null,\n            instructions: data.instructions ?? null,\n            updatedAt: new Date()\n        },\n        include: {\n            exercises: {\n                select: {\n                    id: true,\n                    name: true,\n                    category: true\n                }\n            }\n        }\n    });\n}\n/**\n * Update exercise variation\n */ async function updateExerciseVariation(id, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercise_variations.update({\n        where: {\n            id\n        },\n        data: {\n            ...data.name && {\n                name: data.name\n            },\n            ...data.description && {\n                description: data.description\n            },\n            ...data.difficulty && {\n                difficulty: data.difficulty\n            },\n            ...data.videoUrl && {\n                videoUrl: data.videoUrl\n            },\n            ...data.imageUrl && {\n                imageUrl: data.imageUrl\n            },\n            ...data.instructions && {\n                instructions: data.instructions\n            },\n            ...data.isActive !== undefined && {\n                isActive: data.isActive\n            }\n        },\n        include: {\n            exercises: {\n                select: {\n                    id: true,\n                    name: true,\n                    category: true\n                }\n            }\n        }\n    });\n}\n/**\n * Delete exercise variation\n */ async function deleteExerciseVariation(id) {\n    const result = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercise_variations.update({\n        where: {\n            id\n        },\n        data: {\n            isActive: false\n        }\n    });\n    return result.isActive === false;\n}\n// ============================================================================\n// WORKOUT SESSION QUERIES\n// ============================================================================\n/**\n * Get workout sessions for a user\n */ async function getWorkoutSessions(userId, options = {}) {\n    const { dateRange, isComplete, isTemplate, pagination = {} } = options;\n    const page = pagination.page || 1;\n    const limit = pagination.limit || 20;\n    const offset = (page - 1) * limit;\n    const where = {\n        userId\n    };\n    if (dateRange) {\n        where.date = {\n            gte: dateRange.start,\n            lte: dateRange.end\n        };\n    }\n    if (isComplete !== undefined) {\n        where.isComplete = isComplete;\n    }\n    if (isTemplate !== undefined) {\n        where.isTemplate = isTemplate;\n    }\n    const total = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.count({\n        where\n    });\n    const sessions = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findMany({\n        where,\n        include: {\n            users_workout_sessions_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            users_workout_sessions_coachIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            workout_log_entries: {\n                include: {\n                    exercises: true\n                },\n                orderBy: {\n                    order: 'asc'\n                }\n            }\n        },\n        orderBy: {\n            date: 'desc'\n        },\n        skip: offset,\n        take: limit\n    });\n    // Map the Prisma relation names to the expected format\n    const mappedSessions = sessions.map((session)=>({\n            ...session,\n            user: session.users_workout_sessions_userIdTousers,\n            coach: session.users_workout_sessions_coachIdTousers,\n            entries: session.workout_log_entries.map((entry)=>({\n                    ...entry,\n                    exercise: entry.exercises\n                }))\n        }));\n    return {\n        sessions: mappedSessions,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages: Math.ceil(total / limit),\n            hasMore: page < Math.ceil(total / limit)\n        }\n    };\n}\n/**\n * Get a single workout session by ID\n */ async function getWorkoutSession(id, userId) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findFirst({\n        where: {\n            id,\n            userId\n        },\n        include: {\n            users_workout_sessions_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            users_workout_sessions_coachIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            },\n            workout_log_entries: {\n                include: {\n                    exercises: true\n                },\n                orderBy: {\n                    order: 'asc'\n                }\n            }\n        }\n    });\n    if (!session) return null;\n    // Map the Prisma relation names to the expected format\n    return {\n        ...session,\n        user: session.users_workout_sessions_userIdTousers,\n        coach: session.users_workout_sessions_coachIdTousers,\n        entries: session.workout_log_entries.map((entry)=>({\n                ...entry,\n                exercise: entry.exercises\n            }))\n    };\n}\n/**\n * Create a new workout session\n */ async function createWorkoutSession(userId, data, coachId) {\n    const startTime = new Date(`${data.date}T${data.startTime}`);\n    const endTime = data.endTime ? new Date(`${data.date}T${data.endTime}`) : null;\n    let duration;\n    if (startTime && endTime) {\n        duration = Math.floor((endTime.getTime() - startTime.getTime()) / 1000);\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            userId,\n            coachId: coachId ?? null,\n            date: new Date(data.date),\n            startTime,\n            endTime,\n            ...duration !== undefined && {\n                duration\n            },\n            ...data.title !== undefined && {\n                title: data.title\n            },\n            ...data.notes !== undefined && {\n                notes: data.notes\n            },\n            ...data.location !== undefined && {\n                location: data.location\n            },\n            isTemplate: data.isTemplate || false,\n            updatedAt: new Date()\n        }\n    });\n}\n/**\n * Update a workout session\n */ async function updateWorkoutSession(id, userId, data) {\n    const existing = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findFirst({\n        where: {\n            id,\n            userId\n        }\n    });\n    if (!existing) {\n        return null;\n    }\n    let startTime = existing.startTime;\n    let endTime = existing.endTime;\n    let duration = existing.duration;\n    if (data.date && data.startTime) {\n        startTime = new Date(`${data.date}T${data.startTime}`);\n    }\n    if (data.date && data.endTime) {\n        endTime = new Date(`${data.date}T${data.endTime}`);\n    }\n    if (startTime && endTime) {\n        duration = Math.floor((endTime.getTime() - startTime.getTime()) / 1000);\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.update({\n        where: {\n            id\n        },\n        data: {\n            ...data.date && {\n                date: new Date(data.date)\n            },\n            ...startTime && {\n                startTime\n            },\n            ...endTime && {\n                endTime\n            },\n            ...duration !== undefined && {\n                duration\n            },\n            ...data.title && {\n                title: data.title\n            },\n            ...data.notes && {\n                notes: data.notes\n            },\n            ...data.location && {\n                location: data.location\n            },\n            ...data.isTemplate !== undefined && {\n                isTemplate: data.isTemplate\n            }\n        }\n    });\n}\n/**\n * Complete a workout session\n */ async function completeWorkoutSession(id, userId, endTime) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findFirst({\n        where: {\n            id,\n            userId\n        }\n    });\n    if (!session) {\n        return null;\n    }\n    const endTimeToUse = endTime || new Date();\n    const duration = Math.floor((endTimeToUse.getTime() - session.startTime.getTime()) / 1000);\n    // Calculate total volume and stats\n    const entries = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where: {\n            userId,\n            date: session.date\n        }\n    });\n    const totalVolume = entries.reduce((sum, entry)=>sum + (entry.trainingVolume || 0), 0);\n    const totalSets = entries.length;\n    const totalReps = entries.reduce((sum, entry)=>sum + entry.reps, 0);\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.update({\n        where: {\n            id\n        },\n        data: {\n            endTime: endTimeToUse,\n            duration,\n            isComplete: true,\n            totalVolume,\n            totalSets,\n            totalReps\n        }\n    });\n}\n/**\n * Delete a workout session\n */ async function deleteWorkoutSession(id, userId) {\n    const result = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.deleteMany({\n        where: {\n            id,\n            userId\n        }\n    });\n    return result.count > 0;\n}\n// ============================================================================\n// COACH-SPECIFIC QUERIES\n// ============================================================================\n/**\n * Get workout logs for clients assigned to a coach\n */ async function getClientWorkoutLogs(coachId, options = {}) {\n    const { clientId, dateRange, pagination = {} } = options;\n    const page = pagination.page || 1;\n    const limit = pagination.limit || 50;\n    const offset = (page - 1) * limit;\n    const where = {\n        coachId\n    };\n    if (clientId) {\n        where.userId = clientId;\n    }\n    if (dateRange) {\n        where.date = {\n            gte: dateRange.start,\n            lte: dateRange.end\n        };\n    }\n    const total = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.count({\n        where\n    });\n    const entries = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where,\n        include: {\n            exercises: true,\n            users_workout_log_entries_userIdTousers: {\n                select: {\n                    id: true,\n                    name: true,\n                    role: true\n                }\n            }\n        },\n        orderBy: {\n            date: 'desc'\n        },\n        skip: offset,\n        take: limit\n    });\n    const totalPages = Math.ceil(total / limit);\n    // Map the Prisma relation names to the expected format\n    const mappedEntries = entries.map((entry)=>({\n            ...entry,\n            exercise: entry.exercises,\n            user: entry.users_workout_log_entries_userIdTousers\n        }));\n    return {\n        entries: mappedEntries,\n        pagination: {\n            page,\n            limit,\n            total,\n            totalPages,\n            hasMore: page < totalPages\n        }\n    };\n}\n/**\n * Add coach feedback to a workout entry\n */ async function addCoachFeedback(entryId, coachId, feedback) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.update({\n        where: {\n            id: entryId,\n            coachId\n        },\n        data: {\n            coachFeedback: feedback\n        }\n    });\n}\n// ============================================================================\n// UTILITY QUERIES\n// ============================================================================\n/**\n * Get exercise categories for filtering\n */ async function getExerciseCategories() {\n    const exercises = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findMany({\n        select: {\n            category: true\n        },\n        where: {\n            isActive: true\n        }\n    });\n    return [\n        ...new Set(exercises.map((e)=>e.category))\n    ];\n}\n/**\n * Get muscle groups for filtering\n */ async function getMuscleGroups() {\n    const exercises = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findMany({\n        select: {\n            muscleGroups: true\n        },\n        where: {\n            isActive: true\n        }\n    });\n    const allMuscleGroups = exercises.flatMap((e)=>e.muscleGroups);\n    return [\n        ...new Set(allMuscleGroups)\n    ];\n}\n/**\n * Get equipment types for filtering\n */ async function getEquipmentTypes() {\n    const exercises = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findMany({\n        select: {\n            equipment: true\n        },\n        where: {\n            isActive: true\n        }\n    });\n    const allEquipment = exercises.flatMap((e)=>e.equipment);\n    return [\n        ...new Set(allEquipment)\n    ];\n}\n/**\n * Search exercises by name\n */ async function searchExercises(query, limit = 10) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.exercises.findMany({\n        where: {\n            name: {\n                contains: query,\n                mode: 'insensitive'\n            },\n            isActive: true\n        },\n        orderBy: {\n            usageCount: 'desc'\n        },\n        take: limit\n    });\n}\n// ============================================================================\n// WORKOUT TEMPLATE QUERIES\n// ============================================================================\n/**\n * Get workout templates with filtering\n */ async function getWorkoutTemplates(filters = {}) {\n    const where = {\n        isActive: true\n    };\n    if (filters.publicOnly) {\n        where.isPublic = true;\n    }\n    if (filters.category) {\n        where.category = filters.category;\n    }\n    if (filters.difficulty) {\n        where.difficulty = filters.difficulty;\n    }\n    if (filters.minRating) {\n        where.rating = {\n            gte: filters.minRating\n        };\n    }\n    if (filters.priceRange) {\n        const [min, max] = filters.priceRange.split('-').map(Number);\n        where.price = {\n            gte: min,\n            lte: max\n        };\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n        where,\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            workout_template_exercises: {\n                include: {\n                    exercises: true\n                },\n                orderBy: {\n                    order: 'asc'\n                }\n            },\n            _count: {\n                select: {\n                    template_ratings: true\n                }\n            }\n        },\n        orderBy: {\n            rating: 'desc'\n        },\n        take: filters.limit || 20\n    });\n}\n/**\n * Get workout template by ID\n */ async function getWorkoutTemplateById(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findUnique({\n        where: {\n            id\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            workout_template_exercises: {\n                include: {\n                    exercises: true\n                },\n                orderBy: {\n                    order: 'asc'\n                }\n            },\n            template_ratings: {\n                include: {\n                    users: {\n                        select: {\n                            id: true,\n                            name: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: 'desc'\n                },\n                take: 10\n            },\n            _count: {\n                select: {\n                    template_ratings: true\n                }\n            }\n        }\n    });\n}\n/**\n * Create workout template\n */ async function createWorkoutTemplate(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            updatedAt: new Date(),\n            name: data.name,\n            description: data.description,\n            category: data.category,\n            difficulty: data.difficulty || 'BEGINNER',\n            duration: data.duration,\n            equipment: data.equipment || [],\n            isPublic: data.isPublic || false,\n            price: data.price,\n            currency: data.currency || 'USD',\n            tags: data.tags || [],\n            users: {\n                connect: {\n                    id: data.createdBy\n                }\n            },\n            workout_template_exercises: {\n                create: data.exercises?.map((exercise)=>({\n                        exerciseId: exercise.exerciseId,\n                        order: exercise.order,\n                        sets: exercise.sets,\n                        reps: exercise.reps,\n                        weight: exercise.weight,\n                        restTime: exercise.restTime,\n                        notes: exercise.notes,\n                        isSuperset: exercise.isSuperset || false,\n                        supersetGroup: exercise.supersetGroup\n                    })) || []\n            }\n        },\n        include: {\n            workout_template_exercises: {\n                include: {\n                    exercises: true\n                }\n            }\n        }\n    });\n}\n/**\n * Update workout template\n */ async function updateWorkoutTemplate(id, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.update({\n        where: {\n            id\n        },\n        data: {\n            ...data.name && {\n                name: data.name\n            },\n            ...data.description && {\n                description: data.description\n            },\n            ...data.category && {\n                category: data.category\n            },\n            ...data.difficulty && {\n                difficulty: data.difficulty\n            },\n            ...data.duration && {\n                duration: data.duration\n            },\n            ...data.equipment && {\n                equipment: data.equipment\n            },\n            ...data.isPublic !== undefined && {\n                isPublic: data.isPublic\n            },\n            ...data.price !== undefined && {\n                price: data.price\n            },\n            ...data.tags && {\n                tags: data.tags\n            }\n        }\n    });\n}\n/**\n * Delete workout template\n */ async function deleteWorkoutTemplate(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.update({\n        where: {\n            id\n        },\n        data: {\n            isActive: false\n        }\n    });\n}\n/**\n * Get user's templates\n */ async function getMyTemplates(userId) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n        where: {\n            createdBy: userId,\n            isActive: true\n        },\n        include: {\n            workout_template_exercises: {\n                include: {\n                    exercises: true\n                },\n                orderBy: {\n                    order: 'asc'\n                }\n            },\n            _count: {\n                select: {\n                    template_ratings: true\n                }\n            }\n        },\n        orderBy: {\n            createdAt: 'desc'\n        }\n    });\n}\n/**\n * Search workout templates\n */ async function searchWorkoutTemplates(query, options = {}) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n        where: {\n            isActive: true,\n            ...options.publicOnly && {\n                isPublic: true\n            },\n            OR: [\n                {\n                    name: {\n                        contains: query,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    description: {\n                        contains: query,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    tags: {\n                        has: query\n                    }\n                }\n            ]\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            _count: {\n                select: {\n                    template_ratings: true\n                }\n            }\n        },\n        orderBy: {\n            rating: 'desc'\n        },\n        take: options.limit || 20\n    });\n}\n/**\n * Purchase template\n */ async function purchaseTemplate(templateId, userId) {\n    const template = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findUnique({\n        where: {\n            id: templateId\n        },\n        select: {\n            price: true,\n            currency: true\n        }\n    });\n    if (!template) throw new Error('Template not found');\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n        const purchase = await tx.template_purchases.create({\n            data: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                templateId,\n                price: template.price || 0,\n                currency: template.currency\n            }\n        });\n        await tx.workout_templates.update({\n            where: {\n                id: templateId\n            },\n            data: {\n                purchaseCount: {\n                    increment: 1\n                }\n            }\n        });\n        return purchase;\n    });\n}\n/**\n * Rate template\n */ async function rateTemplate(templateId, userId, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n        const rating = await tx.template_ratings.upsert({\n            where: {\n                userId_templateId: {\n                    userId,\n                    templateId\n                }\n            },\n            update: {\n                rating: data.rating,\n                review: data.review\n            },\n            create: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                templateId,\n                rating: data.rating,\n                review: data.review\n            }\n        });\n        // Recalculate average rating\n        const ratings = await tx.template_ratings.findMany({\n            where: {\n                templateId\n            },\n            select: {\n                rating: true\n            }\n        });\n        const avgRating = ratings.reduce((sum, r)=>sum + r.rating, 0) / ratings.length;\n        await tx.workout_templates.update({\n            where: {\n                id: templateId\n            },\n            data: {\n                rating: avgRating,\n                ratingCount: ratings.length\n            }\n        });\n        return rating;\n    });\n}\n// ============================================================================\n// TRAINING PROGRAM QUERIES\n// ============================================================================\n/**\n * Get training programs with filtering\n */ async function getTrainingPrograms(filters = {}) {\n    const where = {\n        isActive: true\n    };\n    if (filters.publicOnly) {\n        where.isPublic = true;\n    }\n    if (filters.category) {\n        where.category = filters.category;\n    }\n    if (filters.difficulty) {\n        where.difficulty = filters.difficulty;\n    }\n    if (filters.duration) {\n        where.duration = filters.duration;\n    }\n    if (filters.minRating) {\n        where.rating = {\n            gte: filters.minRating\n        };\n    }\n    if (filters.priceRange) {\n        const [min, max] = filters.priceRange.split('-').map(Number);\n        where.price = {\n            gte: min,\n            lte: max\n        };\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n        where,\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            program_weeks: {\n                orderBy: {\n                    weekNumber: 'asc'\n                }\n            },\n            _count: {\n                select: {\n                    program_ratings: true,\n                    program_subscriptions: true\n                }\n            }\n        },\n        orderBy: {\n            rating: 'desc'\n        },\n        take: filters.limit || 20\n    });\n}\n/**\n * Get training program by ID\n */ async function getTrainingProgramById(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findUnique({\n        where: {\n            id\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            program_weeks: {\n                orderBy: {\n                    weekNumber: 'asc'\n                }\n            },\n            workout_templates: {\n                include: {\n                    workout_template_exercises: {\n                        include: {\n                            exercises: true\n                        },\n                        orderBy: {\n                            order: 'asc'\n                        }\n                    }\n                }\n            },\n            program_ratings: {\n                include: {\n                    users: {\n                        select: {\n                            id: true,\n                            name: true\n                        }\n                    }\n                },\n                orderBy: {\n                    createdAt: 'desc'\n                },\n                take: 10\n            },\n            _count: {\n                select: {\n                    program_ratings: true,\n                    program_subscriptions: true\n                }\n            }\n        }\n    });\n}\n/**\n * Create training program\n */ async function createTrainingProgram(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            updatedAt: new Date(),\n            name: data.name,\n            description: data.description,\n            duration: data.duration,\n            difficulty: data.difficulty || 'BEGINNER',\n            category: data.category,\n            isPublic: data.isPublic || false,\n            price: data.price,\n            currency: data.currency || 'USD',\n            tags: data.tags || [],\n            users: {\n                connect: {\n                    id: data.createdBy\n                }\n            },\n            program_weeks: {\n                create: data.weeks?.map((week)=>({\n                        weekNumber: week.weekNumber,\n                        title: week.title,\n                        description: week.description,\n                        workouts: week.workouts\n                    })) || []\n            }\n        },\n        include: {\n            program_weeks: {\n                orderBy: {\n                    weekNumber: 'asc'\n                }\n            }\n        }\n    });\n}\n/**\n * Update training program\n */ async function updateTrainingProgram(id, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.update({\n        where: {\n            id\n        },\n        data: {\n            ...data.name && {\n                name: data.name\n            },\n            ...data.description && {\n                description: data.description\n            },\n            ...data.duration && {\n                duration: data.duration\n            },\n            ...data.difficulty && {\n                difficulty: data.difficulty\n            },\n            ...data.category && {\n                category: data.category\n            },\n            ...data.isPublic !== undefined && {\n                isPublic: data.isPublic\n            },\n            ...data.price !== undefined && {\n                price: data.price\n            },\n            ...data.tags && {\n                tags: data.tags\n            }\n        }\n    });\n}\n/**\n * Delete training program\n */ async function deleteTrainingProgram(id) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.update({\n        where: {\n            id\n        },\n        data: {\n            isActive: false\n        }\n    });\n}\n/**\n * Get user's programs\n */ async function getMyPrograms(userId) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n        where: {\n            createdBy: userId,\n            isActive: true\n        },\n        include: {\n            program_weeks: {\n                orderBy: {\n                    weekNumber: 'asc'\n                }\n            },\n            _count: {\n                select: {\n                    program_ratings: true,\n                    program_subscriptions: true\n                }\n            }\n        },\n        orderBy: {\n            createdAt: 'desc'\n        }\n    });\n}\n/**\n * Search training programs\n */ async function searchTrainingPrograms(query, options = {}) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n        where: {\n            isActive: true,\n            ...options.publicOnly && {\n                isPublic: true\n            },\n            OR: [\n                {\n                    name: {\n                        contains: query,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    description: {\n                        contains: query,\n                        mode: 'insensitive'\n                    }\n                },\n                {\n                    tags: {\n                        has: query\n                    }\n                }\n            ]\n        },\n        include: {\n            users: {\n                select: {\n                    id: true,\n                    name: true,\n                    trainerVerified: true\n                }\n            },\n            _count: {\n                select: {\n                    program_ratings: true,\n                    program_subscriptions: true\n                }\n            }\n        },\n        orderBy: {\n            rating: 'desc'\n        },\n        take: options.limit || 20\n    });\n}\n/**\n * Get user program subscriptions\n */ async function getUserProgramSubscriptions(userId) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_subscriptions.findMany({\n        where: {\n            userId,\n            isActive: true\n        },\n        include: {\n            program_templates: {\n                include: {\n                    users: {\n                        select: {\n                            id: true,\n                            name: true,\n                            trainerVerified: true\n                        }\n                    },\n                    program_weeks: {\n                        orderBy: {\n                            weekNumber: 'asc'\n                        }\n                    }\n                }\n            }\n        },\n        orderBy: {\n            startDate: 'desc'\n        }\n    });\n}\n/**\n * Purchase program\n */ async function purchaseProgram(programId, userId) {\n    const program = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findUnique({\n        where: {\n            id: programId\n        },\n        select: {\n            price: true,\n            currency: true\n        }\n    });\n    if (!program) throw new Error('Program not found');\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n        const purchase = await tx.program_purchases.create({\n            data: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                programId,\n                price: program.price || 0,\n                currency: program.currency\n            }\n        });\n        await tx.program_templates.update({\n            where: {\n                id: programId\n            },\n            data: {\n                purchaseCount: {\n                    increment: 1\n                }\n            }\n        });\n        return purchase;\n    });\n}\n/**\n * Subscribe to program\n */ async function subscribeToProgram(programId, userId) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_subscriptions.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            userId,\n            programId,\n            currentWeek: 1,\n            currentDay: 1,\n            updatedAt: new Date()\n        }\n    });\n}\n/**\n * Rate program\n */ async function rateProgram(programId, userId, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction(async (tx)=>{\n        const rating = await tx.program_ratings.upsert({\n            where: {\n                userId_programId: {\n                    userId,\n                    programId\n                }\n            },\n            update: {\n                rating: data.rating,\n                review: data.review\n            },\n            create: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                programId,\n                rating: data.rating,\n                review: data.review\n            }\n        });\n        // Recalculate average rating\n        const ratings = await tx.program_ratings.findMany({\n            where: {\n                programId\n            },\n            select: {\n                rating: true\n            }\n        });\n        const avgRating = ratings.reduce((sum, r)=>sum + r.rating, 0) / ratings.length;\n        await tx.program_templates.update({\n            where: {\n                id: programId\n            },\n            data: {\n                rating: avgRating,\n                ratingCount: ratings.length\n            }\n        });\n        return rating;\n    });\n}\n/**\n * Update program progress\n */ async function updateProgramProgress(programId, userId, data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_subscriptions.update({\n        where: {\n            userId_programId: {\n                userId,\n                programId\n            }\n        },\n        data: {\n            currentWeek: data.currentWeek,\n            currentDay: data.currentDay,\n            progressData: data.progressData\n        }\n    });\n}\n// ============================================================================\n// ANALYTICS & PROGRESS TRACKING QUERIES\n// ============================================================================\n/**\n * Get workout analytics for a user\n */ async function getWorkoutAnalytics(userId, options = {}) {\n    const where = {\n        userId\n    };\n    if (options.startDate || options.endDate) {\n        where.date = {};\n        if (options.startDate) where.date.gte = options.startDate;\n        if (options.endDate) where.date.lte = options.endDate;\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_analytics.findMany({\n        where,\n        orderBy: {\n            date: 'desc'\n        }\n    });\n}\n/**\n * Get progress metrics for a user\n */ async function getProgressMetrics(userId, options = {}) {\n    const where = {\n        userId\n    };\n    if (options.metricType) {\n        where.metricType = options.metricType;\n    }\n    if (options.startDate || options.endDate) {\n        where.recordedAt = {};\n        if (options.startDate) where.recordedAt.gte = options.startDate;\n        if (options.endDate) where.recordedAt.lte = options.endDate;\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.progress_metrics.findMany({\n        where,\n        orderBy: {\n            recordedAt: 'desc'\n        }\n    });\n}\n/**\n * Get personal records for a user\n */ async function getPersonalRecords(userId, options = {}) {\n    const where = {\n        userId\n    };\n    if (options.exerciseId) {\n        where.exerciseId = options.exerciseId;\n    }\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.personal_records.findMany({\n        where,\n        include: {\n            exercises: {\n                select: {\n                    id: true,\n                    name: true,\n                    category: true\n                }\n            }\n        },\n        orderBy: {\n            achievedAt: 'desc'\n        }\n    });\n}\n/**\n * Add progress metric\n */ async function addProgressMetric(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.progress_metrics.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            userId: data.userId,\n            metricType: data.metricType,\n            value: data.value,\n            unit: data.unit ?? null,\n            bodyPart: data.bodyPart ?? null,\n            notes: data.notes ?? null,\n            imageUrl: data.imageUrl ?? null,\n            recordedAt: data.recordedAt || new Date()\n        }\n    });\n}\n/**\n * Add personal record\n */ async function addPersonalRecord(data) {\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.personal_records.create({\n        data: {\n            id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n            userId: data.userId,\n            exerciseId: data.exerciseId,\n            recordType: data.recordType,\n            value: data.value,\n            unit: data.unit,\n            reps: data.reps ?? null,\n            notes: data.notes ?? null,\n            achievedAt: data.achievedAt || new Date()\n        }\n    });\n}\n/**\n * Generate workout analytics for a user\n */ async function generateWorkoutAnalytics(userId) {\n    // Get last 30 days of workout data\n    const endDate = new Date();\n    const startDate = new Date();\n    startDate.setDate(startDate.getDate() - 30);\n    const workoutLogs = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findMany({\n        where: {\n            userId,\n            date: {\n                gte: startDate,\n                lte: endDate\n            }\n        },\n        include: {\n            exercises: true\n        }\n    });\n    // Group by date and calculate daily stats\n    const dailyStats = workoutLogs.reduce((acc, log)=>{\n        const dateKey = log.date.toISOString().split('T')[0];\n        if (!dateKey) return acc;\n        if (!acc[dateKey]) {\n            acc[dateKey] = {\n                date: log.date,\n                totalVolume: 0,\n                totalSets: 0,\n                totalReps: 0,\n                muscleGroups: new Set()\n            };\n        }\n        acc[dateKey].totalVolume += log.trainingVolume || 0;\n        acc[dateKey].totalSets += 1;\n        acc[dateKey].totalReps += log.reps;\n        log.exercises.muscleGroups.forEach((mg)=>acc[dateKey]?.muscleGroups.add(mg));\n        return acc;\n    }, {});\n    // Create or update analytics records\n    const analyticsPromises = Object.entries(dailyStats).map(([dateKey, stats])=>{\n        const topMuscleGroup = Array.from(stats.muscleGroups).length > 0 ? Array.from(stats.muscleGroups)[0] : null;\n        return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_analytics.upsert({\n            where: {\n                userId_date: {\n                    userId,\n                    date: new Date(dateKey)\n                }\n            },\n            update: {\n                totalWorkouts: 1,\n                totalVolume: stats.totalVolume,\n                totalSets: stats.totalSets,\n                totalReps: stats.totalReps,\n                topMuscleGroup,\n                updatedAt: new Date()\n            },\n            create: {\n                id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                userId,\n                date: new Date(dateKey),\n                totalWorkouts: 1,\n                totalVolume: stats.totalVolume,\n                totalSets: stats.totalSets,\n                totalReps: stats.totalReps,\n                topMuscleGroup,\n                updatedAt: new Date()\n            }\n        });\n    });\n    return Promise.all(analyticsPromises);\n}\n// ============================================================================\n// MARKETPLACE QUERIES\n// ============================================================================\n/**\n * Get marketplace templates\n */ async function getMarketplaceTemplates(filters = {}) {\n    return getWorkoutTemplates({\n        ...filters,\n        publicOnly: true\n    });\n}\n/**\n * Get marketplace programs\n */ async function getMarketplacePrograms(filters = {}) {\n    return getTrainingPrograms({\n        ...filters,\n        publicOnly: true\n    });\n}\n/**\n * Get featured content\n */ async function getFeaturedContent() {\n    const [templates, programs] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                rating: {\n                    gte: 4.5\n                }\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        template_ratings: true\n                    }\n                }\n            },\n            orderBy: {\n                rating: 'desc'\n            },\n            take: 6\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                rating: {\n                    gte: 4.5\n                }\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        program_ratings: true,\n                        program_subscriptions: true\n                    }\n                }\n            },\n            orderBy: {\n                rating: 'desc'\n            },\n            take: 6\n        })\n    ]);\n    return {\n        templates,\n        programs\n    };\n}\n/**\n * Get top rated content\n */ async function getTopRatedContent() {\n    const [templates, programs] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                ratingCount: {\n                    gte: 5\n                }\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        template_ratings: true\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    rating: 'desc'\n                },\n                {\n                    ratingCount: 'desc'\n                }\n            ],\n            take: 10\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                ratingCount: {\n                    gte: 5\n                }\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        program_ratings: true,\n                        program_subscriptions: true\n                    }\n                }\n            },\n            orderBy: [\n                {\n                    rating: 'desc'\n                },\n                {\n                    ratingCount: 'desc'\n                }\n            ],\n            take: 10\n        })\n    ]);\n    return {\n        templates,\n        programs\n    };\n}\n/**\n * Get popular content\n */ async function getPopularContent() {\n    const [templates, programs] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        template_ratings: true\n                    }\n                }\n            },\n            orderBy: {\n                purchaseCount: 'desc'\n            },\n            take: 10\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        program_ratings: true,\n                        program_subscriptions: true\n                    }\n                }\n            },\n            orderBy: {\n                purchaseCount: 'desc'\n            },\n            take: 10\n        })\n    ]);\n    return {\n        templates,\n        programs\n    };\n}\n/**\n * Get recommended content for a user\n */ async function getRecommendedContent(userId) {\n    if (!userId) {\n        // Return popular content for anonymous users\n        return getPopularContent();\n    }\n    // Get user's preferences and past purchases\n    const user = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.users.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            fitnessGoals: true,\n            experienceLevel: true,\n            preferredWorkoutTypes: true,\n            template_purchases: {\n                include: {\n                    workout_templates: {\n                        select: {\n                            category: true,\n                            difficulty: true,\n                            tags: true\n                        }\n                    }\n                }\n            },\n            program_purchases: {\n                include: {\n                    program_templates: {\n                        select: {\n                            category: true,\n                            difficulty: true,\n                            tags: true\n                        }\n                    }\n                }\n            }\n        }\n    });\n    if (!user) {\n        return getPopularContent();\n    }\n    // Extract user preferences for recommendations\n    const userCategories = [\n        ...user.template_purchases.map((p)=>p.workout_templates.category),\n        ...user.program_purchases.map((p)=>p.program_templates.category)\n    ].filter(Boolean);\n    const userTags = [\n        ...user.template_purchases.flatMap((p)=>p.workout_templates.tags),\n        ...user.program_purchases.flatMap((p)=>p.program_templates.tags),\n        ...user.fitnessGoals,\n        ...user.preferredWorkoutTypes\n    ].filter(Boolean);\n    const [templates, programs] = await Promise.all([\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                OR: [\n                    {\n                        category: {\n                            in: userCategories\n                        }\n                    },\n                    {\n                        difficulty: user.experienceLevel\n                    },\n                    {\n                        tags: {\n                            hasSome: userTags\n                        }\n                    }\n                ]\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        template_ratings: true\n                    }\n                }\n            },\n            orderBy: {\n                rating: 'desc'\n            },\n            take: 10\n        }),\n        _client__WEBPACK_IMPORTED_MODULE_1__.prisma.program_templates.findMany({\n            where: {\n                isPublic: true,\n                isActive: true,\n                OR: [\n                    {\n                        category: {\n                            in: userCategories\n                        }\n                    },\n                    {\n                        difficulty: user.experienceLevel\n                    },\n                    {\n                        tags: {\n                            hasSome: userTags\n                        }\n                    }\n                ]\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true,\n                        trainerVerified: true\n                    }\n                },\n                _count: {\n                    select: {\n                        program_ratings: true,\n                        program_subscriptions: true\n                    }\n                }\n            },\n            orderBy: {\n                rating: 'desc'\n            },\n            take: 10\n        })\n    ]);\n    return {\n        templates,\n        programs\n    };\n}\n// Link workout session to assessment\nasync function link_session_to_assessment(session_id, assessment_id) {\n    const assessment = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.assessments.findUnique({\n        where: {\n            id: assessment_id\n        }\n    });\n    if (!assessment) {\n        throw new Error('Assessment not found');\n    }\n    // Extract fitness level and goals from assessment\n    const assessment_data = {\n        fitness_level: determine_fitness_level(assessment),\n        primary_goal: assessment.primaryGoal || 'GENERAL_FITNESS',\n        movement_limitations: assessment.limitations || [],\n        experience_years: assessment.experienceYears || 0\n    };\n    return _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.update({\n        where: {\n            id: session_id\n        },\n        data: {\n            assessmentId: assessment_id,\n            fitnessLevel: assessment_data.fitness_level,\n            primaryGoal: assessment_data.primary_goal,\n            updatedAt: new Date()\n        }\n    });\n}\n// Determine fitness level from assessment scores\nfunction determine_fitness_level(assessment) {\n    // Analyse assessment metrics\n    const squat_score = assessment.squatScore || 0;\n    const push_score = assessment.pushScore || 0;\n    const pull_score = assessment.pullScore || 0;\n    const average_score = (squat_score + push_score + pull_score) / 3;\n    if (average_score >= 8) return 'ADVANCED';\n    if (average_score >= 5) return 'INTERMEDIATE';\n    return 'BEGINNER';\n}\n// Get workout recommendations based on assessment\nasync function get_assessment_based_recommendations(user_id) {\n    // Get most recent assessment\n    const latest_assessment = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.assessments.findFirst({\n        where: {\n            clientId: user_id\n        },\n        orderBy: {\n            createdAt: 'desc'\n        }\n    });\n    if (!latest_assessment) {\n        return null;\n    }\n    const fitness_level = determine_fitness_level(latest_assessment);\n    // Get exercise recommendations\n    const exercise_recommendations = (0,_services_ai_workout_suggestions__WEBPACK_IMPORTED_MODULE_3__.get_exercise_recommendations)(fitness_level, latest_assessment.primaryGoal || 'GENERAL_FITNESS', 'SQUAT' // Example pattern\n    );\n    return {\n        fitness_level,\n        recommended_volume: calculate_recommended_volume(fitness_level),\n        recommended_frequency: calculate_recommended_frequency(fitness_level),\n        training_phase: exercise_recommendations.progression_level,\n        coaching_cues: exercise_recommendations.coaching_cues\n    };\n}\nfunction calculate_recommended_volume(fitness_level) {\n    const volume_map = {\n        BEGINNER: 10,\n        INTERMEDIATE: 15,\n        ADVANCED: 20\n    };\n    return volume_map[fitness_level] || 12;\n}\nfunction calculate_recommended_frequency(fitness_level) {\n    const frequency_map = {\n        BEGINNER: 3,\n        INTERMEDIATE: 4,\n        ADVANCED: 5\n    };\n    return frequency_map[fitness_level] || 3;\n}\n// Prepare workout data for AI analysis\nasync function prepare_ai_training_data(user_id) {\n    // Get all user sessions from last 90 days\n    const ninety_days_ago = new Date();\n    ninety_days_ago.setDate(ninety_days_ago.getDate() - 90);\n    const sessions = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findMany({\n        where: {\n            userId: user_id,\n            date: {\n                gte: ninety_days_ago\n            },\n            isComplete: true\n        },\n        include: {\n            workout_log_entries: {\n                include: {\n                    exercises: true\n                }\n            }\n        },\n        orderBy: {\n            date: 'asc'\n        }\n    });\n    const entries = sessions.flatMap((s)=>s.workout_log_entries);\n    // Calculate metrics\n    const total_volume = entries.reduce((sum, e)=>sum + (e.trainingVolume || 0), 0);\n    const average_volume = sessions.length > 0 ? total_volume / sessions.length : 0;\n    // Find favourite exercises (most frequently used)\n    const exercise_frequency = new Map();\n    entries.forEach((e)=>{\n        exercise_frequency.set(e.exerciseId, (exercise_frequency.get(e.exerciseId) || 0) + 1);\n    });\n    const favourite_exercises = Array.from(exercise_frequency.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 10).map(([id])=>id);\n    // Calculate consistency score (sessions per week)\n    const weeks_in_period = 13; // ~90 days\n    const consistency_score = sessions.length / weeks_in_period / 4; // Normalised to 0-1\n    // Get latest assessment\n    const latest_assessment = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.assessments.findFirst({\n        where: {\n            clientId: user_id\n        },\n        orderBy: {\n            createdAt: 'desc'\n        }\n    });\n    return {\n        user_profile: {\n            fitness_level: 'INTERMEDIATE',\n            primary_goal: latest_assessment?.primaryGoal || 'GENERAL_FITNESS',\n            experience_years: latest_assessment?.experienceYears || 1\n        },\n        workout_history: {\n            total_sessions: sessions.length,\n            average_volume,\n            favourite_exercises,\n            consistency_score: Math.min(consistency_score, 1)\n        },\n        performance_metrics: {\n            strength_progression: calculate_strength_progression(entries),\n            volume_progression: calculate_volume_progression(sessions),\n            technique_scores: entries.filter((e)=>e.formQuality !== null).map((e)=>e.formQuality)\n        },\n        preferences: {\n            preferred_set_types: calculate_preferred_set_types(entries),\n            preferred_rep_ranges: calculate_preferred_rep_range(entries),\n            preferred_rest_durations: calculate_preferred_rest_durations(entries)\n        }\n    };\n}\nfunction calculate_strength_progression(entries) {\n    // Compare first 20% of entries with last 20%\n    const total = entries.length;\n    if (total < 10) return 0; // Need minimum data\n    const early_entries = entries.slice(0, Math.floor(total * 0.2));\n    const recent_entries = entries.slice(Math.floor(total * 0.8));\n    const early_avg_volume = early_entries.reduce((sum, e)=>sum + (e.trainingVolume || 0), 0) / early_entries.length;\n    const recent_avg_volume = recent_entries.reduce((sum, e)=>sum + (e.trainingVolume || 0), 0) / recent_entries.length;\n    return early_avg_volume > 0 ? (recent_avg_volume - early_avg_volume) / early_avg_volume * 100 : 0;\n}\nfunction calculate_volume_progression(sessions) {\n    if (sessions.length < 2) return 0;\n    const first_session = sessions[0];\n    const last_session = sessions[sessions.length - 1];\n    const first_volume = first_session.totalVolume || 0;\n    const last_volume = last_session.totalVolume || 0;\n    return first_volume > 0 ? (last_volume - first_volume) / first_volume * 100 : 0;\n}\nfunction calculate_preferred_set_types(entries) {\n    const set_type_counts = new Map();\n    entries.forEach((e)=>{\n        set_type_counts.set(e.setType, (set_type_counts.get(e.setType) || 0) + 1);\n    });\n    return Array.from(set_type_counts.entries()).sort((a, b)=>b[1] - a[1]).slice(0, 3).map(([type])=>type);\n}\nfunction calculate_preferred_rep_range(entries) {\n    const reps = entries.map((e)=>e.reps).filter((r)=>r > 0);\n    if (reps.length === 0) return [\n        8,\n        12\n    ];\n    reps.sort((a, b)=>a - b);\n    const percentile_25 = reps[Math.floor(reps.length * 0.25)];\n    const percentile_75 = reps[Math.floor(reps.length * 0.75)];\n    return [\n        percentile_25,\n        percentile_75\n    ];\n}\nfunction calculate_preferred_rest_durations(entries) {\n    const rest_durations = entries.map((e)=>e.restSeconds).filter((r)=>r !== null && r !== undefined);\n    if (rest_durations.length === 0) return [\n        60,\n        90,\n        120\n    ];\n    const avg = rest_durations.reduce((sum, r)=>sum + r, 0) / rest_durations.length;\n    return [\n        Math.floor(avg * 0.8),\n        Math.floor(avg),\n        Math.floor(avg * 1.2)\n    ];\n}\n// Calculate experience points for a session\nasync function calculate_session_experience_points(session_id) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findUnique({\n        where: {\n            id: session_id\n        },\n        include: {\n            workout_log_entries: true\n        }\n    });\n    if (!session) {\n        throw new Error('Session not found');\n    }\n    const breakdown = {\n        base_points: 100,\n        volume_bonus: 0,\n        technique_bonus: 0,\n        consistency_bonus: 0,\n        achievement_bonus: 0,\n        total: 0\n    };\n    // Volume bonus (1 point per 100kg total volume)\n    const total_volume = session.totalVolume || 0;\n    breakdown.volume_bonus = Math.floor(total_volume / 100);\n    // Technique bonus (average form quality)\n    const entries_with_form = session.workout_log_entries.filter((e)=>e.formQuality !== null);\n    if (entries_with_form.length > 0) {\n        const avg_form = entries_with_form.reduce((sum, e)=>sum + (e.formQuality || 0), 0) / entries_with_form.length;\n        breakdown.technique_bonus = Math.floor(avg_form * 20); // Max 100 bonus for perfect form\n    }\n    // Consistency bonus (check if session continues a streak)\n    const streak_bonus = await calculate_consistency_streak_bonus(session.userId, session.date);\n    breakdown.consistency_bonus = streak_bonus;\n    // Achievement bonus (any personal records)\n    const pr_count = session.workout_log_entries.filter((e)=>e.personalRecord || e.volumeRecord).length;\n    breakdown.achievement_bonus = pr_count * 50; // 50 points per PR\n    breakdown.total = breakdown.base_points + breakdown.volume_bonus + breakdown.technique_bonus + breakdown.consistency_bonus + breakdown.achievement_bonus;\n    return breakdown;\n}\nasync function calculate_consistency_streak_bonus(user_id, session_date) {\n    // Get recent sessions to calculate streak\n    const seven_days_ago = new Date(session_date);\n    seven_days_ago.setDate(seven_days_ago.getDate() - 7);\n    const recent_sessions = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findMany({\n        where: {\n            userId: user_id,\n            date: {\n                gte: seven_days_ago,\n                lte: session_date\n            },\n            isComplete: true\n        },\n        orderBy: {\n            date: 'desc'\n        }\n    });\n    // Award bonus for 3+ sessions in 7 days\n    if (recent_sessions.length >= 3) {\n        return 50 * recent_sessions.length; // Escalating bonus\n    }\n    return 0;\n}\n// Check and award achievements after session\nasync function check_and_award_achievements(user_id, session_id) {\n    const awarded_achievement_ids = [];\n    // Get all achievements\n    const all_achievements = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.achievements.findMany();\n    // Get user's existing achievements\n    const existing_achievements = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.user_achievements.findMany({\n        where: {\n            userId: user_id\n        },\n        select: {\n            achievementId: true\n        }\n    });\n    const existing_ids = new Set(existing_achievements.map((a)=>a.achievementId));\n    // Check each achievement\n    for (const achievement of all_achievements){\n        if (existing_ids.has(achievement.id)) continue; // Already earned\n        const criteria = achievement.criteria;\n        const meets_criteria = await check_achievement_criteria(user_id, session_id, criteria);\n        if (meets_criteria) {\n            // Award achievement\n            await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.user_achievements.create({\n                data: {\n                    id: crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID(),\n                    userId: user_id,\n                    achievementId: achievement.id,\n                    sessionId: session_id\n                }\n            });\n            awarded_achievement_ids.push(achievement.id);\n        }\n    }\n    return awarded_achievement_ids;\n}\nasync function check_achievement_criteria(user_id, session_id, criteria) {\n    switch(criteria.type){\n        case 'VOLUME':\n            return check_volume_achievement(user_id, session_id, criteria);\n        case 'CONSISTENCY':\n            return check_consistency_achievement(user_id, criteria);\n        case 'STRENGTH':\n            return check_strength_achievement(user_id, criteria);\n        case 'TECHNIQUE':\n            return check_technique_achievement(user_id, session_id, criteria);\n        case 'MILESTONE':\n            return check_milestone_achievement(user_id, criteria);\n        default:\n            return false;\n    }\n}\nasync function check_volume_achievement(_user_id, session_id, criteria) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findUnique({\n        where: {\n            id: session_id\n        }\n    });\n    if (!session) return false;\n    const total_volume = session.totalVolume || 0;\n    return total_volume >= criteria.threshold;\n}\nasync function check_consistency_achievement(user_id, criteria) {\n    const thirty_days_ago = new Date();\n    thirty_days_ago.setDate(thirty_days_ago.getDate() - 30);\n    const session_count = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.count({\n        where: {\n            userId: user_id,\n            date: {\n                gte: thirty_days_ago\n            },\n            isComplete: true\n        }\n    });\n    return session_count >= criteria.threshold;\n}\nasync function check_strength_achievement(user_id, criteria) {\n    // Check for personal records\n    const pr_count = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.count({\n        where: {\n            userId: user_id,\n            personalRecord: true\n        }\n    });\n    return pr_count >= criteria.threshold;\n}\nasync function check_technique_achievement(_user_id, session_id, criteria) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findUnique({\n        where: {\n            id: session_id\n        },\n        include: {\n            workout_log_entries: true\n        }\n    });\n    if (!session) return false;\n    const entries_with_form = session.workout_log_entries.filter((e)=>e.formQuality !== null);\n    if (entries_with_form.length === 0) return false;\n    const avg_form = entries_with_form.reduce((sum, e)=>sum + (e.formQuality || 0), 0) / entries_with_form.length;\n    return avg_form >= criteria.threshold;\n}\nasync function check_milestone_achievement(user_id, criteria) {\n    const total_sessions = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.count({\n        where: {\n            userId: user_id,\n            isComplete: true\n        }\n    });\n    return total_sessions === criteria.threshold; // Exact milestone\n}\n// Update session with XP and achievements\nasync function finalise_session_with_gamification(session_id) {\n    const session = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.findUnique({\n        where: {\n            id: session_id\n        }\n    });\n    if (!session) {\n        throw new Error('Session not found');\n    }\n    // Calculate XP\n    const xp_breakdown = await calculate_session_experience_points(session_id);\n    // Check achievements\n    const new_achievements = await check_and_award_achievements(session.userId, session_id);\n    // Add achievement bonus to XP\n    const achievement_xp = new_achievements.length * 100;\n    xp_breakdown.achievement_bonus = achievement_xp;\n    xp_breakdown.total += achievement_xp;\n    // Update session\n    await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_sessions.update({\n        where: {\n            id: session_id\n        },\n        data: {\n            experiencePoints: xp_breakdown.total,\n            achievementsEarned: new_achievements,\n            updatedAt: new Date()\n        }\n    });\n    return {\n        experience_points: xp_breakdown,\n        achievements_earned: new_achievements\n    };\n}\n// ============================================================================\n// PERSONAL RECORDS DETECTION\n// ============================================================================\n/**\n * Check if a workout entry is a personal record for weight\n * @param userId - User ID\n * @param exerciseId - Exercise ID\n * @param weight - Weight lifted (numeric value)\n * @param reps - Number of reps\n * @returns true if this is a PR, false otherwise\n */ async function check_personal_record(userId, exerciseId, weight, reps) {\n    // Find the highest weight for this exercise with the same or more reps\n    const previous_best = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findFirst({\n        where: {\n            userId,\n            exerciseId,\n            reps: {\n                gte: reps\n            }\n        },\n        orderBy: {\n            trainingVolume: 'desc'\n        },\n        select: {\n            weight: true,\n            trainingVolume: true\n        }\n    });\n    if (!previous_best) {\n        // First time doing this exercise - it's a PR!\n        return true;\n    }\n    // Extract numeric weight from previous best (handles \"135 lbs\" format)\n    const previous_weight = parseFloat(previous_best.weight.replace(/[^\\d.,]/g, ''));\n    // Is current weight higher than previous best?\n    return weight > previous_weight;\n}\n/**\n * Check if a workout entry is a volume record\n * @param userId - User ID\n * @param exerciseId - Exercise ID\n * @param volume - Training volume (weight × reps)\n * @returns true if this is a volume PR, false otherwise\n */ async function check_volume_record(userId, exerciseId, volume) {\n    // Find the highest training volume for this exercise\n    const previous_best = await _client__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_log_entries.findFirst({\n        where: {\n            userId,\n            exerciseId\n        },\n        orderBy: {\n            trainingVolume: 'desc'\n        },\n        select: {\n            trainingVolume: true\n        }\n    });\n    if (!previous_best || !previous_best.trainingVolume) {\n        // First time doing this exercise - it's a volume PR!\n        return true;\n    }\n    // Is current volume higher than previous best?\n    return volume > previous_best.trainingVolume;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9kYXRhYmFzZS93b3Jrb3V0LXF1ZXJpZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLHVDQUF1QztBQUN2Qzs7O0NBR0MsR0FFMkI7QUFDTTtBQWdCVDtBQUN3RDtBQUVqRiwrRUFBK0U7QUFDL0UsNEJBQTRCO0FBQzVCLCtFQUErRTtBQUUvRTs7Q0FFQyxHQUNNLGVBQWVNLHVCQUNwQkMsTUFBYyxFQUNkQyxVQUtJLENBQUMsQ0FBQztJQVNOLE1BQU0sRUFBRUMsVUFBVSxDQUFDLENBQUMsRUFBRUMsT0FBTztRQUFFQyxPQUFPO1FBQVFDLFdBQVc7SUFBTyxDQUFDLEVBQUVDLGFBQWEsQ0FBQyxDQUFDLEVBQUVDLHNCQUFzQixJQUFJLEVBQUUsR0FBR047SUFDbkgsTUFBTU8sT0FBT0YsV0FBV0UsSUFBSSxJQUFJO0lBQ2hDLE1BQU1DLFFBQVFILFdBQVdHLEtBQUssSUFBSTtJQUNsQyxNQUFNQyxTQUFTLENBQUNGLE9BQU8sS0FBS0M7SUFFNUIscUJBQXFCO0lBQ3JCLE1BQU1FLFFBQWE7UUFDakJYO0lBQ0Y7SUFFQSxJQUFJRSxRQUFRVSxTQUFTLEVBQUU7UUFDckJELE1BQU1FLElBQUksR0FBRztZQUNYQyxLQUFLWixRQUFRVSxTQUFTLENBQUNHLEtBQUs7WUFDNUJDLEtBQUtkLFFBQVFVLFNBQVMsQ0FBQ0ssR0FBRztRQUM1QjtJQUNGO0lBRUEsSUFBSWYsUUFBUWdCLFNBQVMsSUFBSWhCLFFBQVFnQixTQUFTLENBQUNDLE1BQU0sR0FBRyxHQUFHO1FBQ3JEUixNQUFNUyxVQUFVLEdBQUc7WUFBRUMsSUFBSW5CLFFBQVFnQixTQUFTO1FBQUM7SUFDN0M7SUFFQSxJQUFJaEIsUUFBUW9CLFFBQVEsSUFBSXBCLFFBQVFvQixRQUFRLENBQUNILE1BQU0sR0FBRyxHQUFHO1FBQ25EUixNQUFNWSxPQUFP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N0MsS0FBSzZDO1lBQUs7UUFDcEI7UUFDQXJCLFNBQVM7WUFDUG9CLGdCQUFnQjtRQUNsQjtRQUNBekIsUUFBUTtZQUNOd0IsUUFBUTtZQUNSQyxnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLElBQUksQ0FBQ2tZLGVBQWU7UUFDbEIsOENBQThDO1FBQzlDLE9BQU87SUFDVDtJQUVBLHVFQUF1RTtJQUN2RSxNQUFNQyxrQkFBa0JDLFdBQVdGLGNBQWNuWSxNQUFNLENBQUNzWSxPQUFPLENBQUMsWUFBWTtJQUU1RSwrQ0FBK0M7SUFDL0MsT0FBT3RZLFNBQVNvWTtBQUNsQjtBQUVBOzs7Ozs7Q0FNQyxHQUNELGVBQWU3WCxvQkFDYmhFLE1BQWMsRUFDZG9CLFVBQWtCLEVBQ2xCNEcsTUFBYztJQUVkLHFEQUFxRDtJQUNyRCxNQUFNNFQsZ0JBQWdCLE1BQU1sYywyQ0FBTUEsQ0FBQ2lDLG1CQUFtQixDQUFDMEIsU0FBUyxDQUFDO1FBQy9EMUMsT0FBTztZQUNMWDtZQUNBb0I7UUFDRjtRQUNBa0IsU0FBUztZQUNQb0IsZ0JBQWdCO1FBQ2xCO1FBQ0F6QixRQUFRO1lBQ055QixnQkFBZ0I7UUFDbEI7SUFDRjtJQUVBLElBQUksQ0FBQ2tZLGlCQUFpQixDQUFDQSxjQUFjbFksY0FBYyxFQUFFO1FBQ25ELHFEQUFxRDtRQUNyRCxPQUFPO0lBQ1Q7SUFFQSwrQ0FBK0M7SUFDL0MsT0FBT3NFLFNBQVM0VCxjQUFjbFksY0FBYztBQUM5QyIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL2RhdGFiYXNlL3dvcmtvdXQtcXVlcmllcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvY29yZS9kYXRhYmFzZS93b3Jrb3V0LXF1ZXJpZXMudHNcbi8qKlxuICogV29ya291dCBMb2cgRGF0YWJhc2UgUXVlcmllcyBmb3IgTWFzc2ltaW5vXG4gKiBDb21wcmVoZW5zaXZlIHF1ZXJ5IGZ1bmN0aW9ucyBmb3Igd29ya291dCB0cmFja2luZyBhbmQgbWFuYWdlbWVudFxuICovXG5cbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJy4vY2xpZW50JztcbmltcG9ydCB0eXBlIHtcbiAgd29ya291dF9sb2dfZW50cmllcyBhcyBXb3Jrb3V0TG9nRW50cnksXG4gIGV4ZXJjaXNlcyBhcyBFeGVyY2lzZSxcbiAgd29ya291dF9zZXNzaW9ucyBhcyBXb3Jrb3V0U2Vzc2lvbixcbn0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHtcbiAgV29ya291dEZpbHRlck9wdGlvbnMsXG4gIFdvcmtvdXRTb3J0T3B0aW9ucyxcbiAgV29ya291dFBhZ2luYXRpb24sXG4gIFdvcmtvdXRMb2dFbnRyeUZvcm1EYXRhLFxuICBXb3Jrb3V0U2Vzc2lvbkZvcm1EYXRhLFxuICBjYWxjdWxhdGVBdmVyYWdlV2VpZ2h0LFxuICBjYWxjdWxhdGVUcmFpbmluZ1ZvbHVtZSxcbiAgZ2VuZXJhdGVPcmRlcixcbiAgT3JkZXJHZW5lcmF0aW9uQ29udGV4dFxufSBmcm9tICdAL3R5cGVzL3dvcmtvdXQnO1xuaW1wb3J0IHsgZ2V0X2V4ZXJjaXNlX3JlY29tbWVuZGF0aW9ucyB9IGZyb20gJ0Avc2VydmljZXMvYWkvd29ya291dC1zdWdnZXN0aW9ucyc7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFdPUktPVVQgTE9HIEVOVFJZIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXQgdW5pZmllZCB3b3Jrb3V0IGVudHJpZXMgKHBlcnNvbmFsICsgdGVhbSB3b3Jrb3V0cykgd2l0aCBmaWx0ZXJpbmcsIHNvcnRpbmcsIGFuZCBwYWdpbmF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyV29ya291dHNVbmlmaWVkKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGZpbHRlcnM/OiBXb3Jrb3V0RmlsdGVyT3B0aW9ucztcbiAgICBzb3J0PzogV29ya291dFNvcnRPcHRpb25zO1xuICAgIHBhZ2luYXRpb24/OiBQYXJ0aWFsPFdvcmtvdXRQYWdpbmF0aW9uPjtcbiAgICBpbmNsdWRlVGVhbVdvcmtvdXRzPzogYm9vbGVhbjtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPHtcbiAgZW50cmllczogKFdvcmtvdXRMb2dFbnRyeSAmIHtcbiAgICBleGVyY2lzZTogRXhlcmNpc2U7XG4gICAgdXNlcjogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfTtcbiAgICBjb2FjaDogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfSB8IG51bGw7XG4gIH0pW107XG4gIHBhZ2luYXRpb246IFdvcmtvdXRQYWdpbmF0aW9uO1xufT4ge1xuICBjb25zdCB7IGZpbHRlcnMgPSB7fSwgc29ydCA9IHsgZmllbGQ6ICdkYXRlJywgZGlyZWN0aW9uOiAnZGVzYycgfSwgcGFnaW5hdGlvbiA9IHt9LCBpbmNsdWRlVGVhbVdvcmtvdXRzID0gdHJ1ZSB9ID0gb3B0aW9ucztcbiAgY29uc3QgcGFnZSA9IHBhZ2luYXRpb24ucGFnZSB8fCAxO1xuICBjb25zdCBsaW1pdCA9IHBhZ2luYXRpb24ubGltaXQgfHwgNTA7XG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAvLyBCdWlsZCB3aGVyZSBjbGF1c2VcbiAgY29uc3Qgd2hlcmU6IGFueSA9IHtcbiAgICB1c2VySWQsXG4gIH07XG5cbiAgaWYgKGZpbHRlcnMuZGF0ZVJhbmdlKSB7XG4gICAgd2hlcmUuZGF0ZSA9IHtcbiAgICAgIGd0ZTogZmlsdGVycy5kYXRlUmFuZ2Uuc3RhcnQsXG4gICAgICBsdGU6IGZpbHRlcnMuZGF0ZVJhbmdlLmVuZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGZpbHRlcnMuZXhlcmNpc2VzICYmIGZpbHRlcnMuZXhlcmNpc2VzLmxlbmd0aCA+IDApIHtcbiAgICB3aGVyZS5leGVyY2lzZUlkID0geyBpbjogZmlsdGVycy5leGVyY2lzZXMgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXJzLnNldFR5cGVzICYmIGZpbHRlcnMuc2V0VHlwZXMubGVuZ3RoID4gMCkge1xuICAgIHdoZXJlLnNldFR5cGUgPSB7IGluOiBmaWx0ZXJzLnNldFR5cGVzIH07XG4gIH1cblxuICBpZiAoZmlsdGVycy5jb2FjaElkKSB7XG4gICAgd2hlcmUuY29hY2hJZCA9IGZpbHRlcnMuY29hY2hJZDtcbiAgfVxuXG4gIC8vIEZpbHRlciBieSB0ZWFtIHdvcmtvdXQgc3RhdHVzIGlmIHNwZWNpZmllZFxuICBpZiAoIWluY2x1ZGVUZWFtV29ya291dHMpIHtcbiAgICB3aGVyZS5pc1RlYW1Xb3Jrb3V0ID0gZmFsc2U7XG4gIH1cblxuICAvLyBHZXQgdG90YWwgY291bnRcbiAgY29uc3QgdG90YWwgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5jb3VudCh7IHdoZXJlIH0pO1xuXG4gIC8vIEdldCBlbnRyaWVzIHdpdGggcmVsYXRpb25zaGlwc1xuICBjb25zdCBlbnRyaWVzID0gYXdhaXQgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuZmluZE1hbnkoe1xuICAgIHdoZXJlLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGV4ZXJjaXNlczogdHJ1ZSxcbiAgICAgIHVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfdXNlcklkVG91c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXNlcnNfd29ya291dF9sb2dfZW50cmllc19jb2FjaElkVG91c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgW3NvcnQuZmllbGRdOiBzb3J0LmRpcmVjdGlvbixcbiAgICB9LFxuICAgIHNraXA6IG9mZnNldCxcbiAgICB0YWtlOiBsaW1pdCxcbiAgfSk7XG5cbiAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KTtcblxuICAvLyBNYXAgdGhlIFByaXNtYSByZWxhdGlvbiBuYW1lcyB0byB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gIGNvbnN0IG1hcHBlZEVudHJpZXMgPSBlbnRyaWVzLm1hcCgoZW50cnkpID0+ICh7XG4gICAgLi4uZW50cnksXG4gICAgZXhlcmNpc2U6IGVudHJ5LmV4ZXJjaXNlcyxcbiAgICB1c2VyOiBlbnRyeS51c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnMsXG4gICAgY29hY2g6IGVudHJ5LnVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfY29hY2hJZFRvdXNlcnMsXG4gIH0pKTtcblxuICByZXR1cm4ge1xuICAgIGVudHJpZXM6IG1hcHBlZEVudHJpZXMsXG4gICAgcGFnaW5hdGlvbjoge1xuICAgICAgcGFnZSxcbiAgICAgIGxpbWl0LFxuICAgICAgdG90YWwsXG4gICAgICB0b3RhbFBhZ2VzLFxuICAgICAgaGFzTW9yZTogcGFnZSA8IHRvdGFsUGFnZXMsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgd29ya291dCBsb2cgZW50cmllcyB3aXRoIGZpbHRlcmluZywgc29ydGluZywgYW5kIHBhZ2luYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdvcmtvdXRMb2dFbnRyaWVzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGZpbHRlcnM/OiBXb3Jrb3V0RmlsdGVyT3B0aW9ucztcbiAgICBzb3J0PzogV29ya291dFNvcnRPcHRpb25zO1xuICAgIHBhZ2luYXRpb24/OiBQYXJ0aWFsPFdvcmtvdXRQYWdpbmF0aW9uPjtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPHtcbiAgZW50cmllczogKFdvcmtvdXRMb2dFbnRyeSAmIHtcbiAgICBleGVyY2lzZTogRXhlcmNpc2U7XG4gICAgdXNlcjogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfTtcbiAgICBjb2FjaDogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfSB8IG51bGw7XG4gIH0pW107XG4gIHBhZ2luYXRpb246IFdvcmtvdXRQYWdpbmF0aW9uO1xufT4ge1xuICBjb25zdCB7IGZpbHRlcnMgPSB7fSwgc29ydCA9IHsgZmllbGQ6ICdkYXRlJywgZGlyZWN0aW9uOiAnZGVzYycgfSwgcGFnaW5hdGlvbiA9IHt9IH0gPSBvcHRpb25zO1xuICBjb25zdCBwYWdlID0gcGFnaW5hdGlvbi5wYWdlIHx8IDE7XG4gIGNvbnN0IGxpbWl0ID0gcGFnaW5hdGlvbi5saW1pdCB8fCA1MDtcbiAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gIC8vIEJ1aWxkIHdoZXJlIGNsYXVzZVxuICBjb25zdCB3aGVyZTogYW55ID0ge1xuICAgIHVzZXJJZCxcbiAgfTtcblxuICBpZiAoZmlsdGVycy5kYXRlUmFuZ2UpIHtcbiAgICB3aGVyZS5kYXRlID0ge1xuICAgICAgZ3RlOiBmaWx0ZXJzLmRhdGVSYW5nZS5zdGFydCxcbiAgICAgIGx0ZTogZmlsdGVycy5kYXRlUmFuZ2UuZW5kLFxuICAgIH07XG4gIH1cblxuICBpZiAoZmlsdGVycy5leGVyY2lzZXMgJiYgZmlsdGVycy5leGVyY2lzZXMubGVuZ3RoID4gMCkge1xuICAgIHdoZXJlLmV4ZXJjaXNlSWQgPSB7IGluOiBmaWx0ZXJzLmV4ZXJjaXNlcyB9O1xuICB9XG5cbiAgaWYgKGZpbHRlcnMuc2V0VHlwZXMgJiYgZmlsdGVycy5zZXRUeXBlcy5sZW5ndGggPiAwKSB7XG4gICAgd2hlcmUuc2V0VHlwZSA9IHsgaW46IGZpbHRlcnMuc2V0VHlwZXMgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXJzLmNvYWNoSWQpIHtcbiAgICB3aGVyZS5jb2FjaElkID0gZmlsdGVycy5jb2FjaElkO1xuICB9XG5cbiAgLy8gR2V0IHRvdGFsIGNvdW50XG4gIGNvbnN0IHRvdGFsID0gYXdhaXQgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuY291bnQoeyB3aGVyZSB9KTtcblxuICAvLyBHZXQgZW50cmllcyB3aXRoIHJlbGF0aW9uc2hpcHNcbiAgY29uc3QgZW50cmllcyA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHRydWUsXG4gICAgICB1c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfY29hY2hJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHtcbiAgICAgIFtzb3J0LmZpZWxkXTogc29ydC5kaXJlY3Rpb24sXG4gICAgfSxcbiAgICBza2lwOiBvZmZzZXQsXG4gICAgdGFrZTogbGltaXQsXG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCk7XG5cbiAgLy8gTWFwIHRoZSBQcmlzbWEgcmVsYXRpb24gbmFtZXMgdG8gdGhlIGV4cGVjdGVkIGZvcm1hdFxuICBjb25zdCBtYXBwZWRFbnRyaWVzID0gZW50cmllcy5tYXAoKGVudHJ5KSA9PiAoe1xuICAgIC4uLmVudHJ5LFxuICAgIGV4ZXJjaXNlOiBlbnRyeS5leGVyY2lzZXMsXG4gICAgdXNlcjogZW50cnkudXNlcnNfd29ya291dF9sb2dfZW50cmllc191c2VySWRUb3VzZXJzLFxuICAgIGNvYWNoOiBlbnRyeS51c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX2NvYWNoSWRUb3VzZXJzLFxuICB9KSk7XG5cbiAgcmV0dXJuIHtcbiAgICBlbnRyaWVzOiBtYXBwZWRFbnRyaWVzLFxuICAgIHBhZ2luYXRpb246IHtcbiAgICAgIHBhZ2UsXG4gICAgICBsaW1pdCxcbiAgICAgIHRvdGFsLFxuICAgICAgdG90YWxQYWdlcyxcbiAgICAgIGhhc01vcmU6IHBhZ2UgPCB0b3RhbFBhZ2VzLFxuICAgIH0sXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGEgc2luZ2xlIHdvcmtvdXQgbG9nIGVudHJ5IGJ5IElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXb3Jrb3V0TG9nRW50cnkoXG4gIGlkOiBzdHJpbmcsXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPChXb3Jrb3V0TG9nRW50cnkgJiB7XG4gIGV4ZXJjaXNlOiBFeGVyY2lzZTtcbiAgdXNlcjogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfTtcbiAgY29hY2g6IHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIHwgbnVsbDsgcm9sZTogc3RyaW5nIH0gfCBudWxsO1xufSkgfCBudWxsPiB7XG4gIGNvbnN0IGVudHJ5ID0gYXdhaXQgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuZmluZEZpcnN0KHtcbiAgICB3aGVyZToge1xuICAgICAgaWQsXG4gICAgICB1c2VySWQsXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHRydWUsXG4gICAgICB1c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfY29hY2hJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBpZiAoIWVudHJ5KSByZXR1cm4gbnVsbDtcblxuICAvLyBNYXAgdGhlIFByaXNtYSByZWxhdGlvbiBuYW1lcyB0byB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gIHJldHVybiB7XG4gICAgLi4uZW50cnksXG4gICAgZXhlcmNpc2U6IGVudHJ5LmV4ZXJjaXNlcyxcbiAgICB1c2VyOiBlbnRyeS51c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnMsXG4gICAgY29hY2g6IGVudHJ5LnVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfY29hY2hJZFRvdXNlcnMsXG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHdvcmtvdXQgbG9nIGVudHJ5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVXb3Jrb3V0TG9nRW50cnkoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBkYXRhOiBXb3Jrb3V0TG9nRW50cnlGb3JtRGF0YSxcbiAgY29hY2hJZD86IHN0cmluZ1xuKTogUHJvbWlzZTxXb3Jrb3V0TG9nRW50cnk+IHtcbiAgLy8gQ2FsY3VsYXRlIHRyYWluaW5nIHZvbHVtZVxuICBjb25zdCBhdmVyYWdlV2VpZ2h0ID0gY2FsY3VsYXRlQXZlcmFnZVdlaWdodChkYXRhLndlaWdodCk7XG4gIGNvbnN0IHRyYWluaW5nVm9sdW1lID0gY2FsY3VsYXRlVHJhaW5pbmdWb2x1bWUoXG4gICAgMSwgLy8gU2luZ2xlIHNldFxuICAgIGRhdGEucmVwcyxcbiAgICBhdmVyYWdlV2VpZ2h0LFxuICAgIGRhdGEudW5pdFxuICApO1xuXG4gIC8vIENoZWNrIGZvciBwZXJzb25hbCByZWNvcmRzXG4gIGNvbnN0IGlzX3dlaWdodF9wciA9IGF3YWl0IGNoZWNrX3BlcnNvbmFsX3JlY29yZChcbiAgICB1c2VySWQsXG4gICAgZGF0YS5leGVyY2lzZUlkLFxuICAgIGF2ZXJhZ2VXZWlnaHQsXG4gICAgZGF0YS5yZXBzXG4gICk7XG5cbiAgY29uc3QgaXNfdm9sdW1lX3ByID0gYXdhaXQgY2hlY2tfdm9sdW1lX3JlY29yZChcbiAgICB1c2VySWQsXG4gICAgZGF0YS5leGVyY2lzZUlkLFxuICAgIHRyYWluaW5nVm9sdW1lXG4gICk7XG5cbiAgLy8gRW50cnkgaXMgYSBQUiBpZiBpdCdzIGVpdGhlciBhIHdlaWdodCBQUiBvciB2b2x1bWUgUFJcbiAgY29uc3QgaXNfcGVyc29uYWxfcmVjb3JkID0gaXNfd2VpZ2h0X3ByIHx8IGlzX3ZvbHVtZV9wcjtcblxuICAvLyBHZW5lcmF0ZSBvcmRlciBiYXNlZCBvbiBzZXQgdHlwZVxuICBjb25zdCBjb250ZXh0OiBPcmRlckdlbmVyYXRpb25Db250ZXh0ID0ge1xuICAgIGN1cnJlbnRTZXRUeXBlOiBkYXRhLnNldFR5cGUsXG4gICAgY3VycmVudEdyb3VwTnVtYmVyOiBkYXRhLnNldE51bWJlcixcbiAgICBjdXJyZW50U3ViT3JkZXI6ICdBJyxcbiAgICB0b3RhbEVudHJpZXM6IDAsXG4gIH07XG5cbiAgY29uc3Qgb3JkZXIgPSBnZW5lcmF0ZU9yZGVyKGRhdGEuc2V0VHlwZSwgY29udGV4dCk7XG5cbiAgLy8gQ3JlYXRlIGVudHJ5IGFuZCB1cGRhdGUgZXhlcmNpc2UgdXNhZ2UgbWV0cmljcyBpbiBhIHRyYW5zYWN0aW9uXG4gIHJldHVybiBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgIGNvbnN0IGVudHJ5ID0gYXdhaXQgdHgud29ya291dF9sb2dfZW50cmllcy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICBjb2FjaElkOiBjb2FjaElkID8/IG51bGwsXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKGRhdGEuZGF0ZSksXG4gICAgICAgIGV4ZXJjaXNlSWQ6IGRhdGEuZXhlcmNpc2VJZCxcbiAgICAgICAgb3JkZXIsXG4gICAgICAgIHNldE51bWJlcjogZGF0YS5zZXROdW1iZXIsXG4gICAgICAgIHNldFR5cGU6IGRhdGEuc2V0VHlwZSxcbiAgICAgICAgcmVwczogZGF0YS5yZXBzLFxuICAgICAgICB3ZWlnaHQ6IGRhdGEud2VpZ2h0LFxuICAgICAgICB1bml0OiBkYXRhLnVuaXQsXG4gICAgICAgIC4uLihkYXRhLmludGVuc2l0eSAhPT0gdW5kZWZpbmVkICYmIHsgaW50ZW5zaXR5OiBkYXRhLmludGVuc2l0eSB9KSxcbiAgICAgICAgLi4uKGRhdGEuaW50ZW5zaXR5VHlwZSAhPT0gdW5kZWZpbmVkICYmIHsgaW50ZW5zaXR5VHlwZTogZGF0YS5pbnRlbnNpdHlUeXBlIH0pLFxuICAgICAgICAuLi4oZGF0YS50ZW1wbyAhPT0gdW5kZWZpbmVkICYmIHsgdGVtcG86IGRhdGEudGVtcG8gfSksXG4gICAgICAgIC4uLihkYXRhLnJlc3RTZWNvbmRzICE9PSB1bmRlZmluZWQgJiYgeyByZXN0U2Vjb25kczogZGF0YS5yZXN0U2Vjb25kcyB9KSxcbiAgICAgICAgdHJhaW5pbmdWb2x1bWUsXG4gICAgICAgIHBlcnNvbmFsUmVjb3JkOiBpc19wZXJzb25hbF9yZWNvcmQsXG4gICAgICAgIC4uLihkYXRhLnVzZXJDb21tZW50cyAhPT0gdW5kZWZpbmVkICYmIHsgdXNlckNvbW1lbnRzOiBkYXRhLnVzZXJDb21tZW50cyB9KSxcbiAgICAgICAgLi4uKGRhdGEuY29hY2hGZWVkYmFjayAhPT0gdW5kZWZpbmVkICYmIHsgY29hY2hGZWVkYmFjazogZGF0YS5jb2FjaEZlZWRiYWNrIH0pLFxuICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYXdhaXQgdHguZXhlcmNpc2VzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZGF0YS5leGVyY2lzZUlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzYWdlQ291bnQ6IHsgaW5jcmVtZW50OiAxIH0sXG4gICAgICAgIGxhc3RVc2VkOiBuZXcgRGF0ZSgpLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBlbnRyeTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgd29ya291dCBsb2cgZW50cnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdvcmtvdXRMb2dFbnRyeShcbiAgaWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGRhdGE6IFBhcnRpYWw8V29ya291dExvZ0VudHJ5Rm9ybURhdGE+XG4pOiBQcm9taXNlPFdvcmtvdXRMb2dFbnRyeSB8IG51bGw+IHtcbiAgLy8gR2V0IGV4aXN0aW5nIGVudHJ5XG4gIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuZmluZEZpcnN0KHtcbiAgICB3aGVyZTogeyBpZCwgdXNlcklkIH0sXG4gIH0pO1xuXG4gIGlmICghZXhpc3RpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBuZXcgdHJhaW5pbmcgdm9sdW1lIGlmIHdlaWdodCBvciByZXBzIGNoYW5nZWRcbiAgbGV0IHRyYWluaW5nVm9sdW1lID0gZXhpc3RpbmcudHJhaW5pbmdWb2x1bWU7XG4gIGlmIChkYXRhLndlaWdodCB8fCBkYXRhLnJlcHMpIHtcbiAgICBjb25zdCBuZXdXZWlnaHQgPSBkYXRhLndlaWdodCB8fCBleGlzdGluZy53ZWlnaHQ7XG4gICAgY29uc3QgbmV3UmVwcyA9IGRhdGEucmVwcyB8fCBleGlzdGluZy5yZXBzO1xuICAgIGNvbnN0IGF2ZXJhZ2VXZWlnaHQgPSBjYWxjdWxhdGVBdmVyYWdlV2VpZ2h0KG5ld1dlaWdodCk7XG4gICAgdHJhaW5pbmdWb2x1bWUgPSBjYWxjdWxhdGVUcmFpbmluZ1ZvbHVtZShcbiAgICAgIDEsXG4gICAgICBuZXdSZXBzLFxuICAgICAgYXZlcmFnZVdlaWdodCxcbiAgICAgIGRhdGEudW5pdCB8fCBleGlzdGluZy51bml0XG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgZGF0YToge1xuICAgICAgLi4uKGRhdGEuZGF0ZSAmJiB7IGRhdGU6IG5ldyBEYXRlKGRhdGEuZGF0ZSkgfSksXG4gICAgICAuLi4oZGF0YS5leGVyY2lzZUlkICYmIHsgZXhlcmNpc2VJZDogZGF0YS5leGVyY2lzZUlkIH0pLFxuICAgICAgLi4uKGRhdGEuc2V0TnVtYmVyICYmIHsgc2V0TnVtYmVyOiBkYXRhLnNldE51bWJlciB9KSxcbiAgICAgIC4uLihkYXRhLnNldFR5cGUgJiYgeyBzZXRUeXBlOiBkYXRhLnNldFR5cGUgfSksXG4gICAgICAuLi4oZGF0YS5yZXBzICYmIHsgcmVwczogZGF0YS5yZXBzIH0pLFxuICAgICAgLi4uKGRhdGEud2VpZ2h0ICYmIHsgd2VpZ2h0OiBkYXRhLndlaWdodCB9KSxcbiAgICAgIC4uLihkYXRhLnVuaXQgJiYgeyB1bml0OiBkYXRhLnVuaXQgfSksXG4gICAgICAuLi4oZGF0YS5pbnRlbnNpdHkgJiYgeyBpbnRlbnNpdHk6IGRhdGEuaW50ZW5zaXR5IH0pLFxuICAgICAgLi4uKGRhdGEuaW50ZW5zaXR5VHlwZSAmJiB7IGludGVuc2l0eVR5cGU6IGRhdGEuaW50ZW5zaXR5VHlwZSB9KSxcbiAgICAgIC4uLihkYXRhLnRlbXBvICYmIHsgdGVtcG86IGRhdGEudGVtcG8gfSksXG4gICAgICAuLi4oZGF0YS5yZXN0U2Vjb25kcyAmJiB7IHJlc3RTZWNvbmRzOiBkYXRhLnJlc3RTZWNvbmRzIH0pLFxuICAgICAgLi4uKHRyYWluaW5nVm9sdW1lICE9PSB1bmRlZmluZWQgJiYgeyB0cmFpbmluZ1ZvbHVtZSB9KSxcbiAgICAgIC4uLihkYXRhLnVzZXJDb21tZW50cyAmJiB7IHVzZXJDb21tZW50czogZGF0YS51c2VyQ29tbWVudHMgfSksXG4gICAgICAuLi4oZGF0YS5jb2FjaEZlZWRiYWNrICYmIHsgY29hY2hGZWVkYmFjazogZGF0YS5jb2FjaEZlZWRiYWNrIH0pLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIElmIGV4ZXJjaXNlIGNoYW5nZWQsIHVwZGF0ZSB1c2FnZSBtZXRyaWNzIGZvciB0aGUgbmV3IGV4ZXJjaXNlXG4gIGlmIChkYXRhLmV4ZXJjaXNlSWQgJiYgZGF0YS5leGVyY2lzZUlkICE9PSBleGlzdGluZy5leGVyY2lzZUlkKSB7XG4gICAgYXdhaXQgcHJpc21hLmV4ZXJjaXNlcy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IGRhdGEuZXhlcmNpc2VJZCB9LFxuICAgICAgZGF0YTogeyB1c2FnZUNvdW50OiB7IGluY3JlbWVudDogMSB9LCBsYXN0VXNlZDogbmV3IERhdGUoKSB9LFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHVwZGF0ZWQ7XG59XG5cbi8qKlxuICogRGVsZXRlIGEgd29ya291dCBsb2cgZW50cnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVdvcmtvdXRMb2dFbnRyeShcbiAgaWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5kZWxldGVNYW55KHtcbiAgICB3aGVyZTogeyBpZCwgdXNlcklkIH0sXG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQuY291bnQgPiAwO1xufVxuXG4vKipcbiAqIEdldCB3b3Jrb3V0IHN0YXRpc3RpY3MgZm9yIGEgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V29ya291dFN0YXRzKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgZGF0ZVJhbmdlPzogeyBzdGFydDogRGF0ZTsgZW5kOiBEYXRlIH1cbik6IFByb21pc2U8e1xuICB0b3RhbFdvcmtvdXRzOiBudW1iZXI7XG4gIHRvdGFsVm9sdW1lOiBudW1iZXI7XG4gIHRvdGFsU2V0czogbnVtYmVyO1xuICB0b3RhbFJlcHM6IG51bWJlcjtcbiAgYXZlcmFnZVdvcmtvdXREdXJhdGlvbjogbnVtYmVyO1xuICBtb3N0VXNlZEV4ZXJjaXNlczogeyBleGVyY2lzZUlkOiBzdHJpbmc7IGNvdW50OiBudW1iZXI7IG5hbWU6IHN0cmluZyB9W107XG4gIHZvbHVtZUJ5TXVzY2xlR3JvdXA6IHsgbXVzY2xlR3JvdXA6IHN0cmluZzsgdm9sdW1lOiBudW1iZXIgfVtdO1xufT4ge1xuICBjb25zdCB3aGVyZTogYW55ID0geyB1c2VySWQgfTtcbiAgXG4gIGlmIChkYXRlUmFuZ2UpIHtcbiAgICB3aGVyZS5kYXRlID0ge1xuICAgICAgZ3RlOiBkYXRlUmFuZ2Uuc3RhcnQsXG4gICAgICBsdGU6IGRhdGVSYW5nZS5lbmQsXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGVudHJpZXMgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgaW5jbHVkZToge1xuICAgICAgZXhlcmNpc2VzOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsV29ya291dHMgPSBuZXcgU2V0KGVudHJpZXMubWFwKGUgPT4gZS5kYXRlLnRvRGF0ZVN0cmluZygpKSkuc2l6ZTtcbiAgY29uc3QgdG90YWxWb2x1bWUgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyAoZS50cmFpbmluZ1ZvbHVtZSB8fCAwKSwgMCk7XG4gIGNvbnN0IHRvdGFsU2V0cyA9IGVudHJpZXMubGVuZ3RoO1xuICBjb25zdCB0b3RhbFJlcHMgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyBlLnJlcHMsIDApO1xuXG4gIC8vIENhbGN1bGF0ZSBhdmVyYWdlIHdvcmtvdXQgZHVyYXRpb25cbiAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgc2VsZWN0OiB7IGR1cmF0aW9uOiB0cnVlIH0sXG4gIH0pO1xuICBjb25zdCBhdmVyYWdlV29ya291dER1cmF0aW9uID0gc2Vzc2lvbnMubGVuZ3RoID4gMCBcbiAgICA/IHNlc3Npb25zLnJlZHVjZSgoc3VtLCBzKSA9PiBzdW0gKyAocy5kdXJhdGlvbiB8fCAwKSwgMCkgLyBzZXNzaW9ucy5sZW5ndGggXG4gICAgOiAwO1xuXG4gIC8vIE1vc3QgdXNlZCBleGVyY2lzZXNcbiAgY29uc3QgZXhlcmNpc2VDb3VudHMgPSBlbnRyaWVzLnJlZHVjZSgoYWNjLCBlbnRyeSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGVudHJ5LmV4ZXJjaXNlSWQ7XG4gICAgYWNjW2tleV0gPSAoYWNjW2tleV0gfHwgMCkgKyAxO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pO1xuXG4gIGNvbnN0IG1vc3RVc2VkRXhlcmNpc2VzID0gT2JqZWN0LmVudHJpZXMoZXhlcmNpc2VDb3VudHMpXG4gICAgLm1hcCgoW2V4ZXJjaXNlSWQsIGNvdW50XSkgPT4gKHtcbiAgICAgIGV4ZXJjaXNlSWQsXG4gICAgICBjb3VudCxcbiAgICAgIG5hbWU6IGVudHJpZXMuZmluZChlID0+IGUuZXhlcmNpc2VJZCA9PT0gZXhlcmNpc2VJZCk/LmV4ZXJjaXNlcy5uYW1lIHx8ICcnLFxuICAgIH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcbiAgICAuc2xpY2UoMCwgMTApO1xuXG4gIC8vIFZvbHVtZSBieSBtdXNjbGUgZ3JvdXBcbiAgY29uc3Qgdm9sdW1lQnlNdXNjbGVHcm91cCA9IGVudHJpZXMucmVkdWNlKChhY2MsIGVudHJ5KSA9PiB7XG4gICAgZW50cnkuZXhlcmNpc2VzLm11c2NsZUdyb3Vwcy5mb3JFYWNoKG11c2NsZUdyb3VwID0+IHtcbiAgICAgIGFjY1ttdXNjbGVHcm91cF0gPSAoYWNjW211c2NsZUdyb3VwXSB8fCAwKSArIChlbnRyeS50cmFpbmluZ1ZvbHVtZSB8fCAwKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KTtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsV29ya291dHMsXG4gICAgdG90YWxWb2x1bWUsXG4gICAgdG90YWxTZXRzLFxuICAgIHRvdGFsUmVwcyxcbiAgICBhdmVyYWdlV29ya291dER1cmF0aW9uLFxuICAgIG1vc3RVc2VkRXhlcmNpc2VzLFxuICAgIHZvbHVtZUJ5TXVzY2xlR3JvdXA6IE9iamVjdC5lbnRyaWVzKHZvbHVtZUJ5TXVzY2xlR3JvdXApLm1hcCgoW211c2NsZUdyb3VwLCB2b2x1bWVdKSA9PiAoe1xuICAgICAgbXVzY2xlR3JvdXAsXG4gICAgICB2b2x1bWUsXG4gICAgfSkpLFxuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWEVSQ0lTRSBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IGFsbCBleGVyY2lzZXMgd2l0aCBvcHRpb25hbCBmaWx0ZXJpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4ZXJjaXNlcyhvcHRpb25zOiB7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xuICBtdXNjbGVHcm91cHM/OiBzdHJpbmdbXTtcbiAgZXF1aXBtZW50Pzogc3RyaW5nW107XG4gIGRpZmZpY3VsdHk/OiBzdHJpbmc7XG4gIGlzQWN0aXZlPzogYm9vbGVhbjtcbiAgc2VhcmNoPzogc3RyaW5nO1xufSA9IHt9KTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7fTtcblxuICBpZiAob3B0aW9ucy5jYXRlZ29yeSkge1xuICAgIHdoZXJlLmNhdGVnb3J5ID0gb3B0aW9ucy5jYXRlZ29yeTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLm11c2NsZUdyb3VwcyAmJiBvcHRpb25zLm11c2NsZUdyb3Vwcy5sZW5ndGggPiAwKSB7XG4gICAgd2hlcmUubXVzY2xlR3JvdXBzID0ge1xuICAgICAgaGFzU29tZTogb3B0aW9ucy5tdXNjbGVHcm91cHMsXG4gICAgfTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmVxdWlwbWVudCAmJiBvcHRpb25zLmVxdWlwbWVudC5sZW5ndGggPiAwKSB7XG4gICAgd2hlcmUuZXF1aXBtZW50ID0ge1xuICAgICAgaGFzU29tZTogb3B0aW9ucy5lcXVpcG1lbnQsXG4gICAgfTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICB3aGVyZS5kaWZmaWN1bHR5ID0gb3B0aW9ucy5kaWZmaWN1bHR5O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMuaXNBY3RpdmUgIT09IHVuZGVmaW5lZCkge1xuICAgIHdoZXJlLmlzQWN0aXZlID0gb3B0aW9ucy5pc0FjdGl2ZTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnNlYXJjaCkge1xuICAgIHdoZXJlLm5hbWUgPSB7XG4gICAgICBjb250YWluczogb3B0aW9ucy5zZWFyY2gsXG4gICAgICBtb2RlOiAnaW5zZW5zaXRpdmUnLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gcHJpc21hLmV4ZXJjaXNlcy5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgb3JkZXJCeTogeyBuYW1lOiAnYXNjJyB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgZXhlcmNpc2UgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4ZXJjaXNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPEV4ZXJjaXNlIHwgbnVsbD4ge1xuICByZXR1cm4gcHJpc21hLmV4ZXJjaXNlcy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZCB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZXhlcmNpc2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUV4ZXJjaXNlKGRhdGE6IHtcbiAgbmFtZTogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICBtdXNjbGVHcm91cHM6IHN0cmluZ1tdO1xuICBlcXVpcG1lbnQ6IHN0cmluZ1tdO1xuICBpbnN0cnVjdGlvbnM/OiBzdHJpbmc7XG4gIHZpZGVvVXJsPzogc3RyaW5nO1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgZGlmZmljdWx0eT86IHN0cmluZztcbiAgc2FmZXR5Tm90ZXM/OiBzdHJpbmc7XG4gIGZvcm1DdWVzPzogc3RyaW5nW107XG4gIGNvbW1vbk1pc3Rha2VzPzogc3RyaW5nW107XG4gIGNyZWF0ZWRCeT86IHN0cmluZztcbiAgaXNDdXN0b20/OiBib29sZWFuO1xufSkge1xuICByZXR1cm4gcHJpc21hLmV4ZXJjaXNlcy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgY2F0ZWdvcnk6IGRhdGEuY2F0ZWdvcnksXG4gICAgICBtdXNjbGVHcm91cHM6IGRhdGEubXVzY2xlR3JvdXBzLFxuICAgICAgZXF1aXBtZW50OiBkYXRhLmVxdWlwbWVudCxcbiAgICAgIGluc3RydWN0aW9uczogZGF0YS5pbnN0cnVjdGlvbnMgPz8gbnVsbCxcbiAgICAgIHZpZGVvVXJsOiBkYXRhLnZpZGVvVXJsID8/IG51bGwsXG4gICAgICBpbWFnZVVybDogZGF0YS5pbWFnZVVybCA/PyBudWxsLFxuICAgICAgZGlmZmljdWx0eTogZGF0YS5kaWZmaWN1bHR5IHx8ICdCRUdJTk5FUicsXG4gICAgICBzYWZldHlOb3RlczogZGF0YS5zYWZldHlOb3RlcyA/PyBudWxsLFxuICAgICAgZm9ybUN1ZXM6IGRhdGEuZm9ybUN1ZXMgfHwgW10sXG4gICAgICBjb21tb25NaXN0YWtlczogZGF0YS5jb21tb25NaXN0YWtlcyB8fCBbXSxcbiAgICAgIGNyZWF0ZWRCeTogZGF0YS5jcmVhdGVkQnkgPz8gbnVsbCxcbiAgICAgIGlzQ3VzdG9tOiBkYXRhLmlzQ3VzdG9tIHx8IGZhbHNlLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfSxcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGFuIGV4ZXJjaXNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVFeGVyY2lzZShcbiAgaWQ6IHN0cmluZyxcbiAgZGF0YTogUGFydGlhbDx7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGNhdGVnb3J5OiBzdHJpbmc7XG4gICAgbXVzY2xlR3JvdXBzOiBzdHJpbmdbXTtcbiAgICBlcXVpcG1lbnQ6IHN0cmluZ1tdO1xuICAgIGluc3RydWN0aW9uczogc3RyaW5nO1xuICAgIHZpZGVvVXJsOiBzdHJpbmc7XG4gICAgaW1hZ2VVcmw6IHN0cmluZztcbiAgICBkaWZmaWN1bHR5OiBzdHJpbmc7XG4gICAgc2FmZXR5Tm90ZXM6IHN0cmluZztcbiAgICBpc0FjdGl2ZTogYm9vbGVhbjtcbiAgfT5cbik6IFByb21pc2U8RXhlcmNpc2UgfCBudWxsPiB7XG4gIHJldHVybiBwcmlzbWEuZXhlcmNpc2VzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhLFxuICB9KTtcbn1cblxuLyoqXG4gKiBEZWxldGUgYW4gZXhlcmNpc2UgKHNvZnQgZGVsZXRlIGJ5IHNldHRpbmcgaXNBY3RpdmUgdG8gZmFsc2UpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeGVyY2lzZShpZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaXNtYS5leGVyY2lzZXMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZCB9LFxuICAgIGRhdGE6IHsgaXNBY3RpdmU6IGZhbHNlIH0sXG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQuaXNBY3RpdmUgPT09IGZhbHNlO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWEVSQ0lTRSBWQVJJQVRJT04gUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldCBleGVyY2lzZSB2YXJpYXRpb25zIGZvciBhbiBleGVyY2lzZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RXhlcmNpc2VWYXJpYXRpb25zKGV4ZXJjaXNlSWQ6IHN0cmluZywgb3B0aW9uczoge1xuICBkaWZmaWN1bHR5Pzogc3RyaW5nO1xufSA9IHt9KSB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7XG4gICAgZXhlcmNpc2VJZCxcbiAgICBpc0FjdGl2ZTogdHJ1ZVxuICB9O1xuXG4gIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICB3aGVyZS5kaWZmaWN1bHR5ID0gb3B0aW9ucy5kaWZmaWN1bHR5O1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS5leGVyY2lzZV92YXJpYXRpb25zLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHtcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBjYXRlZ29yeTogdHJ1ZSB9XG4gICAgICB9XG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IGRpZmZpY3VsdHk6ICdhc2MnIH1cbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IGV4ZXJjaXNlIHZhcmlhdGlvbiBieSBJRFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RXhlcmNpc2VWYXJpYXRpb25CeUlkKGlkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHByaXNtYS5leGVyY2lzZV92YXJpYXRpb25zLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgZXhlcmNpc2VzOiB7XG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgY2F0ZWdvcnk6IHRydWUgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGV4ZXJjaXNlIHZhcmlhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRXhlcmNpc2VWYXJpYXRpb24oZGF0YToge1xuICBleGVyY2lzZUlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGRpZmZpY3VsdHk/OiBzdHJpbmc7XG4gIHZpZGVvVXJsPzogc3RyaW5nO1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgaW5zdHJ1Y3Rpb25zPzogc3RyaW5nO1xufSkge1xuICByZXR1cm4gcHJpc21hLmV4ZXJjaXNlX3ZhcmlhdGlvbnMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIGV4ZXJjaXNlSWQ6IGRhdGEuZXhlcmNpc2VJZCxcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uID8/IG51bGwsXG4gICAgICBkaWZmaWN1bHR5OiBkYXRhLmRpZmZpY3VsdHkgfHwgJ0JFR0lOTkVSJyxcbiAgICAgIHZpZGVvVXJsOiBkYXRhLnZpZGVvVXJsID8/IG51bGwsXG4gICAgICBpbWFnZVVybDogZGF0YS5pbWFnZVVybCA/PyBudWxsLFxuICAgICAgaW5zdHJ1Y3Rpb25zOiBkYXRhLmluc3RydWN0aW9ucyA/PyBudWxsLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHtcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBjYXRlZ29yeTogdHJ1ZSB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgZXhlcmNpc2UgdmFyaWF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVFeGVyY2lzZVZhcmlhdGlvbihpZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgcmV0dXJuIHByaXNtYS5leGVyY2lzZV92YXJpYXRpb25zLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICAuLi4oZGF0YS5uYW1lICYmIHsgbmFtZTogZGF0YS5uYW1lIH0pLFxuICAgICAgLi4uKGRhdGEuZGVzY3JpcHRpb24gJiYgeyBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB9KSxcbiAgICAgIC4uLihkYXRhLmRpZmZpY3VsdHkgJiYgeyBkaWZmaWN1bHR5OiBkYXRhLmRpZmZpY3VsdHkgfSksXG4gICAgICAuLi4oZGF0YS52aWRlb1VybCAmJiB7IHZpZGVvVXJsOiBkYXRhLnZpZGVvVXJsIH0pLFxuICAgICAgLi4uKGRhdGEuaW1hZ2VVcmwgJiYgeyBpbWFnZVVybDogZGF0YS5pbWFnZVVybCB9KSxcbiAgICAgIC4uLihkYXRhLmluc3RydWN0aW9ucyAmJiB7IGluc3RydWN0aW9uczogZGF0YS5pbnN0cnVjdGlvbnMgfSksXG4gICAgICAuLi4oZGF0YS5pc0FjdGl2ZSAhPT0gdW5kZWZpbmVkICYmIHsgaXNBY3RpdmU6IGRhdGEuaXNBY3RpdmUgfSlcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGV4ZXJjaXNlczoge1xuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIGNhdGVnb3J5OiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIERlbGV0ZSBleGVyY2lzZSB2YXJpYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUV4ZXJjaXNlVmFyaWF0aW9uKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLmV4ZXJjaXNlX3ZhcmlhdGlvbnMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZCB9LFxuICAgIGRhdGE6IHsgaXNBY3RpdmU6IGZhbHNlIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5pc0FjdGl2ZSA9PT0gZmFsc2U7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFdPUktPVVQgU0VTU0lPTiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHdvcmtvdXQgc2Vzc2lvbnMgZm9yIGEgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0V29ya291dFNlc3Npb25zKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGRhdGVSYW5nZT86IHsgc3RhcnQ6IERhdGU7IGVuZDogRGF0ZSB9O1xuICAgIGlzQ29tcGxldGU/OiBib29sZWFuO1xuICAgIGlzVGVtcGxhdGU/OiBib29sZWFuO1xuICAgIHBhZ2luYXRpb24/OiBQYXJ0aWFsPFdvcmtvdXRQYWdpbmF0aW9uPjtcbiAgfSA9IHt9XG4pOiBQcm9taXNlPHtcbiAgc2Vzc2lvbnM6IChXb3Jrb3V0U2Vzc2lvbiAmIHtcbiAgICB1c2VyOiB7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB8IG51bGw7IHJvbGU6IHN0cmluZyB9O1xuICAgIGNvYWNoOiB7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB8IG51bGw7IHJvbGU6IHN0cmluZyB9IHwgbnVsbDtcbiAgICBlbnRyaWVzOiBXb3Jrb3V0TG9nRW50cnlbXTtcbiAgfSlbXTtcbiAgcGFnaW5hdGlvbjogV29ya291dFBhZ2luYXRpb247XG59PiB7XG4gIGNvbnN0IHsgZGF0ZVJhbmdlLCBpc0NvbXBsZXRlLCBpc1RlbXBsYXRlLCBwYWdpbmF0aW9uID0ge30gfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHBhZ2UgPSBwYWdpbmF0aW9uLnBhZ2UgfHwgMTtcbiAgY29uc3QgbGltaXQgPSBwYWdpbmF0aW9uLmxpbWl0IHx8IDIwO1xuICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgY29uc3Qgd2hlcmU6IGFueSA9IHsgdXNlcklkIH07XG5cbiAgaWYgKGRhdGVSYW5nZSkge1xuICAgIHdoZXJlLmRhdGUgPSB7XG4gICAgICBndGU6IGRhdGVSYW5nZS5zdGFydCxcbiAgICAgIGx0ZTogZGF0ZVJhbmdlLmVuZCxcbiAgICB9O1xuICB9XG5cbiAgaWYgKGlzQ29tcGxldGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHdoZXJlLmlzQ29tcGxldGUgPSBpc0NvbXBsZXRlO1xuICB9XG5cbiAgaWYgKGlzVGVtcGxhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHdoZXJlLmlzVGVtcGxhdGUgPSBpc1RlbXBsYXRlO1xuICB9XG5cbiAgY29uc3QgdG90YWwgPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5jb3VudCh7IHdoZXJlIH0pO1xuXG4gIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgcHJpc21hLndvcmtvdXRfc2Vzc2lvbnMuZmluZE1hbnkoe1xuICAgIHdoZXJlLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzX3dvcmtvdXRfc2Vzc2lvbnNfdXNlcklkVG91c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXNlcnNfd29ya291dF9zZXNzaW9uc19jb2FjaElkVG91c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgd29ya291dF9sb2dfZW50cmllczoge1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZXhlcmNpc2VzOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICBvcmRlckJ5OiB7IG9yZGVyOiAnYXNjJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgZGF0ZTogJ2Rlc2MnIH0sXG4gICAgc2tpcDogb2Zmc2V0LFxuICAgIHRha2U6IGxpbWl0LFxuICB9KTtcblxuICAvLyBNYXAgdGhlIFByaXNtYSByZWxhdGlvbiBuYW1lcyB0byB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gIGNvbnN0IG1hcHBlZFNlc3Npb25zID0gc2Vzc2lvbnMubWFwKChzZXNzaW9uKSA9PiAoe1xuICAgIC4uLnNlc3Npb24sXG4gICAgdXNlcjogc2Vzc2lvbi51c2Vyc193b3Jrb3V0X3Nlc3Npb25zX3VzZXJJZFRvdXNlcnMsXG4gICAgY29hY2g6IHNlc3Npb24udXNlcnNfd29ya291dF9zZXNzaW9uc19jb2FjaElkVG91c2VycyxcbiAgICBlbnRyaWVzOiBzZXNzaW9uLndvcmtvdXRfbG9nX2VudHJpZXMubWFwKChlbnRyeSkgPT4gKHtcbiAgICAgIC4uLmVudHJ5LFxuICAgICAgZXhlcmNpc2U6IGVudHJ5LmV4ZXJjaXNlcyxcbiAgICB9KSksXG4gIH0pKTtcblxuICByZXR1cm4ge1xuICAgIHNlc3Npb25zOiBtYXBwZWRTZXNzaW9ucyxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICAgIGhhc01vcmU6IHBhZ2UgPCBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgd29ya291dCBzZXNzaW9uIGJ5IElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXb3Jrb3V0U2Vzc2lvbihcbiAgaWQ6IHN0cmluZyxcbiAgdXNlcklkOiBzdHJpbmdcbik6IFByb21pc2U8KFdvcmtvdXRTZXNzaW9uICYge1xuICB1c2VyOiB7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB8IG51bGw7IHJvbGU6IHN0cmluZyB9O1xuICBjb2FjaDogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfCBudWxsOyByb2xlOiBzdHJpbmcgfSB8IG51bGw7XG4gIGVudHJpZXM6IChXb3Jrb3V0TG9nRW50cnkgJiB7IGV4ZXJjaXNlOiBFeGVyY2lzZSB9KVtdO1xufSkgfCBudWxsPiB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IGlkLCB1c2VySWQgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2Vyc193b3Jrb3V0X3Nlc3Npb25zX3VzZXJJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHVzZXJzX3dvcmtvdXRfc2Vzc2lvbnNfY29hY2hJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHdvcmtvdXRfbG9nX2VudHJpZXM6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGV4ZXJjaXNlczogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgICAgb3JkZXJCeTogeyBvcmRlcjogJ2FzYycgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSByZXR1cm4gbnVsbDtcblxuICAvLyBNYXAgdGhlIFByaXNtYSByZWxhdGlvbiBuYW1lcyB0byB0aGUgZXhwZWN0ZWQgZm9ybWF0XG4gIHJldHVybiB7XG4gICAgLi4uc2Vzc2lvbixcbiAgICB1c2VyOiBzZXNzaW9uLnVzZXJzX3dvcmtvdXRfc2Vzc2lvbnNfdXNlcklkVG91c2VycyxcbiAgICBjb2FjaDogc2Vzc2lvbi51c2Vyc193b3Jrb3V0X3Nlc3Npb25zX2NvYWNoSWRUb3VzZXJzLFxuICAgIGVudHJpZXM6IHNlc3Npb24ud29ya291dF9sb2dfZW50cmllcy5tYXAoKGVudHJ5KSA9PiAoe1xuICAgICAgLi4uZW50cnksXG4gICAgICBleGVyY2lzZTogZW50cnkuZXhlcmNpc2VzLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgd29ya291dCBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVXb3Jrb3V0U2Vzc2lvbihcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGRhdGE6IFdvcmtvdXRTZXNzaW9uRm9ybURhdGEsXG4gIGNvYWNoSWQ/OiBzdHJpbmdcbik6IFByb21pc2U8V29ya291dFNlc3Npb24+IHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoYCR7ZGF0YS5kYXRlfVQke2RhdGEuc3RhcnRUaW1lfWApO1xuICBjb25zdCBlbmRUaW1lID0gZGF0YS5lbmRUaW1lID8gbmV3IERhdGUoYCR7ZGF0YS5kYXRlfVQke2RhdGEuZW5kVGltZX1gKSA6IG51bGw7XG4gIFxuICBsZXQgZHVyYXRpb246IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaWYgKHN0YXJ0VGltZSAmJiBlbmRUaW1lKSB7XG4gICAgZHVyYXRpb24gPSBNYXRoLmZsb29yKChlbmRUaW1lLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMCk7XG4gIH1cblxuICByZXR1cm4gcHJpc21hLndvcmtvdXRfc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNvYWNoSWQ6IGNvYWNoSWQgPz8gbnVsbCxcbiAgICAgIGRhdGU6IG5ldyBEYXRlKGRhdGEuZGF0ZSksXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBlbmRUaW1lLFxuICAgICAgLi4uKGR1cmF0aW9uICE9PSB1bmRlZmluZWQgJiYgeyBkdXJhdGlvbiB9KSxcbiAgICAgIC4uLihkYXRhLnRpdGxlICE9PSB1bmRlZmluZWQgJiYgeyB0aXRsZTogZGF0YS50aXRsZSB9KSxcbiAgICAgIC4uLihkYXRhLm5vdGVzICE9PSB1bmRlZmluZWQgJiYgeyBub3RlczogZGF0YS5ub3RlcyB9KSxcbiAgICAgIC4uLihkYXRhLmxvY2F0aW9uICE9PSB1bmRlZmluZWQgJiYgeyBsb2NhdGlvbjogZGF0YS5sb2NhdGlvbiB9KSxcbiAgICAgIGlzVGVtcGxhdGU6IGRhdGEuaXNUZW1wbGF0ZSB8fCBmYWxzZSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSB3b3Jrb3V0IHNlc3Npb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVdvcmtvdXRTZXNzaW9uKFxuICBpZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgZGF0YTogUGFydGlhbDxXb3Jrb3V0U2Vzc2lvbkZvcm1EYXRhPlxuKTogUHJvbWlzZTxXb3Jrb3V0U2Vzc2lvbiB8IG51bGw+IHtcbiAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IGlkLCB1c2VySWQgfSxcbiAgfSk7XG5cbiAgaWYgKCFleGlzdGluZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbGV0IHN0YXJ0VGltZSA9IGV4aXN0aW5nLnN0YXJ0VGltZTtcbiAgbGV0IGVuZFRpbWUgPSBleGlzdGluZy5lbmRUaW1lO1xuICBsZXQgZHVyYXRpb24gPSBleGlzdGluZy5kdXJhdGlvbjtcblxuICBpZiAoZGF0YS5kYXRlICYmIGRhdGEuc3RhcnRUaW1lKSB7XG4gICAgc3RhcnRUaW1lID0gbmV3IERhdGUoYCR7ZGF0YS5kYXRlfVQke2RhdGEuc3RhcnRUaW1lfWApO1xuICB9XG5cbiAgaWYgKGRhdGEuZGF0ZSAmJiBkYXRhLmVuZFRpbWUpIHtcbiAgICBlbmRUaW1lID0gbmV3IERhdGUoYCR7ZGF0YS5kYXRlfVQke2RhdGEuZW5kVGltZX1gKTtcbiAgfVxuXG4gIGlmIChzdGFydFRpbWUgJiYgZW5kVGltZSkge1xuICAgIGR1cmF0aW9uID0gTWF0aC5mbG9vcigoZW5kVGltZS5nZXRUaW1lKCkgLSBzdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDApO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICAuLi4oZGF0YS5kYXRlICYmIHsgZGF0ZTogbmV3IERhdGUoZGF0YS5kYXRlKSB9KSxcbiAgICAgIC4uLihzdGFydFRpbWUgJiYgeyBzdGFydFRpbWUgfSksXG4gICAgICAuLi4oZW5kVGltZSAmJiB7IGVuZFRpbWUgfSksXG4gICAgICAuLi4oZHVyYXRpb24gIT09IHVuZGVmaW5lZCAmJiB7IGR1cmF0aW9uIH0pLFxuICAgICAgLi4uKGRhdGEudGl0bGUgJiYgeyB0aXRsZTogZGF0YS50aXRsZSB9KSxcbiAgICAgIC4uLihkYXRhLm5vdGVzICYmIHsgbm90ZXM6IGRhdGEubm90ZXMgfSksXG4gICAgICAuLi4oZGF0YS5sb2NhdGlvbiAmJiB7IGxvY2F0aW9uOiBkYXRhLmxvY2F0aW9uIH0pLFxuICAgICAgLi4uKGRhdGEuaXNUZW1wbGF0ZSAhPT0gdW5kZWZpbmVkICYmIHsgaXNUZW1wbGF0ZTogZGF0YS5pc1RlbXBsYXRlIH0pLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIENvbXBsZXRlIGEgd29ya291dCBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wbGV0ZVdvcmtvdXRTZXNzaW9uKFxuICBpZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZyxcbiAgZW5kVGltZT86IERhdGVcbik6IFByb21pc2U8V29ya291dFNlc3Npb24gfCBudWxsPiB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7IGlkLCB1c2VySWQgfSxcbiAgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBlbmRUaW1lVG9Vc2UgPSBlbmRUaW1lIHx8IG5ldyBEYXRlKCk7XG4gIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5mbG9vcigoZW5kVGltZVRvVXNlLmdldFRpbWUoKSAtIHNlc3Npb24uc3RhcnRUaW1lLmdldFRpbWUoKSkgLyAxMDAwKTtcblxuICAvLyBDYWxjdWxhdGUgdG90YWwgdm9sdW1lIGFuZCBzdGF0c1xuICBjb25zdCBlbnRyaWVzID0gYXdhaXQgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7IHVzZXJJZCwgZGF0ZTogc2Vzc2lvbi5kYXRlIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHRvdGFsVm9sdW1lID0gZW50cmllcy5yZWR1Y2UoKHN1bSwgZW50cnkpID0+IHN1bSArIChlbnRyeS50cmFpbmluZ1ZvbHVtZSB8fCAwKSwgMCk7XG4gIGNvbnN0IHRvdGFsU2V0cyA9IGVudHJpZXMubGVuZ3RoO1xuICBjb25zdCB0b3RhbFJlcHMgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkucmVwcywgMCk7XG5cbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICBlbmRUaW1lOiBlbmRUaW1lVG9Vc2UsXG4gICAgICBkdXJhdGlvbixcbiAgICAgIGlzQ29tcGxldGU6IHRydWUsXG4gICAgICB0b3RhbFZvbHVtZSxcbiAgICAgIHRvdGFsU2V0cyxcbiAgICAgIHRvdGFsUmVwcyxcbiAgICB9LFxuICB9KTtcbn1cblxuLyoqXG4gKiBEZWxldGUgYSB3b3Jrb3V0IHNlc3Npb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVdvcmtvdXRTZXNzaW9uKFxuICBpZDogc3RyaW5nLFxuICB1c2VySWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLmRlbGV0ZU1hbnkoe1xuICAgIHdoZXJlOiB7IGlkLCB1c2VySWQgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdC5jb3VudCA+IDA7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPQUNILVNQRUNJRklDIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXQgd29ya291dCBsb2dzIGZvciBjbGllbnRzIGFzc2lnbmVkIHRvIGEgY29hY2hcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENsaWVudFdvcmtvdXRMb2dzKFxuICBjb2FjaElkOiBzdHJpbmcsXG4gIG9wdGlvbnM6IHtcbiAgICBjbGllbnRJZD86IHN0cmluZztcbiAgICBkYXRlUmFuZ2U/OiB7IHN0YXJ0OiBEYXRlOyBlbmQ6IERhdGUgfTtcbiAgICBwYWdpbmF0aW9uPzogUGFydGlhbDxXb3Jrb3V0UGFnaW5hdGlvbj47XG4gIH0gPSB7fVxuKTogUHJvbWlzZTx7XG4gIGVudHJpZXM6IChXb3Jrb3V0TG9nRW50cnkgJiB7XG4gICAgZXhlcmNpc2U6IEV4ZXJjaXNlO1xuICAgIHVzZXI6IHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nIHwgbnVsbDsgcm9sZTogc3RyaW5nIH07XG4gIH0pW107XG4gIHBhZ2luYXRpb246IFdvcmtvdXRQYWdpbmF0aW9uO1xufT4ge1xuICBjb25zdCB7IGNsaWVudElkLCBkYXRlUmFuZ2UsIHBhZ2luYXRpb24gPSB7fSB9ID0gb3B0aW9ucztcbiAgY29uc3QgcGFnZSA9IHBhZ2luYXRpb24ucGFnZSB8fCAxO1xuICBjb25zdCBsaW1pdCA9IHBhZ2luYXRpb24ubGltaXQgfHwgNTA7XG4gIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICBjb25zdCB3aGVyZTogYW55ID0geyBjb2FjaElkIH07XG5cbiAgaWYgKGNsaWVudElkKSB7XG4gICAgd2hlcmUudXNlcklkID0gY2xpZW50SWQ7XG4gIH1cblxuICBpZiAoZGF0ZVJhbmdlKSB7XG4gICAgd2hlcmUuZGF0ZSA9IHtcbiAgICAgIGd0ZTogZGF0ZVJhbmdlLnN0YXJ0LFxuICAgICAgbHRlOiBkYXRlUmFuZ2UuZW5kLFxuICAgIH07XG4gIH1cblxuICBjb25zdCB0b3RhbCA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLmNvdW50KHsgd2hlcmUgfSk7XG5cbiAgY29uc3QgZW50cmllcyA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHRydWUsXG4gICAgICB1c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgZGF0ZTogJ2Rlc2MnIH0sXG4gICAgc2tpcDogb2Zmc2V0LFxuICAgIHRha2U6IGxpbWl0LFxuICB9KTtcblxuICBjb25zdCB0b3RhbFBhZ2VzID0gTWF0aC5jZWlsKHRvdGFsIC8gbGltaXQpO1xuXG4gIC8vIE1hcCB0aGUgUHJpc21hIHJlbGF0aW9uIG5hbWVzIHRvIHRoZSBleHBlY3RlZCBmb3JtYXRcbiAgY29uc3QgbWFwcGVkRW50cmllcyA9IGVudHJpZXMubWFwKChlbnRyeSkgPT4gKHtcbiAgICAuLi5lbnRyeSxcbiAgICBleGVyY2lzZTogZW50cnkuZXhlcmNpc2VzLFxuICAgIHVzZXI6IGVudHJ5LnVzZXJzX3dvcmtvdXRfbG9nX2VudHJpZXNfdXNlcklkVG91c2VycyxcbiAgfSkpO1xuXG4gIHJldHVybiB7XG4gICAgZW50cmllczogbWFwcGVkRW50cmllcyxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICBwYWdlLFxuICAgICAgbGltaXQsXG4gICAgICB0b3RhbCxcbiAgICAgIHRvdGFsUGFnZXMsXG4gICAgICBoYXNNb3JlOiBwYWdlIDwgdG90YWxQYWdlcyxcbiAgICB9LFxuICB9O1xufVxuXG4vKipcbiAqIEFkZCBjb2FjaCBmZWVkYmFjayB0byBhIHdvcmtvdXQgZW50cnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZENvYWNoRmVlZGJhY2soXG4gIGVudHJ5SWQ6IHN0cmluZyxcbiAgY29hY2hJZDogc3RyaW5nLFxuICBmZWVkYmFjazogc3RyaW5nXG4pOiBQcm9taXNlPFdvcmtvdXRMb2dFbnRyeSB8IG51bGw+IHtcbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkOiBlbnRyeUlkLFxuICAgICAgY29hY2hJZCwgLy8gRW5zdXJlIGNvYWNoIG93bnMgdGhpcyBlbnRyeVxuICAgIH0sXG4gICAgZGF0YToge1xuICAgICAgY29hY2hGZWVkYmFjazogZmVlZGJhY2ssXG4gICAgfSxcbiAgfSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVUSUxJVFkgUVVFUklFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldCBleGVyY2lzZSBjYXRlZ29yaWVzIGZvciBmaWx0ZXJpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEV4ZXJjaXNlQ2F0ZWdvcmllcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IGV4ZXJjaXNlcyA9IGF3YWl0IHByaXNtYS5leGVyY2lzZXMuZmluZE1hbnkoe1xuICAgIHNlbGVjdDogeyBjYXRlZ29yeTogdHJ1ZSB9LFxuICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gIH0pO1xuXG4gIHJldHVybiBbLi4ubmV3IFNldChleGVyY2lzZXMubWFwKGUgPT4gZS5jYXRlZ29yeSkpXTtcbn1cblxuLyoqXG4gKiBHZXQgbXVzY2xlIGdyb3VwcyBmb3IgZmlsdGVyaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNdXNjbGVHcm91cHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCBleGVyY2lzZXMgPSBhd2FpdCBwcmlzbWEuZXhlcmNpc2VzLmZpbmRNYW55KHtcbiAgICBzZWxlY3Q6IHsgbXVzY2xlR3JvdXBzOiB0cnVlIH0sXG4gICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgfSk7XG5cbiAgY29uc3QgYWxsTXVzY2xlR3JvdXBzID0gZXhlcmNpc2VzLmZsYXRNYXAoZSA9PiBlLm11c2NsZUdyb3Vwcyk7XG4gIHJldHVybiBbLi4ubmV3IFNldChhbGxNdXNjbGVHcm91cHMpXTtcbn1cblxuLyoqXG4gKiBHZXQgZXF1aXBtZW50IHR5cGVzIGZvciBmaWx0ZXJpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVxdWlwbWVudFR5cGVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgZXhlcmNpc2VzID0gYXdhaXQgcHJpc21hLmV4ZXJjaXNlcy5maW5kTWFueSh7XG4gICAgc2VsZWN0OiB7IGVxdWlwbWVudDogdHJ1ZSB9LFxuICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGFsbEVxdWlwbWVudCA9IGV4ZXJjaXNlcy5mbGF0TWFwKGUgPT4gZS5lcXVpcG1lbnQpO1xuICByZXR1cm4gWy4uLm5ldyBTZXQoYWxsRXF1aXBtZW50KV07XG59XG5cbi8qKlxuICogU2VhcmNoIGV4ZXJjaXNlcyBieSBuYW1lXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hFeGVyY2lzZXMoXG4gIHF1ZXJ5OiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSAxMFxuKTogUHJvbWlzZTxFeGVyY2lzZVtdPiB7XG4gIHJldHVybiBwcmlzbWEuZXhlcmNpc2VzLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgIG1vZGU6ICdpbnNlbnNpdGl2ZScsXG4gICAgICB9LFxuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IHVzYWdlQ291bnQ6ICdkZXNjJyB9LFxuICAgIHRha2U6IGxpbWl0LFxuICB9KTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gV09SS09VVCBURU1QTEFURSBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHdvcmtvdXQgdGVtcGxhdGVzIHdpdGggZmlsdGVyaW5nXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRXb3Jrb3V0VGVtcGxhdGVzKGZpbHRlcnM6IHtcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIGRpZmZpY3VsdHk/OiBzdHJpbmc7XG4gIHByaWNlUmFuZ2U/OiBzdHJpbmc7XG4gIG1pblJhdGluZz86IG51bWJlcjtcbiAgcHVibGljT25seT86IGJvb2xlYW47XG4gIGxpbWl0PzogbnVtYmVyO1xufSA9IHt9KSB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7XG4gICAgaXNBY3RpdmU6IHRydWUsXG4gIH07XG5cbiAgaWYgKGZpbHRlcnMucHVibGljT25seSkge1xuICAgIHdoZXJlLmlzUHVibGljID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChmaWx0ZXJzLmNhdGVnb3J5KSB7XG4gICAgd2hlcmUuY2F0ZWdvcnkgPSBmaWx0ZXJzLmNhdGVnb3J5O1xuICB9XG5cbiAgaWYgKGZpbHRlcnMuZGlmZmljdWx0eSkge1xuICAgIHdoZXJlLmRpZmZpY3VsdHkgPSBmaWx0ZXJzLmRpZmZpY3VsdHk7XG4gIH1cblxuICBpZiAoZmlsdGVycy5taW5SYXRpbmcpIHtcbiAgICB3aGVyZS5yYXRpbmcgPSB7IGd0ZTogZmlsdGVycy5taW5SYXRpbmcgfTtcbiAgfVxuXG4gIGlmIChmaWx0ZXJzLnByaWNlUmFuZ2UpIHtcbiAgICBjb25zdCBbbWluLCBtYXhdID0gZmlsdGVycy5wcmljZVJhbmdlLnNwbGl0KCctJykubWFwKE51bWJlcik7XG4gICAgd2hlcmUucHJpY2UgPSB7IGd0ZTogbWluLCBsdGU6IG1heCB9O1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0X3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCB0cmFpbmVyVmVyaWZpZWQ6IHRydWUgfVxuICAgICAgfSxcbiAgICAgIHdvcmtvdXRfdGVtcGxhdGVfZXhlcmNpc2VzOiB7XG4gICAgICAgIGluY2x1ZGU6IHsgZXhlcmNpc2VzOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgb3JkZXI6ICdhc2MnIH1cbiAgICAgIH0sXG4gICAgICBfY291bnQ6IHtcbiAgICAgICAgc2VsZWN0OiB7IHRlbXBsYXRlX3JhdGluZ3M6IHRydWUgfVxuICAgICAgfVxuICAgIH0sXG4gICAgb3JkZXJCeTogeyByYXRpbmc6ICdkZXNjJyB9LFxuICAgIHRha2U6IGZpbHRlcnMubGltaXQgfHwgMjBcbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IHdvcmtvdXQgdGVtcGxhdGUgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdvcmtvdXRUZW1wbGF0ZUJ5SWQoaWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLndvcmtvdXRfdGVtcGxhdGVzLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgdXNlcnM6IHtcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCB0cmFpbmVyVmVyaWZpZWQ6IHRydWUgfVxuICAgICAgfSxcbiAgICAgIHdvcmtvdXRfdGVtcGxhdGVfZXhlcmNpc2VzOiB7XG4gICAgICAgIGluY2x1ZGU6IHsgZXhlcmNpc2VzOiB0cnVlIH0sXG4gICAgICAgIG9yZGVyQnk6IHsgb3JkZXI6ICdhc2MnIH1cbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZV9yYXRpbmdzOiB7XG4gICAgICAgIGluY2x1ZGU6IHsgdXNlcnM6IHsgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlIH0gfSB9LFxuICAgICAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwXG4gICAgICB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSB3b3Jrb3V0IHRlbXBsYXRlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVXb3Jrb3V0VGVtcGxhdGUoZGF0YTogYW55KSB7XG4gIHJldHVybiBwcmlzbWEud29ya291dF90ZW1wbGF0ZXMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgLy8gQWRkIHRoaXMgbGluZSB0byBnZW5lcmF0ZSBhIHVuaXF1ZSBJRFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLCAvLyBBZGQgdGhpcyBsaW5lIHRvIHNldCB0aGUgdXBkYXRlZEF0IHRpbWVzdGFtcFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSxcbiAgICAgIGRpZmZpY3VsdHk6IGRhdGEuZGlmZmljdWx0eSB8fCAnQkVHSU5ORVInLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXG4gICAgICBlcXVpcG1lbnQ6IGRhdGEuZXF1aXBtZW50IHx8IFtdLFxuICAgICAgaXNQdWJsaWM6IGRhdGEuaXNQdWJsaWMgfHwgZmFsc2UsXG4gICAgICBwcmljZTogZGF0YS5wcmljZSxcbiAgICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5IHx8ICdVU0QnLFxuICAgICAgdGFnczogZGF0YS50YWdzIHx8IFtdLFxuICAgICAgdXNlcnM6IHtcbiAgICAgICAgY29ubmVjdDogeyBpZDogZGF0YS5jcmVhdGVkQnkgfVxuICAgICAgfSxcbiAgICAgIHdvcmtvdXRfdGVtcGxhdGVfZXhlcmNpc2VzOiB7XG4gICAgICAgIGNyZWF0ZTogZGF0YS5leGVyY2lzZXM/Lm1hcCgoZXhlcmNpc2U6IGFueSkgPT4gKHtcbiAgICAgICAgICBleGVyY2lzZUlkOiBleGVyY2lzZS5leGVyY2lzZUlkLFxuICAgICAgICAgIG9yZGVyOiBleGVyY2lzZS5vcmRlcixcbiAgICAgICAgICBzZXRzOiBleGVyY2lzZS5zZXRzLFxuICAgICAgICAgIHJlcHM6IGV4ZXJjaXNlLnJlcHMsXG4gICAgICAgICAgd2VpZ2h0OiBleGVyY2lzZS53ZWlnaHQsXG4gICAgICAgICAgcmVzdFRpbWU6IGV4ZXJjaXNlLnJlc3RUaW1lLFxuICAgICAgICAgIG5vdGVzOiBleGVyY2lzZS5ub3RlcyxcbiAgICAgICAgICBpc1N1cGVyc2V0OiBleGVyY2lzZS5pc1N1cGVyc2V0IHx8IGZhbHNlLFxuICAgICAgICAgIHN1cGVyc2V0R3JvdXA6IGV4ZXJjaXNlLnN1cGVyc2V0R3JvdXBcbiAgICAgICAgfSkpIHx8IFtdXG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB3b3Jrb3V0X3RlbXBsYXRlX2V4ZXJjaXNlczogeyBpbmNsdWRlOiB7IGV4ZXJjaXNlczogdHJ1ZSB9IH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSB3b3Jrb3V0IHRlbXBsYXRlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVXb3Jrb3V0VGVtcGxhdGUoaWQ6IHN0cmluZywgZGF0YTogYW55KSB7XG4gIHJldHVybiBwcmlzbWEud29ya291dF90ZW1wbGF0ZXMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIC4uLihkYXRhLm5hbWUgJiYgeyBuYW1lOiBkYXRhLm5hbWUgfSksXG4gICAgICAuLi4oZGF0YS5kZXNjcmlwdGlvbiAmJiB7IGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uIH0pLFxuICAgICAgLi4uKGRhdGEuY2F0ZWdvcnkgJiYgeyBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB9KSxcbiAgICAgIC4uLihkYXRhLmRpZmZpY3VsdHkgJiYgeyBkaWZmaWN1bHR5OiBkYXRhLmRpZmZpY3VsdHkgfSksXG4gICAgICAuLi4oZGF0YS5kdXJhdGlvbiAmJiB7IGR1cmF0aW9uOiBkYXRhLmR1cmF0aW9uIH0pLFxuICAgICAgLi4uKGRhdGEuZXF1aXBtZW50ICYmIHsgZXF1aXBtZW50OiBkYXRhLmVxdWlwbWVudCB9KSxcbiAgICAgIC4uLihkYXRhLmlzUHVibGljICE9PSB1bmRlZmluZWQgJiYgeyBpc1B1YmxpYzogZGF0YS5pc1B1YmxpYyB9KSxcbiAgICAgIC4uLihkYXRhLnByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBwcmljZTogZGF0YS5wcmljZSB9KSxcbiAgICAgIC4uLihkYXRhLnRhZ3MgJiYgeyB0YWdzOiBkYXRhLnRhZ3MgfSlcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIERlbGV0ZSB3b3Jrb3V0IHRlbXBsYXRlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVXb3Jrb3V0VGVtcGxhdGUoaWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLndvcmtvdXRfdGVtcGxhdGVzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7IGlzQWN0aXZlOiBmYWxzZSB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB1c2VyJ3MgdGVtcGxhdGVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNeVRlbXBsYXRlcyh1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLndvcmtvdXRfdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyBjcmVhdGVkQnk6IHVzZXJJZCwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB3b3Jrb3V0X3RlbXBsYXRlX2V4ZXJjaXNlczoge1xuICAgICAgICBpbmNsdWRlOiB7IGV4ZXJjaXNlczogdHJ1ZSB9LFxuICAgICAgICBvcmRlckJ5OiB7IG9yZGVyOiAnYXNjJyB9XG4gICAgICB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBTZWFyY2ggd29ya291dCB0ZW1wbGF0ZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFdvcmtvdXRUZW1wbGF0ZXMocXVlcnk6IHN0cmluZywgb3B0aW9uczogYW55ID0ge30pIHtcbiAgcmV0dXJuIHByaXNtYS53b3Jrb3V0X3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgICAgLi4uKG9wdGlvbnMucHVibGljT25seSAmJiB7IGlzUHVibGljOiB0cnVlIH0pLFxuICAgICAgT1I6IFtcbiAgICAgICAgeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogJ2luc2Vuc2l0aXZlJyB9IH0sXG4gICAgICAgIHsgZGVzY3JpcHRpb246IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyB0YWdzOiB7IGhhczogcXVlcnkgfSB9XG4gICAgICBdXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgcmF0aW5nOiAnZGVzYycgfSxcbiAgICB0YWtlOiBvcHRpb25zLmxpbWl0IHx8IDIwXG4gIH0pO1xufVxuXG4vKipcbiAqIFB1cmNoYXNlIHRlbXBsYXRlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdXJjaGFzZVRlbXBsYXRlKHRlbXBsYXRlSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBwcmlzbWEud29ya291dF90ZW1wbGF0ZXMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlSWQgfSxcbiAgICBzZWxlY3Q6IHsgcHJpY2U6IHRydWUsIGN1cnJlbmN5OiB0cnVlIH1cbiAgfSk7XG5cbiAgaWYgKCF0ZW1wbGF0ZSkgdGhyb3cgbmV3IEVycm9yKCdUZW1wbGF0ZSBub3QgZm91bmQnKTtcblxuICByZXR1cm4gcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICBjb25zdCBwdXJjaGFzZSA9IGF3YWl0IHR4LnRlbXBsYXRlX3B1cmNoYXNlcy5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgdXNlcklkLFxuICAgICAgICB0ZW1wbGF0ZUlkLFxuICAgICAgICBwcmljZTogdGVtcGxhdGUucHJpY2UgfHwgMCxcbiAgICAgICAgY3VycmVuY3k6IHRlbXBsYXRlLmN1cnJlbmN5XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBhd2FpdCB0eC53b3Jrb3V0X3RlbXBsYXRlcy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHRlbXBsYXRlSWQgfSxcbiAgICAgIGRhdGE6IHsgcHVyY2hhc2VDb3VudDogeyBpbmNyZW1lbnQ6IDEgfSB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcHVyY2hhc2U7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJhdGUgdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJhdGVUZW1wbGF0ZSh0ZW1wbGF0ZUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgcmV0dXJuIHByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgY29uc3QgcmF0aW5nID0gYXdhaXQgdHgudGVtcGxhdGVfcmF0aW5ncy51cHNlcnQoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkX3RlbXBsYXRlSWQ6IHsgdXNlcklkLCB0ZW1wbGF0ZUlkIH0gfSxcbiAgICAgIHVwZGF0ZTogeyByYXRpbmc6IGRhdGEucmF0aW5nLCByZXZpZXc6IGRhdGEucmV2aWV3IH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdGVtcGxhdGVJZCxcbiAgICAgICAgcmF0aW5nOiBkYXRhLnJhdGluZyxcbiAgICAgICAgcmV2aWV3OiBkYXRhLnJldmlld1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVjYWxjdWxhdGUgYXZlcmFnZSByYXRpbmdcbiAgICBjb25zdCByYXRpbmdzID0gYXdhaXQgdHgudGVtcGxhdGVfcmF0aW5ncy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyB0ZW1wbGF0ZUlkIH0sXG4gICAgICBzZWxlY3Q6IHsgcmF0aW5nOiB0cnVlIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IGF2Z1JhdGluZyA9IHJhdGluZ3MucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIucmF0aW5nLCAwKSAvIHJhdGluZ3MubGVuZ3RoO1xuXG4gICAgYXdhaXQgdHgud29ya291dF90ZW1wbGF0ZXMudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiB0ZW1wbGF0ZUlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHJhdGluZzogYXZnUmF0aW5nLFxuICAgICAgICByYXRpbmdDb3VudDogcmF0aW5ncy5sZW5ndGhcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByYXRpbmc7XG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUUkFJTklORyBQUk9HUkFNIFFVRVJJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXQgdHJhaW5pbmcgcHJvZ3JhbXMgd2l0aCBmaWx0ZXJpbmdcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWluaW5nUHJvZ3JhbXMoZmlsdGVyczogYW55ID0ge30pIHtcbiAgY29uc3Qgd2hlcmU6IGFueSA9IHtcbiAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgfTtcblxuICBpZiAoZmlsdGVycy5wdWJsaWNPbmx5KSB7XG4gICAgd2hlcmUuaXNQdWJsaWMgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGZpbHRlcnMuY2F0ZWdvcnkpIHtcbiAgICB3aGVyZS5jYXRlZ29yeSA9IGZpbHRlcnMuY2F0ZWdvcnk7XG4gIH1cblxuICBpZiAoZmlsdGVycy5kaWZmaWN1bHR5KSB7XG4gICAgd2hlcmUuZGlmZmljdWx0eSA9IGZpbHRlcnMuZGlmZmljdWx0eTtcbiAgfVxuXG4gIGlmIChmaWx0ZXJzLmR1cmF0aW9uKSB7XG4gICAgd2hlcmUuZHVyYXRpb24gPSBmaWx0ZXJzLmR1cmF0aW9uO1xuICB9XG5cbiAgaWYgKGZpbHRlcnMubWluUmF0aW5nKSB7XG4gICAgd2hlcmUucmF0aW5nID0geyBndGU6IGZpbHRlcnMubWluUmF0aW5nIH07XG4gIH1cblxuICBpZiAoZmlsdGVycy5wcmljZVJhbmdlKSB7XG4gICAgY29uc3QgW21pbiwgbWF4XSA9IGZpbHRlcnMucHJpY2VSYW5nZS5zcGxpdCgnLScpLm1hcChOdW1iZXIpO1xuICAgIHdoZXJlLnByaWNlID0geyBndGU6IG1pbiwgbHRlOiBtYXggfTtcbiAgfVxuXG4gIHJldHVybiBwcmlzbWEucHJvZ3JhbV90ZW1wbGF0ZXMuZmluZE1hbnkoe1xuICAgIHdoZXJlLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzOiB7XG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHJhaW5lclZlcmlmaWVkOiB0cnVlIH1cbiAgICAgIH0sXG4gICAgICBwcm9ncmFtX3dlZWtzOiB7IG9yZGVyQnk6IHsgd2Vla051bWJlcjogJ2FzYycgfSB9LFxuICAgICAgX2NvdW50OiB7XG4gICAgICAgIHNlbGVjdDogeyBwcm9ncmFtX3JhdGluZ3M6IHRydWUsIHByb2dyYW1fc3Vic2NyaXB0aW9uczogdHJ1ZSB9XG4gICAgICB9XG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IHJhdGluZzogJ2Rlc2MnIH0sXG4gICAgdGFrZTogZmlsdGVycy5saW1pdCB8fCAyMFxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgdHJhaW5pbmcgcHJvZ3JhbSBieSBJRFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhaW5pbmdQcm9ncmFtQnlJZChpZDogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEucHJvZ3JhbV90ZW1wbGF0ZXMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICB1c2Vyczoge1xuICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICB9LFxuICAgICAgcHJvZ3JhbV93ZWVrczogeyBvcmRlckJ5OiB7IHdlZWtOdW1iZXI6ICdhc2MnIH0gfSxcbiAgICAgIHdvcmtvdXRfdGVtcGxhdGVzOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB3b3Jrb3V0X3RlbXBsYXRlX2V4ZXJjaXNlczoge1xuICAgICAgICAgICAgaW5jbHVkZTogeyBleGVyY2lzZXM6IHRydWUgfSxcbiAgICAgICAgICAgIG9yZGVyQnk6IHsgb3JkZXI6ICdhc2MnIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBwcm9ncmFtX3JhdGluZ3M6IHtcbiAgICAgICAgaW5jbHVkZTogeyB1c2VyczogeyBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUgfSB9IH0sXG4gICAgICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICAgICAgdGFrZTogMTBcbiAgICAgIH0sXG4gICAgICBfY291bnQ6IHtcbiAgICAgICAgc2VsZWN0OiB7IHByb2dyYW1fcmF0aW5nczogdHJ1ZSwgcHJvZ3JhbV9zdWJzY3JpcHRpb25zOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSB0cmFpbmluZyBwcm9ncmFtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUcmFpbmluZ1Byb2dyYW0oZGF0YTogYW55KSB7XG4gIHJldHVybiBwcmlzbWEucHJvZ3JhbV90ZW1wbGF0ZXMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSwgLy8gQWRkIHRoaXMgbGluZVxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLCAgIC8vIEFkZCB0aGlzIGxpbmVcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgZHVyYXRpb246IGRhdGEuZHVyYXRpb24sXG4gICAgICBkaWZmaWN1bHR5OiBkYXRhLmRpZmZpY3VsdHkgfHwgJ0JFR0lOTkVSJyxcbiAgICAgIGNhdGVnb3J5OiBkYXRhLmNhdGVnb3J5LFxuICAgICAgaXNQdWJsaWM6IGRhdGEuaXNQdWJsaWMgfHwgZmFsc2UsXG4gICAgICBwcmljZTogZGF0YS5wcmljZSxcbiAgICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5IHx8ICdVU0QnLFxuICAgICAgdGFnczogZGF0YS50YWdzIHx8IFtdLFxuICAgICAgdXNlcnM6IHtcbiAgICAgICAgY29ubmVjdDogeyBpZDogZGF0YS5jcmVhdGVkQnkgfVxuICAgICAgfSxcbiAgICAgIHByb2dyYW1fd2Vla3M6IHtcbiAgICAgICAgY3JlYXRlOiBkYXRhLndlZWtzPy5tYXAoKHdlZWs6IGFueSkgPT4gKHtcbiAgICAgICAgICB3ZWVrTnVtYmVyOiB3ZWVrLndlZWtOdW1iZXIsXG4gICAgICAgICAgdGl0bGU6IHdlZWsudGl0bGUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IHdlZWsuZGVzY3JpcHRpb24sXG4gICAgICAgICAgd29ya291dHM6IHdlZWsud29ya291dHNcbiAgICAgICAgfSkpIHx8IFtdXG4gICAgICB9XG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBwcm9ncmFtX3dlZWtzOiB7IG9yZGVyQnk6IHsgd2Vla051bWJlcjogJ2FzYycgfSB9XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgdHJhaW5pbmcgcHJvZ3JhbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVHJhaW5pbmdQcm9ncmFtKGlkOiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICByZXR1cm4gcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7XG4gICAgICAuLi4oZGF0YS5uYW1lICYmIHsgbmFtZTogZGF0YS5uYW1lIH0pLFxuICAgICAgLi4uKGRhdGEuZGVzY3JpcHRpb24gJiYgeyBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbiB9KSxcbiAgICAgIC4uLihkYXRhLmR1cmF0aW9uICYmIHsgZHVyYXRpb246IGRhdGEuZHVyYXRpb24gfSksXG4gICAgICAuLi4oZGF0YS5kaWZmaWN1bHR5ICYmIHsgZGlmZmljdWx0eTogZGF0YS5kaWZmaWN1bHR5IH0pLFxuICAgICAgLi4uKGRhdGEuY2F0ZWdvcnkgJiYgeyBjYXRlZ29yeTogZGF0YS5jYXRlZ29yeSB9KSxcbiAgICAgIC4uLihkYXRhLmlzUHVibGljICE9PSB1bmRlZmluZWQgJiYgeyBpc1B1YmxpYzogZGF0YS5pc1B1YmxpYyB9KSxcbiAgICAgIC4uLihkYXRhLnByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBwcmljZTogZGF0YS5wcmljZSB9KSxcbiAgICAgIC4uLihkYXRhLnRhZ3MgJiYgeyB0YWdzOiBkYXRhLnRhZ3MgfSlcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIERlbGV0ZSB0cmFpbmluZyBwcm9ncmFtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVUcmFpbmluZ1Byb2dyYW0oaWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLnVwZGF0ZSh7XG4gICAgd2hlcmU6IHsgaWQgfSxcbiAgICBkYXRhOiB7IGlzQWN0aXZlOiBmYWxzZSB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB1c2VyJ3MgcHJvZ3JhbXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE15UHJvZ3JhbXModXNlcklkOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHByaXNtYS5wcm9ncmFtX3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHsgY3JlYXRlZEJ5OiB1c2VySWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgcHJvZ3JhbV93ZWVrczogeyBvcmRlckJ5OiB7IHdlZWtOdW1iZXI6ICdhc2MnIH0gfSxcbiAgICAgIF9jb3VudDoge1xuICAgICAgICBzZWxlY3Q6IHsgcHJvZ3JhbV9yYXRpbmdzOiB0cnVlLCBwcm9ncmFtX3N1YnNjcmlwdGlvbnM6IHRydWUgfVxuICAgICAgfVxuICAgIH0sXG4gICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFNlYXJjaCB0cmFpbmluZyBwcm9ncmFtc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoVHJhaW5pbmdQcm9ncmFtcyhxdWVyeTogc3RyaW5nLCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICByZXR1cm4gcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAuLi4ob3B0aW9ucy5wdWJsaWNPbmx5ICYmIHsgaXNQdWJsaWM6IHRydWUgfSksXG4gICAgICBPUjogW1xuICAgICAgICB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiAnaW5zZW5zaXRpdmUnIH0gfSxcbiAgICAgICAgeyBkZXNjcmlwdGlvbjogeyBjb250YWluczogcXVlcnksIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LFxuICAgICAgICB7IHRhZ3M6IHsgaGFzOiBxdWVyeSB9IH1cbiAgICAgIF1cbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXJzOiB7XG4gICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgdHJhaW5lclZlcmlmaWVkOiB0cnVlIH1cbiAgICAgIH0sXG4gICAgICBfY291bnQ6IHtcbiAgICAgICAgc2VsZWN0OiB7IHByb2dyYW1fcmF0aW5nczogdHJ1ZSwgcHJvZ3JhbV9zdWJzY3JpcHRpb25zOiB0cnVlIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgcmF0aW5nOiAnZGVzYycgfSxcbiAgICB0YWtlOiBvcHRpb25zLmxpbWl0IHx8IDIwXG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB1c2VyIHByb2dyYW0gc3Vic2NyaXB0aW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb2dyYW1TdWJzY3JpcHRpb25zKHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBwcmlzbWEucHJvZ3JhbV9zdWJzY3JpcHRpb25zLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyB1c2VySWQsIGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgcHJvZ3JhbV90ZW1wbGF0ZXM6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHVzZXJzOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwcm9ncmFtX3dlZWtzOiB7IG9yZGVyQnk6IHsgd2Vla051bWJlcjogJ2FzYycgfSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgc3RhcnREYXRlOiAnZGVzYycgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBQdXJjaGFzZSBwcm9ncmFtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdXJjaGFzZVByb2dyYW0ocHJvZ3JhbUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHByb2dyYW0gPSBhd2FpdCBwcmlzbWEucHJvZ3JhbV90ZW1wbGF0ZXMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHByb2dyYW1JZCB9LFxuICAgIHNlbGVjdDogeyBwcmljZTogdHJ1ZSwgY3VycmVuY3k6IHRydWUgfVxuICB9KTtcblxuICBpZiAoIXByb2dyYW0pIHRocm93IG5ldyBFcnJvcignUHJvZ3JhbSBub3QgZm91bmQnKTtcblxuICByZXR1cm4gcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICBjb25zdCBwdXJjaGFzZSA9IGF3YWl0IHR4LnByb2dyYW1fcHVyY2hhc2VzLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHByb2dyYW1JZCxcbiAgICAgICAgcHJpY2U6IHByb2dyYW0ucHJpY2UgfHwgMCxcbiAgICAgICAgY3VycmVuY3k6IHByb2dyYW0uY3VycmVuY3lcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGF3YWl0IHR4LnByb2dyYW1fdGVtcGxhdGVzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcHJvZ3JhbUlkIH0sXG4gICAgICBkYXRhOiB7IHB1cmNoYXNlQ291bnQ6IHsgaW5jcmVtZW50OiAxIH0gfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHB1cmNoYXNlO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTdWJzY3JpYmUgdG8gcHJvZ3JhbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3Vic2NyaWJlVG9Qcm9ncmFtKHByb2dyYW1JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICByZXR1cm4gcHJpc21hLnByb2dyYW1fc3Vic2NyaXB0aW9ucy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdXNlcklkLFxuICAgICAgcHJvZ3JhbUlkLFxuICAgICAgY3VycmVudFdlZWs6IDEsXG4gICAgICBjdXJyZW50RGF5OiAxLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBSYXRlIHByb2dyYW1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJhdGVQcm9ncmFtKHByb2dyYW1JZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgZGF0YTogYW55KSB7XG4gIHJldHVybiBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgIGNvbnN0IHJhdGluZyA9IGF3YWl0IHR4LnByb2dyYW1fcmF0aW5ncy51cHNlcnQoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkX3Byb2dyYW1JZDogeyB1c2VySWQsIHByb2dyYW1JZCB9IH0sXG4gICAgICB1cGRhdGU6IHsgcmF0aW5nOiBkYXRhLnJhdGluZywgcmV2aWV3OiBkYXRhLnJldmlldyB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIHByb2dyYW1JZCxcbiAgICAgICAgcmF0aW5nOiBkYXRhLnJhdGluZyxcbiAgICAgICAgcmV2aWV3OiBkYXRhLnJldmlld1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVjYWxjdWxhdGUgYXZlcmFnZSByYXRpbmdcbiAgICBjb25zdCByYXRpbmdzID0gYXdhaXQgdHgucHJvZ3JhbV9yYXRpbmdzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHByb2dyYW1JZCB9LFxuICAgICAgc2VsZWN0OiB7IHJhdGluZzogdHJ1ZSB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBhdmdSYXRpbmcgPSByYXRpbmdzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLnJhdGluZywgMCkgLyByYXRpbmdzLmxlbmd0aDtcblxuICAgIGF3YWl0IHR4LnByb2dyYW1fdGVtcGxhdGVzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcHJvZ3JhbUlkIH0sXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHJhdGluZzogYXZnUmF0aW5nLFxuICAgICAgICByYXRpbmdDb3VudDogcmF0aW5ncy5sZW5ndGhcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByYXRpbmc7XG4gIH0pO1xufVxuXG4vKipcbiAqIFVwZGF0ZSBwcm9ncmFtIHByb2dyZXNzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9ncmFtUHJvZ3Jlc3MocHJvZ3JhbUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBkYXRhOiBhbnkpIHtcbiAgcmV0dXJuIHByaXNtYS5wcm9ncmFtX3N1YnNjcmlwdGlvbnMudXBkYXRlKHtcbiAgICB3aGVyZTogeyB1c2VySWRfcHJvZ3JhbUlkOiB7IHVzZXJJZCwgcHJvZ3JhbUlkIH0gfSxcbiAgICBkYXRhOiB7XG4gICAgICBjdXJyZW50V2VlazogZGF0YS5jdXJyZW50V2VlayxcbiAgICAgIGN1cnJlbnREYXk6IGRhdGEuY3VycmVudERheSxcbiAgICAgIHByb2dyZXNzRGF0YTogZGF0YS5wcm9ncmVzc0RhdGFcbiAgICB9XG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBTkFMWVRJQ1MgJiBQUk9HUkVTUyBUUkFDS0lORyBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHdvcmtvdXQgYW5hbHl0aWNzIGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdvcmtvdXRBbmFseXRpY3ModXNlcklkOiBzdHJpbmcsIG9wdGlvbnM6IHtcbiAgc3RhcnREYXRlPzogRGF0ZTtcbiAgZW5kRGF0ZT86IERhdGU7XG59ID0ge30pIHtcbiAgY29uc3Qgd2hlcmU6IGFueSA9IHsgdXNlcklkIH07XG5cbiAgaWYgKG9wdGlvbnMuc3RhcnREYXRlIHx8IG9wdGlvbnMuZW5kRGF0ZSkge1xuICAgIHdoZXJlLmRhdGUgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5zdGFydERhdGUpIHdoZXJlLmRhdGUuZ3RlID0gb3B0aW9ucy5zdGFydERhdGU7XG4gICAgaWYgKG9wdGlvbnMuZW5kRGF0ZSkgd2hlcmUuZGF0ZS5sdGUgPSBvcHRpb25zLmVuZERhdGU7XG4gIH1cblxuICByZXR1cm4gcHJpc21hLndvcmtvdXRfYW5hbHl0aWNzLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCBwcm9ncmVzcyBtZXRyaWNzIGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFByb2dyZXNzTWV0cmljcyh1c2VySWQ6IHN0cmluZywgb3B0aW9uczoge1xuICBtZXRyaWNUeXBlPzogc3RyaW5nO1xuICBzdGFydERhdGU/OiBEYXRlO1xuICBlbmREYXRlPzogRGF0ZTtcbn0gPSB7fSkge1xuICBjb25zdCB3aGVyZTogYW55ID0geyB1c2VySWQgfTtcblxuICBpZiAob3B0aW9ucy5tZXRyaWNUeXBlKSB7XG4gICAgd2hlcmUubWV0cmljVHlwZSA9IG9wdGlvbnMubWV0cmljVHlwZTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnN0YXJ0RGF0ZSB8fCBvcHRpb25zLmVuZERhdGUpIHtcbiAgICB3aGVyZS5yZWNvcmRlZEF0ID0ge307XG4gICAgaWYgKG9wdGlvbnMuc3RhcnREYXRlKSB3aGVyZS5yZWNvcmRlZEF0Lmd0ZSA9IG9wdGlvbnMuc3RhcnREYXRlO1xuICAgIGlmIChvcHRpb25zLmVuZERhdGUpIHdoZXJlLnJlY29yZGVkQXQubHRlID0gb3B0aW9ucy5lbmREYXRlO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS5wcm9ncmVzc19tZXRyaWNzLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBvcmRlckJ5OiB7IHJlY29yZGVkQXQ6ICdkZXNjJyB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCBwZXJzb25hbCByZWNvcmRzIGZvciBhIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlcnNvbmFsUmVjb3Jkcyh1c2VySWQ6IHN0cmluZywgb3B0aW9uczoge1xuICBleGVyY2lzZUlkPzogc3RyaW5nO1xufSA9IHt9KSB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7IHVzZXJJZCB9O1xuXG4gIGlmIChvcHRpb25zLmV4ZXJjaXNlSWQpIHtcbiAgICB3aGVyZS5leGVyY2lzZUlkID0gb3B0aW9ucy5leGVyY2lzZUlkO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS5wZXJzb25hbF9yZWNvcmRzLmZpbmRNYW55KHtcbiAgICB3aGVyZSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHtcbiAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBjYXRlZ29yeTogdHJ1ZSB9XG4gICAgICB9XG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IGFjaGlldmVkQXQ6ICdkZXNjJyB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEFkZCBwcm9ncmVzcyBtZXRyaWNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFByb2dyZXNzTWV0cmljKGRhdGE6IHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIG1ldHJpY1R5cGU6IHN0cmluZztcbiAgdmFsdWU6IG51bWJlcjtcbiAgdW5pdD86IHN0cmluZztcbiAgYm9keVBhcnQ/OiBzdHJpbmc7XG4gIG5vdGVzPzogc3RyaW5nO1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgcmVjb3JkZWRBdD86IERhdGU7XG59KSB7XG4gIHJldHVybiBwcmlzbWEucHJvZ3Jlc3NfbWV0cmljcy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcbiAgICAgIG1ldHJpY1R5cGU6IGRhdGEubWV0cmljVHlwZSxcbiAgICAgIHZhbHVlOiBkYXRhLnZhbHVlLFxuICAgICAgdW5pdDogZGF0YS51bml0ID8/IG51bGwsXG4gICAgICBib2R5UGFydDogZGF0YS5ib2R5UGFydCA/PyBudWxsLFxuICAgICAgbm90ZXM6IGRhdGEubm90ZXMgPz8gbnVsbCxcbiAgICAgIGltYWdlVXJsOiBkYXRhLmltYWdlVXJsID8/IG51bGwsXG4gICAgICByZWNvcmRlZEF0OiBkYXRhLnJlY29yZGVkQXQgfHwgbmV3IERhdGUoKVxuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQWRkIHBlcnNvbmFsIHJlY29yZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUGVyc29uYWxSZWNvcmQoZGF0YToge1xuICB1c2VySWQ6IHN0cmluZztcbiAgZXhlcmNpc2VJZDogc3RyaW5nO1xuICByZWNvcmRUeXBlOiBzdHJpbmc7XG4gIHZhbHVlOiBudW1iZXI7XG4gIHVuaXQ6IHN0cmluZztcbiAgcmVwcz86IG51bWJlcjtcbiAgbm90ZXM/OiBzdHJpbmc7XG4gIGFjaGlldmVkQXQ/OiBEYXRlO1xufSkge1xuICByZXR1cm4gcHJpc21hLnBlcnNvbmFsX3JlY29yZHMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBpZDogY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXG4gICAgICBleGVyY2lzZUlkOiBkYXRhLmV4ZXJjaXNlSWQsXG4gICAgICByZWNvcmRUeXBlOiBkYXRhLnJlY29yZFR5cGUsXG4gICAgICB2YWx1ZTogZGF0YS52YWx1ZSxcbiAgICAgIHVuaXQ6IGRhdGEudW5pdCxcbiAgICAgIHJlcHM6IGRhdGEucmVwcyA/PyBudWxsLFxuICAgICAgbm90ZXM6IGRhdGEubm90ZXMgPz8gbnVsbCxcbiAgICAgIGFjaGlldmVkQXQ6IGRhdGEuYWNoaWV2ZWRBdCB8fCBuZXcgRGF0ZSgpXG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB3b3Jrb3V0IGFuYWx5dGljcyBmb3IgYSB1c2VyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVdvcmtvdXRBbmFseXRpY3ModXNlcklkOiBzdHJpbmcpIHtcbiAgLy8gR2V0IGxhc3QgMzAgZGF5cyBvZiB3b3Jrb3V0IGRhdGFcbiAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gIHN0YXJ0RGF0ZS5zZXREYXRlKHN0YXJ0RGF0ZS5nZXREYXRlKCkgLSAzMCk7XG5cbiAgY29uc3Qgd29ya291dExvZ3MgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGRhdGU6IHsgZ3RlOiBzdGFydERhdGUsIGx0ZTogZW5kRGF0ZSB9XG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBleGVyY2lzZXM6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIC8vIEdyb3VwIGJ5IGRhdGUgYW5kIGNhbGN1bGF0ZSBkYWlseSBzdGF0c1xuICBjb25zdCBkYWlseVN0YXRzID0gd29ya291dExvZ3MucmVkdWNlKChhY2MsIGxvZykgPT4ge1xuICAgIGNvbnN0IGRhdGVLZXkgPSBsb2cuZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG5cbiAgICBpZiAoIWRhdGVLZXkpIHJldHVybiBhY2M7XG5cbiAgICBpZiAoIWFjY1tkYXRlS2V5XSkge1xuICAgICAgYWNjW2RhdGVLZXldID0ge1xuICAgICAgICBkYXRlOiBsb2cuZGF0ZSxcbiAgICAgICAgdG90YWxWb2x1bWU6IDAsXG4gICAgICAgIHRvdGFsU2V0czogMCxcbiAgICAgICAgdG90YWxSZXBzOiAwLFxuICAgICAgICBtdXNjbGVHcm91cHM6IG5ldyBTZXQoKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBhY2NbZGF0ZUtleV0udG90YWxWb2x1bWUgKz0gbG9nLnRyYWluaW5nVm9sdW1lIHx8IDA7XG4gICAgYWNjW2RhdGVLZXldLnRvdGFsU2V0cyArPSAxO1xuICAgIGFjY1tkYXRlS2V5XS50b3RhbFJlcHMgKz0gbG9nLnJlcHM7XG4gICAgbG9nLmV4ZXJjaXNlcy5tdXNjbGVHcm91cHMuZm9yRWFjaCgobWc6IHN0cmluZykgPT4gYWNjW2RhdGVLZXldPy5tdXNjbGVHcm91cHMuYWRkKG1nKSk7XG5cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSBhcyBhbnkpO1xuXG4gIC8vIENyZWF0ZSBvciB1cGRhdGUgYW5hbHl0aWNzIHJlY29yZHNcbiAgY29uc3QgYW5hbHl0aWNzUHJvbWlzZXMgPSBPYmplY3QuZW50cmllcyhkYWlseVN0YXRzKS5tYXAoKFtkYXRlS2V5LCBzdGF0c106IFtzdHJpbmcsIGFueV0pID0+IHtcbiAgICBjb25zdCB0b3BNdXNjbGVHcm91cCA9IEFycmF5LmZyb20oc3RhdHMubXVzY2xlR3JvdXBzKS5sZW5ndGggPiAwXG4gICAgICA/IEFycmF5LmZyb20oc3RhdHMubXVzY2xlR3JvdXBzKVswXSBhcyBzdHJpbmdcbiAgICAgIDogbnVsbDtcblxuICAgIHJldHVybiBwcmlzbWEud29ya291dF9hbmFseXRpY3MudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZF9kYXRlOiB7IHVzZXJJZCwgZGF0ZTogbmV3IERhdGUoZGF0ZUtleSkgfSB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHRvdGFsV29ya291dHM6IDEsXG4gICAgICAgIHRvdGFsVm9sdW1lOiBzdGF0cy50b3RhbFZvbHVtZSxcbiAgICAgICAgdG90YWxTZXRzOiBzdGF0cy50b3RhbFNldHMsXG4gICAgICAgIHRvdGFsUmVwczogc3RhdHMudG90YWxSZXBzLFxuICAgICAgICB0b3BNdXNjbGVHcm91cCxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGlkOiBjcnlwdG8ucmFuZG9tVVVJRCgpLFxuICAgICAgICB1c2VySWQsXG4gICAgICAgIGRhdGU6IG5ldyBEYXRlKGRhdGVLZXkpLFxuICAgICAgICB0b3RhbFdvcmtvdXRzOiAxLFxuICAgICAgICB0b3RhbFZvbHVtZTogc3RhdHMudG90YWxWb2x1bWUsXG4gICAgICAgIHRvdGFsU2V0czogc3RhdHMudG90YWxTZXRzLFxuICAgICAgICB0b3RhbFJlcHM6IHN0YXRzLnRvdGFsUmVwcyxcbiAgICAgICAgdG9wTXVzY2xlR3JvdXAsXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gUHJvbWlzZS5hbGwoYW5hbHl0aWNzUHJvbWlzZXMpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBNQVJLRVRQTEFDRSBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IG1hcmtldHBsYWNlIHRlbXBsYXRlc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFya2V0cGxhY2VUZW1wbGF0ZXMoZmlsdGVyczogYW55ID0ge30pIHtcbiAgcmV0dXJuIGdldFdvcmtvdXRUZW1wbGF0ZXMoeyAuLi5maWx0ZXJzLCBwdWJsaWNPbmx5OiB0cnVlIH0pO1xufVxuXG4vKipcbiAqIEdldCBtYXJrZXRwbGFjZSBwcm9ncmFtc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TWFya2V0cGxhY2VQcm9ncmFtcyhmaWx0ZXJzOiBhbnkgPSB7fSkge1xuICByZXR1cm4gZ2V0VHJhaW5pbmdQcm9ncmFtcyh7IC4uLmZpbHRlcnMsIHB1YmxpY09ubHk6IHRydWUgfSk7XG59XG5cbi8qKlxuICogR2V0IGZlYXR1cmVkIGNvbnRlbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZlYXR1cmVkQ29udGVudCgpIHtcbiAgY29uc3QgW3RlbXBsYXRlcywgcHJvZ3JhbXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHByaXNtYS53b3Jrb3V0X3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBpc1B1YmxpYzogdHJ1ZSwgaXNBY3RpdmU6IHRydWUsIHJhdGluZzogeyBndGU6IDQuNSB9IH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHVzZXJzOiB7XG4gICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCB0cmFpbmVyVmVyaWZpZWQ6IHRydWUgfVxuICAgICAgICB9LFxuICAgICAgICBfY291bnQ6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgdGVtcGxhdGVfcmF0aW5nczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IHJhdGluZzogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiA2XG4gICAgfSksXG4gICAgcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGlzUHVibGljOiB0cnVlLCBpc0FjdGl2ZTogdHJ1ZSwgcmF0aW5nOiB7IGd0ZTogNC41IH0gfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBwcm9ncmFtX3JhdGluZ3M6IHRydWUsIHByb2dyYW1fc3Vic2NyaXB0aW9uczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IHJhdGluZzogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiA2XG4gICAgfSlcbiAgXSk7XG5cbiAgcmV0dXJuIHsgdGVtcGxhdGVzLCBwcm9ncmFtcyB9O1xufVxuXG4vKipcbiAqIEdldCB0b3AgcmF0ZWQgY29udGVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG9wUmF0ZWRDb250ZW50KCkge1xuICBjb25zdCBbdGVtcGxhdGVzLCBwcm9ncmFtc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLndvcmtvdXRfdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGlzUHVibGljOiB0cnVlLCBpc0FjdGl2ZTogdHJ1ZSwgcmF0aW5nQ291bnQ6IHsgZ3RlOiA1IH0gfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IFt7IHJhdGluZzogJ2Rlc2MnIH0sIHsgcmF0aW5nQ291bnQ6ICdkZXNjJyB9XSxcbiAgICAgIHRha2U6IDEwXG4gICAgfSksXG4gICAgcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGlzUHVibGljOiB0cnVlLCBpc0FjdGl2ZTogdHJ1ZSwgcmF0aW5nQ291bnQ6IHsgZ3RlOiA1IH0gfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBwcm9ncmFtX3JhdGluZ3M6IHRydWUsIHByb2dyYW1fc3Vic2NyaXB0aW9uczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiBbeyByYXRpbmc6ICdkZXNjJyB9LCB7IHJhdGluZ0NvdW50OiAnZGVzYycgfV0sXG4gICAgICB0YWtlOiAxMFxuICAgIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7IHRlbXBsYXRlcywgcHJvZ3JhbXMgfTtcbn1cblxuLyoqXG4gKiBHZXQgcG9wdWxhciBjb250ZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQb3B1bGFyQ29udGVudCgpIHtcbiAgY29uc3QgW3RlbXBsYXRlcywgcHJvZ3JhbXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIHByaXNtYS53b3Jrb3V0X3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBpc1B1YmxpYzogdHJ1ZSwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHsgcHVyY2hhc2VDb3VudDogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiAxMFxuICAgIH0pLFxuICAgIHByaXNtYS5wcm9ncmFtX3RlbXBsYXRlcy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBpc1B1YmxpYzogdHJ1ZSwgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBwcm9ncmFtX3JhdGluZ3M6IHRydWUsIHByb2dyYW1fc3Vic2NyaXB0aW9uczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IHB1cmNoYXNlQ291bnQ6ICdkZXNjJyB9LFxuICAgICAgdGFrZTogMTBcbiAgICB9KVxuICBdKTtcblxuICByZXR1cm4geyB0ZW1wbGF0ZXMsIHByb2dyYW1zIH07XG59XG5cbi8qKlxuICogR2V0IHJlY29tbWVuZGVkIGNvbnRlbnQgZm9yIGEgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjb21tZW5kZWRDb250ZW50KHVzZXJJZD86IHN0cmluZykge1xuICBpZiAoIXVzZXJJZCkge1xuICAgIC8vIFJldHVybiBwb3B1bGFyIGNvbnRlbnQgZm9yIGFub255bW91cyB1c2Vyc1xuICAgIHJldHVybiBnZXRQb3B1bGFyQ29udGVudCgpO1xuICB9XG5cbiAgLy8gR2V0IHVzZXIncyBwcmVmZXJlbmNlcyBhbmQgcGFzdCBwdXJjaGFzZXNcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBmaXRuZXNzR29hbHM6IHRydWUsXG4gICAgICBleHBlcmllbmNlTGV2ZWw6IHRydWUsXG4gICAgICBwcmVmZXJyZWRXb3Jrb3V0VHlwZXM6IHRydWUsXG4gICAgICB0ZW1wbGF0ZV9wdXJjaGFzZXM6IHtcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIHdvcmtvdXRfdGVtcGxhdGVzOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHsgY2F0ZWdvcnk6IHRydWUsIGRpZmZpY3VsdHk6IHRydWUsIHRhZ3M6IHRydWUgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb2dyYW1fcHVyY2hhc2VzOiB7XG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBwcm9ncmFtX3RlbXBsYXRlczoge1xuICAgICAgICAgICAgc2VsZWN0OiB7IGNhdGVnb3J5OiB0cnVlLCBkaWZmaWN1bHR5OiB0cnVlLCB0YWdzOiB0cnVlIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBnZXRQb3B1bGFyQ29udGVudCgpO1xuICB9XG5cbiAgLy8gRXh0cmFjdCB1c2VyIHByZWZlcmVuY2VzIGZvciByZWNvbW1lbmRhdGlvbnNcbiAgY29uc3QgdXNlckNhdGVnb3JpZXMgPSBbXG4gICAgLi4udXNlci50ZW1wbGF0ZV9wdXJjaGFzZXMubWFwKChwOiBhbnkpID0+IHAud29ya291dF90ZW1wbGF0ZXMuY2F0ZWdvcnkpLFxuICAgIC4uLnVzZXIucHJvZ3JhbV9wdXJjaGFzZXMubWFwKChwOiBhbnkpID0+IHAucHJvZ3JhbV90ZW1wbGF0ZXMuY2F0ZWdvcnkpXG4gIF0uZmlsdGVyKEJvb2xlYW4pIGFzIHN0cmluZ1tdO1xuXG4gIGNvbnN0IHVzZXJUYWdzID0gW1xuICAgIC4uLnVzZXIudGVtcGxhdGVfcHVyY2hhc2VzLmZsYXRNYXAoKHA6IGFueSkgPT4gcC53b3Jrb3V0X3RlbXBsYXRlcy50YWdzKSxcbiAgICAuLi51c2VyLnByb2dyYW1fcHVyY2hhc2VzLmZsYXRNYXAoKHA6IGFueSkgPT4gcC5wcm9ncmFtX3RlbXBsYXRlcy50YWdzKSxcbiAgICAuLi51c2VyLmZpdG5lc3NHb2FscyxcbiAgICAuLi51c2VyLnByZWZlcnJlZFdvcmtvdXRUeXBlc1xuICBdLmZpbHRlcihCb29sZWFuKSBhcyBzdHJpbmdbXTtcblxuICBjb25zdCBbdGVtcGxhdGVzLCBwcm9ncmFtc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLndvcmtvdXRfdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgT1I6IFtcbiAgICAgICAgICB7IGNhdGVnb3J5OiB7IGluOiB1c2VyQ2F0ZWdvcmllcyB9IH0sXG4gICAgICAgICAgeyBkaWZmaWN1bHR5OiB1c2VyLmV4cGVyaWVuY2VMZXZlbCB9LFxuICAgICAgICAgIHsgdGFnczogeyBoYXNTb21lOiB1c2VyVGFncyB9IH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyB0ZW1wbGF0ZV9yYXRpbmdzOiB0cnVlIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9yZGVyQnk6IHsgcmF0aW5nOiAnZGVzYycgfSxcbiAgICAgIHRha2U6IDEwXG4gICAgfSksXG4gICAgcHJpc21hLnByb2dyYW1fdGVtcGxhdGVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGlzUHVibGljOiB0cnVlLFxuICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgT1I6IFtcbiAgICAgICAgICB7IGNhdGVnb3J5OiB7IGluOiB1c2VyQ2F0ZWdvcmllcyB9IH0sXG4gICAgICAgICAgeyBkaWZmaWN1bHR5OiB1c2VyLmV4cGVyaWVuY2VMZXZlbCB9LFxuICAgICAgICAgIHsgdGFnczogeyBoYXNTb21lOiB1c2VyVGFncyB9IH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgdXNlcnM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHsgaWQ6IHRydWUsIG5hbWU6IHRydWUsIHRyYWluZXJWZXJpZmllZDogdHJ1ZSB9XG4gICAgICAgIH0sXG4gICAgICAgIF9jb3VudDoge1xuICAgICAgICAgIHNlbGVjdDogeyBwcm9ncmFtX3JhdGluZ3M6IHRydWUsIHByb2dyYW1fc3Vic2NyaXB0aW9uczogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7IHJhdGluZzogJ2Rlc2MnIH0sXG4gICAgICB0YWtlOiAxMFxuICAgIH0pXG4gIF0pO1xuXG4gIHJldHVybiB7IHRlbXBsYXRlcywgcHJvZ3JhbXMgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQVNTRVNTTUVOVCBJTlRFR1JBVElPTiBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBBc3Nlc3NtZW50RGF0YSB7XG4gIGZpdG5lc3NfbGV2ZWw6IHN0cmluZztcbiAgcHJpbWFyeV9nb2FsOiBzdHJpbmc7XG4gIG1vdmVtZW50X2xpbWl0YXRpb25zOiBzdHJpbmdbXTtcbiAgZXhwZXJpZW5jZV95ZWFyczogbnVtYmVyO1xufVxuXG4vLyBMaW5rIHdvcmtvdXQgc2Vzc2lvbiB0byBhc3Nlc3NtZW50XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlua19zZXNzaW9uX3RvX2Fzc2Vzc21lbnQoXG4gIHNlc3Npb25faWQ6IHN0cmluZyxcbiAgYXNzZXNzbWVudF9pZDogc3RyaW5nXG4pIHtcbiAgY29uc3QgYXNzZXNzbWVudCA9IGF3YWl0IHByaXNtYS5hc3Nlc3NtZW50cy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogYXNzZXNzbWVudF9pZCB9XG4gIH0pO1xuXG4gIGlmICghYXNzZXNzbWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQXNzZXNzbWVudCBub3QgZm91bmQnKTtcbiAgfVxuXG4gIC8vIEV4dHJhY3QgZml0bmVzcyBsZXZlbCBhbmQgZ29hbHMgZnJvbSBhc3Nlc3NtZW50XG4gIGNvbnN0IGFzc2Vzc21lbnRfZGF0YTogQXNzZXNzbWVudERhdGEgPSB7XG4gICAgZml0bmVzc19sZXZlbDogZGV0ZXJtaW5lX2ZpdG5lc3NfbGV2ZWwoYXNzZXNzbWVudCksXG4gICAgcHJpbWFyeV9nb2FsOiBhc3Nlc3NtZW50LnByaW1hcnlHb2FsIHx8ICdHRU5FUkFMX0ZJVE5FU1MnLFxuICAgIG1vdmVtZW50X2xpbWl0YXRpb25zOiBhc3Nlc3NtZW50LmxpbWl0YXRpb25zIHx8IFtdLFxuICAgIGV4cGVyaWVuY2VfeWVhcnM6IGFzc2Vzc21lbnQuZXhwZXJpZW5jZVllYXJzIHx8IDBcbiAgfTtcblxuICByZXR1cm4gcHJpc21hLndvcmtvdXRfc2Vzc2lvbnMudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogc2Vzc2lvbl9pZCB9LFxuICAgIGRhdGE6IHtcbiAgICAgIGFzc2Vzc21lbnRJZDogYXNzZXNzbWVudF9pZCxcbiAgICAgIGZpdG5lc3NMZXZlbDogYXNzZXNzbWVudF9kYXRhLmZpdG5lc3NfbGV2ZWwsXG4gICAgICBwcmltYXJ5R29hbDogYXNzZXNzbWVudF9kYXRhLnByaW1hcnlfZ29hbCxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH1cbiAgfSk7XG59XG5cbi8vIERldGVybWluZSBmaXRuZXNzIGxldmVsIGZyb20gYXNzZXNzbWVudCBzY29yZXNcbmZ1bmN0aW9uIGRldGVybWluZV9maXRuZXNzX2xldmVsKGFzc2Vzc21lbnQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIEFuYWx5c2UgYXNzZXNzbWVudCBtZXRyaWNzXG4gIGNvbnN0IHNxdWF0X3Njb3JlID0gYXNzZXNzbWVudC5zcXVhdFNjb3JlIHx8IDA7XG4gIGNvbnN0IHB1c2hfc2NvcmUgPSBhc3Nlc3NtZW50LnB1c2hTY29yZSB8fCAwO1xuICBjb25zdCBwdWxsX3Njb3JlID0gYXNzZXNzbWVudC5wdWxsU2NvcmUgfHwgMDtcblxuICBjb25zdCBhdmVyYWdlX3Njb3JlID0gKHNxdWF0X3Njb3JlICsgcHVzaF9zY29yZSArIHB1bGxfc2NvcmUpIC8gMztcblxuICBpZiAoYXZlcmFnZV9zY29yZSA+PSA4KSByZXR1cm4gJ0FEVkFOQ0VEJztcbiAgaWYgKGF2ZXJhZ2Vfc2NvcmUgPj0gNSkgcmV0dXJuICdJTlRFUk1FRElBVEUnO1xuICByZXR1cm4gJ0JFR0lOTkVSJztcbn1cblxuLy8gR2V0IHdvcmtvdXQgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGFzc2Vzc21lbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRfYXNzZXNzbWVudF9iYXNlZF9yZWNvbW1lbmRhdGlvbnMoXG4gIHVzZXJfaWQ6IHN0cmluZ1xuKSB7XG4gIC8vIEdldCBtb3N0IHJlY2VudCBhc3Nlc3NtZW50XG4gIGNvbnN0IGxhdGVzdF9hc3Nlc3NtZW50ID0gYXdhaXQgcHJpc21hLmFzc2Vzc21lbnRzLmZpbmRGaXJzdCh7XG4gICAgd2hlcmU6IHsgY2xpZW50SWQ6IHVzZXJfaWQgfSxcbiAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH1cbiAgfSk7XG5cbiAgaWYgKCFsYXRlc3RfYXNzZXNzbWVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZml0bmVzc19sZXZlbCA9IGRldGVybWluZV9maXRuZXNzX2xldmVsKGxhdGVzdF9hc3Nlc3NtZW50KTtcblxuICAvLyBHZXQgZXhlcmNpc2UgcmVjb21tZW5kYXRpb25zXG4gIGNvbnN0IGV4ZXJjaXNlX3JlY29tbWVuZGF0aW9ucyA9IGdldF9leGVyY2lzZV9yZWNvbW1lbmRhdGlvbnMoXG4gICAgZml0bmVzc19sZXZlbCxcbiAgICBsYXRlc3RfYXNzZXNzbWVudC5wcmltYXJ5R29hbCB8fCAnR0VORVJBTF9GSVRORVNTJyxcbiAgICAnU1FVQVQnIC8vIEV4YW1wbGUgcGF0dGVyblxuICApO1xuXG4gIHJldHVybiB7XG4gICAgZml0bmVzc19sZXZlbCxcbiAgICByZWNvbW1lbmRlZF92b2x1bWU6IGNhbGN1bGF0ZV9yZWNvbW1lbmRlZF92b2x1bWUoZml0bmVzc19sZXZlbCksXG4gICAgcmVjb21tZW5kZWRfZnJlcXVlbmN5OiBjYWxjdWxhdGVfcmVjb21tZW5kZWRfZnJlcXVlbmN5KGZpdG5lc3NfbGV2ZWwpLFxuICAgIHRyYWluaW5nX3BoYXNlOiBleGVyY2lzZV9yZWNvbW1lbmRhdGlvbnMucHJvZ3Jlc3Npb25fbGV2ZWwsXG4gICAgY29hY2hpbmdfY3VlczogZXhlcmNpc2VfcmVjb21tZW5kYXRpb25zLmNvYWNoaW5nX2N1ZXNcbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlX3JlY29tbWVuZGVkX3ZvbHVtZShmaXRuZXNzX2xldmVsOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCB2b2x1bWVfbWFwID0ge1xuICAgIEJFR0lOTkVSOiAxMCwgLy8gMTAgc2V0cyBwZXIgc2Vzc2lvblxuICAgIElOVEVSTUVESUFURTogMTUsXG4gICAgQURWQU5DRUQ6IDIwXG4gIH07XG4gIHJldHVybiB2b2x1bWVfbWFwW2ZpdG5lc3NfbGV2ZWwgYXMga2V5b2YgdHlwZW9mIHZvbHVtZV9tYXBdIHx8IDEyO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVfcmVjb21tZW5kZWRfZnJlcXVlbmN5KGZpdG5lc3NfbGV2ZWw6IHN0cmluZyk6IG51bWJlciB7XG4gIGNvbnN0IGZyZXF1ZW5jeV9tYXAgPSB7XG4gICAgQkVHSU5ORVI6IDMsIC8vIDMgc2Vzc2lvbnMgcGVyIHdlZWtcbiAgICBJTlRFUk1FRElBVEU6IDQsXG4gICAgQURWQU5DRUQ6IDVcbiAgfTtcbiAgcmV0dXJuIGZyZXF1ZW5jeV9tYXBbZml0bmVzc19sZXZlbCBhcyBrZXlvZiB0eXBlb2YgZnJlcXVlbmN5X21hcF0gfHwgMztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQUkgREFUQSBQSVBFTElORSBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBBSVRyYWluaW5nRGF0YSB7XG4gIHVzZXJfcHJvZmlsZToge1xuICAgIGZpdG5lc3NfbGV2ZWw6IHN0cmluZztcbiAgICBwcmltYXJ5X2dvYWw6IHN0cmluZztcbiAgICBleHBlcmllbmNlX3llYXJzOiBudW1iZXI7XG4gIH07XG4gIHdvcmtvdXRfaGlzdG9yeToge1xuICAgIHRvdGFsX3Nlc3Npb25zOiBudW1iZXI7XG4gICAgYXZlcmFnZV92b2x1bWU6IG51bWJlcjtcbiAgICBmYXZvdXJpdGVfZXhlcmNpc2VzOiBzdHJpbmdbXTtcbiAgICBjb25zaXN0ZW5jeV9zY29yZTogbnVtYmVyO1xuICB9O1xuICBwZXJmb3JtYW5jZV9tZXRyaWNzOiB7XG4gICAgc3RyZW5ndGhfcHJvZ3Jlc3Npb246IG51bWJlcjtcbiAgICB2b2x1bWVfcHJvZ3Jlc3Npb246IG51bWJlcjtcbiAgICB0ZWNobmlxdWVfc2NvcmVzOiBudW1iZXJbXTtcbiAgfTtcbiAgcHJlZmVyZW5jZXM6IHtcbiAgICBwcmVmZXJyZWRfc2V0X3R5cGVzOiBzdHJpbmdbXTtcbiAgICBwcmVmZXJyZWRfcmVwX3JhbmdlczogW251bWJlciwgbnVtYmVyXTtcbiAgICBwcmVmZXJyZWRfcmVzdF9kdXJhdGlvbnM6IG51bWJlcltdO1xuICB9O1xufVxuXG4vLyBQcmVwYXJlIHdvcmtvdXQgZGF0YSBmb3IgQUkgYW5hbHlzaXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcmVwYXJlX2FpX3RyYWluaW5nX2RhdGEoXG4gIHVzZXJfaWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxBSVRyYWluaW5nRGF0YT4ge1xuICAvLyBHZXQgYWxsIHVzZXIgc2Vzc2lvbnMgZnJvbSBsYXN0IDkwIGRheXNcbiAgY29uc3QgbmluZXR5X2RheXNfYWdvID0gbmV3IERhdGUoKTtcbiAgbmluZXR5X2RheXNfYWdvLnNldERhdGUobmluZXR5X2RheXNfYWdvLmdldERhdGUoKSAtIDkwKTtcblxuICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB1c2VyX2lkLFxuICAgICAgZGF0ZTogeyBndGU6IG5pbmV0eV9kYXlzX2FnbyB9LFxuICAgICAgaXNDb21wbGV0ZTogdHJ1ZVxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgd29ya291dF9sb2dfZW50cmllczoge1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZXhlcmNpc2VzOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgZGF0ZTogJ2FzYycgfVxuICB9KTtcblxuICBjb25zdCBlbnRyaWVzID0gc2Vzc2lvbnMuZmxhdE1hcChzID0+IHMud29ya291dF9sb2dfZW50cmllcyk7XG5cbiAgLy8gQ2FsY3VsYXRlIG1ldHJpY3NcbiAgY29uc3QgdG90YWxfdm9sdW1lID0gZW50cmllcy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgKGUudHJhaW5pbmdWb2x1bWUgfHwgMCksIDApO1xuICBjb25zdCBhdmVyYWdlX3ZvbHVtZSA9IHNlc3Npb25zLmxlbmd0aCA+IDAgPyB0b3RhbF92b2x1bWUgLyBzZXNzaW9ucy5sZW5ndGggOiAwO1xuXG4gIC8vIEZpbmQgZmF2b3VyaXRlIGV4ZXJjaXNlcyAobW9zdCBmcmVxdWVudGx5IHVzZWQpXG4gIGNvbnN0IGV4ZXJjaXNlX2ZyZXF1ZW5jeSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIGVudHJpZXMuZm9yRWFjaChlID0+IHtcbiAgICBleGVyY2lzZV9mcmVxdWVuY3kuc2V0KFxuICAgICAgZS5leGVyY2lzZUlkLFxuICAgICAgKGV4ZXJjaXNlX2ZyZXF1ZW5jeS5nZXQoZS5leGVyY2lzZUlkKSB8fCAwKSArIDFcbiAgICApO1xuICB9KTtcblxuICBjb25zdCBmYXZvdXJpdGVfZXhlcmNpc2VzID0gQXJyYXkuZnJvbShleGVyY2lzZV9mcmVxdWVuY3kuZW50cmllcygpKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAuc2xpY2UoMCwgMTApXG4gICAgLm1hcCgoW2lkXSkgPT4gaWQpO1xuXG4gIC8vIENhbGN1bGF0ZSBjb25zaXN0ZW5jeSBzY29yZSAoc2Vzc2lvbnMgcGVyIHdlZWspXG4gIGNvbnN0IHdlZWtzX2luX3BlcmlvZCA9IDEzOyAvLyB+OTAgZGF5c1xuICBjb25zdCBjb25zaXN0ZW5jeV9zY29yZSA9IChzZXNzaW9ucy5sZW5ndGggLyB3ZWVrc19pbl9wZXJpb2QpIC8gNDsgLy8gTm9ybWFsaXNlZCB0byAwLTFcblxuICAvLyBHZXQgbGF0ZXN0IGFzc2Vzc21lbnRcbiAgY29uc3QgbGF0ZXN0X2Fzc2Vzc21lbnQgPSBhd2FpdCBwcmlzbWEuYXNzZXNzbWVudHMuZmluZEZpcnN0KHtcbiAgICB3aGVyZTogeyBjbGllbnRJZDogdXNlcl9pZCB9LFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIHVzZXJfcHJvZmlsZToge1xuICAgICAgZml0bmVzc19sZXZlbDogJ0lOVEVSTUVESUFURScsIC8vIERlZmF1bHQgc2luY2UgYXNzZXNzbWVudHMgZG9lc24ndCBoYXZlIGZpdG5lc3NMZXZlbCBmaWVsZFxuICAgICAgcHJpbWFyeV9nb2FsOiBsYXRlc3RfYXNzZXNzbWVudD8ucHJpbWFyeUdvYWwgfHwgJ0dFTkVSQUxfRklUTkVTUycsXG4gICAgICBleHBlcmllbmNlX3llYXJzOiBsYXRlc3RfYXNzZXNzbWVudD8uZXhwZXJpZW5jZVllYXJzIHx8IDFcbiAgICB9LFxuICAgIHdvcmtvdXRfaGlzdG9yeToge1xuICAgICAgdG90YWxfc2Vzc2lvbnM6IHNlc3Npb25zLmxlbmd0aCxcbiAgICAgIGF2ZXJhZ2Vfdm9sdW1lLFxuICAgICAgZmF2b3VyaXRlX2V4ZXJjaXNlcyxcbiAgICAgIGNvbnNpc3RlbmN5X3Njb3JlOiBNYXRoLm1pbihjb25zaXN0ZW5jeV9zY29yZSwgMSlcbiAgICB9LFxuICAgIHBlcmZvcm1hbmNlX21ldHJpY3M6IHtcbiAgICAgIHN0cmVuZ3RoX3Byb2dyZXNzaW9uOiBjYWxjdWxhdGVfc3RyZW5ndGhfcHJvZ3Jlc3Npb24oZW50cmllcyksXG4gICAgICB2b2x1bWVfcHJvZ3Jlc3Npb246IGNhbGN1bGF0ZV92b2x1bWVfcHJvZ3Jlc3Npb24oc2Vzc2lvbnMpLFxuICAgICAgdGVjaG5pcXVlX3Njb3JlczogZW50cmllc1xuICAgICAgICAuZmlsdGVyKGUgPT4gZS5mb3JtUXVhbGl0eSAhPT0gbnVsbClcbiAgICAgICAgLm1hcChlID0+IGUuZm9ybVF1YWxpdHkhKVxuICAgIH0sXG4gICAgcHJlZmVyZW5jZXM6IHtcbiAgICAgIHByZWZlcnJlZF9zZXRfdHlwZXM6IGNhbGN1bGF0ZV9wcmVmZXJyZWRfc2V0X3R5cGVzKGVudHJpZXMpLFxuICAgICAgcHJlZmVycmVkX3JlcF9yYW5nZXM6IGNhbGN1bGF0ZV9wcmVmZXJyZWRfcmVwX3JhbmdlKGVudHJpZXMpLFxuICAgICAgcHJlZmVycmVkX3Jlc3RfZHVyYXRpb25zOiBjYWxjdWxhdGVfcHJlZmVycmVkX3Jlc3RfZHVyYXRpb25zKGVudHJpZXMpXG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVfc3RyZW5ndGhfcHJvZ3Jlc3Npb24oZW50cmllczogYW55W10pOiBudW1iZXIge1xuICAvLyBDb21wYXJlIGZpcnN0IDIwJSBvZiBlbnRyaWVzIHdpdGggbGFzdCAyMCVcbiAgY29uc3QgdG90YWwgPSBlbnRyaWVzLmxlbmd0aDtcbiAgaWYgKHRvdGFsIDwgMTApIHJldHVybiAwOyAvLyBOZWVkIG1pbmltdW0gZGF0YVxuXG4gIGNvbnN0IGVhcmx5X2VudHJpZXMgPSBlbnRyaWVzLnNsaWNlKDAsIE1hdGguZmxvb3IodG90YWwgKiAwLjIpKTtcbiAgY29uc3QgcmVjZW50X2VudHJpZXMgPSBlbnRyaWVzLnNsaWNlKE1hdGguZmxvb3IodG90YWwgKiAwLjgpKTtcblxuICBjb25zdCBlYXJseV9hdmdfdm9sdW1lID0gZWFybHlfZW50cmllcy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgKGUudHJhaW5pbmdWb2x1bWUgfHwgMCksIDApIC8gZWFybHlfZW50cmllcy5sZW5ndGg7XG4gIGNvbnN0IHJlY2VudF9hdmdfdm9sdW1lID0gcmVjZW50X2VudHJpZXMucmVkdWNlKChzdW0sIGUpID0+IHN1bSArIChlLnRyYWluaW5nVm9sdW1lIHx8IDApLCAwKSAvIHJlY2VudF9lbnRyaWVzLmxlbmd0aDtcblxuICByZXR1cm4gZWFybHlfYXZnX3ZvbHVtZSA+IDAgPyAoKHJlY2VudF9hdmdfdm9sdW1lIC0gZWFybHlfYXZnX3ZvbHVtZSkgLyBlYXJseV9hdmdfdm9sdW1lKSAqIDEwMCA6IDA7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZV92b2x1bWVfcHJvZ3Jlc3Npb24oc2Vzc2lvbnM6IGFueVtdKTogbnVtYmVyIHtcbiAgaWYgKHNlc3Npb25zLmxlbmd0aCA8IDIpIHJldHVybiAwO1xuXG4gIGNvbnN0IGZpcnN0X3Nlc3Npb24gPSBzZXNzaW9uc1swXTtcbiAgY29uc3QgbGFzdF9zZXNzaW9uID0gc2Vzc2lvbnNbc2Vzc2lvbnMubGVuZ3RoIC0gMV07XG5cbiAgY29uc3QgZmlyc3Rfdm9sdW1lID0gZmlyc3Rfc2Vzc2lvbi50b3RhbFZvbHVtZSB8fCAwO1xuICBjb25zdCBsYXN0X3ZvbHVtZSA9IGxhc3Rfc2Vzc2lvbi50b3RhbFZvbHVtZSB8fCAwO1xuXG4gIHJldHVybiBmaXJzdF92b2x1bWUgPiAwID8gKChsYXN0X3ZvbHVtZSAtIGZpcnN0X3ZvbHVtZSkgLyBmaXJzdF92b2x1bWUpICogMTAwIDogMDtcbn1cblxuZnVuY3Rpb24gY2FsY3VsYXRlX3ByZWZlcnJlZF9zZXRfdHlwZXMoZW50cmllczogYW55W10pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IHNldF90eXBlX2NvdW50cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIGVudHJpZXMuZm9yRWFjaChlID0+IHtcbiAgICBzZXRfdHlwZV9jb3VudHMuc2V0KGUuc2V0VHlwZSwgKHNldF90eXBlX2NvdW50cy5nZXQoZS5zZXRUeXBlKSB8fCAwKSArIDEpO1xuICB9KTtcblxuICByZXR1cm4gQXJyYXkuZnJvbShzZXRfdHlwZV9jb3VudHMuZW50cmllcygpKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiWzFdIC0gYVsxXSlcbiAgICAuc2xpY2UoMCwgMylcbiAgICAubWFwKChbdHlwZV0pID0+IHR5cGUpO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVfcHJlZmVycmVkX3JlcF9yYW5nZShlbnRyaWVzOiBhbnlbXSk6IFtudW1iZXIsIG51bWJlcl0ge1xuICBjb25zdCByZXBzID0gZW50cmllcy5tYXAoZSA9PiBlLnJlcHMpLmZpbHRlcihyID0+IHIgPiAwKTtcbiAgaWYgKHJlcHMubGVuZ3RoID09PSAwKSByZXR1cm4gWzgsIDEyXTtcblxuICByZXBzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgY29uc3QgcGVyY2VudGlsZV8yNSA9IHJlcHNbTWF0aC5mbG9vcihyZXBzLmxlbmd0aCAqIDAuMjUpXTtcbiAgY29uc3QgcGVyY2VudGlsZV83NSA9IHJlcHNbTWF0aC5mbG9vcihyZXBzLmxlbmd0aCAqIDAuNzUpXTtcblxuICByZXR1cm4gW3BlcmNlbnRpbGVfMjUsIHBlcmNlbnRpbGVfNzVdO1xufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGVfcHJlZmVycmVkX3Jlc3RfZHVyYXRpb25zKGVudHJpZXM6IGFueVtdKTogbnVtYmVyW10ge1xuICBjb25zdCByZXN0X2R1cmF0aW9ucyA9IGVudHJpZXNcbiAgICAubWFwKGUgPT4gZS5yZXN0U2Vjb25kcylcbiAgICAuZmlsdGVyKHIgPT4gciAhPT0gbnVsbCAmJiByICE9PSB1bmRlZmluZWQpIGFzIG51bWJlcltdO1xuXG4gIGlmIChyZXN0X2R1cmF0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBbNjAsIDkwLCAxMjBdO1xuXG4gIGNvbnN0IGF2ZyA9IHJlc3RfZHVyYXRpb25zLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLCAwKSAvIHJlc3RfZHVyYXRpb25zLmxlbmd0aDtcbiAgcmV0dXJuIFtNYXRoLmZsb29yKGF2ZyAqIDAuOCksIE1hdGguZmxvb3IoYXZnKSwgTWF0aC5mbG9vcihhdmcgKiAxLjIpXTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gR0FNSUZJQ0FUSU9OIFNZU1RFTSBRVUVSSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBBY2hpZXZlbWVudENyaXRlcmlhIHtcbiAgdHlwZTogJ1ZPTFVNRScgfCAnQ09OU0lTVEVOQ1knIHwgJ1NUUkVOR1RIJyB8ICdURUNITklRVUUnIHwgJ01JTEVTVE9ORSc7XG4gIHRocmVzaG9sZDogbnVtYmVyO1xuICBjb21wYXJpc29uOiAnR1JFQVRFUl9USEFOJyB8ICdFUVVBTFMnIHwgJ1NUUkVBSyc7XG4gIG1ldHJpYzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgRXhwZXJpZW5jZVBvaW50c0JyZWFrZG93biB7XG4gIGJhc2VfcG9pbnRzOiBudW1iZXI7XG4gIHZvbHVtZV9ib251czogbnVtYmVyO1xuICB0ZWNobmlxdWVfYm9udXM6IG51bWJlcjtcbiAgY29uc2lzdGVuY3lfYm9udXM6IG51bWJlcjtcbiAgYWNoaWV2ZW1lbnRfYm9udXM6IG51bWJlcjtcbiAgdG90YWw6IG51bWJlcjtcbn1cblxuLy8gQ2FsY3VsYXRlIGV4cGVyaWVuY2UgcG9pbnRzIGZvciBhIHNlc3Npb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVfc2Vzc2lvbl9leHBlcmllbmNlX3BvaW50cyhcbiAgc2Vzc2lvbl9pZDogc3RyaW5nXG4pOiBQcm9taXNlPEV4cGVyaWVuY2VQb2ludHNCcmVha2Rvd24+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uX2lkIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgd29ya291dF9sb2dfZW50cmllczogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIG5vdCBmb3VuZCcpO1xuICB9XG5cbiAgY29uc3QgYnJlYWtkb3duOiBFeHBlcmllbmNlUG9pbnRzQnJlYWtkb3duID0ge1xuICAgIGJhc2VfcG9pbnRzOiAxMDAsIC8vIEJhc2UgcG9pbnRzIGZvciBjb21wbGV0aW5nIHNlc3Npb25cbiAgICB2b2x1bWVfYm9udXM6IDAsXG4gICAgdGVjaG5pcXVlX2JvbnVzOiAwLFxuICAgIGNvbnNpc3RlbmN5X2JvbnVzOiAwLFxuICAgIGFjaGlldmVtZW50X2JvbnVzOiAwLFxuICAgIHRvdGFsOiAwXG4gIH07XG5cbiAgLy8gVm9sdW1lIGJvbnVzICgxIHBvaW50IHBlciAxMDBrZyB0b3RhbCB2b2x1bWUpXG4gIGNvbnN0IHRvdGFsX3ZvbHVtZSA9IHNlc3Npb24udG90YWxWb2x1bWUgfHwgMDtcbiAgYnJlYWtkb3duLnZvbHVtZV9ib251cyA9IE1hdGguZmxvb3IodG90YWxfdm9sdW1lIC8gMTAwKTtcblxuICAvLyBUZWNobmlxdWUgYm9udXMgKGF2ZXJhZ2UgZm9ybSBxdWFsaXR5KVxuICBjb25zdCBlbnRyaWVzX3dpdGhfZm9ybSA9IHNlc3Npb24ud29ya291dF9sb2dfZW50cmllcy5maWx0ZXIoZSA9PiBlLmZvcm1RdWFsaXR5ICE9PSBudWxsKTtcbiAgaWYgKGVudHJpZXNfd2l0aF9mb3JtLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBhdmdfZm9ybSA9IGVudHJpZXNfd2l0aF9mb3JtLnJlZHVjZSgoc3VtLCBlKSA9PiBzdW0gKyAoZS5mb3JtUXVhbGl0eSB8fCAwKSwgMCkgLyBlbnRyaWVzX3dpdGhfZm9ybS5sZW5ndGg7XG4gICAgYnJlYWtkb3duLnRlY2huaXF1ZV9ib251cyA9IE1hdGguZmxvb3IoYXZnX2Zvcm0gKiAyMCk7IC8vIE1heCAxMDAgYm9udXMgZm9yIHBlcmZlY3QgZm9ybVxuICB9XG5cbiAgLy8gQ29uc2lzdGVuY3kgYm9udXMgKGNoZWNrIGlmIHNlc3Npb24gY29udGludWVzIGEgc3RyZWFrKVxuICBjb25zdCBzdHJlYWtfYm9udXMgPSBhd2FpdCBjYWxjdWxhdGVfY29uc2lzdGVuY3lfc3RyZWFrX2JvbnVzKHNlc3Npb24udXNlcklkLCBzZXNzaW9uLmRhdGUpO1xuICBicmVha2Rvd24uY29uc2lzdGVuY3lfYm9udXMgPSBzdHJlYWtfYm9udXM7XG5cbiAgLy8gQWNoaWV2ZW1lbnQgYm9udXMgKGFueSBwZXJzb25hbCByZWNvcmRzKVxuICBjb25zdCBwcl9jb3VudCA9IHNlc3Npb24ud29ya291dF9sb2dfZW50cmllcy5maWx0ZXIoZSA9PiBlLnBlcnNvbmFsUmVjb3JkIHx8IGUudm9sdW1lUmVjb3JkKS5sZW5ndGg7XG4gIGJyZWFrZG93bi5hY2hpZXZlbWVudF9ib251cyA9IHByX2NvdW50ICogNTA7IC8vIDUwIHBvaW50cyBwZXIgUFJcblxuICBicmVha2Rvd24udG90YWwgPSBicmVha2Rvd24uYmFzZV9wb2ludHMgKyBicmVha2Rvd24udm9sdW1lX2JvbnVzICsgYnJlYWtkb3duLnRlY2huaXF1ZV9ib251cyArIGJyZWFrZG93bi5jb25zaXN0ZW5jeV9ib251cyArIGJyZWFrZG93bi5hY2hpZXZlbWVudF9ib251cztcblxuICByZXR1cm4gYnJlYWtkb3duO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVfY29uc2lzdGVuY3lfc3RyZWFrX2JvbnVzKHVzZXJfaWQ6IHN0cmluZywgc2Vzc2lvbl9kYXRlOiBEYXRlKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgLy8gR2V0IHJlY2VudCBzZXNzaW9ucyB0byBjYWxjdWxhdGUgc3RyZWFrXG4gIGNvbnN0IHNldmVuX2RheXNfYWdvID0gbmV3IERhdGUoc2Vzc2lvbl9kYXRlKTtcbiAgc2V2ZW5fZGF5c19hZ28uc2V0RGF0ZShzZXZlbl9kYXlzX2Fnby5nZXREYXRlKCkgLSA3KTtcblxuICBjb25zdCByZWNlbnRfc2Vzc2lvbnMgPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDogdXNlcl9pZCxcbiAgICAgIGRhdGU6IHtcbiAgICAgICAgZ3RlOiBzZXZlbl9kYXlzX2FnbyxcbiAgICAgICAgbHRlOiBzZXNzaW9uX2RhdGVcbiAgICAgIH0sXG4gICAgICBpc0NvbXBsZXRlOiB0cnVlXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9XG4gIH0pO1xuXG4gIC8vIEF3YXJkIGJvbnVzIGZvciAzKyBzZXNzaW9ucyBpbiA3IGRheXNcbiAgaWYgKHJlY2VudF9zZXNzaW9ucy5sZW5ndGggPj0gMykge1xuICAgIHJldHVybiA1MCAqIHJlY2VudF9zZXNzaW9ucy5sZW5ndGg7IC8vIEVzY2FsYXRpbmcgYm9udXNcbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG4vLyBDaGVjayBhbmQgYXdhcmQgYWNoaWV2ZW1lbnRzIGFmdGVyIHNlc3Npb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja19hbmRfYXdhcmRfYWNoaWV2ZW1lbnRzKFxuICB1c2VyX2lkOiBzdHJpbmcsXG4gIHNlc3Npb25faWQ6IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCBhd2FyZGVkX2FjaGlldmVtZW50X2lkczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBHZXQgYWxsIGFjaGlldmVtZW50c1xuICBjb25zdCBhbGxfYWNoaWV2ZW1lbnRzID0gYXdhaXQgcHJpc21hLmFjaGlldmVtZW50cy5maW5kTWFueSgpO1xuXG4gIC8vIEdldCB1c2VyJ3MgZXhpc3RpbmcgYWNoaWV2ZW1lbnRzXG4gIGNvbnN0IGV4aXN0aW5nX2FjaGlldmVtZW50cyA9IGF3YWl0IHByaXNtYS51c2VyX2FjaGlldmVtZW50cy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHsgdXNlcklkOiB1c2VyX2lkIH0sXG4gICAgc2VsZWN0OiB7IGFjaGlldmVtZW50SWQ6IHRydWUgfVxuICB9KTtcblxuICBjb25zdCBleGlzdGluZ19pZHMgPSBuZXcgU2V0KGV4aXN0aW5nX2FjaGlldmVtZW50cy5tYXAoYSA9PiBhLmFjaGlldmVtZW50SWQpKTtcblxuICAvLyBDaGVjayBlYWNoIGFjaGlldmVtZW50XG4gIGZvciAoY29uc3QgYWNoaWV2ZW1lbnQgb2YgYWxsX2FjaGlldmVtZW50cykge1xuICAgIGlmIChleGlzdGluZ19pZHMuaGFzKGFjaGlldmVtZW50LmlkKSkgY29udGludWU7IC8vIEFscmVhZHkgZWFybmVkXG5cbiAgICBjb25zdCBjcml0ZXJpYSA9IGFjaGlldmVtZW50LmNyaXRlcmlhIGFzIHVua25vd24gYXMgQWNoaWV2ZW1lbnRDcml0ZXJpYTtcbiAgICBjb25zdCBtZWV0c19jcml0ZXJpYSA9IGF3YWl0IGNoZWNrX2FjaGlldmVtZW50X2NyaXRlcmlhKHVzZXJfaWQsIHNlc3Npb25faWQsIGNyaXRlcmlhKTtcblxuICAgIGlmIChtZWV0c19jcml0ZXJpYSkge1xuICAgICAgLy8gQXdhcmQgYWNoaWV2ZW1lbnRcbiAgICAgIGF3YWl0IHByaXNtYS51c2VyX2FjaGlldmVtZW50cy5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6IGNyeXB0by5yYW5kb21VVUlEKCksXG4gICAgICAgICAgdXNlcklkOiB1c2VyX2lkLFxuICAgICAgICAgIGFjaGlldmVtZW50SWQ6IGFjaGlldmVtZW50LmlkLFxuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbl9pZFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgYXdhcmRlZF9hY2hpZXZlbWVudF9pZHMucHVzaChhY2hpZXZlbWVudC5pZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGF3YXJkZWRfYWNoaWV2ZW1lbnRfaWRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja19hY2hpZXZlbWVudF9jcml0ZXJpYShcbiAgdXNlcl9pZDogc3RyaW5nLFxuICBzZXNzaW9uX2lkOiBzdHJpbmcsXG4gIGNyaXRlcmlhOiBBY2hpZXZlbWVudENyaXRlcmlhXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgc3dpdGNoIChjcml0ZXJpYS50eXBlKSB7XG4gICAgY2FzZSAnVk9MVU1FJzpcbiAgICAgIHJldHVybiBjaGVja192b2x1bWVfYWNoaWV2ZW1lbnQodXNlcl9pZCwgc2Vzc2lvbl9pZCwgY3JpdGVyaWEpO1xuICAgIGNhc2UgJ0NPTlNJU1RFTkNZJzpcbiAgICAgIHJldHVybiBjaGVja19jb25zaXN0ZW5jeV9hY2hpZXZlbWVudCh1c2VyX2lkLCBjcml0ZXJpYSk7XG4gICAgY2FzZSAnU1RSRU5HVEgnOlxuICAgICAgcmV0dXJuIGNoZWNrX3N0cmVuZ3RoX2FjaGlldmVtZW50KHVzZXJfaWQsIGNyaXRlcmlhKTtcbiAgICBjYXNlICdURUNITklRVUUnOlxuICAgICAgcmV0dXJuIGNoZWNrX3RlY2huaXF1ZV9hY2hpZXZlbWVudCh1c2VyX2lkLCBzZXNzaW9uX2lkLCBjcml0ZXJpYSk7XG4gICAgY2FzZSAnTUlMRVNUT05FJzpcbiAgICAgIHJldHVybiBjaGVja19taWxlc3RvbmVfYWNoaWV2ZW1lbnQodXNlcl9pZCwgY3JpdGVyaWEpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tfdm9sdW1lX2FjaGlldmVtZW50KFxuICBfdXNlcl9pZDogc3RyaW5nLFxuICBzZXNzaW9uX2lkOiBzdHJpbmcsXG4gIGNyaXRlcmlhOiBBY2hpZXZlbWVudENyaXRlcmlhXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uX2lkIH1cbiAgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3QgdG90YWxfdm9sdW1lID0gc2Vzc2lvbi50b3RhbFZvbHVtZSB8fCAwO1xuICByZXR1cm4gdG90YWxfdm9sdW1lID49IGNyaXRlcmlhLnRocmVzaG9sZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tfY29uc2lzdGVuY3lfYWNoaWV2ZW1lbnQoXG4gIHVzZXJfaWQ6IHN0cmluZyxcbiAgY3JpdGVyaWE6IEFjaGlldmVtZW50Q3JpdGVyaWFcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB0aGlydHlfZGF5c19hZ28gPSBuZXcgRGF0ZSgpO1xuICB0aGlydHlfZGF5c19hZ28uc2V0RGF0ZSh0aGlydHlfZGF5c19hZ28uZ2V0RGF0ZSgpIC0gMzApO1xuXG4gIGNvbnN0IHNlc3Npb25fY291bnQgPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5jb3VudCh7XG4gICAgd2hlcmU6IHtcbiAgICAgIHVzZXJJZDogdXNlcl9pZCxcbiAgICAgIGRhdGU6IHsgZ3RlOiB0aGlydHlfZGF5c19hZ28gfSxcbiAgICAgIGlzQ29tcGxldGU6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBzZXNzaW9uX2NvdW50ID49IGNyaXRlcmlhLnRocmVzaG9sZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hlY2tfc3RyZW5ndGhfYWNoaWV2ZW1lbnQoXG4gIHVzZXJfaWQ6IHN0cmluZyxcbiAgY3JpdGVyaWE6IEFjaGlldmVtZW50Q3JpdGVyaWFcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAvLyBDaGVjayBmb3IgcGVyc29uYWwgcmVjb3Jkc1xuICBjb25zdCBwcl9jb3VudCA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB1c2VyX2lkLFxuICAgICAgcGVyc29uYWxSZWNvcmQ6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwcl9jb3VudCA+PSBjcml0ZXJpYS50aHJlc2hvbGQ7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrX3RlY2huaXF1ZV9hY2hpZXZlbWVudChcbiAgX3VzZXJfaWQ6IHN0cmluZyxcbiAgc2Vzc2lvbl9pZDogc3RyaW5nLFxuICBjcml0ZXJpYTogQWNoaWV2ZW1lbnRDcml0ZXJpYVxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogc2Vzc2lvbl9pZCB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHdvcmtvdXRfbG9nX2VudHJpZXM6IHRydWVcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghc2Vzc2lvbikgcmV0dXJuIGZhbHNlO1xuXG4gIGNvbnN0IGVudHJpZXNfd2l0aF9mb3JtID0gc2Vzc2lvbi53b3Jrb3V0X2xvZ19lbnRyaWVzLmZpbHRlcihlID0+IGUuZm9ybVF1YWxpdHkgIT09IG51bGwpO1xuICBpZiAoZW50cmllc193aXRoX2Zvcm0ubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7XG5cbiAgY29uc3QgYXZnX2Zvcm0gPSBlbnRyaWVzX3dpdGhfZm9ybS5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgKGUuZm9ybVF1YWxpdHkgfHwgMCksIDApIC8gZW50cmllc193aXRoX2Zvcm0ubGVuZ3RoO1xuICByZXR1cm4gYXZnX2Zvcm0gPj0gY3JpdGVyaWEudGhyZXNob2xkO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja19taWxlc3RvbmVfYWNoaWV2ZW1lbnQoXG4gIHVzZXJfaWQ6IHN0cmluZyxcbiAgY3JpdGVyaWE6IEFjaGlldmVtZW50Q3JpdGVyaWFcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB0b3RhbF9zZXNzaW9ucyA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X3Nlc3Npb25zLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgdXNlcklkOiB1c2VyX2lkLFxuICAgICAgaXNDb21wbGV0ZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHRvdGFsX3Nlc3Npb25zID09PSBjcml0ZXJpYS50aHJlc2hvbGQ7IC8vIEV4YWN0IG1pbGVzdG9uZVxufVxuXG4vLyBVcGRhdGUgc2Vzc2lvbiB3aXRoIFhQIGFuZCBhY2hpZXZlbWVudHNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5hbGlzZV9zZXNzaW9uX3dpdGhfZ2FtaWZpY2F0aW9uKFxuICBzZXNzaW9uX2lkOiBzdHJpbmdcbikge1xuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJpc21hLndvcmtvdXRfc2Vzc2lvbnMuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgaWQ6IHNlc3Npb25faWQgfVxuICB9KTtcblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gbm90IGZvdW5kJyk7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgWFBcbiAgY29uc3QgeHBfYnJlYWtkb3duID0gYXdhaXQgY2FsY3VsYXRlX3Nlc3Npb25fZXhwZXJpZW5jZV9wb2ludHMoc2Vzc2lvbl9pZCk7XG5cbiAgLy8gQ2hlY2sgYWNoaWV2ZW1lbnRzXG4gIGNvbnN0IG5ld19hY2hpZXZlbWVudHMgPSBhd2FpdCBjaGVja19hbmRfYXdhcmRfYWNoaWV2ZW1lbnRzKHNlc3Npb24udXNlcklkLCBzZXNzaW9uX2lkKTtcblxuICAvLyBBZGQgYWNoaWV2ZW1lbnQgYm9udXMgdG8gWFBcbiAgY29uc3QgYWNoaWV2ZW1lbnRfeHAgPSBuZXdfYWNoaWV2ZW1lbnRzLmxlbmd0aCAqIDEwMDtcbiAgeHBfYnJlYWtkb3duLmFjaGlldmVtZW50X2JvbnVzID0gYWNoaWV2ZW1lbnRfeHA7XG4gIHhwX2JyZWFrZG93bi50b3RhbCArPSBhY2hpZXZlbWVudF94cDtcblxuICAvLyBVcGRhdGUgc2Vzc2lvblxuICBhd2FpdCBwcmlzbWEud29ya291dF9zZXNzaW9ucy51cGRhdGUoe1xuICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uX2lkIH0sXG4gICAgZGF0YToge1xuICAgICAgZXhwZXJpZW5jZVBvaW50czogeHBfYnJlYWtkb3duLnRvdGFsLFxuICAgICAgYWNoaWV2ZW1lbnRzRWFybmVkOiBuZXdfYWNoaWV2ZW1lbnRzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGV4cGVyaWVuY2VfcG9pbnRzOiB4cF9icmVha2Rvd24sXG4gICAgYWNoaWV2ZW1lbnRzX2Vhcm5lZDogbmV3X2FjaGlldmVtZW50c1xuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQRVJTT05BTCBSRUNPUkRTIERFVEVDVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENoZWNrIGlmIGEgd29ya291dCBlbnRyeSBpcyBhIHBlcnNvbmFsIHJlY29yZCBmb3Igd2VpZ2h0XG4gKiBAcGFyYW0gdXNlcklkIC0gVXNlciBJRFxuICogQHBhcmFtIGV4ZXJjaXNlSWQgLSBFeGVyY2lzZSBJRFxuICogQHBhcmFtIHdlaWdodCAtIFdlaWdodCBsaWZ0ZWQgKG51bWVyaWMgdmFsdWUpXG4gKiBAcGFyYW0gcmVwcyAtIE51bWJlciBvZiByZXBzXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSBQUiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrX3BlcnNvbmFsX3JlY29yZChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGV4ZXJjaXNlSWQ6IHN0cmluZyxcbiAgd2VpZ2h0OiBudW1iZXIsXG4gIHJlcHM6IG51bWJlclxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIC8vIEZpbmQgdGhlIGhpZ2hlc3Qgd2VpZ2h0IGZvciB0aGlzIGV4ZXJjaXNlIHdpdGggdGhlIHNhbWUgb3IgbW9yZSByZXBzXG4gIGNvbnN0IHByZXZpb3VzX2Jlc3QgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQsXG4gICAgICBleGVyY2lzZUlkLFxuICAgICAgcmVwczogeyBndGU6IHJlcHMgfVxuICAgIH0sXG4gICAgb3JkZXJCeToge1xuICAgICAgdHJhaW5pbmdWb2x1bWU6ICdkZXNjJ1xuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICB3ZWlnaHQ6IHRydWUsXG4gICAgICB0cmFpbmluZ1ZvbHVtZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCFwcmV2aW91c19iZXN0KSB7XG4gICAgLy8gRmlyc3QgdGltZSBkb2luZyB0aGlzIGV4ZXJjaXNlIC0gaXQncyBhIFBSIVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gRXh0cmFjdCBudW1lcmljIHdlaWdodCBmcm9tIHByZXZpb3VzIGJlc3QgKGhhbmRsZXMgXCIxMzUgbGJzXCIgZm9ybWF0KVxuICBjb25zdCBwcmV2aW91c193ZWlnaHQgPSBwYXJzZUZsb2F0KHByZXZpb3VzX2Jlc3Qud2VpZ2h0LnJlcGxhY2UoL1teXFxkLixdL2csICcnKSk7XG5cbiAgLy8gSXMgY3VycmVudCB3ZWlnaHQgaGlnaGVyIHRoYW4gcHJldmlvdXMgYmVzdD9cbiAgcmV0dXJuIHdlaWdodCA+IHByZXZpb3VzX3dlaWdodDtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHdvcmtvdXQgZW50cnkgaXMgYSB2b2x1bWUgcmVjb3JkXG4gKiBAcGFyYW0gdXNlcklkIC0gVXNlciBJRFxuICogQHBhcmFtIGV4ZXJjaXNlSWQgLSBFeGVyY2lzZSBJRFxuICogQHBhcmFtIHZvbHVtZSAtIFRyYWluaW5nIHZvbHVtZSAod2VpZ2h0IMOXIHJlcHMpXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgaXMgYSB2b2x1bWUgUFIsIGZhbHNlIG90aGVyd2lzZVxuICovXG5hc3luYyBmdW5jdGlvbiBjaGVja192b2x1bWVfcmVjb3JkKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgZXhlcmNpc2VJZDogc3RyaW5nLFxuICB2b2x1bWU6IG51bWJlclxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIC8vIEZpbmQgdGhlIGhpZ2hlc3QgdHJhaW5pbmcgdm9sdW1lIGZvciB0aGlzIGV4ZXJjaXNlXG4gIGNvbnN0IHByZXZpb3VzX2Jlc3QgPSBhd2FpdCBwcmlzbWEud29ya291dF9sb2dfZW50cmllcy5maW5kRmlyc3Qoe1xuICAgIHdoZXJlOiB7XG4gICAgICB1c2VySWQsXG4gICAgICBleGVyY2lzZUlkXG4gICAgfSxcbiAgICBvcmRlckJ5OiB7XG4gICAgICB0cmFpbmluZ1ZvbHVtZTogJ2Rlc2MnXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIHRyYWluaW5nVm9sdW1lOiB0cnVlXG4gICAgfVxuICB9KTtcblxuICBpZiAoIXByZXZpb3VzX2Jlc3QgfHwgIXByZXZpb3VzX2Jlc3QudHJhaW5pbmdWb2x1bWUpIHtcbiAgICAvLyBGaXJzdCB0aW1lIGRvaW5nIHRoaXMgZXhlcmNpc2UgLSBpdCdzIGEgdm9sdW1lIFBSIVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gSXMgY3VycmVudCB2b2x1bWUgaGlnaGVyIHRoYW4gcHJldmlvdXMgYmVzdD9cbiAgcmV0dXJuIHZvbHVtZSA+IHByZXZpb3VzX2Jlc3QudHJhaW5pbmdWb2x1bWU7XG59XG4iXSwibmFtZXMiOlsiY3J5cHRvIiwicHJpc21hIiwiY2FsY3VsYXRlQXZlcmFnZVdlaWdodCIsImNhbGN1bGF0ZVRyYWluaW5nVm9sdW1lIiwiZ2VuZXJhdGVPcmRlciIsImdldF9leGVyY2lzZV9yZWNvbW1lbmRhdGlvbnMiLCJnZXRVc2VyV29ya291dHNVbmlmaWVkIiwidXNlcklkIiwib3B0aW9ucyIsImZpbHRlcnMiLCJzb3J0IiwiZmllbGQiLCJkaXJlY3Rpb24iLCJwYWdpbmF0aW9uIiwiaW5jbHVkZVRlYW1Xb3Jrb3V0cyIsInBhZ2UiLCJsaW1pdCIsIm9mZnNldCIsIndoZXJlIiwiZGF0ZVJhbmdlIiwiZGF0ZSIsImd0ZSIsInN0YXJ0IiwibHRlIiwiZW5kIiwiZXhlcmNpc2VzIiwibGVuZ3RoIiwiZXhlcmNpc2VJZCIsImluIiwic2V0VHlwZXMiLCJzZXRUeXBlIiwiY29hY2hJZCIsImlzVGVhbVdvcmtvdXQiLCJ0b3RhbCIsIndvcmtvdXRfbG9nX2VudHJpZXMiLCJjb3VudCIsImVudHJpZXMiLCJmaW5kTWFueSIsImluY2x1ZGUiLCJ1c2Vyc193b3Jrb3V0X2xvZ19lbnRyaWVzX3VzZXJJZFRvdXNlcnMiLCJzZWxlY3QiLCJpZCIsIm5hbWUiLCJyb2xlIiwidXNlcnNfd29ya291dF9sb2dfZW50cmllc19jb2FjaElkVG91c2VycyIsIm9yZGVyQnkiLCJza2lwIiwidGFrZSIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsIm1hcHBlZEVudHJpZXMiLCJtYXAiLCJlbnRyeSIsImV4ZXJjaXNlIiwidXNlciIsImNvYWNoIiwiaGFzTW9yZSIsImdldFdvcmtvdXRMb2dFbnRyaWVzIiwiZ2V0V29ya291dExvZ0VudHJ5IiwiZmluZEZpcnN0IiwiY3JlYXRlV29ya291dExvZ0VudHJ5IiwiZGF0YSIsImF2ZXJhZ2VXZWlnaHQiLCJ3ZWlnaHQiLCJ0cmFpbmluZ1ZvbHVtZSIsInJlcHMiLCJ1bml0IiwiaXNfd2VpZ2h0X3ByIiwiY2hlY2tfcGVyc29uYWxfcmVjb3JkIiwiaXNfdm9sdW1lX3ByIiwiY2hlY2tfdm9sdW1lX3JlY29yZCIsImlzX3BlcnNvbmFsX3JlY29yZCIsImNvbnRleHQiLCJjdXJyZW50U2V0VHlwZSIsImN1cnJlbnRHcm91cE51bWJlciIsInNldE51bWJlciIsImN1cnJlbnRTdWJPcmRlciIsInRvdGFsRW50cmllcyIsIm9yZGVyIiwiJHRyYW5zYWN0aW9uIiwidHgiLCJjcmVhdGUiLCJyYW5kb21VVUlEIiwiRGF0ZSIsImludGVuc2l0eSIsInVuZGVmaW5lZCIsImludGVuc2l0eVR5cGUiLCJ0ZW1wbyIsInJlc3RTZWNvbmRzIiwicGVyc29uYWxSZWNvcmQiLCJ1c2VyQ29tbWVudHMiLCJjb2FjaEZlZWRiYWNrIiwidXBkYXRlZEF0IiwidXBkYXRlIiwidXNhZ2VDb3VudCIsImluY3JlbWVudCIsImxhc3RVc2VkIiwidXBkYXRlV29ya291dExvZ0VudHJ5IiwiZXhpc3RpbmciLCJuZXdXZWlnaHQiLCJuZXdSZXBzIiwidXBkYXRlZCIsImRlbGV0ZVdvcmtvdXRMb2dFbnRyeSIsInJlc3VsdCIsImRlbGV0ZU1hbnkiLCJnZXRXb3Jrb3V0U3RhdHMiLCJ0b3RhbFdvcmtvdXRzIiwiU2V0IiwiZSIsInRvRGF0ZVN0cmluZyIsInNpemUiLCJ0b3RhbFZvbHVtZSIsInJlZHVjZSIsInN1bSIsInRvdGFsU2V0cyIsInRvdGFsUmVwcyIsInNlc3Npb25zIiwid29ya291dF9zZXNzaW9ucyIsImR1cmF0aW9uIiwiYXZlcmFnZVdvcmtvdXREdXJhdGlvbiIsInMiLCJleGVyY2lzZUNvdW50cyIsImFjYyIsImtleSIsIm1vc3RVc2VkRXhlcmNpc2VzIiwiT2JqZWN0IiwiZmluZCIsImEiLCJiIiwic2xpY2UiLCJ2b2x1bWVCeU11c2NsZUdyb3VwIiwibXVzY2xlR3JvdXBzIiwiZm9yRWFjaCIsIm11c2NsZUdyb3VwIiwidm9sdW1lIiwiZ2V0RXhlcmNpc2VzIiwiY2F0ZWdvcnkiLCJoYXNTb21lIiwiZXF1aXBtZW50IiwiZGlmZmljdWx0eSIsImlzQWN0aXZlIiwic2VhcmNoIiwiY29udGFpbnMiLCJtb2RlIiwiZ2V0RXhlcmNpc2UiLCJmaW5kVW5pcXVlIiwiY3JlYXRlRXhlcmNpc2UiLCJpbnN0cnVjdGlvbnMiLCJ2aWRlb1VybCIsImltYWdlVXJsIiwic2FmZXR5Tm90ZXMiLCJmb3JtQ3VlcyIsImNvbW1vbk1pc3Rha2VzIiwiY3JlYXRlZEJ5IiwiaXNDdXN0b20iLCJ1cGRhdGVFeGVyY2lzZSIsImRlbGV0ZUV4ZXJjaXNlIiwiZ2V0RXhlcmNpc2VWYXJpYXRpb25zIiwiZXhlcmNpc2VfdmFyaWF0aW9ucyIsImdldEV4ZXJjaXNlVmFyaWF0aW9uQnlJZCIsImNyZWF0ZUV4ZXJjaXNlVmFyaWF0aW9uIiwiZGVzY3JpcHRpb24iLCJ1cGRhdGVFeGVyY2lzZVZhcmlhdGlvbiIsImRlbGV0ZUV4ZXJjaXNlVmFyaWF0aW9uIiwiZ2V0V29ya291dFNlc3Npb25zIiwiaXNDb21wbGV0ZSIsImlzVGVtcGxhdGUiLCJ1c2Vyc193b3Jrb3V0X3Nlc3Npb25zX3VzZXJJZFRvdXNlcnMiLCJ1c2Vyc193b3Jrb3V0X3Nlc3Npb25zX2NvYWNoSWRUb3VzZXJzIiwibWFwcGVkU2Vzc2lvbnMiLCJzZXNzaW9uIiwiZ2V0V29ya291dFNlc3Npb24iLCJjcmVhdGVXb3Jrb3V0U2Vzc2lvbiIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJmbG9vciIsImdldFRpbWUiLCJ0aXRsZSIsIm5vdGVzIiwibG9jYXRpb24iLCJ1cGRhdGVXb3Jrb3V0U2Vzc2lvbiIsImNvbXBsZXRlV29ya291dFNlc3Npb24iLCJlbmRUaW1lVG9Vc2UiLCJkZWxldGVXb3Jrb3V0U2Vzc2lvbiIsImdldENsaWVudFdvcmtvdXRMb2dzIiwiY2xpZW50SWQiLCJhZGRDb2FjaEZlZWRiYWNrIiwiZW50cnlJZCIsImZlZWRiYWNrIiwiZ2V0RXhlcmNpc2VDYXRlZ29yaWVzIiwiZ2V0TXVzY2xlR3JvdXBzIiwiYWxsTXVzY2xlR3JvdXBzIiwiZmxhdE1hcCIsImdldEVxdWlwbWVudFR5cGVzIiwiYWxsRXF1aXBtZW50Iiwic2VhcmNoRXhlcmNpc2VzIiwicXVlcnkiLCJnZXRXb3Jrb3V0VGVtcGxhdGVzIiwicHVibGljT25seSIsImlzUHVibGljIiwibWluUmF0aW5nIiwicmF0aW5nIiwicHJpY2VSYW5nZSIsIm1pbiIsIm1heCIsInNwbGl0IiwiTnVtYmVyIiwicHJpY2UiLCJ3b3Jrb3V0X3RlbXBsYXRlcyIsInVzZXJzIiwidHJhaW5lclZlcmlmaWVkIiwid29ya291dF90ZW1wbGF0ZV9leGVyY2lzZXMiLCJfY291bnQiLCJ0ZW1wbGF0ZV9yYXRpbmdzIiwiZ2V0V29ya291dFRlbXBsYXRlQnlJZCIsImNyZWF0ZWRBdCIsImNyZWF0ZVdvcmtvdXRUZW1wbGF0ZSIsImN1cnJlbmN5IiwidGFncyIsImNvbm5lY3QiLCJzZXRzIiwicmVzdFRpbWUiLCJpc1N1cGVyc2V0Iiwic3VwZXJzZXRHcm91cCIsInVwZGF0ZVdvcmtvdXRUZW1wbGF0ZSIsImRlbGV0ZVdvcmtvdXRUZW1wbGF0ZSIsImdldE15VGVtcGxhdGVzIiwic2VhcmNoV29ya291dFRlbXBsYXRlcyIsIk9SIiwiaGFzIiwicHVyY2hhc2VUZW1wbGF0ZSIsInRlbXBsYXRlSWQiLCJ0ZW1wbGF0ZSIsIkVycm9yIiwicHVyY2hhc2UiLCJ0ZW1wbGF0ZV9wdXJjaGFzZXMiLCJwdXJjaGFzZUNvdW50IiwicmF0ZVRlbXBsYXRlIiwidXBzZXJ0IiwidXNlcklkX3RlbXBsYXRlSWQiLCJyZXZpZXciLCJyYXRpbmdzIiwiYXZnUmF0aW5nIiwiciIsInJhdGluZ0NvdW50IiwiZ2V0VHJhaW5pbmdQcm9ncmFtcyIsInByb2dyYW1fdGVtcGxhdGVzIiwicHJvZ3JhbV93ZWVrcyIsIndlZWtOdW1iZXIiLCJwcm9ncmFtX3JhdGluZ3MiLCJwcm9ncmFtX3N1YnNjcmlwdGlvbnMiLCJnZXRUcmFpbmluZ1Byb2dyYW1CeUlkIiwiY3JlYXRlVHJhaW5pbmdQcm9ncmFtIiwid2Vla3MiLCJ3ZWVrIiwid29ya291dHMiLCJ1cGRhdGVUcmFpbmluZ1Byb2dyYW0iLCJkZWxldGVUcmFpbmluZ1Byb2dyYW0iLCJnZXRNeVByb2dyYW1zIiwic2VhcmNoVHJhaW5pbmdQcm9ncmFtcyIsImdldFVzZXJQcm9ncmFtU3Vic2NyaXB0aW9ucyIsInN0YXJ0RGF0ZSIsInB1cmNoYXNlUHJvZ3JhbSIsInByb2dyYW1JZCIsInByb2dyYW0iLCJwcm9ncmFtX3B1cmNoYXNlcyIsInN1YnNjcmliZVRvUHJvZ3JhbSIsImN1cnJlbnRXZWVrIiwiY3VycmVudERheSIsInJhdGVQcm9ncmFtIiwidXNlcklkX3Byb2dyYW1JZCIsInVwZGF0ZVByb2dyYW1Qcm9ncmVzcyIsInByb2dyZXNzRGF0YSIsImdldFdvcmtvdXRBbmFseXRpY3MiLCJlbmREYXRlIiwid29ya291dF9hbmFseXRpY3MiLCJnZXRQcm9ncmVzc01ldHJpY3MiLCJtZXRyaWNUeXBlIiwicmVjb3JkZWRBdCIsInByb2dyZXNzX21ldHJpY3MiLCJnZXRQZXJzb25hbFJlY29yZHMiLCJwZXJzb25hbF9yZWNvcmRzIiwiYWNoaWV2ZWRBdCIsImFkZFByb2dyZXNzTWV0cmljIiwidmFsdWUiLCJib2R5UGFydCIsImFkZFBlcnNvbmFsUmVjb3JkIiwicmVjb3JkVHlwZSIsImdlbmVyYXRlV29ya291dEFuYWx5dGljcyIsInNldERhdGUiLCJnZXREYXRlIiwid29ya291dExvZ3MiLCJkYWlseVN0YXRzIiwibG9nIiwiZGF0ZUtleSIsInRvSVNPU3RyaW5nIiwibWciLCJhZGQiLCJhbmFseXRpY3NQcm9taXNlcyIsInN0YXRzIiwidG9wTXVzY2xlR3JvdXAiLCJBcnJheSIsImZyb20iLCJ1c2VySWRfZGF0ZSIsIlByb21pc2UiLCJhbGwiLCJnZXRNYXJrZXRwbGFjZVRlbXBsYXRlcyIsImdldE1hcmtldHBsYWNlUHJvZ3JhbXMiLCJnZXRGZWF0dXJlZENvbnRlbnQiLCJ0ZW1wbGF0ZXMiLCJwcm9ncmFtcyIsImdldFRvcFJhdGVkQ29udGVudCIsImdldFBvcHVsYXJDb250ZW50IiwiZ2V0UmVjb21tZW5kZWRDb250ZW50IiwiZml0bmVzc0dvYWxzIiwiZXhwZXJpZW5jZUxldmVsIiwicHJlZmVycmVkV29ya291dFR5cGVzIiwidXNlckNhdGVnb3JpZXMiLCJwIiwiZmlsdGVyIiwiQm9vbGVhbiIsInVzZXJUYWdzIiwibGlua19zZXNzaW9uX3RvX2Fzc2Vzc21lbnQiLCJzZXNzaW9uX2lkIiwiYXNzZXNzbWVudF9pZCIsImFzc2Vzc21lbnQiLCJhc3Nlc3NtZW50cyIsImFzc2Vzc21lbnRfZGF0YSIsImZpdG5lc3NfbGV2ZWwiLCJkZXRlcm1pbmVfZml0bmVzc19sZXZlbCIsInByaW1hcnlfZ29hbCIsInByaW1hcnlHb2FsIiwibW92ZW1lbnRfbGltaXRhdGlvbnMiLCJsaW1pdGF0aW9ucyIsImV4cGVyaWVuY2VfeWVhcnMiLCJleHBlcmllbmNlWWVhcnMiLCJhc3Nlc3NtZW50SWQiLCJmaXRuZXNzTGV2ZWwiLCJzcXVhdF9zY29yZSIsInNxdWF0U2NvcmUiLCJwdXNoX3Njb3JlIiwicHVzaFNjb3JlIiwicHVsbF9zY29yZSIsInB1bGxTY29yZSIsImF2ZXJhZ2Vfc2NvcmUiLCJnZXRfYXNzZXNzbWVudF9iYXNlZF9yZWNvbW1lbmRhdGlvbnMiLCJ1c2VyX2lkIiwibGF0ZXN0X2Fzc2Vzc21lbnQiLCJleGVyY2lzZV9yZWNvbW1lbmRhdGlvbnMiLCJyZWNvbW1lbmRlZF92b2x1bWUiLCJjYWxjdWxhdGVfcmVjb21tZW5kZWRfdm9sdW1lIiwicmVjb21tZW5kZWRfZnJlcXVlbmN5IiwiY2FsY3VsYXRlX3JlY29tbWVuZGVkX2ZyZXF1ZW5jeSIsInRyYWluaW5nX3BoYXNlIiwicHJvZ3Jlc3Npb25fbGV2ZWwiLCJjb2FjaGluZ19jdWVzIiwidm9sdW1lX21hcCIsIkJFR0lOTkVSIiwiSU5URVJNRURJQVRFIiwiQURWQU5DRUQiLCJmcmVxdWVuY3lfbWFwIiwicHJlcGFyZV9haV90cmFpbmluZ19kYXRhIiwibmluZXR5X2RheXNfYWdvIiwidG90YWxfdm9sdW1lIiwiYXZlcmFnZV92b2x1bWUiLCJleGVyY2lzZV9mcmVxdWVuY3kiLCJNYXAiLCJzZXQiLCJnZXQiLCJmYXZvdXJpdGVfZXhlcmNpc2VzIiwid2Vla3NfaW5fcGVyaW9kIiwiY29uc2lzdGVuY3lfc2NvcmUiLCJ1c2VyX3Byb2ZpbGUiLCJ3b3Jrb3V0X2hpc3RvcnkiLCJ0b3RhbF9zZXNzaW9ucyIsInBlcmZvcm1hbmNlX21ldHJpY3MiLCJzdHJlbmd0aF9wcm9ncmVzc2lvbiIsImNhbGN1bGF0ZV9zdHJlbmd0aF9wcm9ncmVzc2lvbiIsInZvbHVtZV9wcm9ncmVzc2lvbiIsImNhbGN1bGF0ZV92b2x1bWVfcHJvZ3Jlc3Npb24iLCJ0ZWNobmlxdWVfc2NvcmVzIiwiZm9ybVF1YWxpdHkiLCJwcmVmZXJlbmNlcyIsInByZWZlcnJlZF9zZXRfdHlwZXMiLCJjYWxjdWxhdGVfcHJlZmVycmVkX3NldF90eXBlcyIsInByZWZlcnJlZF9yZXBfcmFuZ2VzIiwiY2FsY3VsYXRlX3ByZWZlcnJlZF9yZXBfcmFuZ2UiLCJwcmVmZXJyZWRfcmVzdF9kdXJhdGlvbnMiLCJjYWxjdWxhdGVfcHJlZmVycmVkX3Jlc3RfZHVyYXRpb25zIiwiZWFybHlfZW50cmllcyIsInJlY2VudF9lbnRyaWVzIiwiZWFybHlfYXZnX3ZvbHVtZSIsInJlY2VudF9hdmdfdm9sdW1lIiwiZmlyc3Rfc2Vzc2lvbiIsImxhc3Rfc2Vzc2lvbiIsImZpcnN0X3ZvbHVtZSIsImxhc3Rfdm9sdW1lIiwic2V0X3R5cGVfY291bnRzIiwidHlwZSIsInBlcmNlbnRpbGVfMjUiLCJwZXJjZW50aWxlXzc1IiwicmVzdF9kdXJhdGlvbnMiLCJhdmciLCJjYWxjdWxhdGVfc2Vzc2lvbl9leHBlcmllbmNlX3BvaW50cyIsImJyZWFrZG93biIsImJhc2VfcG9pbnRzIiwidm9sdW1lX2JvbnVzIiwidGVjaG5pcXVlX2JvbnVzIiwiY29uc2lzdGVuY3lfYm9udXMiLCJhY2hpZXZlbWVudF9ib251cyIsImVudHJpZXNfd2l0aF9mb3JtIiwiYXZnX2Zvcm0iLCJzdHJlYWtfYm9udXMiLCJjYWxjdWxhdGVfY29uc2lzdGVuY3lfc3RyZWFrX2JvbnVzIiwicHJfY291bnQiLCJ2b2x1bWVSZWNvcmQiLCJzZXNzaW9uX2RhdGUiLCJzZXZlbl9kYXlzX2FnbyIsInJlY2VudF9zZXNzaW9ucyIsImNoZWNrX2FuZF9hd2FyZF9hY2hpZXZlbWVudHMiLCJhd2FyZGVkX2FjaGlldmVtZW50X2lkcyIsImFsbF9hY2hpZXZlbWVudHMiLCJhY2hpZXZlbWVudHMiLCJleGlzdGluZ19hY2hpZXZlbWVudHMiLCJ1c2VyX2FjaGlldmVtZW50cyIsImFjaGlldmVtZW50SWQiLCJleGlzdGluZ19pZHMiLCJhY2hpZXZlbWVudCIsImNyaXRlcmlhIiwibWVldHNfY3JpdGVyaWEiLCJjaGVja19hY2hpZXZlbWVudF9jcml0ZXJpYSIsInNlc3Npb25JZCIsInB1c2giLCJjaGVja192b2x1bWVfYWNoaWV2ZW1lbnQiLCJjaGVja19jb25zaXN0ZW5jeV9hY2hpZXZlbWVudCIsImNoZWNrX3N0cmVuZ3RoX2FjaGlldmVtZW50IiwiY2hlY2tfdGVjaG5pcXVlX2FjaGlldmVtZW50IiwiY2hlY2tfbWlsZXN0b25lX2FjaGlldmVtZW50IiwiX3VzZXJfaWQiLCJ0aHJlc2hvbGQiLCJ0aGlydHlfZGF5c19hZ28iLCJzZXNzaW9uX2NvdW50IiwiZmluYWxpc2Vfc2Vzc2lvbl93aXRoX2dhbWlmaWNhdGlvbiIsInhwX2JyZWFrZG93biIsIm5ld19hY2hpZXZlbWVudHMiLCJhY2hpZXZlbWVudF94cCIsImV4cGVyaWVuY2VQb2ludHMiLCJhY2hpZXZlbWVudHNFYXJuZWQiLCJleHBlcmllbmNlX3BvaW50cyIsImFjaGlldmVtZW50c19lYXJuZWQiLCJwcmV2aW91c19iZXN0IiwicHJldmlvdXNfd2VpZ2h0IiwicGFyc2VGbG9hdCIsInJlcGxhY2UiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/database/workout-queries.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/index.ts":
/*!***************************!*\
  !*** ./src/core/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiResponseSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.ApiResponseSchema),\n/* harmony export */   AuthenticationError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.AuthenticationError),\n/* harmony export */   BaseAppError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.BaseAppError),\n/* harmony export */   CommentCreationSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.CommentCreationSchema),\n/* harmony export */   CommunityCreationSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.CommunityCreationSchema),\n/* harmony export */   DirectMessageSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.DirectMessageSchema),\n/* harmony export */   ErrorCode: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.ErrorCode),\n/* harmony export */   ExternalServiceError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.ExternalServiceError),\n/* harmony export */   FileUploadSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.FileUploadSchema),\n/* harmony export */   ModerationAction: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.ModerationAction),\n/* harmony export */   ModerationActionSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.ModerationActionSchema),\n/* harmony export */   ModerationError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.ModerationError),\n/* harmony export */   ModerationSource: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.ModerationSource),\n/* harmony export */   MollieApiError: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.MollieApiError),\n/* harmony export */   NotFoundError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.NotFoundError),\n/* harmony export */   PaginationSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.PaginationSchema),\n/* harmony export */   PostCreationSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.PostCreationSchema),\n/* harmony export */   RateLimitError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.RateLimitError),\n/* harmony export */   ReportSubmissionSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.ReportSubmissionSchema),\n/* harmony export */   SafetyViolationError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.SafetyViolationError),\n/* harmony export */   SearchSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.SearchSchema),\n/* harmony export */   SocketServer: () => (/* reexport safe */ _socket_server__WEBPACK_IMPORTED_MODULE_3__.SocketServer),\n/* harmony export */   TrainerProfileSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.TrainerProfileSchema),\n/* harmony export */   UserProfileUpdateSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.UserProfileUpdateSchema),\n/* harmony export */   UserRegistrationSchema: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.UserRegistrationSchema),\n/* harmony export */   UserRole: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.UserRole),\n/* harmony export */   UserStatus: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.UserStatus),\n/* harmony export */   ValidationError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.ValidationError),\n/* harmony export */   ViolationType: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.ViolationType),\n/* harmony export */   addClientToTrainer: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.addClientToTrainer),\n/* harmony export */   addCoachFeedback: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.addCoachFeedback),\n/* harmony export */   addCoachFeedbackRequestSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.addCoachFeedbackRequestSchema),\n/* harmony export */   addPersonalRecord: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.addPersonalRecord),\n/* harmony export */   addPersonalRecordSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.addPersonalRecordSchema),\n/* harmony export */   addProgressMetric: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.addProgressMetric),\n/* harmony export */   addProgressMetricSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.addProgressMetricSchema),\n/* harmony export */   approveTeamMembership: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.approveTeamMembership),\n/* harmony export */   authOptions: () => (/* reexport safe */ _auth_config__WEBPACK_IMPORTED_MODULE_1__.authOptions),\n/* harmony export */   calculate_session_experience_points: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.calculate_session_experience_points),\n/* harmony export */   cancelPayment: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.cancelPayment),\n/* harmony export */   cancelSubscription: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.cancelSubscription),\n/* harmony export */   checkAppointmentConflict: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.checkAppointmentConflict),\n/* harmony export */   check_and_award_achievements: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.check_and_award_achievements),\n/* harmony export */   completeWorkoutSession: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.completeWorkoutSession),\n/* harmony export */   createAppointment: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createAppointment),\n/* harmony export */   createChallenge: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createChallenge),\n/* harmony export */   createCustomer: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createCustomer),\n/* harmony export */   createErrorResponse: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.createErrorResponse),\n/* harmony export */   createExercise: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createExercise),\n/* harmony export */   createExerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createExerciseSchema),\n/* harmony export */   createExerciseVariation: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createExerciseVariation),\n/* harmony export */   createExerciseVariationSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createExerciseVariationSchema),\n/* harmony export */   createModerationLog: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createModerationLog),\n/* harmony export */   createMollieClient: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createMollieClient),\n/* harmony export */   createMollieCustomer: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createMollieCustomer),\n/* harmony export */   createMolliePayment: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createMolliePayment),\n/* harmony export */   createOrUpdateTrainerProfile: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createOrUpdateTrainerProfile),\n/* harmony export */   createPackagePayment: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createPackagePayment),\n/* harmony export */   createPayment: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createPayment),\n/* harmony export */   createPremiumTeam: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createPremiumTeam),\n/* harmony export */   createProgressReport: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createProgressReport),\n/* harmony export */   createSafetyReport: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createSafetyReport),\n/* harmony export */   createSessionPayment: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createSessionPayment),\n/* harmony export */   createSubscription: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.createSubscription),\n/* harmony export */   createSuccessResponse: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.createSuccessResponse),\n/* harmony export */   createTrainingProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createTrainingProgram),\n/* harmony export */   createTrainingProgramSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createTrainingProgramSchema),\n/* harmony export */   createUserViolation: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createUserViolation),\n/* harmony export */   createWorkoutEntriesRequestSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createWorkoutEntriesRequestSchema),\n/* harmony export */   createWorkoutLogEntry: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createWorkoutLogEntry),\n/* harmony export */   createWorkoutLogEntrySchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createWorkoutLogEntrySchema),\n/* harmony export */   createWorkoutSession: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createWorkoutSession),\n/* harmony export */   createWorkoutSessionSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createWorkoutSessionSchema),\n/* harmony export */   createWorkoutTemplate: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.createWorkoutTemplate),\n/* harmony export */   createWorkoutTemplateSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.createWorkoutTemplateSchema),\n/* harmony export */   dateRangeSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.dateRangeSchema),\n/* harmony export */   dateStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.dateStringSchema),\n/* harmony export */   deleteExercise: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteExercise),\n/* harmony export */   deleteExerciseDoc: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.deleteExerciseDoc),\n/* harmony export */   deleteExerciseVariation: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteExerciseVariation),\n/* harmony export */   deleteTrainingProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteTrainingProgram),\n/* harmony export */   deleteWorkoutEntryRequestSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.deleteWorkoutEntryRequestSchema),\n/* harmony export */   deleteWorkoutLogEntry: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteWorkoutLogEntry),\n/* harmony export */   deleteWorkoutSession: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteWorkoutSession),\n/* harmony export */   deleteWorkoutTemplate: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.deleteWorkoutTemplate),\n/* harmony export */   durationStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.durationStringSchema),\n/* harmony export */   enhancedCreateExerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.enhancedCreateExerciseSchema),\n/* harmony export */   enhancedUpdateExerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.enhancedUpdateExerciseSchema),\n/* harmony export */   exchangeCodeForToken: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.exchangeCodeForToken),\n/* harmony export */   exerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.exerciseSchema),\n/* harmony export */   exerciseSearchOptionsSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.exerciseSearchOptionsSchema),\n/* harmony export */   finalise_session_with_gamification: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.finalise_session_with_gamification),\n/* harmony export */   formatAmount: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.formatAmount),\n/* harmony export */   formatWorkoutCaption: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.formatWorkoutCaption),\n/* harmony export */   generateAuthUrl: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.generateAuthUrl),\n/* harmony export */   generateSafetyReport: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.generateSafetyReport),\n/* harmony export */   generateWorkoutAnalytics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.generateWorkoutAnalytics),\n/* harmony export */   getAvailablePlatforms: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getAvailablePlatforms),\n/* harmony export */   getChallengeLeaderboard: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getChallengeLeaderboard),\n/* harmony export */   getChallenges: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getChallenges),\n/* harmony export */   getClientWorkoutLogs: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getClientWorkoutLogs),\n/* harmony export */   getCustomer: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getCustomer),\n/* harmony export */   getEquipmentTypes: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getEquipmentTypes),\n/* harmony export */   getExercise: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getExercise),\n/* harmony export */   getExerciseCategories: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getExerciseCategories),\n/* harmony export */   getExerciseVariationById: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getExerciseVariationById),\n/* harmony export */   getExerciseVariations: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getExerciseVariations),\n/* harmony export */   getExercises: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getExercises),\n/* harmony export */   getFeaturedContent: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getFeaturedContent),\n/* harmony export */   getFirestore: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getFirestore),\n/* harmony export */   getFirestoreExercise: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getFirestoreExercise),\n/* harmony export */   getFirestoreUserByEmail: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getFirestoreUserByEmail),\n/* harmony export */   getFlaggedUsers: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getFlaggedUsers),\n/* harmony export */   getFriendlyErrorMessage: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.getFriendlyErrorMessage),\n/* harmony export */   getMarketplacePrograms: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getMarketplacePrograms),\n/* harmony export */   getMarketplaceTemplates: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getMarketplaceTemplates),\n/* harmony export */   getModerationLogs: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getModerationLogs),\n/* harmony export */   getModerationStatistics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getModerationStatistics),\n/* harmony export */   getMollieClient: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getMollieClient),\n/* harmony export */   getMuscleGroups: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getMuscleGroups),\n/* harmony export */   getMyPrograms: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getMyPrograms),\n/* harmony export */   getMyTemplates: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getMyTemplates),\n/* harmony export */   getPayment: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getPayment),\n/* harmony export */   getPaymentByMollieId: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getPaymentByMollieId),\n/* harmony export */   getPendingSafetyReports: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getPendingSafetyReports),\n/* harmony export */   getPersonalRecords: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getPersonalRecords),\n/* harmony export */   getPlatformCapabilities: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.getPlatformCapabilities),\n/* harmony export */   getPopularContent: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getPopularContent),\n/* harmony export */   getPrivacyControlledLeaderboard: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getPrivacyControlledLeaderboard),\n/* harmony export */   getProgressMetrics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getProgressMetrics),\n/* harmony export */   getRecommendedContent: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getRecommendedContent),\n/* harmony export */   getSafetyAnalytics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getSafetyAnalytics),\n/* harmony export */   getSocketServer: () => (/* reexport safe */ _socket_server__WEBPACK_IMPORTED_MODULE_3__.getSocketServer),\n/* harmony export */   getTeamAnalytics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTeamAnalytics),\n/* harmony export */   getTeamMembers: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTeamMembers),\n/* harmony export */   getTeamMembership: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTeamMembership),\n/* harmony export */   getTeams: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTeams),\n/* harmony export */   getTopRatedContent: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTopRatedContent),\n/* harmony export */   getTrainerAppointments: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerAppointments),\n/* harmony export */   getTrainerAvailability: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerAvailability),\n/* harmony export */   getTrainerClients: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerClients),\n/* harmony export */   getTrainerEarnings: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerEarnings),\n/* harmony export */   getTrainerPaymentAnalytics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerPaymentAnalytics),\n/* harmony export */   getTrainerProfileWithStats: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerProfileWithStats),\n/* harmony export */   getTrainerProgressReports: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainerProgressReports),\n/* harmony export */   getTrainingProgramById: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainingProgramById),\n/* harmony export */   getTrainingPrograms: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getTrainingPrograms),\n/* harmony export */   getUserPrivacySettings: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserPrivacySettings),\n/* harmony export */   getUserProgramSubscriptions: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserProgramSubscriptions),\n/* harmony export */   getUserSafetyProfile: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserSafetyProfile),\n/* harmony export */   getUserSafetySettings: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserSafetySettings),\n/* harmony export */   getUserViolationHistory: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserViolationHistory),\n/* harmony export */   getUserWorkoutsUnified: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getUserWorkoutsUnified),\n/* harmony export */   getWorkoutAnalytics: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutAnalytics),\n/* harmony export */   getWorkoutLogEntries: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutLogEntries),\n/* harmony export */   getWorkoutLogEntry: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutLogEntry),\n/* harmony export */   getWorkoutSession: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutSession),\n/* harmony export */   getWorkoutSessions: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutSessions),\n/* harmony export */   getWorkoutStats: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutStats),\n/* harmony export */   getWorkoutTemplateById: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutTemplateById),\n/* harmony export */   getWorkoutTemplates: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.getWorkoutTemplates),\n/* harmony export */   get_assessment_based_recommendations: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.get_assessment_based_recommendations),\n/* harmony export */   initializeSocketServer: () => (/* reexport safe */ _socket_server__WEBPACK_IMPORTED_MODULE_3__.initializeSocketServer),\n/* harmony export */   intensityStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.intensityStringSchema),\n/* harmony export */   intensityTypeSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.intensityTypeSchema),\n/* harmony export */   isPaymentFailed: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.isPaymentFailed),\n/* harmony export */   isPaymentPending: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.isPaymentPending),\n/* harmony export */   isPaymentSuccessful: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.isPaymentSuccessful),\n/* harmony export */   isPlatformConfigured: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.isPlatformConfigured),\n/* harmony export */   joinChallenge: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.joinChallenge),\n/* harmony export */   joinPremiumTeam: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.joinPremiumTeam),\n/* harmony export */   leaveChallenge: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.leaveChallenge),\n/* harmony export */   leavePremiumTeam: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.leavePremiumTeam),\n/* harmony export */   link_session_to_assessment: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.link_session_to_assessment),\n/* harmony export */   logError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.logError),\n/* harmony export */   normalizeError: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.normalizeError),\n/* harmony export */   paginationSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.paginationSchema),\n/* harmony export */   parseAmount: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.parseAmount),\n/* harmony export */   prepare_ai_training_data: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.prepare_ai_training_data),\n/* harmony export */   prisma: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.prisma),\n/* harmony export */   processRefund: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.processRefund),\n/* harmony export */   processWebhook: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.processWebhook),\n/* harmony export */   programWeekSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.programWeekSchema),\n/* harmony export */   publishAccreditedProvider: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.publishAccreditedProvider),\n/* harmony export */   publishExercise: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.publishExercise),\n/* harmony export */   publishUserSummary: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.publishUserSummary),\n/* harmony export */   purchaseProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.purchaseProgram),\n/* harmony export */   purchaseTemplate: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.purchaseTemplate),\n/* harmony export */   rateProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.rateProgram),\n/* harmony export */   rateProgramSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.rateProgramSchema),\n/* harmony export */   rateTemplate: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.rateTemplate),\n/* harmony export */   rateTemplateSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.rateTemplateSchema),\n/* harmony export */   rescheduleAppointment: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.rescheduleAppointment),\n/* harmony export */   safeAsync: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.safeAsync),\n/* harmony export */   sanitizeTextInput: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.sanitizeTextInput),\n/* harmony export */   searchExercises: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.searchExercises),\n/* harmony export */   searchTrainingPrograms: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.searchTrainingPrograms),\n/* harmony export */   searchWorkoutTemplates: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.searchWorkoutTemplates),\n/* harmony export */   setTypeSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.setTypeSchema),\n/* harmony export */   shareProgressReport: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.shareProgressReport),\n/* harmony export */   shareToFacebook: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.shareToFacebook),\n/* harmony export */   shareToInstagram: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.shareToInstagram),\n/* harmony export */   shareToTikTok: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.shareToTikTok),\n/* harmony export */   shareToYouTube: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.shareToYouTube),\n/* harmony export */   subscribeToProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.subscribeToProgram),\n/* harmony export */   tempoStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.tempoStringSchema),\n/* harmony export */   timeStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.timeStringSchema),\n/* harmony export */   updateAppointmentStatus: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateAppointmentStatus),\n/* harmony export */   updateChallengeProgress: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateChallengeProgress),\n/* harmony export */   updateExercise: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateExercise),\n/* harmony export */   updateExerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateExerciseSchema),\n/* harmony export */   updateExerciseVariation: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateExerciseVariation),\n/* harmony export */   updateExerciseVariationSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateExerciseVariationSchema),\n/* harmony export */   updatePaymentFromMollie: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updatePaymentFromMollie),\n/* harmony export */   updateProgramProgress: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateProgramProgress),\n/* harmony export */   updateProgramProgressSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateProgramProgressSchema),\n/* harmony export */   updateSafetyReport: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateSafetyReport),\n/* harmony export */   updateTrainingProgram: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateTrainingProgram),\n/* harmony export */   updateTrainingProgramSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateTrainingProgramSchema),\n/* harmony export */   updateUserPrivacySettings: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateUserPrivacySettings),\n/* harmony export */   updateUserSafetySettings: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateUserSafetySettings),\n/* harmony export */   updateUserSafetyStatus: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateUserSafetyStatus),\n/* harmony export */   updateWorkoutEntryRequestSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateWorkoutEntryRequestSchema),\n/* harmony export */   updateWorkoutLogEntry: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateWorkoutLogEntry),\n/* harmony export */   updateWorkoutLogEntrySchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateWorkoutLogEntrySchema),\n/* harmony export */   updateWorkoutSession: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateWorkoutSession),\n/* harmony export */   updateWorkoutSessionSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateWorkoutSessionSchema),\n/* harmony export */   updateWorkoutTemplate: () => (/* reexport safe */ _database__WEBPACK_IMPORTED_MODULE_0__.updateWorkoutTemplate),\n/* harmony export */   updateWorkoutTemplateSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.updateWorkoutTemplateSchema),\n/* harmony export */   validateContentSafety: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.validateContentSafety),\n/* harmony export */   validateDateString: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.validateDateString),\n/* harmony export */   validateHashtags: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.validateHashtags),\n/* harmony export */   validateIntensityString: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.validateIntensityString),\n/* harmony export */   validateMentions: () => (/* reexport safe */ _utils_validation__WEBPACK_IMPORTED_MODULE_4__.validateMentions),\n/* harmony export */   validateTempoString: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.validateTempoString),\n/* harmony export */   validateTimeString: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.validateTimeString),\n/* harmony export */   validateWeightString: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.validateWeightString),\n/* harmony export */   verifyWebhookSignature: () => (/* reexport safe */ _integrations__WEBPACK_IMPORTED_MODULE_2__.verifyWebhookSignature),\n/* harmony export */   weightStringSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.weightStringSchema),\n/* harmony export */   weightUnitSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.weightUnitSchema),\n/* harmony export */   withErrorHandling: () => (/* reexport safe */ _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__.withErrorHandling),\n/* harmony export */   workoutFilterOptionsSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutFilterOptionsSchema),\n/* harmony export */   workoutLogEntryBaseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutLogEntryBaseSchema),\n/* harmony export */   workoutLogEntrySchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutLogEntrySchema),\n/* harmony export */   workoutSessionFilterOptionsSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutSessionFilterOptionsSchema),\n/* harmony export */   workoutSessionSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutSessionSchema),\n/* harmony export */   workoutSortOptionsSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutSortOptionsSchema),\n/* harmony export */   workoutStatsRequestSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutStatsRequestSchema),\n/* harmony export */   workoutStatsResponseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutStatsResponseSchema),\n/* harmony export */   workoutTemplateExerciseSchema: () => (/* reexport safe */ _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__.workoutTemplateExerciseSchema)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _auth_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth/config */ \"(rsc)/./src/core/auth/config.ts\");\n/* harmony import */ var _integrations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./integrations */ \"(rsc)/./src/core/integrations/index.ts\");\n/* harmony import */ var _socket_server__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./socket/server */ \"(rsc)/./src/core/socket/server.ts\");\n/* harmony import */ var _utils_validation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/validation */ \"(rsc)/./src/core/utils/validation.ts\");\n/* harmony import */ var _utils_error_handling__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/error-handling */ \"(rsc)/./src/core/utils/error-handling.ts\");\n/* harmony import */ var _utils_workout_validation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/workout-validation */ \"(rsc)/./src/core/utils/workout-validation.ts\");\n/**\n * Core Infrastructure Exports\n * Main entry point for all framework-level infrastructure code\n */ // Database functionality - will be available via database/index.ts\n\n// Authentication configuration\n\n// External integrations - will be available via integrations/index.ts\n\n// Socket server\n\n// Utilities - will be available via utils/index.ts\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVELG1FQUFtRTtBQUN4QztBQUUzQiwrQkFBK0I7QUFDYTtBQUc1QyxzRUFBc0U7QUFDdkM7QUFFL0IsZ0JBQWdCO0FBQ2dCO0FBRWhDLG1EQUFtRDtBQW1CdkI7QUFDVztBQUNJIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2NvcmUvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3JlIEluZnJhc3RydWN0dXJlIEV4cG9ydHNcbiAqIE1haW4gZW50cnkgcG9pbnQgZm9yIGFsbCBmcmFtZXdvcmstbGV2ZWwgaW5mcmFzdHJ1Y3R1cmUgY29kZVxuICovXG5cbi8vIERhdGFiYXNlIGZ1bmN0aW9uYWxpdHkgLSB3aWxsIGJlIGF2YWlsYWJsZSB2aWEgZGF0YWJhc2UvaW5kZXgudHNcbmV4cG9ydCAqIGZyb20gJy4vZGF0YWJhc2UnO1xuXG4vLyBBdXRoZW50aWNhdGlvbiBjb25maWd1cmF0aW9uXG5leHBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4vYXV0aC9jb25maWcnO1xuZXhwb3J0IHR5cGUgeyBTYWZlVXNlciB9IGZyb20gJy4vYXV0aC9wcm92aWRlcnMnO1xuXG4vLyBFeHRlcm5hbCBpbnRlZ3JhdGlvbnMgLSB3aWxsIGJlIGF2YWlsYWJsZSB2aWEgaW50ZWdyYXRpb25zL2luZGV4LnRzXG5leHBvcnQgKiBmcm9tICcuL2ludGVncmF0aW9ucyc7XG5cbi8vIFNvY2tldCBzZXJ2ZXJcbmV4cG9ydCAqIGZyb20gJy4vc29ja2V0L3NlcnZlcic7XG5cbi8vIFV0aWxpdGllcyAtIHdpbGwgYmUgYXZhaWxhYmxlIHZpYSB1dGlscy9pbmRleC50c1xuZXhwb3J0IHtcbiAgVXNlclJlZ2lzdHJhdGlvblNjaGVtYSxcbiAgVXNlclByb2ZpbGVVcGRhdGVTY2hlbWEsXG4gIFRyYWluZXJQcm9maWxlU2NoZW1hLFxuICBQb3N0Q3JlYXRpb25TY2hlbWEsXG4gIENvbW1lbnRDcmVhdGlvblNjaGVtYSxcbiAgRGlyZWN0TWVzc2FnZVNjaGVtYSxcbiAgQ29tbXVuaXR5Q3JlYXRpb25TY2hlbWEsXG4gIFJlcG9ydFN1Ym1pc3Npb25TY2hlbWEsXG4gIE1vZGVyYXRpb25BY3Rpb25TY2hlbWEsXG4gIFNlYXJjaFNjaGVtYSxcbiAgUGFnaW5hdGlvblNjaGVtYSxcbiAgQXBpUmVzcG9uc2VTY2hlbWEsXG4gIEZpbGVVcGxvYWRTY2hlbWEsXG4gIHZhbGlkYXRlQ29udGVudFNhZmV0eSxcbiAgc2FuaXRpemVUZXh0SW5wdXQsXG4gIHZhbGlkYXRlTWVudGlvbnMsXG4gIHZhbGlkYXRlSGFzaHRhZ3Ncbn0gZnJvbSAnLi91dGlscy92YWxpZGF0aW9uJztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMvZXJyb3ItaGFuZGxpbmcnO1xuZXhwb3J0ICogZnJvbSAnLi91dGlscy93b3Jrb3V0LXZhbGlkYXRpb24nOyJdLCJuYW1lcyI6WyJhdXRoT3B0aW9ucyIsIlVzZXJSZWdpc3RyYXRpb25TY2hlbWEiLCJVc2VyUHJvZmlsZVVwZGF0ZVNjaGVtYSIsIlRyYWluZXJQcm9maWxlU2NoZW1hIiwiUG9zdENyZWF0aW9uU2NoZW1hIiwiQ29tbWVudENyZWF0aW9uU2NoZW1hIiwiRGlyZWN0TWVzc2FnZVNjaGVtYSIsIkNvbW11bml0eUNyZWF0aW9uU2NoZW1hIiwiUmVwb3J0U3VibWlzc2lvblNjaGVtYSIsIk1vZGVyYXRpb25BY3Rpb25TY2hlbWEiLCJTZWFyY2hTY2hlbWEiLCJQYWdpbmF0aW9uU2NoZW1hIiwiQXBpUmVzcG9uc2VTY2hlbWEiLCJGaWxlVXBsb2FkU2NoZW1hIiwidmFsaWRhdGVDb250ZW50U2FmZXR5Iiwic2FuaXRpemVUZXh0SW5wdXQiLCJ2YWxpZGF0ZU1lbnRpb25zIiwidmFsaWRhdGVIYXNodGFncyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/integrations/firebase.ts":
/*!*******************************************!*\
  !*** ./src/core/integrations/firebase.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteExerciseDoc: () => (/* binding */ deleteExerciseDoc),\n/* harmony export */   getFirestore: () => (/* binding */ getFirestore),\n/* harmony export */   getFirestoreExercise: () => (/* binding */ getFirestoreExercise),\n/* harmony export */   getFirestoreUserByEmail: () => (/* binding */ getFirestoreUserByEmail),\n/* harmony export */   publishAccreditedProvider: () => (/* binding */ publishAccreditedProvider),\n/* harmony export */   publishExercise: () => (/* binding */ publishExercise),\n/* harmony export */   publishUserSummary: () => (/* binding */ publishUserSummary)\n/* harmony export */ });\n// Firebase Admin integration (optional)\n// Initializes Firestore when env vars are present. Safe no-op otherwise.\nlet firestoreSingleton = null;\nfunction getFirebaseConfigFromEnv() {\n    const projectId = process.env.FIREBASE_PROJECT_ID;\n    const clientEmail = process.env.FIREBASE_CLIENT_EMAIL;\n    let privateKey = process.env.FIREBASE_PRIVATE_KEY;\n    if (privateKey) {\n        privateKey = privateKey.replace(/\\\\n/g, '\\n');\n    }\n    if (!projectId || !clientEmail || !privateKey) return null;\n    return {\n        projectId,\n        clientEmail,\n        privateKey\n    };\n}\nasync function getFirestore() {\n    if (firestoreSingleton) return firestoreSingleton;\n    const cfg = getFirebaseConfigFromEnv();\n    if (!cfg) return null;\n    try {\n        const admin = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! firebase-admin */ \"firebase-admin\", 23));\n        const apps = admin.getApps?.() || [];\n        if (!apps.length) {\n            admin.initializeApp({\n                credential: admin.credential.cert({\n                    projectId: cfg.projectId,\n                    clientEmail: cfg.clientEmail,\n                    privateKey: cfg.privateKey\n                })\n            });\n        }\n        firestoreSingleton = admin.firestore();\n        return firestoreSingleton;\n    } catch (err) {\n        console.warn('Firebase Admin not available or failed to initialize:', err);\n        return null;\n    }\n}\nasync function publishUserSummary(user) {\n    const db = await getFirestore();\n    if (!db) return;\n    const adminDocRef = db.collection('admin').doc('users').collection('items').doc(user.id);\n    const userDocRef = db.collection('users').doc(user.email);\n    const payload = {\n        email: user.email,\n        name: user.name,\n        role: user.role,\n        status: user.status,\n        reputationScore: user.reputationScore,\n        warningCount: user.warningCount,\n        trainerVerified: user.trainerVerified,\n        updatedAt: (user.updatedAt ?? new Date()).toISOString()\n    };\n    await adminDocRef.set(payload, {\n        merge: true\n    });\n    await userDocRef.set({\n        // Mirror a simpler shape commonly used in Firestore\n        email: user.email,\n        name: user.name,\n        admin: user.role === 'ADMIN',\n        trainer: user.role === 'TRAINER' || user.role === 'ADMIN',\n        trainer_verified: user.trainerVerified,\n        created_at: new Date(),\n        updated_at: new Date()\n    }, {\n        merge: true\n    });\n}\nasync function getFirestoreUserByEmail(email) {\n    const db = await getFirestore();\n    if (!db) return {\n        exists: false\n    };\n    const snap = await db.collection('users').doc(email).get();\n    if (!snap.exists) return {\n        exists: false\n    };\n    return {\n        exists: true,\n        ...snap.data()\n    };\n}\nasync function publishExercise(ex) {\n    const db = await getFirestore();\n    if (!db) return;\n    const docRef = db.collection('exercises').doc(ex.id);\n    const keywords = Array.from(new Set([\n        ex.name,\n        ex.category,\n        ...ex.muscleGroups,\n        ...ex.equipment\n    ].join(' ').toLowerCase().split(/[^a-z0-9]+/).filter(Boolean)));\n    await docRef.set({\n        name: ex.name,\n        category: ex.category,\n        muscleGroups: ex.muscleGroups,\n        equipment: ex.equipment,\n        difficulty: ex.difficulty,\n        instructions: ex.instructions ?? null,\n        safetyNotes: ex.safetyNotes ?? null,\n        imageUrl: ex.imageUrl ?? null,\n        videoUrl: ex.videoUrl ?? null,\n        isActive: ex.isActive ?? true,\n        usageCount: ex.usageCount ?? 0,\n        lastUsed: ex.lastUsed ? ex.lastUsed : null,\n        keywords,\n        updated_at: new Date()\n    }, {\n        merge: true\n    });\n}\nasync function deleteExerciseDoc(id) {\n    const db = await getFirestore();\n    if (!db) return;\n    await db.collection('exercises').doc(id).set({\n        isActive: false,\n        updated_at: new Date()\n    }, {\n        merge: true\n    });\n}\nasync function getFirestoreExercise(id) {\n    const db = await getFirestore();\n    if (!db) return null;\n    const snap = await db.collection('exercises').doc(id).get();\n    return snap.exists ? snap.data() : null;\n}\nasync function publishAccreditedProvider(p) {\n    const db = await getFirestore();\n    if (!db) return;\n    const docRef = db.collection('accredited_providers').doc(p.id);\n    await docRef.set({\n        name: p.name,\n        country: p.country,\n        qualifications: p.qualifications,\n        profileUrl: p.profileUrl ?? null,\n        profilePath: p.profilePath ?? null,\n        slug: p.slug ?? null,\n        source: p.source ?? 'EREPS',\n        isActive: p.isActive ?? true,\n        updated_at: new Date()\n    }, {\n        merge: true\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWlDLGtCQUFrQi9DLEVBQVU7SUFDaEQsTUFBTUosS0FBSyxNQUFNZjtJQUNqQixJQUFJLENBQUNlLElBQUk7SUFDVCxNQUFNQSxHQUFHRSxVQUFVLENBQUMsYUFBYUMsR0FBRyxDQUFDQyxJQUFJYSxHQUFHLENBQUM7UUFBRStCLFVBQVU7UUFBTzFCLFlBQVksSUFBSVA7SUFBTyxHQUFHO1FBQUVHLE9BQU87SUFBSztBQUMxRztBQUVPLGVBQWVrQyxxQkFBcUJoRCxFQUFVO0lBQ25ELE1BQU1KLEtBQUssTUFBTWY7SUFDakIsSUFBSSxDQUFDZSxJQUFJLE9BQU87SUFDaEIsTUFBTXlCLE9BQU8sTUFBTXpCLEdBQUdFLFVBQVUsQ0FBQyxhQUFhQyxHQUFHLENBQUNDLElBQUlzQixHQUFHO0lBQ3pELE9BQU9ELEtBQUtELE1BQU0sR0FBR0MsS0FBS0UsSUFBSSxLQUFLO0FBQ3JDO0FBRU8sZUFBZTBCLDBCQUEwQkMsQ0FVL0M7SUFDQyxNQUFNdEQsS0FBSyxNQUFNZjtJQUNqQixJQUFJLENBQUNlLElBQUk7SUFDVCxNQUFNOEIsU0FBUzlCLEdBQUdFLFVBQVUsQ0FBQyx3QkFBd0JDLEdBQUcsQ0FBQ21ELEVBQUVsRCxFQUFFO0lBQzdELE1BQU0wQixPQUFPYixHQUFHLENBQUM7UUFDZlQsTUFBTThDLEVBQUU5QyxJQUFJO1FBQ1orQyxTQUFTRCxFQUFFQyxPQUFPO1FBQ2xCQyxnQkFBZ0JGLEVBQUVFLGNBQWM7UUFDaENDLFlBQVlILEVBQUVHLFVBQVUsSUFBSTtRQUM1QkMsYUFBYUosRUFBRUksV0FBVyxJQUFJO1FBQzlCQyxNQUFNTCxFQUFFSyxJQUFJLElBQUk7UUFDaEJDLFFBQVFOLEVBQUVNLE1BQU0sSUFBSTtRQUNwQlosVUFBVU0sRUFBRU4sUUFBUSxJQUFJO1FBQ3hCMUIsWUFBWSxJQUFJUDtJQUNsQixHQUFHO1FBQUVHLE9BQU87SUFBSztBQUNuQiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL2ludGVncmF0aW9ucy9maXJlYmFzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGaXJlYmFzZSBBZG1pbiBpbnRlZ3JhdGlvbiAob3B0aW9uYWwpXG4vLyBJbml0aWFsaXplcyBGaXJlc3RvcmUgd2hlbiBlbnYgdmFycyBhcmUgcHJlc2VudC4gU2FmZSBuby1vcCBvdGhlcndpc2UuXG5cbmxldCBmaXJlc3RvcmVTaW5nbGV0b246IGFueSB8IG51bGwgPSBudWxsXG5cbmZ1bmN0aW9uIGdldEZpcmViYXNlQ29uZmlnRnJvbUVudigpIHtcbiAgY29uc3QgcHJvamVjdElkID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRFxuICBjb25zdCBjbGllbnRFbWFpbCA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTFxuICBsZXQgcHJpdmF0ZUtleSA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZXG4gIGlmIChwcml2YXRlS2V5KSB7XG4gICAgcHJpdmF0ZUtleSA9IHByaXZhdGVLZXkucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpXG4gIH1cbiAgaWYgKCFwcm9qZWN0SWQgfHwgIWNsaWVudEVtYWlsIHx8ICFwcml2YXRlS2V5KSByZXR1cm4gbnVsbFxuICByZXR1cm4geyBwcm9qZWN0SWQsIGNsaWVudEVtYWlsLCBwcml2YXRlS2V5IH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpcmVzdG9yZSgpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgaWYgKGZpcmVzdG9yZVNpbmdsZXRvbikgcmV0dXJuIGZpcmVzdG9yZVNpbmdsZXRvblxuICBjb25zdCBjZmcgPSBnZXRGaXJlYmFzZUNvbmZpZ0Zyb21FbnYoKVxuICBpZiAoIWNmZykgcmV0dXJuIG51bGxcblxuICB0cnkge1xuICAgIGNvbnN0IGFkbWluOiBhbnkgPSBhd2FpdCBpbXBvcnQoJ2ZpcmViYXNlLWFkbWluJylcbiAgICBjb25zdCBhcHBzID0gYWRtaW4uZ2V0QXBwcz8uKCkgfHwgW11cbiAgICBpZiAoIWFwcHMubGVuZ3RoKSB7XG4gICAgICBhZG1pbi5pbml0aWFsaXplQXBwKHtcbiAgICAgICAgY3JlZGVudGlhbDogYWRtaW4uY3JlZGVudGlhbC5jZXJ0KHtcbiAgICAgICAgICBwcm9qZWN0SWQ6IGNmZy5wcm9qZWN0SWQsXG4gICAgICAgICAgY2xpZW50RW1haWw6IGNmZy5jbGllbnRFbWFpbCxcbiAgICAgICAgICBwcml2YXRlS2V5OiBjZmcucHJpdmF0ZUtleSxcbiAgICAgICAgfSBhcyBhbnkpLFxuICAgICAgfSlcbiAgICB9XG4gICAgZmlyZXN0b3JlU2luZ2xldG9uID0gYWRtaW4uZmlyZXN0b3JlKClcbiAgICByZXR1cm4gZmlyZXN0b3JlU2luZ2xldG9uXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybignRmlyZWJhc2UgQWRtaW4gbm90IGF2YWlsYWJsZSBvciBmYWlsZWQgdG8gaW5pdGlhbGl6ZTonLCBlcnIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVibGlzaFVzZXJTdW1tYXJ5KHVzZXI6IHtcbiAgaWQ6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZyB8IG51bGxcbiAgcm9sZTogc3RyaW5nXG4gIHN0YXR1czogc3RyaW5nXG4gIHJlcHV0YXRpb25TY29yZTogbnVtYmVyXG4gIHdhcm5pbmdDb3VudDogbnVtYmVyXG4gIHRyYWluZXJWZXJpZmllZDogYm9vbGVhblxuICB1cGRhdGVkQXQ/OiBEYXRlXG59KSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RmlyZXN0b3JlKClcbiAgaWYgKCFkYikgcmV0dXJuXG4gIGNvbnN0IGFkbWluRG9jUmVmID0gZGIuY29sbGVjdGlvbignYWRtaW4nKS5kb2MoJ3VzZXJzJykuY29sbGVjdGlvbignaXRlbXMnKS5kb2ModXNlci5pZClcbiAgY29uc3QgdXNlckRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKHVzZXIuZW1haWwpXG4gIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgbmFtZTogdXNlci5uYW1lLFxuICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICBzdGF0dXM6IHVzZXIuc3RhdHVzLFxuICAgIHJlcHV0YXRpb25TY29yZTogdXNlci5yZXB1dGF0aW9uU2NvcmUsXG4gICAgd2FybmluZ0NvdW50OiB1c2VyLndhcm5pbmdDb3VudCxcbiAgICB0cmFpbmVyVmVyaWZpZWQ6IHVzZXIudHJhaW5lclZlcmlmaWVkLFxuICAgIHVwZGF0ZWRBdDogKHVzZXIudXBkYXRlZEF0ID8/IG5ldyBEYXRlKCkpLnRvSVNPU3RyaW5nKCksXG4gIH1cbiAgYXdhaXQgYWRtaW5Eb2NSZWYuc2V0KHBheWxvYWQsIHsgbWVyZ2U6IHRydWUgfSlcbiAgYXdhaXQgdXNlckRvY1JlZi5zZXQoXG4gICAge1xuICAgICAgLy8gTWlycm9yIGEgc2ltcGxlciBzaGFwZSBjb21tb25seSB1c2VkIGluIEZpcmVzdG9yZVxuICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICBhZG1pbjogdXNlci5yb2xlID09PSAnQURNSU4nLFxuICAgICAgdHJhaW5lcjogdXNlci5yb2xlID09PSAnVFJBSU5FUicgfHwgdXNlci5yb2xlID09PSAnQURNSU4nLFxuICAgICAgdHJhaW5lcl92ZXJpZmllZDogdXNlci50cmFpbmVyVmVyaWZpZWQsXG4gICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICB9LFxuICAgIHsgbWVyZ2U6IHRydWUgfVxuICApXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaXJlc3RvcmVVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTx7XG4gIGV4aXN0czogYm9vbGVhblxuICBhZG1pbj86IGJvb2xlYW5cbiAgdHJhaW5lcj86IGJvb2xlYW5cbiAgdHJhaW5lcl92ZXJpZmllZD86IGJvb2xlYW5cbiAgbmFtZT86IHN0cmluZyB8IG51bGxcbiAgW2tleTogc3RyaW5nXTogYW55XG59PiB7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RmlyZXN0b3JlKClcbiAgaWYgKCFkYikgcmV0dXJuIHsgZXhpc3RzOiBmYWxzZSB9XG4gIGNvbnN0IHNuYXAgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyhlbWFpbCkuZ2V0KClcbiAgaWYgKCFzbmFwLmV4aXN0cykgcmV0dXJuIHsgZXhpc3RzOiBmYWxzZSB9XG4gIHJldHVybiB7IGV4aXN0czogdHJ1ZSwgLi4uKHNuYXAuZGF0YSgpIGFzIGFueSkgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVibGlzaEV4ZXJjaXNlKGV4OiB7XG4gIGlkOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIGNhdGVnb3J5OiBzdHJpbmdcbiAgbXVzY2xlR3JvdXBzOiBzdHJpbmdbXVxuICBlcXVpcG1lbnQ6IHN0cmluZ1tdXG4gIGRpZmZpY3VsdHk6IHN0cmluZ1xuICBpbnN0cnVjdGlvbnM/OiBzdHJpbmcgfCBudWxsXG4gIHNhZmV0eU5vdGVzPzogc3RyaW5nIHwgbnVsbFxuICBpbWFnZVVybD86IHN0cmluZyB8IG51bGxcbiAgdmlkZW9Vcmw/OiBzdHJpbmcgfCBudWxsXG4gIGlzQWN0aXZlPzogYm9vbGVhblxuICB1c2FnZUNvdW50PzogbnVtYmVyXG4gIGxhc3RVc2VkPzogRGF0ZSB8IG51bGxcbn0pIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXRGaXJlc3RvcmUoKVxuICBpZiAoIWRiKSByZXR1cm5cbiAgY29uc3QgZG9jUmVmID0gZGIuY29sbGVjdGlvbignZXhlcmNpc2VzJykuZG9jKGV4LmlkKVxuICBjb25zdCBrZXl3b3JkcyA9IEFycmF5LmZyb20obmV3IFNldChbXG4gICAgZXgubmFtZSwgZXguY2F0ZWdvcnksIC4uLmV4Lm11c2NsZUdyb3VwcywgLi4uZXguZXF1aXBtZW50XG4gIF0uam9pbignICcpLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1teYS16MC05XSsvKS5maWx0ZXIoQm9vbGVhbikpKVxuICBhd2FpdCBkb2NSZWYuc2V0KFxuICAgIHtcbiAgICAgIG5hbWU6IGV4Lm5hbWUsXG4gICAgICBjYXRlZ29yeTogZXguY2F0ZWdvcnksXG4gICAgICBtdXNjbGVHcm91cHM6IGV4Lm11c2NsZUdyb3VwcyxcbiAgICAgIGVxdWlwbWVudDogZXguZXF1aXBtZW50LFxuICAgICAgZGlmZmljdWx0eTogZXguZGlmZmljdWx0eSxcbiAgICAgIGluc3RydWN0aW9uczogZXguaW5zdHJ1Y3Rpb25zID8/IG51bGwsXG4gICAgICBzYWZldHlOb3RlczogZXguc2FmZXR5Tm90ZXMgPz8gbnVsbCxcbiAgICAgIGltYWdlVXJsOiBleC5pbWFnZVVybCA/PyBudWxsLFxuICAgICAgdmlkZW9Vcmw6IGV4LnZpZGVvVXJsID8/IG51bGwsXG4gICAgICBpc0FjdGl2ZTogZXguaXNBY3RpdmUgPz8gdHJ1ZSxcbiAgICAgIHVzYWdlQ291bnQ6IGV4LnVzYWdlQ291bnQgPz8gMCxcbiAgICAgIGxhc3RVc2VkOiBleC5sYXN0VXNlZCA/IGV4Lmxhc3RVc2VkIDogbnVsbCxcbiAgICAgIGtleXdvcmRzLFxuICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICB9LFxuICAgIHsgbWVyZ2U6IHRydWUgfVxuICApXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVFeGVyY2lzZURvYyhpZDogc3RyaW5nKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RmlyZXN0b3JlKClcbiAgaWYgKCFkYikgcmV0dXJuXG4gIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2V4ZXJjaXNlcycpLmRvYyhpZCkuc2V0KHsgaXNBY3RpdmU6IGZhbHNlLCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpIH0sIHsgbWVyZ2U6IHRydWUgfSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpcmVzdG9yZUV4ZXJjaXNlKGlkOiBzdHJpbmcpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgY29uc3QgZGIgPSBhd2FpdCBnZXRGaXJlc3RvcmUoKVxuICBpZiAoIWRiKSByZXR1cm4gbnVsbFxuICBjb25zdCBzbmFwID0gYXdhaXQgZGIuY29sbGVjdGlvbignZXhlcmNpc2VzJykuZG9jKGlkKS5nZXQoKVxuICByZXR1cm4gc25hcC5leGlzdHMgPyBzbmFwLmRhdGEoKSA6IG51bGxcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1Ymxpc2hBY2NyZWRpdGVkUHJvdmlkZXIocDoge1xuICBpZDogc3RyaW5nXG4gIG5hbWU6IHN0cmluZ1xuICBjb3VudHJ5OiBzdHJpbmdcbiAgcXVhbGlmaWNhdGlvbnM6IHN0cmluZ1tdXG4gIHByb2ZpbGVVcmw/OiBzdHJpbmcgfCBudWxsXG4gIHByb2ZpbGVQYXRoPzogc3RyaW5nIHwgbnVsbFxuICBzbHVnPzogc3RyaW5nIHwgbnVsbFxuICBzb3VyY2U/OiBzdHJpbmdcbiAgaXNBY3RpdmU/OiBib29sZWFuXG59KSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgZ2V0RmlyZXN0b3JlKClcbiAgaWYgKCFkYikgcmV0dXJuXG4gIGNvbnN0IGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ2FjY3JlZGl0ZWRfcHJvdmlkZXJzJykuZG9jKHAuaWQpXG4gIGF3YWl0IGRvY1JlZi5zZXQoe1xuICAgIG5hbWU6IHAubmFtZSxcbiAgICBjb3VudHJ5OiBwLmNvdW50cnksXG4gICAgcXVhbGlmaWNhdGlvbnM6IHAucXVhbGlmaWNhdGlvbnMsXG4gICAgcHJvZmlsZVVybDogcC5wcm9maWxlVXJsID8/IG51bGwsXG4gICAgcHJvZmlsZVBhdGg6IHAucHJvZmlsZVBhdGggPz8gbnVsbCxcbiAgICBzbHVnOiBwLnNsdWcgPz8gbnVsbCxcbiAgICBzb3VyY2U6IHAuc291cmNlID8/ICdFUkVQUycsXG4gICAgaXNBY3RpdmU6IHAuaXNBY3RpdmUgPz8gdHJ1ZSxcbiAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICB9LCB7IG1lcmdlOiB0cnVlIH0pXG59XG4iXSwibmFtZXMiOlsiZmlyZXN0b3JlU2luZ2xldG9uIiwiZ2V0RmlyZWJhc2VDb25maWdGcm9tRW52IiwicHJvamVjdElkIiwicHJvY2VzcyIsImVudiIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJjbGllbnRFbWFpbCIsIkZJUkVCQVNFX0NMSUVOVF9FTUFJTCIsInByaXZhdGVLZXkiLCJGSVJFQkFTRV9QUklWQVRFX0tFWSIsInJlcGxhY2UiLCJnZXRGaXJlc3RvcmUiLCJjZmciLCJhZG1pbiIsImFwcHMiLCJnZXRBcHBzIiwibGVuZ3RoIiwiaW5pdGlhbGl6ZUFwcCIsImNyZWRlbnRpYWwiLCJjZXJ0IiwiZmlyZXN0b3JlIiwiZXJyIiwiY29uc29sZSIsIndhcm4iLCJwdWJsaXNoVXNlclN1bW1hcnkiLCJ1c2VyIiwiZGIiLCJhZG1pbkRvY1JlZiIsImNvbGxlY3Rpb24iLCJkb2MiLCJpZCIsInVzZXJEb2NSZWYiLCJlbWFpbCIsInBheWxvYWQiLCJuYW1lIiwicm9sZSIsInN0YXR1cyIsInJlcHV0YXRpb25TY29yZSIsIndhcm5pbmdDb3VudCIsInRyYWluZXJWZXJpZmllZCIsInVwZGF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNldCIsIm1lcmdlIiwidHJhaW5lciIsInRyYWluZXJfdmVyaWZpZWQiLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsImdldEZpcmVzdG9yZVVzZXJCeUVtYWlsIiwiZXhpc3RzIiwic25hcCIsImdldCIsImRhdGEiLCJwdWJsaXNoRXhlcmNpc2UiLCJleCIsImRvY1JlZiIsImtleXdvcmRzIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwiY2F0ZWdvcnkiLCJtdXNjbGVHcm91cHMiLCJlcXVpcG1lbnQiLCJqb2luIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsImZpbHRlciIsIkJvb2xlYW4iLCJkaWZmaWN1bHR5IiwiaW5zdHJ1Y3Rpb25zIiwic2FmZXR5Tm90ZXMiLCJpbWFnZVVybCIsInZpZGVvVXJsIiwiaXNBY3RpdmUiLCJ1c2FnZUNvdW50IiwibGFzdFVzZWQiLCJkZWxldGVFeGVyY2lzZURvYyIsImdldEZpcmVzdG9yZUV4ZXJjaXNlIiwicHVibGlzaEFjY3JlZGl0ZWRQcm92aWRlciIsInAiLCJjb3VudHJ5IiwicXVhbGlmaWNhdGlvbnMiLCJwcm9maWxlVXJsIiwicHJvZmlsZVBhdGgiLCJzbHVnIiwic291cmNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/integrations/firebase.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/integrations/index.ts":
/*!****************************************!*\
  !*** ./src/core/integrations/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MollieApiError: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.MollieApiError),\n/* harmony export */   cancelPayment: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.cancelPayment),\n/* harmony export */   cancelSubscription: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.cancelSubscription),\n/* harmony export */   createCustomer: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createCustomer),\n/* harmony export */   createMollieClient: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createMollieClient),\n/* harmony export */   createPackagePayment: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createPackagePayment),\n/* harmony export */   createPayment: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createPayment),\n/* harmony export */   createSessionPayment: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createSessionPayment),\n/* harmony export */   createSubscription: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.createSubscription),\n/* harmony export */   deleteExerciseDoc: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.deleteExerciseDoc),\n/* harmony export */   exchangeCodeForToken: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.exchangeCodeForToken),\n/* harmony export */   formatAmount: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.formatAmount),\n/* harmony export */   formatWorkoutCaption: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.formatWorkoutCaption),\n/* harmony export */   generateAuthUrl: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.generateAuthUrl),\n/* harmony export */   getAvailablePlatforms: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.getAvailablePlatforms),\n/* harmony export */   getCustomer: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.getCustomer),\n/* harmony export */   getFirestore: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.getFirestore),\n/* harmony export */   getFirestoreExercise: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.getFirestoreExercise),\n/* harmony export */   getFirestoreUserByEmail: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.getFirestoreUserByEmail),\n/* harmony export */   getMollieClient: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.getMollieClient),\n/* harmony export */   getPayment: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.getPayment),\n/* harmony export */   getPlatformCapabilities: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.getPlatformCapabilities),\n/* harmony export */   isPaymentFailed: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.isPaymentFailed),\n/* harmony export */   isPaymentPending: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.isPaymentPending),\n/* harmony export */   isPaymentSuccessful: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.isPaymentSuccessful),\n/* harmony export */   isPlatformConfigured: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.isPlatformConfigured),\n/* harmony export */   parseAmount: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.parseAmount),\n/* harmony export */   processWebhook: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.processWebhook),\n/* harmony export */   publishAccreditedProvider: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.publishAccreditedProvider),\n/* harmony export */   publishExercise: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.publishExercise),\n/* harmony export */   publishUserSummary: () => (/* reexport safe */ _firebase__WEBPACK_IMPORTED_MODULE_0__.publishUserSummary),\n/* harmony export */   shareToFacebook: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.shareToFacebook),\n/* harmony export */   shareToInstagram: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.shareToInstagram),\n/* harmony export */   shareToTikTok: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.shareToTikTok),\n/* harmony export */   shareToYouTube: () => (/* reexport safe */ _social_media__WEBPACK_IMPORTED_MODULE_2__.shareToYouTube),\n/* harmony export */   verifyWebhookSignature: () => (/* reexport safe */ _mollie__WEBPACK_IMPORTED_MODULE_1__.verifyWebhookSignature)\n/* harmony export */ });\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./firebase */ \"(rsc)/./src/core/integrations/firebase.ts\");\n/* harmony import */ var _mollie__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mollie */ \"(rsc)/./src/core/integrations/mollie.ts\");\n/* harmony import */ var _social_media__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./social_media */ \"(rsc)/./src/core/integrations/social_media.ts\");\n/**\n * External Integrations Exports\n * Centralized export point for all third-party service integrations\n */ // Firebase integration for notifications and authentication\n\n// Mollie payment processing integration\n\n// Social media platform integrations\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9pbnRlZ3JhdGlvbnMvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRUQsNERBQTREO0FBQ2pDO0FBRTNCLHdDQUF3QztBQUNmO0FBRXpCLHFDQUFxQztBQUNOIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2NvcmUvaW50ZWdyYXRpb25zL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRXh0ZXJuYWwgSW50ZWdyYXRpb25zIEV4cG9ydHNcbiAqIENlbnRyYWxpemVkIGV4cG9ydCBwb2ludCBmb3IgYWxsIHRoaXJkLXBhcnR5IHNlcnZpY2UgaW50ZWdyYXRpb25zXG4gKi9cblxuLy8gRmlyZWJhc2UgaW50ZWdyYXRpb24gZm9yIG5vdGlmaWNhdGlvbnMgYW5kIGF1dGhlbnRpY2F0aW9uXG5leHBvcnQgKiBmcm9tICcuL2ZpcmViYXNlJztcblxuLy8gTW9sbGllIHBheW1lbnQgcHJvY2Vzc2luZyBpbnRlZ3JhdGlvblxuZXhwb3J0ICogZnJvbSAnLi9tb2xsaWUnO1xuXG4vLyBTb2NpYWwgbWVkaWEgcGxhdGZvcm0gaW50ZWdyYXRpb25zXG5leHBvcnQgKiBmcm9tICcuL3NvY2lhbF9tZWRpYSc7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/integrations/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/integrations/mollie.ts":
/*!*****************************************!*\
  !*** ./src/core/integrations/mollie.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MollieApiError: () => (/* reexport safe */ _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError),\n/* harmony export */   cancelPayment: () => (/* binding */ cancelPayment),\n/* harmony export */   cancelSubscription: () => (/* binding */ cancelSubscription),\n/* harmony export */   createCustomer: () => (/* binding */ createCustomer),\n/* harmony export */   createMollieClient: () => (/* reexport safe */ _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.createMollieClient),\n/* harmony export */   createPackagePayment: () => (/* binding */ createPackagePayment),\n/* harmony export */   createPayment: () => (/* binding */ createPayment),\n/* harmony export */   createSessionPayment: () => (/* binding */ createSessionPayment),\n/* harmony export */   createSubscription: () => (/* binding */ createSubscription),\n/* harmony export */   formatAmount: () => (/* binding */ formatAmount),\n/* harmony export */   getCustomer: () => (/* binding */ getCustomer),\n/* harmony export */   getMollieClient: () => (/* binding */ getMollieClient),\n/* harmony export */   getPayment: () => (/* binding */ getPayment),\n/* harmony export */   isPaymentFailed: () => (/* binding */ isPaymentFailed),\n/* harmony export */   isPaymentPending: () => (/* binding */ isPaymentPending),\n/* harmony export */   isPaymentSuccessful: () => (/* binding */ isPaymentSuccessful),\n/* harmony export */   parseAmount: () => (/* binding */ parseAmount),\n/* harmony export */   processWebhook: () => (/* binding */ processWebhook),\n/* harmony export */   verifyWebhookSignature: () => (/* binding */ verifyWebhookSignature)\n/* harmony export */ });\n/* harmony import */ var _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @mollie/api-client */ \"(rsc)/./node_modules/@mollie/api-client/dist/mollie.esm.js\");\n/**\n * Mollie Payment Integration\n * Handles payment processing for trainer business transactions\n */ \n// ============================================================================\n// CLIENT SETUP\n// ============================================================================\nlet mollieClientSingleton = null;\nfunction getMollieConfigFromEnv() {\n    const apiKey = process.env.MOLLIE_API_KEY;\n    if (!apiKey) {\n        console.warn('Mollie API key not found in environment variables');\n        return null;\n    }\n    return {\n        apiKey\n    };\n}\nfunction getMollieClient() {\n    if (mollieClientSingleton) return mollieClientSingleton;\n    const config = getMollieConfigFromEnv();\n    if (!config) return null;\n    try {\n        mollieClientSingleton = (0,_mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.createMollieClient)({\n            apiKey: config.apiKey,\n            // Mollie expects an array of version strings\n            versionStrings: [\n                'massimino/1.0.0'\n            ]\n        });\n        console.log('✅ Mollie client initialized successfully');\n        return mollieClientSingleton;\n    } catch (error) {\n        console.error('❌ Failed to initialize Mollie client:', error);\n        return null;\n    }\n}\n// ============================================================================\n// PAYMENT OPERATIONS\n// ============================================================================\n/**\n * Create a one-time payment\n */ async function createPayment(paymentData) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const payment = await client.payments.create(paymentData);\n        console.log('💳 Payment created:', payment.id);\n        return payment;\n    } catch (error) {\n        console.error('❌ Payment creation failed:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n/**\n * Get payment details\n */ async function getPayment(paymentId) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const payment = await client.payments.get(paymentId);\n        return payment;\n    } catch (error) {\n        console.error('❌ Failed to get payment:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n/**\n * Cancel a payment\n */ async function cancelPayment(paymentId) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const payment = await client.payments.cancel(paymentId);\n        console.log('🚫 Payment cancelled:', paymentId);\n        return payment;\n    } catch (error) {\n        console.error('❌ Failed to cancel payment:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n// ============================================================================\n// CUSTOMER OPERATIONS\n// ============================================================================\n/**\n * Create a customer for recurring payments\n */ async function createCustomer(customerData) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const customer = await client.customers.create(customerData);\n        console.log('👤 Customer created:', customer.id);\n        return customer;\n    } catch (error) {\n        console.error('❌ Customer creation failed:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n/**\n * Get customer details\n */ async function getCustomer(customerId) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const customer = await client.customers.get(customerId);\n        return customer;\n    } catch (error) {\n        console.error('❌ Failed to get customer:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n// ============================================================================\n// SUBSCRIPTION OPERATIONS\n// ============================================================================\n/**\n * Create a subscription for recurring payments\n */ async function createSubscription(customerId, subscriptionData) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const subscription = await client.customerSubscriptions.create({\n            customerId,\n            ...subscriptionData\n        });\n        console.log('🔄 Subscription created:', subscription.id);\n        return subscription;\n    } catch (error) {\n        console.error('❌ Subscription creation failed:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n/**\n * Cancel a subscription\n */ async function cancelSubscription(customerId, subscriptionId) {\n    const client = getMollieClient();\n    if (!client) {\n        throw new Error('Mollie client not available');\n    }\n    try {\n        const subscription = await client.customerSubscriptions.cancel({\n            customerId,\n            id: subscriptionId\n        });\n        console.log('🚫 Subscription cancelled:', subscriptionId);\n        return subscription;\n    } catch (error) {\n        console.error('❌ Failed to cancel subscription:', error);\n        if (error instanceof _mollie_api_client__WEBPACK_IMPORTED_MODULE_0__.MollieApiError) {\n            throw new Error(`Mollie API Error: ${error.message}`);\n        }\n        throw error;\n    }\n}\n// ============================================================================\n// WEBHOOK VERIFICATION\n// ============================================================================\n/**\n * Verify webhook signature (implement if using webhook signatures)\n */ function verifyWebhookSignature(_payload, _signature, _secret) {\n    // Implementation depends on your webhook setup\n    // Mollie typically uses simple ID-based verification\n    return true; // Placeholder\n}\n/**\n * Process webhook payload\n */ async function processWebhook(paymentId) {\n    try {\n        const payment = await getPayment(paymentId);\n        console.log('🔔 Webhook processed for payment:', paymentId, 'Status:', payment.status);\n        return {\n            paymentId: payment.id,\n            status: payment.status,\n            amount: payment.amount,\n            description: payment.description,\n            metadata: payment.metadata\n        };\n    } catch (error) {\n        console.error('❌ Webhook processing failed:', error);\n        throw error;\n    }\n}\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Format amount for Mollie (requires string with 2 decimals)\n */ function formatAmount(amount) {\n    return (amount / 100).toFixed(2);\n}\n/**\n * Parse amount from Mollie (returns cents as integer)\n */ function parseAmount(amount) {\n    return Math.round(parseFloat(amount) * 100);\n}\n/**\n * Validate payment status\n */ function isPaymentSuccessful(status) {\n    return status === 'paid';\n}\nfunction isPaymentPending(status) {\n    return [\n        'open',\n        'pending'\n    ].includes(status);\n}\nfunction isPaymentFailed(status) {\n    return [\n        'failed',\n        'canceled',\n        'expired'\n    ].includes(status);\n}\n// ============================================================================\n// TRAINER-SPECIFIC FUNCTIONS\n// ============================================================================\n/**\n * Create payment for trainer session\n */ async function createSessionPayment(data) {\n    const paymentData = {\n        amount: {\n            value: formatAmount(data.amount),\n            currency: data.currency\n        },\n        description: data.description,\n        redirectUrl: data.redirectUrl,\n        ...data.webhookUrl ? {\n            webhookUrl: data.webhookUrl\n        } : {},\n        metadata: {\n            type: 'session_payment',\n            trainerId: data.trainerId,\n            clientId: data.clientId,\n            appointmentId: data.appointmentId\n        }\n    };\n    return await createPayment(paymentData);\n}\n/**\n * Create payment for trainer package\n */ async function createPackagePayment(data) {\n    const paymentData = {\n        amount: {\n            value: formatAmount(data.amount),\n            currency: data.currency\n        },\n        description: data.description,\n        redirectUrl: data.redirectUrl,\n        ...data.webhookUrl ? {\n            webhookUrl: data.webhookUrl\n        } : {},\n        metadata: {\n            type: 'package_payment',\n            trainerId: data.trainerId,\n            clientId: data.clientId,\n            packageId: data.packageId\n        }\n    };\n    return await createPayment(paymentData);\n}\n// ============================================================================\n// EXPORTS\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9pbnRlZ3JhdGlvbnMvbW9sbGllLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXVFO0FBbUN4RSwrRUFBK0U7QUFDL0UsZUFBZTtBQUNmLCtFQUErRTtBQUUvRSxJQUFJRSx3QkFBb0M7QUFFeEMsU0FBU0M7SUFDUCxNQUFNQyxTQUFTQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDekMsSUFBSSxDQUFDSCxRQUFRO1FBQ1hJLFFBQVFDLElBQUksQ0FBQztRQUNiLE9BQU87SUFDVDtJQUNBLE9BQU87UUFBRUw7SUFBTztBQUNsQjtBQUVPLFNBQVNNO0lBQ2QsSUFBSVIsdUJBQXVCLE9BQU9BO0lBRWxDLE1BQU1TLFNBQVNSO0lBQ2YsSUFBSSxDQUFDUSxRQUFRLE9BQU87SUFFcEIsSUFBSTtRQUNGVCx3QkFBd0JGLHNFQUFrQkEsQ0FBQztZQUN6Q0ksUUFBUU8sT0FBT1AsTUFBTTtZQUNyQiw2Q0FBNkM7WUFDN0NRLGdCQUFnQjtnQkFBQzthQUFrQjtRQUNyQztRQUNBSixRQUFRSyxHQUFHLENBQUM7UUFDWixPQUFPWDtJQUNULEVBQUUsT0FBT1ksT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMseUNBQXlDQTtRQUN2RCxPQUFPO0lBQ1Q7QUFDRjtBQUVBLCtFQUErRTtBQUMvRSxxQkFBcUI7QUFDckIsK0VBQStFO0FBRS9FOztDQUVDLEdBQ00sZUFBZUMsY0FBY0MsV0FBOEI7SUFDaEUsTUFBTUMsU0FBU1A7SUFDZixJQUFJLENBQUNPLFFBQVE7UUFDWCxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNRixPQUFPRyxRQUFRLENBQUNDLE1BQU0sQ0FBQ0w7UUFDN0NSLFFBQVFLLEdBQUcsQ0FBQyx1QkFBdUJNLFFBQVFHLEVBQUU7UUFDN0MsT0FBT0g7SUFDVCxFQUFFLE9BQU9MLE9BQU87UUFDZE4sUUFBUU0sS0FBSyxDQUFDLDhCQUE4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LEtBQUtHLFdBQVc7UUFDN0IsR0FBSUgsS0FBS0ksVUFBVSxHQUFHO1lBQUVBLFlBQVlKLEtBQUtJLFVBQVU7UUFBQyxJQUFJLENBQUMsQ0FBQztRQUMxRGhCLFVBQVU7WUFDUmlCLE1BQU07WUFDTkMsV0FBV04sS0FBS00sU0FBUztZQUN6QkMsVUFBVVAsS0FBS08sUUFBUTtZQUN2QkMsZUFBZVIsS0FBS1EsYUFBYTtRQUNuQztJQUNGO0lBRUEsT0FBTyxNQUFNdEQsY0FBY0M7QUFDN0I7QUFFQTs7Q0FFQyxHQUNNLGVBQWVzRCxxQkFBcUJULElBUzFDO0lBQ0MsTUFBTTdDLGNBQWlDO1FBQ3JDK0IsUUFBUTtZQUNOZSxPQUFPWixhQUFhVyxLQUFLZCxNQUFNO1lBQy9CZ0IsVUFBVUYsS0FBS0UsUUFBUTtRQUN6QjtRQUNBZixhQUFhYSxLQUFLYixXQUFXO1FBQzdCZ0IsYUFBYUgsS0FBS0csV0FBVztRQUM3QixHQUFJSCxLQUFLSSxVQUFVLEdBQUc7WUFBRUEsWUFBWUosS0FBS0ksVUFBVTtRQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFEaEIsVUFBVTtZQUNSaUIsTUFBTTtZQUNOQyxXQUFXTixLQUFLTSxTQUFTO1lBQ3pCQyxVQUFVUCxLQUFLTyxRQUFRO1lBQ3ZCRyxXQUFXVixLQUFLVSxTQUFTO1FBQzNCO0lBQ0Y7SUFFQSxPQUFPLE1BQU14RCxjQUFjQztBQUM3QjtBQUVBLCtFQUErRTtBQUMvRSxVQUFVO0FBQ1YsK0VBQStFO0FBSzdFIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2NvcmUvaW50ZWdyYXRpb25zL21vbGxpZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vbGxpZSBQYXltZW50IEludGVncmF0aW9uXG4gKiBIYW5kbGVzIHBheW1lbnQgcHJvY2Vzc2luZyBmb3IgdHJhaW5lciBidXNpbmVzcyB0cmFuc2FjdGlvbnNcbiAqL1xuXG5pbXBvcnQgeyBjcmVhdGVNb2xsaWVDbGllbnQsIE1vbGxpZUFwaUVycm9yIH0gZnJvbSAnQG1vbGxpZS9hcGktY2xpZW50JztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVFlQRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGludGVyZmFjZSBNb2xsaWVQYXltZW50RGF0YSB7XG4gIGFtb3VudDoge1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAgY3VycmVuY3k6IHN0cmluZztcbiAgfTtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgcmVkaXJlY3RVcmw6IHN0cmluZztcbiAgd2ViaG9va1VybD86IHN0cmluZztcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBtZXRob2Q/OiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2xsaWVDdXN0b21lckRhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2xsaWVTdWJzY3JpcHRpb25EYXRhIHtcbiAgYW1vdW50OiB7XG4gICAgdmFsdWU6IHN0cmluZztcbiAgICBjdXJyZW5jeTogc3RyaW5nO1xuICB9O1xuICBpbnRlcnZhbDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICB3ZWJob29rVXJsPzogc3RyaW5nO1xuICBtZXRhZGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENMSUVOVCBTRVRVUFxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5sZXQgbW9sbGllQ2xpZW50U2luZ2xldG9uOiBhbnkgfCBudWxsID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0TW9sbGllQ29uZmlnRnJvbUVudigpIHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTU9MTElFX0FQSV9LRVk7XG4gIGlmICghYXBpS2V5KSB7XG4gICAgY29uc29sZS53YXJuKCdNb2xsaWUgQVBJIGtleSBub3QgZm91bmQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHsgYXBpS2V5IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2xsaWVDbGllbnQoKSB7XG4gIGlmIChtb2xsaWVDbGllbnRTaW5nbGV0b24pIHJldHVybiBtb2xsaWVDbGllbnRTaW5nbGV0b247XG5cbiAgY29uc3QgY29uZmlnID0gZ2V0TW9sbGllQ29uZmlnRnJvbUVudigpO1xuICBpZiAoIWNvbmZpZykgcmV0dXJuIG51bGw7XG5cbiAgdHJ5IHtcbiAgICBtb2xsaWVDbGllbnRTaW5nbGV0b24gPSBjcmVhdGVNb2xsaWVDbGllbnQoe1xuICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxuICAgICAgLy8gTW9sbGllIGV4cGVjdHMgYW4gYXJyYXkgb2YgdmVyc2lvbiBzdHJpbmdzXG4gICAgICB2ZXJzaW9uU3RyaW5nczogWydtYXNzaW1pbm8vMS4wLjAnXVxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKCfinIUgTW9sbGllIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICByZXR1cm4gbW9sbGllQ2xpZW50U2luZ2xldG9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW5pdGlhbGl6ZSBNb2xsaWUgY2xpZW50OicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQQVlNRU5UIE9QRVJBVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgYSBvbmUtdGltZSBwYXltZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVQYXltZW50KHBheW1lbnREYXRhOiBNb2xsaWVQYXltZW50RGF0YSkge1xuICBjb25zdCBjbGllbnQgPSBnZXRNb2xsaWVDbGllbnQoKTtcbiAgaWYgKCFjbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01vbGxpZSBjbGllbnQgbm90IGF2YWlsYWJsZScpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgY2xpZW50LnBheW1lbnRzLmNyZWF0ZShwYXltZW50RGF0YSk7XG4gICAgY29uc29sZS5sb2coJ/CfkrMgUGF5bWVudCBjcmVhdGVkOicsIHBheW1lbnQuaWQpO1xuICAgIHJldHVybiBwYXltZW50O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQYXltZW50IGNyZWF0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9sbGllQXBpRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9sbGllIEFQSSBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBwYXltZW50IGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBheW1lbnQocGF5bWVudElkOiBzdHJpbmcpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0TW9sbGllQ2xpZW50KCk7XG4gIGlmICghY2xpZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNb2xsaWUgY2xpZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IGNsaWVudC5wYXltZW50cy5nZXQocGF5bWVudElkKTtcbiAgICByZXR1cm4gcGF5bWVudDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdldCBwYXltZW50OicsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb2xsaWVBcGlFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2xsaWUgQVBJIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ2FuY2VsIGEgcGF5bWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FuY2VsUGF5bWVudChwYXltZW50SWQ6IHN0cmluZykge1xuICBjb25zdCBjbGllbnQgPSBnZXRNb2xsaWVDbGllbnQoKTtcbiAgaWYgKCFjbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01vbGxpZSBjbGllbnQgbm90IGF2YWlsYWJsZScpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgY2xpZW50LnBheW1lbnRzLmNhbmNlbChwYXltZW50SWQpO1xuICAgIGNvbnNvbGUubG9nKCfwn5qrIFBheW1lbnQgY2FuY2VsbGVkOicsIHBheW1lbnRJZCk7XG4gICAgcmV0dXJuIHBheW1lbnQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBjYW5jZWwgcGF5bWVudDonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9sbGllQXBpRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9sbGllIEFQSSBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDVVNUT01FUiBPUEVSQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIGEgY3VzdG9tZXIgZm9yIHJlY3VycmluZyBwYXltZW50c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tZXIoY3VzdG9tZXJEYXRhOiBNb2xsaWVDdXN0b21lckRhdGEpIHtcbiAgY29uc3QgY2xpZW50ID0gZ2V0TW9sbGllQ2xpZW50KCk7XG4gIGlmICghY2xpZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNb2xsaWUgY2xpZW50IG5vdCBhdmFpbGFibGUnKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY3VzdG9tZXIgPSBhd2FpdCBjbGllbnQuY3VzdG9tZXJzLmNyZWF0ZShjdXN0b21lckRhdGEpO1xuICAgIGNvbnNvbGUubG9nKCfwn5GkIEN1c3RvbWVyIGNyZWF0ZWQ6JywgY3VzdG9tZXIuaWQpO1xuICAgIHJldHVybiBjdXN0b21lcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQ3VzdG9tZXIgY3JlYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb2xsaWVBcGlFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2xsaWUgQVBJIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogR2V0IGN1c3RvbWVyIGRldGFpbHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVyKGN1c3RvbWVySWQ6IHN0cmluZykge1xuICBjb25zdCBjbGllbnQgPSBnZXRNb2xsaWVDbGllbnQoKTtcbiAgaWYgKCFjbGllbnQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01vbGxpZSBjbGllbnQgbm90IGF2YWlsYWJsZScpO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjdXN0b21lciA9IGF3YWl0IGNsaWVudC5jdXN0b21lcnMuZ2V0KGN1c3RvbWVySWQpO1xuICAgIHJldHVybiBjdXN0b21lcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGdldCBjdXN0b21lcjonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9sbGllQXBpRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9sbGllIEFQSSBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTVUJTQ1JJUFRJT04gT1BFUkFUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBhIHN1YnNjcmlwdGlvbiBmb3IgcmVjdXJyaW5nIHBheW1lbnRzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpcHRpb24oXG4gIGN1c3RvbWVySWQ6IHN0cmluZyxcbiAgc3Vic2NyaXB0aW9uRGF0YTogTW9sbGllU3Vic2NyaXB0aW9uRGF0YVxuKSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldE1vbGxpZUNsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTW9sbGllIGNsaWVudCBub3QgYXZhaWxhYmxlJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IGNsaWVudC5jdXN0b21lclN1YnNjcmlwdGlvbnMuY3JlYXRlKHtcbiAgICAgIGN1c3RvbWVySWQsXG4gICAgICAuLi5zdWJzY3JpcHRpb25EYXRhXG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ/CflIQgU3Vic2NyaXB0aW9uIGNyZWF0ZWQ6Jywgc3Vic2NyaXB0aW9uLmlkKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTdWJzY3JpcHRpb24gY3JlYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBNb2xsaWVBcGlFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2xsaWUgQVBJIEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICogQ2FuY2VsIGEgc3Vic2NyaXB0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYW5jZWxTdWJzY3JpcHRpb24oY3VzdG9tZXJJZDogc3RyaW5nLCBzdWJzY3JpcHRpb25JZDogc3RyaW5nKSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldE1vbGxpZUNsaWVudCgpO1xuICBpZiAoIWNsaWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTW9sbGllIGNsaWVudCBub3QgYXZhaWxhYmxlJyk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IGF3YWl0IGNsaWVudC5jdXN0b21lclN1YnNjcmlwdGlvbnMuY2FuY2VsKHtcbiAgICAgIGN1c3RvbWVySWQsXG4gICAgICBpZDogc3Vic2NyaXB0aW9uSWRcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygn8J+aqyBTdWJzY3JpcHRpb24gY2FuY2VsbGVkOicsIHN1YnNjcmlwdGlvbklkKTtcbiAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY2FuY2VsIHN1YnNjcmlwdGlvbjonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgTW9sbGllQXBpRXJyb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTW9sbGllIEFQSSBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBXRUJIT09LIFZFUklGSUNBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFZlcmlmeSB3ZWJob29rIHNpZ25hdHVyZSAoaW1wbGVtZW50IGlmIHVzaW5nIHdlYmhvb2sgc2lnbmF0dXJlcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeVdlYmhvb2tTaWduYXR1cmUoXG4gIF9wYXlsb2FkOiBzdHJpbmcsXG4gIF9zaWduYXR1cmU6IHN0cmluZyxcbiAgX3NlY3JldDogc3RyaW5nXG4pOiBib29sZWFuIHtcbiAgLy8gSW1wbGVtZW50YXRpb24gZGVwZW5kcyBvbiB5b3VyIHdlYmhvb2sgc2V0dXBcbiAgLy8gTW9sbGllIHR5cGljYWxseSB1c2VzIHNpbXBsZSBJRC1iYXNlZCB2ZXJpZmljYXRpb25cbiAgcmV0dXJuIHRydWU7IC8vIFBsYWNlaG9sZGVyXG59XG5cbi8qKlxuICogUHJvY2VzcyB3ZWJob29rIHBheWxvYWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NXZWJob29rKHBheW1lbnRJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IGdldFBheW1lbnQocGF5bWVudElkKTtcblxuICAgIGNvbnNvbGUubG9nKCfwn5SUIFdlYmhvb2sgcHJvY2Vzc2VkIGZvciBwYXltZW50OicsIHBheW1lbnRJZCwgJ1N0YXR1czonLCBwYXltZW50LnN0YXR1cyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF5bWVudElkOiBwYXltZW50LmlkLFxuICAgICAgc3RhdHVzOiBwYXltZW50LnN0YXR1cyxcbiAgICAgIGFtb3VudDogcGF5bWVudC5hbW91bnQsXG4gICAgICBkZXNjcmlwdGlvbjogcGF5bWVudC5kZXNjcmlwdGlvbixcbiAgICAgIG1ldGFkYXRhOiBwYXltZW50Lm1ldGFkYXRhXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgV2ViaG9vayBwcm9jZXNzaW5nIGZhaWxlZDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElUWSBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBGb3JtYXQgYW1vdW50IGZvciBNb2xsaWUgKHJlcXVpcmVzIHN0cmluZyB3aXRoIDIgZGVjaW1hbHMpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBbW91bnQoYW1vdW50OiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gKGFtb3VudCAvIDEwMCkudG9GaXhlZCgyKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhbW91bnQgZnJvbSBNb2xsaWUgKHJldHVybnMgY2VudHMgYXMgaW50ZWdlcilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW1vdW50KGFtb3VudDogc3RyaW5nKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGgucm91bmQocGFyc2VGbG9hdChhbW91bnQpICogMTAwKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBwYXltZW50IHN0YXR1c1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQYXltZW50U3VjY2Vzc2Z1bChzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gc3RhdHVzID09PSAncGFpZCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BheW1lbnRQZW5kaW5nKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBbJ29wZW4nLCAncGVuZGluZyddLmluY2x1ZGVzKHN0YXR1cyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1BheW1lbnRGYWlsZWQoc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIFsnZmFpbGVkJywgJ2NhbmNlbGVkJywgJ2V4cGlyZWQnXS5pbmNsdWRlcyhzdGF0dXMpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUUkFJTkVSLVNQRUNJRklDIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBwYXltZW50IGZvciB0cmFpbmVyIHNlc3Npb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb25QYXltZW50KGRhdGE6IHtcbiAgdHJhaW5lcklkOiBzdHJpbmc7XG4gIGNsaWVudElkOiBzdHJpbmc7XG4gIGFwcG9pbnRtZW50SWQ6IHN0cmluZztcbiAgYW1vdW50OiBudW1iZXI7XG4gIGN1cnJlbmN5OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHJlZGlyZWN0VXJsOiBzdHJpbmc7XG4gIHdlYmhvb2tVcmw/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHBheW1lbnREYXRhOiBNb2xsaWVQYXltZW50RGF0YSA9IHtcbiAgICBhbW91bnQ6IHtcbiAgICAgIHZhbHVlOiBmb3JtYXRBbW91bnQoZGF0YS5hbW91bnQpLFxuICAgICAgY3VycmVuY3k6IGRhdGEuY3VycmVuY3lcbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgIHJlZGlyZWN0VXJsOiBkYXRhLnJlZGlyZWN0VXJsLFxuICAgIC4uLihkYXRhLndlYmhvb2tVcmwgPyB7IHdlYmhvb2tVcmw6IGRhdGEud2ViaG9va1VybCB9IDoge30pLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0eXBlOiAnc2Vzc2lvbl9wYXltZW50JyxcbiAgICAgIHRyYWluZXJJZDogZGF0YS50cmFpbmVySWQsXG4gICAgICBjbGllbnRJZDogZGF0YS5jbGllbnRJZCxcbiAgICAgIGFwcG9pbnRtZW50SWQ6IGRhdGEuYXBwb2ludG1lbnRJZFxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gYXdhaXQgY3JlYXRlUGF5bWVudChwYXltZW50RGF0YSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIHBheW1lbnQgZm9yIHRyYWluZXIgcGFja2FnZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUGFja2FnZVBheW1lbnQoZGF0YToge1xuICB0cmFpbmVySWQ6IHN0cmluZztcbiAgY2xpZW50SWQ6IHN0cmluZztcbiAgcGFja2FnZUlkOiBzdHJpbmc7XG4gIGFtb3VudDogbnVtYmVyO1xuICBjdXJyZW5jeTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICByZWRpcmVjdFVybDogc3RyaW5nO1xuICB3ZWJob29rVXJsPzogc3RyaW5nO1xufSkge1xuICBjb25zdCBwYXltZW50RGF0YTogTW9sbGllUGF5bWVudERhdGEgPSB7XG4gICAgYW1vdW50OiB7XG4gICAgICB2YWx1ZTogZm9ybWF0QW1vdW50KGRhdGEuYW1vdW50KSxcbiAgICAgIGN1cnJlbmN5OiBkYXRhLmN1cnJlbmN5XG4gICAgfSxcbiAgICBkZXNjcmlwdGlvbjogZGF0YS5kZXNjcmlwdGlvbixcbiAgICByZWRpcmVjdFVybDogZGF0YS5yZWRpcmVjdFVybCxcbiAgICAuLi4oZGF0YS53ZWJob29rVXJsID8geyB3ZWJob29rVXJsOiBkYXRhLndlYmhvb2tVcmwgfSA6IHt9KSxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdHlwZTogJ3BhY2thZ2VfcGF5bWVudCcsXG4gICAgICB0cmFpbmVySWQ6IGRhdGEudHJhaW5lcklkLFxuICAgICAgY2xpZW50SWQ6IGRhdGEuY2xpZW50SWQsXG4gICAgICBwYWNrYWdlSWQ6IGRhdGEucGFja2FnZUlkXG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBhd2FpdCBjcmVhdGVQYXltZW50KHBheW1lbnREYXRhKTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhQT1JUU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQge1xuICBjcmVhdGVNb2xsaWVDbGllbnQsXG4gIE1vbGxpZUFwaUVycm9yXG59O1xuIl0sIm5hbWVzIjpbImNyZWF0ZU1vbGxpZUNsaWVudCIsIk1vbGxpZUFwaUVycm9yIiwibW9sbGllQ2xpZW50U2luZ2xldG9uIiwiZ2V0TW9sbGllQ29uZmlnRnJvbUVudiIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJNT0xMSUVfQVBJX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwiZ2V0TW9sbGllQ2xpZW50IiwiY29uZmlnIiwidmVyc2lvblN0cmluZ3MiLCJsb2ciLCJlcnJvciIsImNyZWF0ZVBheW1lbnQiLCJwYXltZW50RGF0YSIsImNsaWVudCIsIkVycm9yIiwicGF5bWVudCIsInBheW1lbnRzIiwiY3JlYXRlIiwiaWQiLCJtZXNzYWdlIiwiZ2V0UGF5bWVudCIsInBheW1lbnRJZCIsImdldCIsImNhbmNlbFBheW1lbnQiLCJjYW5jZWwiLCJjcmVhdGVDdXN0b21lciIsImN1c3RvbWVyRGF0YSIsImN1c3RvbWVyIiwiY3VzdG9tZXJzIiwiZ2V0Q3VzdG9tZXIiLCJjdXN0b21lcklkIiwiY3JlYXRlU3Vic2NyaXB0aW9uIiwic3Vic2NyaXB0aW9uRGF0YSIsInN1YnNjcmlwdGlvbiIsImN1c3RvbWVyU3Vic2NyaXB0aW9ucyIsImNhbmNlbFN1YnNjcmlwdGlvbiIsInN1YnNjcmlwdGlvbklkIiwidmVyaWZ5V2ViaG9va1NpZ25hdHVyZSIsIl9wYXlsb2FkIiwiX3NpZ25hdHVyZSIsIl9zZWNyZXQiLCJwcm9jZXNzV2ViaG9vayIsInN0YXR1cyIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwibWV0YWRhdGEiLCJmb3JtYXRBbW91bnQiLCJ0b0ZpeGVkIiwicGFyc2VBbW91bnQiLCJNYXRoIiwicm91bmQiLCJwYXJzZUZsb2F0IiwiaXNQYXltZW50U3VjY2Vzc2Z1bCIsImlzUGF5bWVudFBlbmRpbmciLCJpbmNsdWRlcyIsImlzUGF5bWVudEZhaWxlZCIsImNyZWF0ZVNlc3Npb25QYXltZW50IiwiZGF0YSIsInZhbHVlIiwiY3VycmVuY3kiLCJyZWRpcmVjdFVybCIsIndlYmhvb2tVcmwiLCJ0eXBlIiwidHJhaW5lcklkIiwiY2xpZW50SWQiLCJhcHBvaW50bWVudElkIiwiY3JlYXRlUGFja2FnZVBheW1lbnQiLCJwYWNrYWdlSWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/core/integrations/mollie.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/integrations/social_media.ts":
/*!***********************************************!*\
  !*** ./src/core/integrations/social_media.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exchangeCodeForToken: () => (/* binding */ exchangeCodeForToken),\n/* harmony export */   formatWorkoutCaption: () => (/* binding */ formatWorkoutCaption),\n/* harmony export */   generateAuthUrl: () => (/* binding */ generateAuthUrl),\n/* harmony export */   getAvailablePlatforms: () => (/* binding */ getAvailablePlatforms),\n/* harmony export */   getPlatformCapabilities: () => (/* binding */ getPlatformCapabilities),\n/* harmony export */   isPlatformConfigured: () => (/* binding */ isPlatformConfigured),\n/* harmony export */   shareToFacebook: () => (/* binding */ shareToFacebook),\n/* harmony export */   shareToInstagram: () => (/* binding */ shareToInstagram),\n/* harmony export */   shareToTikTok: () => (/* binding */ shareToTikTok),\n/* harmony export */   shareToYouTube: () => (/* binding */ shareToYouTube)\n/* harmony export */ });\n/**\n * Social Media Integration Service for Massimino\n * Handles Instagram, TikTok, and other platform integrations\n */ // Platform configurations\nconst PLATFORM_CONFIGS = {\n    instagram: {\n        name: 'Instagram',\n        clientId: process.env.INSTAGRAM_CLIENT_ID || '',\n        clientSecret: process.env.INSTAGRAM_CLIENT_SECRET || '',\n        scopes: [\n            'user_profile',\n            'user_media'\n        ],\n        authUrl: 'https://api.instagram.com/oauth/authorize',\n        tokenUrl: 'https://api.instagram.com/oauth/access_token',\n        apiBaseUrl: 'https://graph.instagram.com'\n    },\n    tiktok: {\n        name: 'TikTok',\n        clientId: process.env.TIKTOK_CLIENT_KEY || '',\n        clientSecret: process.env.TIKTOK_CLIENT_SECRET || '',\n        scopes: [\n            'user.info.basic',\n            'video.upload'\n        ],\n        authUrl: 'https://www.tiktok.com/auth/authorize/',\n        tokenUrl: 'https://open-api.tiktok.com/oauth/access_token/',\n        apiBaseUrl: 'https://open-api.tiktok.com'\n    },\n    youtube: {\n        name: 'YouTube',\n        clientId: process.env.YOUTUBE_CLIENT_ID || '',\n        clientSecret: process.env.YOUTUBE_CLIENT_SECRET || '',\n        scopes: [\n            'https://www.googleapis.com/auth/youtube.upload'\n        ],\n        authUrl: 'https://accounts.google.com/o/oauth2/auth',\n        tokenUrl: 'https://oauth2.googleapis.com/token',\n        apiBaseUrl: 'https://www.googleapis.com/youtube/v3'\n    },\n    facebook: {\n        name: 'Facebook',\n        clientId: process.env.FACEBOOK_APP_ID || '',\n        clientSecret: process.env.FACEBOOK_APP_SECRET || '',\n        scopes: [\n            'pages_manage_posts',\n            'pages_read_engagement'\n        ],\n        authUrl: 'https://www.facebook.com/v18.0/dialog/oauth',\n        tokenUrl: 'https://graph.facebook.com/v18.0/oauth/access_token',\n        apiBaseUrl: 'https://graph.facebook.com/v18.0'\n    }\n};\n/**\n * Generate OAuth authorization URL for a platform\n */ function generateAuthUrl(platform, redirectUri, state) {\n    const config = PLATFORM_CONFIGS[platform];\n    if (!config) {\n        throw new Error(`Unsupported platform: ${platform}`);\n    }\n    const params = new URLSearchParams({\n        client_id: config.clientId,\n        redirect_uri: redirectUri,\n        scope: config.scopes.join(' '),\n        response_type: 'code',\n        ...state && {\n            state\n        }\n    });\n    return `${config.authUrl}?${params.toString()}`;\n}\n/**\n * Exchange authorization code for access token\n */ async function exchangeCodeForToken(platform, code, redirectUri) {\n    const config = PLATFORM_CONFIGS[platform];\n    if (!config) {\n        return {\n            success: false,\n            error: `Unsupported platform: ${platform}`\n        };\n    }\n    try {\n        const response = await fetch(config.tokenUrl, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded'\n            },\n            body: new URLSearchParams({\n                client_id: config.clientId,\n                client_secret: config.clientSecret,\n                code,\n                grant_type: 'authorization_code',\n                redirect_uri: redirectUri\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            return {\n                success: false,\n                error: data.error_description || data.error || 'Token exchange failed'\n            };\n        }\n        const result = {\n            success: true,\n            accessToken: data.access_token,\n            refreshToken: data.refresh_token\n        };\n        if (data.expires_in) {\n            result.expiresAt = new Date(Date.now() + data.expires_in * 1000);\n        }\n        return result;\n    } catch (error) {\n        console.error(`Token exchange error for ${platform}:`, error);\n        return {\n            success: false,\n            error: 'Token exchange failed'\n        };\n    }\n}\n/**\n * Format workout data into social media caption\n */ function formatWorkoutCaption(post) {\n    let caption = post.caption;\n    if (post.workoutData) {\n        const { exercise, sets, reps, weight, duration } = post.workoutData;\n        caption += `\\n\\n💪 Workout Details:\\n`;\n        caption += `🏋️ Exercise: ${exercise}\\n`;\n        caption += `📊 Sets: ${sets} × ${reps} reps\\n`;\n        caption += `⚖️ Weight: ${weight}\\n`;\n        if (duration) {\n            caption += `⏱️ Duration: ${duration}\\n`;\n        }\n    }\n    if (post.hashtags && post.hashtags.length > 0) {\n        caption += `\\n\\n${post.hashtags.map((tag)=>`#${tag}`).join(' ')}`;\n    }\n    // Add platform-specific fitness hashtags\n    const defaultHashtags = [\n        'fitness',\n        'workout',\n        'gym',\n        'health',\n        'motivation',\n        'massimino'\n    ];\n    caption += `\\n\\n${defaultHashtags.map((tag)=>`#${tag}`).join(' ')}`;\n    return caption;\n}\n/**\n * Share content to Instagram\n */ async function shareToInstagram(post, accessToken) {\n    try {\n        const config = PLATFORM_CONFIGS.instagram;\n        const caption = formatWorkoutCaption(post);\n        // Step 1: Create media container\n        const containerResponse = await fetch(`${config.apiBaseUrl}/me/media`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                image_url: post.mediaType === 'photo' ? post.mediaUrl : undefined,\n                video_url: post.mediaType === 'video' ? post.mediaUrl : undefined,\n                caption,\n                media_type: post.mediaType === 'photo' ? 'IMAGE' : 'VIDEO'\n            })\n        });\n        const containerData = await containerResponse.json();\n        if (!containerResponse.ok) {\n            return {\n                success: false,\n                error: containerData.error?.message || 'Failed to create media container'\n            };\n        }\n        // Step 2: Publish the media\n        const publishResponse = await fetch(`${config.apiBaseUrl}/me/media_publish`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                creation_id: containerData.id\n            })\n        });\n        const publishData = await publishResponse.json();\n        if (!publishResponse.ok) {\n            return {\n                success: false,\n                error: publishData.error?.message || 'Failed to publish media'\n            };\n        }\n        return {\n            success: true,\n            postId: publishData.id\n        };\n    } catch (error) {\n        console.error('Instagram sharing error:', error);\n        return {\n            success: false,\n            error: 'Instagram sharing failed'\n        };\n    }\n}\n/**\n * Share content to TikTok\n */ async function shareToTikTok(post, accessToken) {\n    try {\n        const config = PLATFORM_CONFIGS.tiktok;\n        if (post.mediaType !== 'video') {\n            return {\n                success: false,\n                error: 'TikTok only supports video content'\n            };\n        }\n        const caption = formatWorkoutCaption(post);\n        const response = await fetch(`${config.apiBaseUrl}/v2/post/publish/video/init/`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                post_info: {\n                    title: caption.substring(0, 150),\n                    privacy_level: 'SELF_ONLY',\n                    disable_duet: false,\n                    disable_comment: false,\n                    disable_stitch: false,\n                    video_cover_timestamp_ms: 1000\n                },\n                source_info: {\n                    source: 'FILE_UPLOAD',\n                    video_url: post.mediaUrl\n                }\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            return {\n                success: false,\n                error: data.error?.message || 'TikTok upload failed'\n            };\n        }\n        return {\n            success: true,\n            postId: data.data?.publish_id\n        };\n    } catch (error) {\n        console.error('TikTok sharing error:', error);\n        return {\n            success: false,\n            error: 'TikTok sharing failed'\n        };\n    }\n}\n/**\n * Share content to YouTube Shorts\n */ async function shareToYouTube(post, accessToken) {\n    try {\n        const config = PLATFORM_CONFIGS.youtube;\n        if (post.mediaType !== 'video') {\n            return {\n                success: false,\n                error: 'YouTube only supports video content'\n            };\n        }\n        const caption = formatWorkoutCaption(post);\n        const response = await fetch(`${config.apiBaseUrl}/videos?part=snippet,status`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                snippet: {\n                    title: `${post.workoutData?.exercise || 'Workout'} - Massimino Fitness`,\n                    description: caption,\n                    tags: post.hashtags || [\n                        'fitness',\n                        'workout',\n                        'shorts'\n                    ],\n                    categoryId: '17'\n                },\n                status: {\n                    privacyStatus: 'private'\n                }\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            return {\n                success: false,\n                error: data.error?.message || 'YouTube upload failed'\n            };\n        }\n        return {\n            success: true,\n            postId: data.id\n        };\n    } catch (error) {\n        console.error('YouTube sharing error:', error);\n        return {\n            success: false,\n            error: 'YouTube sharing failed'\n        };\n    }\n}\n/**\n * Share content to Facebook\n */ async function shareToFacebook(post, accessToken, pageId) {\n    try {\n        const config = PLATFORM_CONFIGS.facebook;\n        const caption = formatWorkoutCaption(post);\n        const response = await fetch(`${config.apiBaseUrl}/${pageId}/photos`, {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${accessToken}`,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                url: post.mediaUrl,\n                caption,\n                published: true\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            return {\n                success: false,\n                error: data.error?.message || 'Facebook sharing failed'\n            };\n        }\n        return {\n            success: true,\n            postId: data.id\n        };\n    } catch (error) {\n        console.error('Facebook sharing error:', error);\n        return {\n            success: false,\n            error: 'Facebook sharing failed'\n        };\n    }\n}\n/**\n * Get platform sharing capabilities\n */ function getPlatformCapabilities(platform) {\n    const capabilities = {\n        instagram: {\n            supportsPhoto: true,\n            supportsVideo: true,\n            requiresAuth: true\n        },\n        tiktok: {\n            supportsPhoto: false,\n            supportsVideo: true,\n            requiresAuth: true\n        },\n        youtube: {\n            supportsPhoto: false,\n            supportsVideo: true,\n            requiresAuth: true\n        },\n        facebook: {\n            supportsPhoto: true,\n            supportsVideo: true,\n            requiresAuth: true\n        }\n    };\n    return capabilities[platform] || {\n        supportsPhoto: false,\n        supportsVideo: false,\n        requiresAuth: true\n    };\n}\n/**\n * Validate platform configuration\n */ function isPlatformConfigured(platform) {\n    const config = PLATFORM_CONFIGS[platform];\n    if (!config) return false;\n    return !!(config.clientId && config.clientSecret);\n}\n/**\n * Get available platforms\n */ function getAvailablePlatforms() {\n    return Object.keys(PLATFORM_CONFIGS).filter(isPlatformConfigured);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS9pbnRlZ3JhdGlvbnMvc29jaWFsX21lZGlhLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FvQ0QsMEJBQTBCO0FBQzFCLE1BQU1BLG1CQUFtRDtJQUN2REMsV0FBVztRQUNUQyxNQUFNO1FBQ05DLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUk7UUFDN0NDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csdUJBQXVCLElBQUk7UUFDckRDLFFBQVE7WUFBQztZQUFnQjtTQUFhO1FBQ3RDQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsWUFBWTtJQUNkO0lBQ0FDLFFBQVE7UUFDTlgsTUFBTTtRQUNOQyxVQUFVQyxRQUFRQyxHQUFHLENBQUNTLGlCQUFpQixJQUFJO1FBQzNDUCxjQUFjSCxRQUFRQyxHQUFHLENBQUNVLG9CQUFvQixJQUFJO1FBQ2xETixRQUFRO1lBQUM7WUFBbUI7U0FBZTtRQUMzQ0MsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFlBQVk7SUFDZDtJQUNBSSxTQUFTO1FBQ1BkLE1BQU07UUFDTkMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDWSxpQkFBaUIsSUFBSTtRQUMzQ1YsY0FBY0gsUUFBUUMsR0FBRyxDQUFDYSxxQkFBcUIsSUFBSTtRQUNuRFQsUUFBUTtZQUFDO1NBQWlEO1FBQzFEQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsWUFBWTtJQUNkO0lBQ0FPLFVBQVU7UUFDUmpCLE1BQU07UUFDTkMsVUFBVUMsUUFBUUMsR0FBRyxDQUFDZSxlQUFlLElBQUk7UUFDekNiLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ2dCLG1CQUFtQixJQUFJO1FBQ2pEWixRQUFRO1lBQUM7WUFBc0I7U0FBd0I7UUFDdkRDLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxZQUFZO0lBQ2Q7QUFDRjtBQUVBOztDQUVDLEdBQ00sU0FBU1UsZ0JBQWdCQyxRQUFnQixFQUFFQyxXQUFtQixFQUFFQyxLQUFjO0lBQ25GLE1BQU1DLFNB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QUUrQyxXQUFXO1lBQTBCO1FBQ25GO1FBRUEsT0FBTztZQUFFaEQsU0FBUztZQUFNcUQsUUFBUTVDLEtBQUswQyxFQUFFO1FBQUM7SUFDMUMsRUFBRSxPQUFPbEQsT0FBTztRQUNkcUIsUUFBUXJCLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU87WUFBRUQsU0FBUztZQUFPQyxPQUFPO1FBQTBCO0lBQzVEO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLFNBQVM0RSx3QkFBd0I1RixRQUFnQjtJQUN0RCxNQUFNNkYsZUFBZTtRQUNuQm5ILFdBQVc7WUFBRW9ILGVBQWU7WUFBTUMsZUFBZTtZQUFNQyxjQUFjO1FBQUs7UUFDMUUxRyxRQUFRO1lBQUV3RyxlQUFlO1lBQU9DLGVBQWU7WUFBTUMsY0FBYztRQUFLO1FBQ3hFdkcsU0FBUztZQUFFcUcsZUFBZTtZQUFPQyxlQUFlO1lBQU1DLGNBQWM7UUFBSztRQUN6RXBHLFVBQVU7WUFBRWtHLGVBQWU7WUFBTUMsZUFBZTtZQUFNQyxjQUFjO1FBQUs7SUFDM0U7SUFFQSxPQUFPSCxZQUFZLENBQUM3RixTQUFzQyxJQUFJO1FBQUU4RixlQUFlO1FBQU9DLGVBQWU7UUFBT0MsY0FBYztJQUFLO0FBQ2pJO0FBRUE7O0NBRUMsR0FDTSxTQUFTQyxxQkFBcUJqRyxRQUFnQjtJQUNuRCxNQUFNRyxTQUFTMUIsZ0JBQWdCLENBQUN1QixTQUFTO0lBQ3pDLElBQUksQ0FBQ0csUUFBUSxPQUFPO0lBRXBCLE9BQU8sQ0FBQyxDQUFFQSxDQUFBQSxPQUFPdkIsUUFBUSxJQUFJdUIsT0FBT25CLFlBQVk7QUFDbEQ7QUFFQTs7Q0FFQyxHQUNNLFNBQVNrSDtJQUNkLE9BQU9DLE9BQU9DLElBQUksQ0FBQzNILGtCQUFrQjRILE1BQU0sQ0FBQ0o7QUFDOUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvY29yZS9pbnRlZ3JhdGlvbnMvc29jaWFsX21lZGlhLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU29jaWFsIE1lZGlhIEludGVncmF0aW9uIFNlcnZpY2UgZm9yIE1hc3NpbWlub1xuICogSGFuZGxlcyBJbnN0YWdyYW0sIFRpa1RvaywgYW5kIG90aGVyIHBsYXRmb3JtIGludGVncmF0aW9uc1xuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgU29jaWFsTWVkaWFQb3N0IHtcbiAgY2FwdGlvbjogc3RyaW5nXG4gIG1lZGlhVXJsOiBzdHJpbmdcbiAgbWVkaWFUeXBlOiAncGhvdG8nIHwgJ3ZpZGVvJ1xuICBwbGF0Zm9ybTogJ2luc3RhZ3JhbScgfCAndGlrdG9rJyB8ICd5b3V0dWJlJyB8ICdmYWNlYm9vaydcbiAgaGFzaHRhZ3M/OiBzdHJpbmdbXVxuICB3b3Jrb3V0RGF0YT86IHtcbiAgICBleGVyY2lzZTogc3RyaW5nXG4gICAgc2V0czogbnVtYmVyXG4gICAgcmVwczogbnVtYmVyXG4gICAgd2VpZ2h0OiBzdHJpbmdcbiAgICBkdXJhdGlvbj86IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU29jaWFsTWVkaWFBdXRoUmVzcG9uc2Uge1xuICBzdWNjZXNzOiBib29sZWFuXG4gIGFjY2Vzc1Rva2VuPzogc3RyaW5nXG4gIHJlZnJlc2hUb2tlbj86IHN0cmluZ1xuICBleHBpcmVzQXQ/OiBEYXRlXG4gIGVycm9yPzogc3RyaW5nXG4gIGF1dGhVcmw/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQbGF0Zm9ybUNvbmZpZyB7XG4gIG5hbWU6IHN0cmluZ1xuICBjbGllbnRJZDogc3RyaW5nXG4gIGNsaWVudFNlY3JldDogc3RyaW5nXG4gIHNjb3Blczogc3RyaW5nW11cbiAgYXV0aFVybDogc3RyaW5nXG4gIHRva2VuVXJsOiBzdHJpbmdcbiAgYXBpQmFzZVVybDogc3RyaW5nXG59XG5cbi8vIFBsYXRmb3JtIGNvbmZpZ3VyYXRpb25zXG5jb25zdCBQTEFURk9STV9DT05GSUdTOiBSZWNvcmQ8c3RyaW5nLCBQbGF0Zm9ybUNvbmZpZz4gPSB7XG4gIGluc3RhZ3JhbToge1xuICAgIG5hbWU6ICdJbnN0YWdyYW0nLFxuICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5JTlNUQUdSQU1fQ0xJRU5UX0lEIHx8ICcnLFxuICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuSU5TVEFHUkFNX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgc2NvcGVzOiBbJ3VzZXJfcHJvZmlsZScsICd1c2VyX21lZGlhJ10sXG4gICAgYXV0aFVybDogJ2h0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vb2F1dGgvYXV0aG9yaXplJyxcbiAgICB0b2tlblVybDogJ2h0dHBzOi8vYXBpLmluc3RhZ3JhbS5jb20vb2F1dGgvYWNjZXNzX3Rva2VuJyxcbiAgICBhcGlCYXNlVXJsOiAnaHR0cHM6Ly9ncmFwaC5pbnN0YWdyYW0uY29tJ1xuICB9LFxuICB0aWt0b2s6IHtcbiAgICBuYW1lOiAnVGlrVG9rJyxcbiAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuVElLVE9LX0NMSUVOVF9LRVkgfHwgJycsXG4gICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5USUtUT0tfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICBzY29wZXM6IFsndXNlci5pbmZvLmJhc2ljJywgJ3ZpZGVvLnVwbG9hZCddLFxuICAgIGF1dGhVcmw6ICdodHRwczovL3d3dy50aWt0b2suY29tL2F1dGgvYXV0aG9yaXplLycsXG4gICAgdG9rZW5Vcmw6ICdodHRwczovL29wZW4tYXBpLnRpa3Rvay5jb20vb2F1dGgvYWNjZXNzX3Rva2VuLycsXG4gICAgYXBpQmFzZVVybDogJ2h0dHBzOi8vb3Blbi1hcGkudGlrdG9rLmNvbSdcbiAgfSxcbiAgeW91dHViZToge1xuICAgIG5hbWU6ICdZb3VUdWJlJyxcbiAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuWU9VVFVCRV9DTElFTlRfSUQgfHwgJycsXG4gICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5ZT1VUVUJFX0NMSUVOVF9TRUNSRVQgfHwgJycsXG4gICAgc2NvcGVzOiBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgveW91dHViZS51cGxvYWQnXSxcbiAgICBhdXRoVXJsOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgnLFxuICAgIHRva2VuVXJsOiAnaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4nLFxuICAgIGFwaUJhc2VVcmw6ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzJ1xuICB9LFxuICBmYWNlYm9vazoge1xuICAgIG5hbWU6ICdGYWNlYm9vaycsXG4gICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0FQUF9JRCB8fCAnJyxcbiAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkZBQ0VCT09LX0FQUF9TRUNSRVQgfHwgJycsXG4gICAgc2NvcGVzOiBbJ3BhZ2VzX21hbmFnZV9wb3N0cycsICdwYWdlc19yZWFkX2VuZ2FnZW1lbnQnXSxcbiAgICBhdXRoVXJsOiAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3YxOC4wL2RpYWxvZy9vYXV0aCcsXG4gICAgdG9rZW5Vcmw6ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTguMC9vYXV0aC9hY2Nlc3NfdG9rZW4nLFxuICAgIGFwaUJhc2VVcmw6ICdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTguMCdcbiAgfVxufVxuXG4vKipcbiAqIEdlbmVyYXRlIE9BdXRoIGF1dGhvcml6YXRpb24gVVJMIGZvciBhIHBsYXRmb3JtXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUF1dGhVcmwocGxhdGZvcm06IHN0cmluZywgcmVkaXJlY3RVcmk6IHN0cmluZywgc3RhdGU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBjb25maWcgPSBQTEFURk9STV9DT05GSUdTW3BsYXRmb3JtXVxuICBpZiAoIWNvbmZpZykge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgcGxhdGZvcm06ICR7cGxhdGZvcm19YClcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgIGNsaWVudF9pZDogY29uZmlnLmNsaWVudElkLFxuICAgIHJlZGlyZWN0X3VyaTogcmVkaXJlY3RVcmksXG4gICAgc2NvcGU6IGNvbmZpZy5zY29wZXMuam9pbignICcpLFxuICAgIHJlc3BvbnNlX3R5cGU6ICdjb2RlJyxcbiAgICAuLi4oc3RhdGUgJiYgeyBzdGF0ZSB9KVxuICB9KVxuXG4gIHJldHVybiBgJHtjb25maWcuYXV0aFVybH0/JHtwYXJhbXMudG9TdHJpbmcoKX1gXG59XG5cbi8qKlxuICogRXhjaGFuZ2UgYXV0aG9yaXphdGlvbiBjb2RlIGZvciBhY2Nlc3MgdG9rZW5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4Y2hhbmdlQ29kZUZvclRva2VuKFxuICBwbGF0Zm9ybTogc3RyaW5nLFxuICBjb2RlOiBzdHJpbmcsXG4gIHJlZGlyZWN0VXJpOiBzdHJpbmdcbik6IFByb21pc2U8U29jaWFsTWVkaWFBdXRoUmVzcG9uc2U+IHtcbiAgY29uc3QgY29uZmlnID0gUExBVEZPUk1fQ09ORklHU1twbGF0Zm9ybV1cbiAgaWYgKCFjb25maWcpIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGBVbnN1cHBvcnRlZCBwbGF0Zm9ybTogJHtwbGF0Zm9ybX1gIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb25maWcudG9rZW5VcmwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgICB9LFxuICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIGNsaWVudF9pZDogY29uZmlnLmNsaWVudElkLFxuICAgICAgICBjbGllbnRfc2VjcmV0OiBjb25maWcuY2xpZW50U2VjcmV0LFxuICAgICAgICBjb2RlLFxuICAgICAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcbiAgICAgICAgcmVkaXJlY3RfdXJpOiByZWRpcmVjdFVyaSxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRhdGEuZXJyb3JfZGVzY3JpcHRpb24gfHwgZGF0YS5lcnJvciB8fCAnVG9rZW4gZXhjaGFuZ2UgZmFpbGVkJyB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0OiBTb2NpYWxNZWRpYUF1dGhSZXNwb25zZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgICByZWZyZXNoVG9rZW46IGRhdGEucmVmcmVzaF90b2tlbixcbiAgICB9O1xuICAgIGlmIChkYXRhLmV4cGlyZXNfaW4pIHtcbiAgICAgIChyZXN1bHQgYXMgYW55KS5leHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgZGF0YS5leHBpcmVzX2luICogMTAwMCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgVG9rZW4gZXhjaGFuZ2UgZXJyb3IgZm9yICR7cGxhdGZvcm19OmAsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Rva2VuIGV4Y2hhbmdlIGZhaWxlZCcgfVxuICB9XG59XG5cbi8qKlxuICogRm9ybWF0IHdvcmtvdXQgZGF0YSBpbnRvIHNvY2lhbCBtZWRpYSBjYXB0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRXb3Jrb3V0Q2FwdGlvbihwb3N0OiBTb2NpYWxNZWRpYVBvc3QpOiBzdHJpbmcge1xuICBsZXQgY2FwdGlvbiA9IHBvc3QuY2FwdGlvblxuXG4gIGlmIChwb3N0LndvcmtvdXREYXRhKSB7XG4gICAgY29uc3QgeyBleGVyY2lzZSwgc2V0cywgcmVwcywgd2VpZ2h0LCBkdXJhdGlvbiB9ID0gcG9zdC53b3Jrb3V0RGF0YVxuXG4gICAgY2FwdGlvbiArPSBgXFxuXFxu8J+SqiBXb3Jrb3V0IERldGFpbHM6XFxuYFxuICAgIGNhcHRpb24gKz0gYPCfj4vvuI8gRXhlcmNpc2U6ICR7ZXhlcmNpc2V9XFxuYFxuICAgIGNhcHRpb24gKz0gYPCfk4ogU2V0czogJHtzZXRzfSDDlyAke3JlcHN9IHJlcHNcXG5gXG4gICAgY2FwdGlvbiArPSBg4pqW77iPIFdlaWdodDogJHt3ZWlnaHR9XFxuYFxuXG4gICAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICBjYXB0aW9uICs9IGDij7HvuI8gRHVyYXRpb246ICR7ZHVyYXRpb259XFxuYFxuICAgIH1cbiAgfVxuXG4gIGlmIChwb3N0Lmhhc2h0YWdzICYmIHBvc3QuaGFzaHRhZ3MubGVuZ3RoID4gMCkge1xuICAgIGNhcHRpb24gKz0gYFxcblxcbiR7cG9zdC5oYXNodGFncy5tYXAodGFnID0+IGAjJHt0YWd9YCkuam9pbignICcpfWBcbiAgfVxuXG4gIC8vIEFkZCBwbGF0Zm9ybS1zcGVjaWZpYyBmaXRuZXNzIGhhc2h0YWdzXG4gIGNvbnN0IGRlZmF1bHRIYXNodGFncyA9IFsnZml0bmVzcycsICd3b3Jrb3V0JywgJ2d5bScsICdoZWFsdGgnLCAnbW90aXZhdGlvbicsICdtYXNzaW1pbm8nXVxuICBjYXB0aW9uICs9IGBcXG5cXG4ke2RlZmF1bHRIYXNodGFncy5tYXAodGFnID0+IGAjJHt0YWd9YCkuam9pbignICcpfWBcblxuICByZXR1cm4gY2FwdGlvblxufVxuXG4vKipcbiAqIFNoYXJlIGNvbnRlbnQgdG8gSW5zdGFncmFtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaGFyZVRvSW5zdGFncmFtKHBvc3Q6IFNvY2lhbE1lZGlhUG9zdCwgYWNjZXNzVG9rZW46IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZzsgcG9zdElkPzogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25maWcgPSBQTEFURk9STV9DT05GSUdTLmluc3RhZ3JhbSFcbiAgICBjb25zdCBjYXB0aW9uID0gZm9ybWF0V29ya291dENhcHRpb24ocG9zdClcblxuICAgIC8vIFN0ZXAgMTogQ3JlYXRlIG1lZGlhIGNvbnRhaW5lclxuICAgIGNvbnN0IGNvbnRhaW5lclJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7Y29uZmlnLmFwaUJhc2VVcmx9L21lL21lZGlhYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBpbWFnZV91cmw6IHBvc3QubWVkaWFUeXBlID09PSAncGhvdG8nID8gcG9zdC5tZWRpYVVybCA6IHVuZGVmaW5lZCxcbiAgICAgICAgdmlkZW9fdXJsOiBwb3N0Lm1lZGlhVHlwZSA9PT0gJ3ZpZGVvJyA/IHBvc3QubWVkaWFVcmwgOiB1bmRlZmluZWQsXG4gICAgICAgIGNhcHRpb24sXG4gICAgICAgIG1lZGlhX3R5cGU6IHBvc3QubWVkaWFUeXBlID09PSAncGhvdG8nID8gJ0lNQUdFJyA6ICdWSURFTycsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgY29udGFpbmVyRGF0YSA9IGF3YWl0IGNvbnRhaW5lclJlc3BvbnNlLmpzb24oKVxuXG4gICAgaWYgKCFjb250YWluZXJSZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBjb250YWluZXJEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gY3JlYXRlIG1lZGlhIGNvbnRhaW5lcicgfVxuICAgIH1cblxuICAgIC8vIFN0ZXAgMjogUHVibGlzaCB0aGUgbWVkaWFcbiAgICBjb25zdCBwdWJsaXNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtjb25maWcuYXBpQmFzZVVybH0vbWUvbWVkaWFfcHVibGlzaGAsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgY3JlYXRpb25faWQ6IGNvbnRhaW5lckRhdGEuaWQsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgY29uc3QgcHVibGlzaERhdGEgPSBhd2FpdCBwdWJsaXNoUmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoIXB1Ymxpc2hSZXNwb25zZS5vaykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBwdWJsaXNoRGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnRmFpbGVkIHRvIHB1Ymxpc2ggbWVkaWEnIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBwb3N0SWQ6IHB1Ymxpc2hEYXRhLmlkIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdJbnN0YWdyYW0gc2hhcmluZyBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnN0YWdyYW0gc2hhcmluZyBmYWlsZWQnIH1cbiAgfVxufVxuXG4vKipcbiAqIFNoYXJlIGNvbnRlbnQgdG8gVGlrVG9rXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaGFyZVRvVGlrVG9rKHBvc3Q6IFNvY2lhbE1lZGlhUG9zdCwgYWNjZXNzVG9rZW46IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZzsgcG9zdElkPzogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25maWcgPSBQTEFURk9STV9DT05GSUdTLnRpa3RvayFcblxuICAgIGlmIChwb3N0Lm1lZGlhVHlwZSAhPT0gJ3ZpZGVvJykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnVGlrVG9rIG9ubHkgc3VwcG9ydHMgdmlkZW8gY29udGVudCcgfVxuICAgIH1cblxuICAgIGNvbnN0IGNhcHRpb24gPSBmb3JtYXRXb3Jrb3V0Q2FwdGlvbihwb3N0KVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtjb25maWcuYXBpQmFzZVVybH0vdjIvcG9zdC9wdWJsaXNoL3ZpZGVvL2luaXQvYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBwb3N0X2luZm86IHtcbiAgICAgICAgICB0aXRsZTogY2FwdGlvbi5zdWJzdHJpbmcoMCwgMTUwKSwgLy8gVGlrVG9rIHRpdGxlIGxpbWl0XG4gICAgICAgICAgcHJpdmFjeV9sZXZlbDogJ1NFTEZfT05MWScsIC8vIFN0YXJ0IHdpdGggcHJpdmF0ZSwgdXNlciBjYW4gY2hhbmdlXG4gICAgICAgICAgZGlzYWJsZV9kdWV0OiBmYWxzZSxcbiAgICAgICAgICBkaXNhYmxlX2NvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgIGRpc2FibGVfc3RpdGNoOiBmYWxzZSxcbiAgICAgICAgICB2aWRlb19jb3Zlcl90aW1lc3RhbXBfbXM6IDEwMDAsXG4gICAgICAgIH0sXG4gICAgICAgIHNvdXJjZV9pbmZvOiB7XG4gICAgICAgICAgc291cmNlOiAnRklMRV9VUExPQUQnLFxuICAgICAgICAgIHZpZGVvX3VybDogcG9zdC5tZWRpYVVybCxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1Rpa1RvayB1cGxvYWQgZmFpbGVkJyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcG9zdElkOiBkYXRhLmRhdGE/LnB1Ymxpc2hfaWQgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Rpa1RvayBzaGFyaW5nIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1Rpa1RvayBzaGFyaW5nIGZhaWxlZCcgfVxuICB9XG59XG5cbi8qKlxuICogU2hhcmUgY29udGVudCB0byBZb3VUdWJlIFNob3J0c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hhcmVUb1lvdVR1YmUocG9zdDogU29jaWFsTWVkaWFQb3N0LCBhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyBwb3N0SWQ/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IFBMQVRGT1JNX0NPTkZJR1MueW91dHViZSFcblxuICAgIGlmIChwb3N0Lm1lZGlhVHlwZSAhPT0gJ3ZpZGVvJykge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnWW91VHViZSBvbmx5IHN1cHBvcnRzIHZpZGVvIGNvbnRlbnQnIH1cbiAgICB9XG5cbiAgICBjb25zdCBjYXB0aW9uID0gZm9ybWF0V29ya291dENhcHRpb24ocG9zdClcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7Y29uZmlnLmFwaUJhc2VVcmx9L3ZpZGVvcz9wYXJ0PXNuaXBwZXQsc3RhdHVzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBzbmlwcGV0OiB7XG4gICAgICAgICAgdGl0bGU6IGAke3Bvc3Qud29ya291dERhdGE/LmV4ZXJjaXNlIHx8ICdXb3Jrb3V0J30gLSBNYXNzaW1pbm8gRml0bmVzc2AsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGNhcHRpb24sXG4gICAgICAgICAgdGFnczogcG9zdC5oYXNodGFncyB8fCBbJ2ZpdG5lc3MnLCAnd29ya291dCcsICdzaG9ydHMnXSxcbiAgICAgICAgICBjYXRlZ29yeUlkOiAnMTcnLCAvLyBTcG9ydHMgY2F0ZWdvcnlcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdHVzOiB7XG4gICAgICAgICAgcHJpdmFjeVN0YXR1czogJ3ByaXZhdGUnLCAvLyBTdGFydCBwcml2YXRlLCB1c2VyIGNhbiBjaGFuZ2VcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1lvdVR1YmUgdXBsb2FkIGZhaWxlZCcgfVxuICAgIH1cblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHBvc3RJZDogZGF0YS5pZCB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignWW91VHViZSBzaGFyaW5nIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1lvdVR1YmUgc2hhcmluZyBmYWlsZWQnIH1cbiAgfVxufVxuXG4vKipcbiAqIFNoYXJlIGNvbnRlbnQgdG8gRmFjZWJvb2tcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNoYXJlVG9GYWNlYm9vayhwb3N0OiBTb2NpYWxNZWRpYVBvc3QsIGFjY2Vzc1Rva2VuOiBzdHJpbmcsIHBhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyBwb3N0SWQ/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGNvbmZpZyA9IFBMQVRGT1JNX0NPTkZJR1MuZmFjZWJvb2shXG4gICAgY29uc3QgY2FwdGlvbiA9IGZvcm1hdFdvcmtvdXRDYXB0aW9uKHBvc3QpXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2NvbmZpZy5hcGlCYXNlVXJsfS8ke3BhZ2VJZH0vcGhvdG9zYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAsXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB1cmw6IHBvc3QubWVkaWFVcmwsXG4gICAgICAgIGNhcHRpb24sXG4gICAgICAgIHB1Ymxpc2hlZDogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIH0pXG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhY2Vib29rIHNoYXJpbmcgZmFpbGVkJyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcG9zdElkOiBkYXRhLmlkIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWNlYm9vayBzaGFyaW5nIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhY2Vib29rIHNoYXJpbmcgZmFpbGVkJyB9XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgcGxhdGZvcm0gc2hhcmluZyBjYXBhYmlsaXRpZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYXRmb3JtQ2FwYWJpbGl0aWVzKHBsYXRmb3JtOiBzdHJpbmcpOiB7IHN1cHBvcnRzUGhvdG86IGJvb2xlYW47IHN1cHBvcnRzVmlkZW86IGJvb2xlYW47IHJlcXVpcmVzQXV0aDogYm9vbGVhbiB9IHtcbiAgY29uc3QgY2FwYWJpbGl0aWVzID0ge1xuICAgIGluc3RhZ3JhbTogeyBzdXBwb3J0c1Bob3RvOiB0cnVlLCBzdXBwb3J0c1ZpZGVvOiB0cnVlLCByZXF1aXJlc0F1dGg6IHRydWUgfSxcbiAgICB0aWt0b2s6IHsgc3VwcG9ydHNQaG90bzogZmFsc2UsIHN1cHBvcnRzVmlkZW86IHRydWUsIHJlcXVpcmVzQXV0aDogdHJ1ZSB9LFxuICAgIHlvdXR1YmU6IHsgc3VwcG9ydHNQaG90bzogZmFsc2UsIHN1cHBvcnRzVmlkZW86IHRydWUsIHJlcXVpcmVzQXV0aDogdHJ1ZSB9LFxuICAgIGZhY2Vib29rOiB7IHN1cHBvcnRzUGhvdG86IHRydWUsIHN1cHBvcnRzVmlkZW86IHRydWUsIHJlcXVpcmVzQXV0aDogdHJ1ZSB9LFxuICB9XG5cbiAgcmV0dXJuIGNhcGFiaWxpdGllc1twbGF0Zm9ybSBhcyBrZXlvZiB0eXBlb2YgY2FwYWJpbGl0aWVzXSB8fCB7IHN1cHBvcnRzUGhvdG86IGZhbHNlLCBzdXBwb3J0c1ZpZGVvOiBmYWxzZSwgcmVxdWlyZXNBdXRoOiB0cnVlIH1cbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBwbGF0Zm9ybSBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYXRmb3JtQ29uZmlndXJlZChwbGF0Zm9ybTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNvbmZpZyA9IFBMQVRGT1JNX0NPTkZJR1NbcGxhdGZvcm1dXG4gIGlmICghY29uZmlnKSByZXR1cm4gZmFsc2VcblxuICByZXR1cm4gISEoY29uZmlnLmNsaWVudElkICYmIGNvbmZpZy5jbGllbnRTZWNyZXQpXG59XG5cbi8qKlxuICogR2V0IGF2YWlsYWJsZSBwbGF0Zm9ybXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF2YWlsYWJsZVBsYXRmb3JtcygpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhQTEFURk9STV9DT05GSUdTKS5maWx0ZXIoaXNQbGF0Zm9ybUNvbmZpZ3VyZWQpXG59XG4iXSwibmFtZXMiOlsiUExBVEZPUk1fQ09ORklHUyIsImluc3RhZ3JhbSIsIm5hbWUiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJJTlNUQUdSQU1fQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiSU5TVEFHUkFNX0NMSUVOVF9TRUNSRVQiLCJzY29wZXMiLCJhdXRoVXJsIiwidG9rZW5VcmwiLCJhcGlCYXNlVXJsIiwidGlrdG9rIiwiVElLVE9LX0NMSUVOVF9LRVkiLCJUSUtUT0tfQ0xJRU5UX1NFQ1JFVCIsInlvdXR1YmUiLCJZT1VUVUJFX0NMSUVOVF9JRCIsIllPVVRVQkVfQ0xJRU5UX1NFQ1JFVCIsImZhY2Vib29rIiwiRkFDRUJPT0tfQVBQX0lEIiwiRkFDRUJPT0tfQVBQX1NFQ1JFVCIsImdlbmVyYXRlQXV0aFVybCIsInBsYXRmb3JtIiwicmVkaXJlY3RVcmkiLCJzdGF0ZSIsImNvbmZpZyIsIkVycm9yIiwicGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwiY2xpZW50X2lkIiwicmVkaXJlY3RfdXJpIiwic2NvcGUiLCJqb2luIiwicmVzcG9uc2VfdHlwZSIsInRvU3RyaW5nIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW4iLCJjb2RlIiwic3VjY2VzcyIsImVycm9yIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiY2xpZW50X3NlY3JldCIsImdyYW50X3R5cGUiLCJkYXRhIiwianNvbiIsIm9rIiwiZXJyb3JfZGVzY3JpcHRpb24iLCJyZXN1bHQiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVzX2luIiwiZXhwaXJlc0F0IiwiRGF0ZSIsIm5vdyIsImNvbnNvbGUiLCJmb3JtYXRXb3Jrb3V0Q2FwdGlvbiIsInBvc3QiLCJjYXB0aW9uIiwid29ya291dERhdGEiLCJleGVyY2lzZSIsInNldHMiLCJyZXBzIiwid2VpZ2h0IiwiZHVyYXRpb24iLCJoYXNodGFncyIsImxlbmd0aCIsIm1hcCIsInRhZyIsImRlZmF1bHRIYXNodGFncyIsInNoYXJlVG9JbnN0YWdyYW0iLCJjb250YWluZXJSZXNwb25zZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJpbWFnZV91cmwiLCJtZWRpYVR5cGUiLCJtZWRpYVVybCIsInVuZGVmaW5lZCIsInZpZGVvX3VybCIsIm1lZGlhX3R5cGUiLCJjb250YWluZXJEYXRhIiwibWVzc2FnZSIsInB1Ymxpc2hSZXNwb25zZSIsImNyZWF0aW9uX2lkIiwiaWQiLCJwdWJsaXNoRGF0YSIsInBvc3RJZCIsInNoYXJlVG9UaWtUb2siLCJwb3N0X2luZm8iLCJ0aXRsZSIsInN1YnN0cmluZyIsInByaXZhY3lfbGV2ZWwiLCJkaXNhYmxlX2R1ZXQiLCJkaXNhYmxlX2NvbW1lbnQiLCJkaXNhYmxlX3N0aXRjaCIsInZpZGVvX2NvdmVyX3RpbWVzdGFtcF9tcyIsInNvdXJjZV9pbmZvIiwic291cmNlIiwicHVibGlzaF9pZCIsInNoYXJlVG9Zb3VUdWJlIiwic25pcHBldCIsImRlc2NyaXB0aW9uIiwidGFncyIsImNhdGVnb3J5SWQiLCJzdGF0dXMiLCJwcml2YWN5U3RhdHVzIiwic2hhcmVUb0ZhY2Vib29rIiwicGFnZUlkIiwidXJsIiwicHVibGlzaGVkIiwiZ2V0UGxhdGZvcm1DYXBhYmlsaXRpZXMiLCJjYXBhYmlsaXRpZXMiLCJzdXBwb3J0c1Bob3RvIiwic3VwcG9ydHNWaWRlbyIsInJlcXVpcmVzQXV0aCIsImlzUGxhdGZvcm1Db25maWd1cmVkIiwiZ2V0QXZhaWxhYmxlUGxhdGZvcm1zIiwiT2JqZWN0Iiwia2V5cyIsImZpbHRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/core/integrations/social_media.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/socket/server.ts":
/*!***********************************!*\
  !*** ./src/core/socket/server.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SocketServer: () => (/* binding */ SocketServer),\n/* harmony export */   getSocketServer: () => (/* binding */ getSocketServer),\n/* harmony export */   initializeSocketServer: () => (/* binding */ initializeSocketServer)\n/* harmony export */ });\n/* harmony import */ var socket_io__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io */ \"(rsc)/./node_modules/socket.io/wrapper.mjs\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _services_moderation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/services/moderation */ \"(rsc)/./src/services/moderation/index.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_3__);\n/**\n * Socket.IO Server Configuration\n * Phase 4.2: Real-time communication server\n */ \n\n\n\nclass SocketServer {\n    io;\n    connectedUsers = new Map();\n    constructor(httpServer){\n        this.io = new socket_io__WEBPACK_IMPORTED_MODULE_0__.Server(httpServer, {\n            cors: {\n                origin:  false ? 0 : [\n                    'http://localhost:3000',\n                    'http://localhost:3001'\n                ],\n                methods: [\n                    'GET',\n                    'POST'\n                ],\n                credentials: true\n            },\n            transports: [\n                'websocket',\n                'polling'\n            ]\n        });\n        this.setupMiddleware();\n        this.setupEventHandlers();\n    }\n    setupMiddleware() {\n        // Authentication middleware\n        this.io.use(async (socket, next)=>{\n            try {\n                // const token = socket.handshake.auth.token; // unused\n                const userId = socket.handshake.auth.userId;\n                if (!userId) {\n                    throw new Error('User ID required');\n                }\n                // Verify user exists in database\n                const user = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.users.findUnique({\n                    where: {\n                        id: userId\n                    },\n                    select: {\n                        id: true,\n                        name: true,\n                        status: true\n                    }\n                });\n                if (!user || user.status !== 'ACTIVE') {\n                    throw new Error('Invalid or inactive user');\n                }\n                socket.userId = user.id;\n                socket.userName = user.name || 'Unknown User';\n                next();\n            } catch (error) {\n                console.error('Socket authentication error:', error);\n                next(new Error('Authentication failed'));\n            }\n        });\n    }\n    setupEventHandlers() {\n        this.io.on('connection', (socket)=>{\n            console.log(`User ${socket.userId} connected:`, socket.id);\n            // Track connected user\n            if (socket.userId) {\n                this.connectedUsers.set(socket.userId, socket.id);\n            }\n            // Chat event handlers\n            this.setupChatHandlers(socket);\n            // Live session event handlers\n            this.setupLiveSessionHandlers(socket);\n            // Workout progress event handlers\n            this.setupWorkoutProgressHandlers(socket);\n            // Video call event handlers\n            this.setupVideoCallHandlers(socket);\n            // Handle disconnection\n            socket.on('disconnect', (reason)=>{\n                console.log(`User ${socket.userId} disconnected:`, reason);\n                if (socket.userId) {\n                    this.connectedUsers.delete(socket.userId);\n                }\n            });\n        });\n    }\n    setupChatHandlers(socket) {\n        // Join chat room\n        socket.on('join_room', async ({ roomId })=>{\n            try {\n                // Verify user has access to this room\n                const hasAccess = await this.verifyRoomAccess(socket.userId, roomId);\n                if (!hasAccess) {\n                    socket.emit('error', {\n                        message: 'Access denied to this room'\n                    });\n                    return;\n                }\n                socket.join(roomId);\n                console.log(`User ${socket.userId} joined room ${roomId}`);\n                // Notify others in the room\n                socket.to(roomId).emit('user_joined', {\n                    userId: socket.userId,\n                    userName: socket.userName\n                });\n            } catch (error) {\n                console.error('Error joining room:', error);\n                socket.emit('error', {\n                    message: 'Failed to join room'\n                });\n            }\n        });\n        // Leave chat room\n        socket.on('leave_room', ({ roomId })=>{\n            socket.leave(roomId);\n            socket.to(roomId).emit('user_left', {\n                userId: socket.userId,\n                userName: socket.userName\n            });\n        });\n        // Send message\n        socket.on('send_message', async ({ roomId, content, type = 'text', metadata })=>{\n            try {\n                // Moderate content\n                const moderationResult = await (0,_services_moderation__WEBPACK_IMPORTED_MODULE_2__.moderateContent)(content);\n                if (moderationResult.flagged) {\n                    socket.emit('message_blocked', {\n                        reason: 'Content flagged by moderation system',\n                        flaggedReason: moderationResult.reason\n                    });\n                    return;\n                }\n                // Save message to database\n                const message = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.chat_messages.create({\n                    data: {\n                        id: (0,crypto__WEBPACK_IMPORTED_MODULE_3__.randomUUID)(),\n                        roomId,\n                        senderId: socket.userId,\n                        content: content,\n                        type,\n                        metadata\n                    },\n                    include: {\n                        users: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                });\n                // Broadcast message to room\n                this.io.to(roomId).emit('message', {\n                    id: message.id,\n                    roomId,\n                    content: message.content,\n                    senderId: message.senderId,\n                    senderName: message.users?.name,\n                    timestamp: message.createdAt.getTime(),\n                    type: message.type,\n                    metadata: message.metadata\n                });\n                // Send push notifications to offline users\n                await this.sendMessageNotifications(roomId, message, socket.userId);\n            } catch (error) {\n                console.error('Error sending message:', error);\n                socket.emit('error', {\n                    message: 'Failed to send message'\n                });\n            }\n        });\n        // Typing indicators\n        socket.on('typing', ({ roomId, isTyping })=>{\n            socket.to(roomId).emit('typing', {\n                roomId,\n                userId: socket.userId,\n                userName: socket.userName,\n                isTyping\n            });\n        });\n    }\n    setupLiveSessionHandlers(socket) {\n        // Join live workout session\n        socket.on('join_session', async ({ sessionId })=>{\n            try {\n                // Verify user has access to this session\n                const hasAccess = await this.verifySessionAccess(socket.userId, sessionId);\n                if (!hasAccess) {\n                    socket.emit('error', {\n                        message: 'Access denied to this session'\n                    });\n                    return;\n                }\n                socket.join(`session_${sessionId}`);\n                // Get current session participants\n                const room = this.io.sockets.adapter.rooms.get(`session_${sessionId}`);\n                const participants = await this.getSessionParticipants(sessionId, room);\n                // Broadcast participant joined\n                this.io.to(`session_${sessionId}`).emit('participant_joined', {\n                    sessionId,\n                    participants,\n                    newParticipant: {\n                        userId: socket.userId,\n                        userName: socket.userName\n                    }\n                });\n            } catch (error) {\n                console.error('Error joining session:', error);\n                socket.emit('error', {\n                    message: 'Failed to join session'\n                });\n            }\n        });\n        // Leave live session\n        socket.on('leave_session', async ({ sessionId })=>{\n            socket.leave(`session_${sessionId}`);\n            const room = this.io.sockets.adapter.rooms.get(`session_${sessionId}`);\n            const participants = await this.getSessionParticipants(sessionId, room);\n            socket.to(`session_${sessionId}`).emit('participant_left', {\n                sessionId,\n                participants,\n                leftParticipant: {\n                    userId: socket.userId,\n                    userName: socket.userName\n                }\n            });\n        });\n        // Update session state\n        socket.on('session_update', ({ sessionId, update })=>{\n            socket.to(`session_${sessionId}`).emit('session_update', {\n                sessionId,\n                update,\n                updatedBy: {\n                    userId: socket.userId,\n                    userName: socket.userName\n                }\n            });\n        });\n    }\n    setupWorkoutProgressHandlers(socket) {\n        // Real-time workout progress sharing\n        socket.on('workout_progress', async ({ sessionId, progress })=>{\n            try {\n                // Save progress to database\n                await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.workout_progress.upsert({\n                    where: {\n                        userId_sessionId: {\n                            userId: socket.userId,\n                            sessionId\n                        }\n                    },\n                    update: {\n                        progress,\n                        updatedAt: new Date()\n                    },\n                    create: {\n                        id: (0,crypto__WEBPACK_IMPORTED_MODULE_3__.randomUUID)(),\n                        userId: socket.userId,\n                        sessionId,\n                        progress,\n                        updatedAt: new Date()\n                    }\n                });\n                // Broadcast progress update\n                this.io.to(`session_${sessionId}`).emit('workout_progress', {\n                    sessionId,\n                    userId: socket.userId,\n                    userName: socket.userName,\n                    progress,\n                    timestamp: Date.now()\n                });\n            } catch (error) {\n                console.error('Error updating workout progress:', error);\n                socket.emit('error', {\n                    message: 'Failed to update progress'\n                });\n            }\n        });\n        // Heart rate and biometric updates\n        socket.on('biometric_update', ({ sessionId, data })=>{\n            socket.to(`session_${sessionId}`).emit('biometric_update', {\n                sessionId,\n                userId: socket.userId,\n                userName: socket.userName,\n                data,\n                timestamp: Date.now()\n            });\n        });\n    }\n    async verifyRoomAccess(userId, roomId) {\n        try {\n            const participant = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.chat_room_participants.findFirst({\n                where: {\n                    roomId,\n                    userId,\n                    isActive: true\n                }\n            });\n            return !!participant;\n        } catch (error) {\n            console.error('Error verifying room access:', error);\n            return false;\n        }\n    }\n    async verifySessionAccess(userId, sessionId) {\n        try {\n            const session = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.live_workout_sessions.findFirst({\n                where: {\n                    id: sessionId,\n                    OR: [\n                        {\n                            trainerId: userId\n                        },\n                        {\n                            live_session_participants: {\n                                some: {\n                                    userId\n                                }\n                            }\n                        }\n                    ]\n                }\n            });\n            return !!session;\n        } catch (error) {\n            console.error('Error verifying session access:', error);\n            return false;\n        }\n    }\n    async getSessionParticipants(sessionId, room) {\n        // Get participants from database and merge with online users\n        const dbParticipants = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.live_session_participants.findMany({\n            where: {\n                sessionId\n            },\n            include: {\n                users: {\n                    select: {\n                        id: true,\n                        name: true\n                    }\n                }\n            }\n        });\n        return dbParticipants.map((p)=>({\n                userId: p.userId,\n                userName: p.users?.name || 'Unknown',\n                isOnline: room ? this.connectedUsers.has(p.userId) : false\n            }));\n    }\n    async sendMessageNotifications(roomId, message, senderId) {\n        try {\n            // Get room participants excluding the sender\n            const roomParticipants = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.chat_room_participants.findMany({\n                where: {\n                    roomId,\n                    userId: {\n                        not: senderId\n                    }\n                },\n                include: {\n                    users: {\n                        include: {\n                            device_tokens: {\n                                where: {\n                                    isActive: true\n                                }\n                            }\n                        }\n                    }\n                }\n            });\n            // Send push notifications to offline users\n            for (const participant of roomParticipants){\n                const isOnline = this.connectedUsers.has(participant.userId);\n                if (!isOnline && participant.users.device_tokens.length > 0) {\n                    // Send push notification to each device\n                    for (const deviceToken of participant.users.device_tokens){\n                        try {\n                            await this.sendPushNotification(deviceToken.token, {\n                                title: `Message from ${message.users?.name}`,\n                                body: message.content.length > 100 ? message.content.substring(0, 100) + '...' : message.content,\n                                data: {\n                                    type: 'message',\n                                    roomId,\n                                    messageId: message.id\n                                }\n                            });\n                        } catch (error) {\n                            console.error(`Failed to send push notification to ${deviceToken.token}:`, error);\n                        }\n                    }\n                }\n            }\n        } catch (error) {\n            console.error('Error sending message notifications:', error);\n        }\n    }\n    async sendPushNotification(deviceToken, notification) {\n        // For Expo push notifications\n        const message = {\n            to: deviceToken,\n            sound: 'default',\n            title: notification.title,\n            body: notification.body,\n            data: notification.data,\n            badge: 1\n        };\n        try {\n            const response = await fetch('https://exp.host/--/api/v2/push/send', {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Accept-encoding': 'gzip, deflate',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(message)\n            });\n            const result = await response.json();\n            if (!response.ok || result.errors) {\n                throw new Error(`Push notification failed: ${JSON.stringify(result)}`);\n            }\n            console.log('Push notification sent successfully:', result);\n        } catch (error) {\n            console.error('Failed to send push notification:', error);\n            throw error;\n        }\n    }\n    setupVideoCallHandlers(socket) {\n        // Join video call\n        socket.on('join_video_call', async ({ sessionId, isTrainer })=>{\n            try {\n                // Verify access to session\n                const hasAccess = await this.verifySessionAccess(socket.userId, sessionId);\n                if (!hasAccess) {\n                    socket.emit('error', {\n                        message: 'Access denied to this session'\n                    });\n                    return;\n                }\n                const callRoom = `call_${sessionId}`;\n                socket.join(callRoom);\n                console.log(`User ${socket.userId} joined video call for session ${sessionId}`);\n                // Notify others in the call\n                socket.to(callRoom).emit('user_joined_call', {\n                    userId: socket.userId,\n                    userName: socket.userName,\n                    isTrainer\n                });\n                // Send list of current call participants to the new user\n                const room = this.io.sockets.adapter.rooms.get(callRoom);\n                if (room) {\n                    const participants = await this.getCallParticipants(sessionId, room);\n                    socket.emit('call_participants', {\n                        participants\n                    });\n                }\n            } catch (error) {\n                console.error('Error joining video call:', error);\n                socket.emit('error', {\n                    message: 'Failed to join video call'\n                });\n            }\n        });\n        // Leave video call\n        socket.on('leave_video_call', ({ sessionId })=>{\n            const callRoom = `call_${sessionId}`;\n            socket.leave(callRoom);\n            socket.to(callRoom).emit('user_left_call', {\n                userId: socket.userId,\n                userName: socket.userName\n            });\n            console.log(`User ${socket.userId} left video call for session ${sessionId}`);\n        });\n        // WebRTC signaling - offer\n        socket.on('video_offer', ({ sessionId, to, offer })=>{\n            socket.to(`call_${sessionId}`).emit('video_offer', {\n                from: socket.userId,\n                fromName: socket.userName,\n                to,\n                offer\n            });\n        });\n        // WebRTC signaling - answer\n        socket.on('video_answer', ({ sessionId, to, answer })=>{\n            socket.to(`call_${sessionId}`).emit('video_answer', {\n                from: socket.userId,\n                fromName: socket.userName,\n                to,\n                answer\n            });\n        });\n        // WebRTC signaling - ICE candidate\n        socket.on('ice_candidate', ({ sessionId, to, candidate })=>{\n            socket.to(`call_${sessionId}`).emit('ice_candidate', {\n                from: socket.userId,\n                fromName: socket.userName,\n                to,\n                candidate\n            });\n        });\n        // Media state changes (mute/unmute, video on/off)\n        socket.on('media_state_change', ({ sessionId, isAudioEnabled, isVideoEnabled })=>{\n            socket.to(`call_${sessionId}`).emit('user_media_state', {\n                userId: socket.userId,\n                userName: socket.userName,\n                isAudioEnabled,\n                isVideoEnabled\n            });\n        });\n        // Screen sharing (for trainer demonstrations)\n        socket.on('start_screen_share', ({ sessionId })=>{\n            socket.to(`call_${sessionId}`).emit('screen_share_started', {\n                userId: socket.userId,\n                userName: socket.userName\n            });\n        });\n        socket.on('stop_screen_share', ({ sessionId })=>{\n            socket.to(`call_${sessionId}`).emit('screen_share_stopped', {\n                userId: socket.userId,\n                userName: socket.userName\n            });\n        });\n    }\n    async getCallParticipants(sessionId, room) {\n        try {\n            // Get session participants who are currently in the call\n            const sessionParticipants = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.live_session_participants.findMany({\n                where: {\n                    sessionId\n                },\n                include: {\n                    users: {\n                        select: {\n                            id: true,\n                            name: true,\n                            image: true\n                        }\n                    }\n                }\n            });\n            // Also include trainer\n            const session = await _database__WEBPACK_IMPORTED_MODULE_1__.prisma.live_workout_sessions.findUnique({\n                where: {\n                    id: sessionId\n                },\n                include: {\n                    users: {\n                        select: {\n                            id: true,\n                            name: true,\n                            image: true\n                        }\n                    }\n                }\n            });\n            const allParticipants = [\n                ...sessionParticipants\n            ];\n            if (session) {\n                allParticipants.push({\n                    users: session.users,\n                    userId: session.trainerId,\n                    sessionId,\n                    joinedAt: new Date(),\n                    id: `trainer_${session.trainerId}`,\n                    isActive: true,\n                    leftAt: null\n                });\n            }\n            // Filter to only those currently in the call room\n            return allParticipants.filter((p)=>room ? this.connectedUsers.has(p.userId) : false).map((p)=>({\n                    userId: p.userId,\n                    userName: p.users?.name || 'Unknown',\n                    image: p.users?.image,\n                    isTrainer: p.userId === session?.trainerId,\n                    isOnline: true\n                }));\n        } catch (error) {\n            console.error('Error getting call participants:', error);\n            return [];\n        }\n    }\n    // Public methods for external use\n    sendToUser(userId, event, data) {\n        const socketId = this.connectedUsers.get(userId);\n        if (socketId) {\n            this.io.to(socketId).emit(event, data);\n        }\n    }\n    sendToRoom(roomId, event, data) {\n        this.io.to(roomId).emit(event, data);\n    }\n    getUsersInRoom(roomId) {\n        const room = this.io.sockets.adapter.rooms.get(roomId);\n        return room ? Array.from(room) : [];\n    }\n    getConnectedUserCount() {\n        return this.connectedUsers.size;\n    }\n}\n// Export singleton instance\nlet socketServer = null;\nconst initializeSocketServer = (httpServer)=>{\n    if (!socketServer) {\n        socketServer = new SocketServer(httpServer);\n    }\n    return socketServer;\n};\nconst getSocketServer = ()=>{\n    return socketServer;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RXhGLElBQVMsRUFBRTtRQUMxRCxNQUFNeUYsV0FBVyxJQUFJLENBQUMvSSxjQUFjLENBQUNxRSxHQUFHLENBQUN2RDtRQUN6QyxJQUFJaUksVUFBVTtZQUNaLElBQUksQ0FBQ2hKLEVBQUUsQ0FBQzZDLEVBQUUsQ0FBQ21HLFVBQVV0RyxJQUFJLENBQUNxRyxPQUFPeEY7UUFDbkM7SUFDRjtJQUVPMEYsV0FBVzFHLE1BQWMsRUFBRXdHLEtBQWEsRUFBRXhGLElBQVMsRUFBRTtRQUMxRCxJQUFJLENBQUN2RCxFQUFFLENBQUM2QyxFQUFFLENBQUNOLFFBQVFHLElBQUksQ0FBQ3FHLE9BQU94RjtJQUNqQztJQUVPMkYsZUFBZTNHLE1BQWMsRUFBWTtRQUM5QyxNQUFNMkIsT0FBTyxJQUFJLENBQUNsRSxFQUFFLENBQUNtRSxPQUFPLENBQUNDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDQyxHQUFHLENBQUMvQjtRQUMvQyxPQUFPMkIsT0FBT2lGLE1BQU1sQixJQUFJLENBQUMvRCxRQUFRLEVBQUU7SUFDckM7SUFFT2tGLHdCQUFnQztRQUNyQyxPQUFPLElBQUksQ0FBQ25KLGNBQWMsQ0FBQ29KLElBQUk7SUFDakM7QUFDRjtBQUVBLDRCQUE0QjtBQUM1QixJQUFJQyxlQUFvQztBQUVqQyxNQUFNQyx5QkFBeUIsQ0FBQ3BKO0lBQ3JDLElBQUksQ0FBQ21KLGNBQWM7UUFDakJBLGVBQWUsSUFBSXZKLGFBQWFJO0lBQ2xDO0lBQ0EsT0FBT21KO0FBQ1QsRUFBRTtBQUVLLE1BQU1FLGtCQUFrQjtJQUM3QixPQUFPRjtBQUNULEVBQUUiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvY29yZS9zb2NrZXQvc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU29ja2V0LklPIFNlcnZlciBDb25maWd1cmF0aW9uXG4gKiBQaGFzZSA0LjI6IFJlYWwtdGltZSBjb21tdW5pY2F0aW9uIHNlcnZlclxuICovXG5cbmltcG9ydCB7IFNlcnZlciBhcyBIVFRQU2VydmVyIH0gZnJvbSAnaHR0cCc7XG5pbXBvcnQgeyBTZXJ2ZXIgYXMgU29ja2V0SU9TZXJ2ZXIsIFNvY2tldCB9IGZyb20gJ3NvY2tldC5pbyc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICcuLi9kYXRhYmFzZSc7XG5pbXBvcnQgeyBtb2RlcmF0ZUNvbnRlbnQgfSBmcm9tICdAL3NlcnZpY2VzL21vZGVyYXRpb24nO1xuaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gJ2NyeXB0byc7XG5cbmludGVyZmFjZSBBdXRoZW50aWNhdGVkU29ja2V0IGV4dGVuZHMgU29ja2V0IHtcbiAgdXNlcklkPzogc3RyaW5nO1xuICB1c2VyTmFtZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFNvY2tldFNlcnZlciB7XG4gIHByaXZhdGUgaW86IFNvY2tldElPU2VydmVyO1xuICBwcml2YXRlIGNvbm5lY3RlZFVzZXJzOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcCgpOyAvLyB1c2VySWQgLT4gc29ja2V0SWRcblxuICBjb25zdHJ1Y3RvcihodHRwU2VydmVyOiBIVFRQU2VydmVyKSB7XG4gICAgdGhpcy5pbyA9IG5ldyBTb2NrZXRJT1NlcnZlcihodHRwU2VydmVyLCB7XG4gICAgICBjb3JzOiB7XG4gICAgICAgIG9yaWdpbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJ1xuICAgICAgICAgID8gWydodHRwczovL21hc3NpbWluby5hcHAnXVxuICAgICAgICAgIDogWydodHRwOi8vbG9jYWxob3N0OjMwMDAnLCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJ10sXG4gICAgICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnXSxcbiAgICAgICAgY3JlZGVudGlhbHM6IHRydWUsXG4gICAgICB9LFxuICAgICAgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnLCAncG9sbGluZyddLFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXR1cE1pZGRsZXdhcmUoKTtcbiAgICB0aGlzLnNldHVwRXZlbnRIYW5kbGVycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cE1pZGRsZXdhcmUoKSB7XG4gICAgLy8gQXV0aGVudGljYXRpb24gbWlkZGxld2FyZVxuICAgIHRoaXMuaW8udXNlKGFzeW5jIChzb2NrZXQ6IEF1dGhlbnRpY2F0ZWRTb2NrZXQsIG5leHQpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGNvbnN0IHRva2VuID0gc29ja2V0LmhhbmRzaGFrZS5hdXRoLnRva2VuOyAvLyB1bnVzZWRcbiAgICAgICAgY29uc3QgdXNlcklkID0gc29ja2V0LmhhbmRzaGFrZS5hdXRoLnVzZXJJZDtcblxuICAgICAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVXNlciBJRCByZXF1aXJlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmVyaWZ5IHVzZXIgZXhpc3RzIGluIGRhdGFiYXNlXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlcnMuZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSwgc3RhdHVzOiB0cnVlIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlciB8fCB1c2VyLnN0YXR1cyAhPT0gJ0FDVElWRScpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgb3IgaW5hY3RpdmUgdXNlcicpO1xuICAgICAgICB9XG5cbiAgICAgICAgc29ja2V0LnVzZXJJZCA9IHVzZXIuaWQ7XG4gICAgICAgIHNvY2tldC51c2VyTmFtZSA9IHVzZXIubmFtZSB8fCAnVW5rbm93biBVc2VyJztcblxuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTb2NrZXQgYXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBuZXh0KG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZmFpbGVkJykpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgdGhpcy5pby5vbignY29ubmVjdGlvbicsIChzb2NrZXQ6IEF1dGhlbnRpY2F0ZWRTb2NrZXQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7c29ja2V0LnVzZXJJZH0gY29ubmVjdGVkOmAsIHNvY2tldC5pZCk7XG5cbiAgICAgIC8vIFRyYWNrIGNvbm5lY3RlZCB1c2VyXG4gICAgICBpZiAoc29ja2V0LnVzZXJJZCkge1xuICAgICAgICB0aGlzLmNvbm5lY3RlZFVzZXJzLnNldChzb2NrZXQudXNlcklkLCBzb2NrZXQuaWQpO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGF0IGV2ZW50IGhhbmRsZXJzXG4gICAgICB0aGlzLnNldHVwQ2hhdEhhbmRsZXJzKHNvY2tldCk7XG5cbiAgICAgIC8vIExpdmUgc2Vzc2lvbiBldmVudCBoYW5kbGVyc1xuICAgICAgdGhpcy5zZXR1cExpdmVTZXNzaW9uSGFuZGxlcnMoc29ja2V0KTtcblxuICAgICAgLy8gV29ya291dCBwcm9ncmVzcyBldmVudCBoYW5kbGVyc1xuICAgICAgdGhpcy5zZXR1cFdvcmtvdXRQcm9ncmVzc0hhbmRsZXJzKHNvY2tldCk7XG5cbiAgICAgIC8vIFZpZGVvIGNhbGwgZXZlbnQgaGFuZGxlcnNcbiAgICAgIHRoaXMuc2V0dXBWaWRlb0NhbGxIYW5kbGVycyhzb2NrZXQpO1xuXG4gICAgICAvLyBIYW5kbGUgZGlzY29ubmVjdGlvblxuICAgICAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKHJlYXNvbikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3NvY2tldC51c2VySWR9IGRpc2Nvbm5lY3RlZDpgLCByZWFzb24pO1xuICAgICAgICBpZiAoc29ja2V0LnVzZXJJZCkge1xuICAgICAgICAgIHRoaXMuY29ubmVjdGVkVXNlcnMuZGVsZXRlKHNvY2tldC51c2VySWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBDaGF0SGFuZGxlcnMoc29ja2V0OiBBdXRoZW50aWNhdGVkU29ja2V0KSB7XG4gICAgLy8gSm9pbiBjaGF0IHJvb21cbiAgICBzb2NrZXQub24oJ2pvaW5fcm9vbScsIGFzeW5jICh7IHJvb21JZCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgdXNlciBoYXMgYWNjZXNzIHRvIHRoaXMgcm9vbVxuICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSBhd2FpdCB0aGlzLnZlcmlmeVJvb21BY2Nlc3Moc29ja2V0LnVzZXJJZCEsIHJvb21JZCk7XG4gICAgICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnQWNjZXNzIGRlbmllZCB0byB0aGlzIHJvb20nIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvY2tldC5qb2luKHJvb21JZCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBVc2VyICR7c29ja2V0LnVzZXJJZH0gam9pbmVkIHJvb20gJHtyb29tSWR9YCk7XG5cbiAgICAgICAgLy8gTm90aWZ5IG90aGVycyBpbiB0aGUgcm9vbVxuICAgICAgICBzb2NrZXQudG8ocm9vbUlkKS5lbWl0KCd1c2VyX2pvaW5lZCcsIHtcbiAgICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgICAgdXNlck5hbWU6IHNvY2tldC51c2VyTmFtZSxcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBqb2luaW5nIHJvb206JywgZXJyb3IpO1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiByb29tJyB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExlYXZlIGNoYXQgcm9vbVxuICAgIHNvY2tldC5vbignbGVhdmVfcm9vbScsICh7IHJvb21JZCB9KSA9PiB7XG4gICAgICBzb2NrZXQubGVhdmUocm9vbUlkKTtcbiAgICAgIHNvY2tldC50byhyb29tSWQpLmVtaXQoJ3VzZXJfbGVmdCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICB1c2VyTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBTZW5kIG1lc3NhZ2VcbiAgICBzb2NrZXQub24oJ3NlbmRfbWVzc2FnZScsIGFzeW5jICh7IHJvb21JZCwgY29udGVudCwgdHlwZSA9ICd0ZXh0JywgbWV0YWRhdGEgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTW9kZXJhdGUgY29udGVudFxuICAgICAgICBjb25zdCBtb2RlcmF0aW9uUmVzdWx0ID0gYXdhaXQgbW9kZXJhdGVDb250ZW50KGNvbnRlbnQpO1xuXG4gICAgICAgIGlmIChtb2RlcmF0aW9uUmVzdWx0LmZsYWdnZWQpIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnbWVzc2FnZV9ibG9ja2VkJywge1xuICAgICAgICAgICAgcmVhc29uOiAnQ29udGVudCBmbGFnZ2VkIGJ5IG1vZGVyYXRpb24gc3lzdGVtJyxcbiAgICAgICAgICAgIGZsYWdnZWRSZWFzb246IG1vZGVyYXRpb25SZXN1bHQucmVhc29uLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhdmUgbWVzc2FnZSB0byBkYXRhYmFzZVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgcHJpc21hLmNoYXRfbWVzc2FnZXMuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogcmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgcm9vbUlkLFxuICAgICAgICAgICAgc2VuZGVySWQ6IHNvY2tldC51c2VySWQhLFxuICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBtZXRhZGF0YSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIHVzZXJzOiB7XG4gICAgICAgICAgICAgIHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCcm9hZGNhc3QgbWVzc2FnZSB0byByb29tXG4gICAgICAgIHRoaXMuaW8udG8ocm9vbUlkKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgIGlkOiBtZXNzYWdlLmlkLFxuICAgICAgICAgIHJvb21JZCxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQsXG4gICAgICAgICAgc2VuZGVySWQ6IG1lc3NhZ2Uuc2VuZGVySWQsXG4gICAgICAgICAgc2VuZGVyTmFtZTogbWVzc2FnZS51c2Vycz8ubmFtZSxcbiAgICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UuY3JlYXRlZEF0LmdldFRpbWUoKSxcbiAgICAgICAgICB0eXBlOiBtZXNzYWdlLnR5cGUsXG4gICAgICAgICAgbWV0YWRhdGE6IG1lc3NhZ2UubWV0YWRhdGEsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNlbmQgcHVzaCBub3RpZmljYXRpb25zIHRvIG9mZmxpbmUgdXNlcnNcbiAgICAgICAgYXdhaXQgdGhpcy5zZW5kTWVzc2FnZU5vdGlmaWNhdGlvbnMocm9vbUlkLCBtZXNzYWdlLCBzb2NrZXQudXNlcklkISk7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBzZW5kIG1lc3NhZ2UnIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gVHlwaW5nIGluZGljYXRvcnNcbiAgICBzb2NrZXQub24oJ3R5cGluZycsICh7IHJvb21JZCwgaXNUeXBpbmcgfSkgPT4ge1xuICAgICAgc29ja2V0LnRvKHJvb21JZCkuZW1pdCgndHlwaW5nJywge1xuICAgICAgICByb29tSWQsXG4gICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgdXNlck5hbWU6IHNvY2tldC51c2VyTmFtZSxcbiAgICAgICAgaXNUeXBpbmcsXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBMaXZlU2Vzc2lvbkhhbmRsZXJzKHNvY2tldDogQXV0aGVudGljYXRlZFNvY2tldCkge1xuICAgIC8vIEpvaW4gbGl2ZSB3b3Jrb3V0IHNlc3Npb25cbiAgICBzb2NrZXQub24oJ2pvaW5fc2Vzc2lvbicsIGFzeW5jICh7IHNlc3Npb25JZCB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgdXNlciBoYXMgYWNjZXNzIHRvIHRoaXMgc2Vzc2lvblxuICAgICAgICBjb25zdCBoYXNBY2Nlc3MgPSBhd2FpdCB0aGlzLnZlcmlmeVNlc3Npb25BY2Nlc3Moc29ja2V0LnVzZXJJZCEsIHNlc3Npb25JZCk7XG4gICAgICAgIGlmICghaGFzQWNjZXNzKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnQWNjZXNzIGRlbmllZCB0byB0aGlzIHNlc3Npb24nIH0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvY2tldC5qb2luKGBzZXNzaW9uXyR7c2Vzc2lvbklkfWApO1xuXG4gICAgICAgIC8vIEdldCBjdXJyZW50IHNlc3Npb24gcGFydGljaXBhbnRzXG4gICAgICAgIGNvbnN0IHJvb20gPSB0aGlzLmlvLnNvY2tldHMuYWRhcHRlci5yb29tcy5nZXQoYHNlc3Npb25fJHtzZXNzaW9uSWR9YCk7XG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvblBhcnRpY2lwYW50cyhzZXNzaW9uSWQsIHJvb20pO1xuXG4gICAgICAgIC8vIEJyb2FkY2FzdCBwYXJ0aWNpcGFudCBqb2luZWRcbiAgICAgICAgdGhpcy5pby50byhgc2Vzc2lvbl8ke3Nlc3Npb25JZH1gKS5lbWl0KCdwYXJ0aWNpcGFudF9qb2luZWQnLCB7XG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIHBhcnRpY2lwYW50cyxcbiAgICAgICAgICBuZXdQYXJ0aWNpcGFudDoge1xuICAgICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICAgICAgdXNlck5hbWU6IHNvY2tldC51c2VyTmFtZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igam9pbmluZyBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGpvaW4gc2Vzc2lvbicgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMZWF2ZSBsaXZlIHNlc3Npb25cbiAgICBzb2NrZXQub24oJ2xlYXZlX3Nlc3Npb24nLCBhc3luYyAoeyBzZXNzaW9uSWQgfSkgPT4ge1xuICAgICAgc29ja2V0LmxlYXZlKGBzZXNzaW9uXyR7c2Vzc2lvbklkfWApO1xuXG4gICAgICBjb25zdCByb29tID0gdGhpcy5pby5zb2NrZXRzLmFkYXB0ZXIucm9vbXMuZ2V0KGBzZXNzaW9uXyR7c2Vzc2lvbklkfWApO1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gYXdhaXQgdGhpcy5nZXRTZXNzaW9uUGFydGljaXBhbnRzKHNlc3Npb25JZCwgcm9vbSk7XG5cbiAgICAgIHNvY2tldC50byhgc2Vzc2lvbl8ke3Nlc3Npb25JZH1gKS5lbWl0KCdwYXJ0aWNpcGFudF9sZWZ0Jywge1xuICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgIHBhcnRpY2lwYW50cyxcbiAgICAgICAgbGVmdFBhcnRpY2lwYW50OiB7XG4gICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICAgIHVzZXJOYW1lOiBzb2NrZXQudXNlck5hbWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFVwZGF0ZSBzZXNzaW9uIHN0YXRlXG4gICAgc29ja2V0Lm9uKCdzZXNzaW9uX3VwZGF0ZScsICh7IHNlc3Npb25JZCwgdXBkYXRlIH0pID0+IHtcbiAgICAgIHNvY2tldC50byhgc2Vzc2lvbl8ke3Nlc3Npb25JZH1gKS5lbWl0KCdzZXNzaW9uX3VwZGF0ZScsIHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICB1cGRhdGUsXG4gICAgICAgIHVwZGF0ZWRCeToge1xuICAgICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgICB1c2VyTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNldHVwV29ya291dFByb2dyZXNzSGFuZGxlcnMoc29ja2V0OiBBdXRoZW50aWNhdGVkU29ja2V0KSB7XG4gICAgLy8gUmVhbC10aW1lIHdvcmtvdXQgcHJvZ3Jlc3Mgc2hhcmluZ1xuICAgIHNvY2tldC5vbignd29ya291dF9wcm9ncmVzcycsIGFzeW5jICh7IHNlc3Npb25JZCwgcHJvZ3Jlc3MgfSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gU2F2ZSBwcm9ncmVzcyB0byBkYXRhYmFzZVxuICAgICAgICBhd2FpdCBwcmlzbWEud29ya291dF9wcm9ncmVzcy51cHNlcnQoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICB1c2VySWRfc2Vzc2lvbklkOiB7XG4gICAgICAgICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCEsXG4gICAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgIHByb2dyZXNzLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgICBpZDogcmFuZG9tVVVJRCgpLFxuICAgICAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkISxcbiAgICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICAgIHByb2dyZXNzLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJyb2FkY2FzdCBwcm9ncmVzcyB1cGRhdGVcbiAgICAgICAgdGhpcy5pby50byhgc2Vzc2lvbl8ke3Nlc3Npb25JZH1gKS5lbWl0KCd3b3Jrb3V0X3Byb2dyZXNzJywge1xuICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgICAgdXNlck5hbWU6IHNvY2tldC51c2VyTmFtZSxcbiAgICAgICAgICBwcm9ncmVzcyxcbiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB3b3Jrb3V0IHByb2dyZXNzOicsIGVycm9yKTtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHVwZGF0ZSBwcm9ncmVzcycgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBIZWFydCByYXRlIGFuZCBiaW9tZXRyaWMgdXBkYXRlc1xuICAgIHNvY2tldC5vbignYmlvbWV0cmljX3VwZGF0ZScsICh7IHNlc3Npb25JZCwgZGF0YSB9KSA9PiB7XG4gICAgICBzb2NrZXQudG8oYHNlc3Npb25fJHtzZXNzaW9uSWR9YCkuZW1pdCgnYmlvbWV0cmljX3VwZGF0ZScsIHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIHVzZXJOYW1lOiBzb2NrZXQudXNlck5hbWUsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2ZXJpZnlSb29tQWNjZXNzKHVzZXJJZDogc3RyaW5nLCByb29tSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IGF3YWl0IHByaXNtYS5jaGF0X3Jvb21fcGFydGljaXBhbnRzLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcm9vbUlkLFxuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBpc0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICEhcGFydGljaXBhbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyByb29tIGFjY2VzczonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyB2ZXJpZnlTZXNzaW9uQWNjZXNzKHVzZXJJZDogc3RyaW5nLCBzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgcHJpc21hLmxpdmVfd29ya291dF9zZXNzaW9ucy5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIHsgdHJhaW5lcklkOiB1c2VySWQgfSxcbiAgICAgICAgICAgIHsgbGl2ZV9zZXNzaW9uX3BhcnRpY2lwYW50czogeyBzb21lOiB7IHVzZXJJZCB9IH0gfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gISFzZXNzaW9uO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2ZXJpZnlpbmcgc2Vzc2lvbiBhY2Nlc3M6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgZ2V0U2Vzc2lvblBhcnRpY2lwYW50cyhzZXNzaW9uSWQ6IHN0cmluZywgcm9vbT86IFNldDxzdHJpbmc+KSB7XG4gICAgLy8gR2V0IHBhcnRpY2lwYW50cyBmcm9tIGRhdGFiYXNlIGFuZCBtZXJnZSB3aXRoIG9ubGluZSB1c2Vyc1xuICAgIGNvbnN0IGRiUGFydGljaXBhbnRzID0gYXdhaXQgcHJpc21hLmxpdmVfc2Vzc2lvbl9wYXJ0aWNpcGFudHMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgc2Vzc2lvbklkIH0sXG4gICAgICBpbmNsdWRlOiB7IHVzZXJzOiB7IHNlbGVjdDogeyBpZDogdHJ1ZSwgbmFtZTogdHJ1ZSB9IH0gfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBkYlBhcnRpY2lwYW50cy5tYXAoKHA6IHsgdXNlcklkOiBzdHJpbmc7IHVzZXJzOiB7IG5hbWU6IHN0cmluZyB8IG51bGwgfSB9KSA9PiAoe1xuICAgICAgdXNlcklkOiBwLnVzZXJJZCxcbiAgICAgIHVzZXJOYW1lOiBwLnVzZXJzPy5uYW1lIHx8ICdVbmtub3duJyxcbiAgICAgIGlzT25saW5lOiByb29tID8gdGhpcy5jb25uZWN0ZWRVc2Vycy5oYXMocC51c2VySWQpIDogZmFsc2UsXG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzZW5kTWVzc2FnZU5vdGlmaWNhdGlvbnMocm9vbUlkOiBzdHJpbmcsIG1lc3NhZ2U6IGFueSwgc2VuZGVySWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgcm9vbSBwYXJ0aWNpcGFudHMgZXhjbHVkaW5nIHRoZSBzZW5kZXJcbiAgICAgIGNvbnN0IHJvb21QYXJ0aWNpcGFudHMgPSBhd2FpdCBwcmlzbWEuY2hhdF9yb29tX3BhcnRpY2lwYW50cy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgcm9vbUlkLFxuICAgICAgICAgIHVzZXJJZDogeyBub3Q6IHNlbmRlcklkIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2Vyczoge1xuICAgICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgICBkZXZpY2VfdG9rZW5zOiB7XG4gICAgICAgICAgICAgICAgd2hlcmU6IHsgaXNBY3RpdmU6IHRydWUgfSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZW5kIHB1c2ggbm90aWZpY2F0aW9ucyB0byBvZmZsaW5lIHVzZXJzXG4gICAgICBmb3IgKGNvbnN0IHBhcnRpY2lwYW50IG9mIHJvb21QYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgY29uc3QgaXNPbmxpbmUgPSB0aGlzLmNvbm5lY3RlZFVzZXJzLmhhcyhwYXJ0aWNpcGFudC51c2VySWQpO1xuXG4gICAgICAgIGlmICghaXNPbmxpbmUgJiYgcGFydGljaXBhbnQudXNlcnMuZGV2aWNlX3Rva2Vucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gU2VuZCBwdXNoIG5vdGlmaWNhdGlvbiB0byBlYWNoIGRldmljZVxuICAgICAgICAgIGZvciAoY29uc3QgZGV2aWNlVG9rZW4gb2YgcGFydGljaXBhbnQudXNlcnMuZGV2aWNlX3Rva2Vucykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kUHVzaE5vdGlmaWNhdGlvbihkZXZpY2VUb2tlbi50b2tlbiwge1xuICAgICAgICAgICAgICAgIHRpdGxlOiBgTWVzc2FnZSBmcm9tICR7bWVzc2FnZS51c2Vycz8ubmFtZX1gLFxuICAgICAgICAgICAgICAgIGJvZHk6IG1lc3NhZ2UuY29udGVudC5sZW5ndGggPiAxMDBcbiAgICAgICAgICAgICAgICAgID8gbWVzc2FnZS5jb250ZW50LnN1YnN0cmluZygwLCAxMDApICsgJy4uLidcbiAgICAgICAgICAgICAgICAgIDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgIHJvb21JZCxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzZW5kIHB1c2ggbm90aWZpY2F0aW9uIHRvICR7ZGV2aWNlVG9rZW4udG9rZW59OmAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBtZXNzYWdlIG5vdGlmaWNhdGlvbnM6JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgc2VuZFB1c2hOb3RpZmljYXRpb24oZGV2aWNlVG9rZW46IHN0cmluZywgbm90aWZpY2F0aW9uOiB7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBib2R5OiBzdHJpbmc7XG4gICAgZGF0YT86IGFueTtcbiAgfSkge1xuICAgIC8vIEZvciBFeHBvIHB1c2ggbm90aWZpY2F0aW9uc1xuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICB0bzogZGV2aWNlVG9rZW4sXG4gICAgICBzb3VuZDogJ2RlZmF1bHQnLFxuICAgICAgdGl0bGU6IG5vdGlmaWNhdGlvbi50aXRsZSxcbiAgICAgIGJvZHk6IG5vdGlmaWNhdGlvbi5ib2R5LFxuICAgICAgZGF0YTogbm90aWZpY2F0aW9uLmRhdGEsXG4gICAgICBiYWRnZTogMSxcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vZXhwLmhvc3QvLS0vYXBpL3YyL3B1c2gvc2VuZCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnQWNjZXB0LWVuY29kaW5nJzogJ2d6aXAsIGRlZmxhdGUnLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vayB8fCByZXN1bHQuZXJyb3JzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUHVzaCBub3RpZmljYXRpb24gZmFpbGVkOiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdCl9YCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKCdQdXNoIG5vdGlmaWNhdGlvbiBzZW50IHN1Y2Nlc3NmdWxseTonLCByZXN1bHQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBwdXNoIG5vdGlmaWNhdGlvbjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNldHVwVmlkZW9DYWxsSGFuZGxlcnMoc29ja2V0OiBBdXRoZW50aWNhdGVkU29ja2V0KSB7XG4gICAgLy8gSm9pbiB2aWRlbyBjYWxsXG4gICAgc29ja2V0Lm9uKCdqb2luX3ZpZGVvX2NhbGwnLCBhc3luYyAoeyBzZXNzaW9uSWQsIGlzVHJhaW5lciB9KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZnkgYWNjZXNzIHRvIHNlc3Npb25cbiAgICAgICAgY29uc3QgaGFzQWNjZXNzID0gYXdhaXQgdGhpcy52ZXJpZnlTZXNzaW9uQWNjZXNzKHNvY2tldC51c2VySWQhLCBzZXNzaW9uSWQpO1xuICAgICAgICBpZiAoIWhhc0FjY2Vzcykge1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0FjY2VzcyBkZW5pZWQgdG8gdGhpcyBzZXNzaW9uJyB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsUm9vbSA9IGBjYWxsXyR7c2Vzc2lvbklkfWA7XG4gICAgICAgIHNvY2tldC5qb2luKGNhbGxSb29tKTtcblxuICAgICAgICBjb25zb2xlLmxvZyhgVXNlciAke3NvY2tldC51c2VySWR9IGpvaW5lZCB2aWRlbyBjYWxsIGZvciBzZXNzaW9uICR7c2Vzc2lvbklkfWApO1xuXG4gICAgICAgIC8vIE5vdGlmeSBvdGhlcnMgaW4gdGhlIGNhbGxcbiAgICAgICAgc29ja2V0LnRvKGNhbGxSb29tKS5lbWl0KCd1c2VyX2pvaW5lZF9jYWxsJywge1xuICAgICAgICAgIHVzZXJJZDogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgICB1c2VyTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgICAgIGlzVHJhaW5lcixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2VuZCBsaXN0IG9mIGN1cnJlbnQgY2FsbCBwYXJ0aWNpcGFudHMgdG8gdGhlIG5ldyB1c2VyXG4gICAgICAgIGNvbnN0IHJvb20gPSB0aGlzLmlvLnNvY2tldHMuYWRhcHRlci5yb29tcy5nZXQoY2FsbFJvb20pO1xuICAgICAgICBpZiAocm9vbSkge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IHRoaXMuZ2V0Q2FsbFBhcnRpY2lwYW50cyhzZXNzaW9uSWQsIHJvb20pO1xuICAgICAgICAgIHNvY2tldC5lbWl0KCdjYWxsX3BhcnRpY2lwYW50cycsIHsgcGFydGljaXBhbnRzIH0pO1xuICAgICAgICB9XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgdmlkZW8gY2FsbDonLCBlcnJvcik7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBqb2luIHZpZGVvIGNhbGwnIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gTGVhdmUgdmlkZW8gY2FsbFxuICAgIHNvY2tldC5vbignbGVhdmVfdmlkZW9fY2FsbCcsICh7IHNlc3Npb25JZCB9KSA9PiB7XG4gICAgICBjb25zdCBjYWxsUm9vbSA9IGBjYWxsXyR7c2Vzc2lvbklkfWA7XG4gICAgICBzb2NrZXQubGVhdmUoY2FsbFJvb20pO1xuXG4gICAgICBzb2NrZXQudG8oY2FsbFJvb20pLmVtaXQoJ3VzZXJfbGVmdF9jYWxsJywge1xuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIHVzZXJOYW1lOiBzb2NrZXQudXNlck5hbWUsXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYFVzZXIgJHtzb2NrZXQudXNlcklkfSBsZWZ0IHZpZGVvIGNhbGwgZm9yIHNlc3Npb24gJHtzZXNzaW9uSWR9YCk7XG4gICAgfSk7XG5cbiAgICAvLyBXZWJSVEMgc2lnbmFsaW5nIC0gb2ZmZXJcbiAgICBzb2NrZXQub24oJ3ZpZGVvX29mZmVyJywgKHsgc2Vzc2lvbklkLCB0bywgb2ZmZXIgfSkgPT4ge1xuICAgICAgc29ja2V0LnRvKGBjYWxsXyR7c2Vzc2lvbklkfWApLmVtaXQoJ3ZpZGVvX29mZmVyJywge1xuICAgICAgICBmcm9tOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBmcm9tTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgICB0byxcbiAgICAgICAgb2ZmZXIsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFdlYlJUQyBzaWduYWxpbmcgLSBhbnN3ZXJcbiAgICBzb2NrZXQub24oJ3ZpZGVvX2Fuc3dlcicsICh7IHNlc3Npb25JZCwgdG8sIGFuc3dlciB9KSA9PiB7XG4gICAgICBzb2NrZXQudG8oYGNhbGxfJHtzZXNzaW9uSWR9YCkuZW1pdCgndmlkZW9fYW5zd2VyJywge1xuICAgICAgICBmcm9tOiBzb2NrZXQudXNlcklkLFxuICAgICAgICBmcm9tTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgICB0byxcbiAgICAgICAgYW5zd2VyLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBXZWJSVEMgc2lnbmFsaW5nIC0gSUNFIGNhbmRpZGF0ZVxuICAgIHNvY2tldC5vbignaWNlX2NhbmRpZGF0ZScsICh7IHNlc3Npb25JZCwgdG8sIGNhbmRpZGF0ZSB9KSA9PiB7XG4gICAgICBzb2NrZXQudG8oYGNhbGxfJHtzZXNzaW9uSWR9YCkuZW1pdCgnaWNlX2NhbmRpZGF0ZScsIHtcbiAgICAgICAgZnJvbTogc29ja2V0LnVzZXJJZCxcbiAgICAgICAgZnJvbU5hbWU6IHNvY2tldC51c2VyTmFtZSxcbiAgICAgICAgdG8sXG4gICAgICAgIGNhbmRpZGF0ZSxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gTWVkaWEgc3RhdGUgY2hhbmdlcyAobXV0ZS91bm11dGUsIHZpZGVvIG9uL29mZilcbiAgICBzb2NrZXQub24oJ21lZGlhX3N0YXRlX2NoYW5nZScsICh7IHNlc3Npb25JZCwgaXNBdWRpb0VuYWJsZWQsIGlzVmlkZW9FbmFibGVkIH0pID0+IHtcbiAgICAgIHNvY2tldC50byhgY2FsbF8ke3Nlc3Npb25JZH1gKS5lbWl0KCd1c2VyX21lZGlhX3N0YXRlJywge1xuICAgICAgICB1c2VySWQ6IHNvY2tldC51c2VySWQsXG4gICAgICAgIHVzZXJOYW1lOiBzb2NrZXQudXNlck5hbWUsXG4gICAgICAgIGlzQXVkaW9FbmFibGVkLFxuICAgICAgICBpc1ZpZGVvRW5hYmxlZCxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gU2NyZWVuIHNoYXJpbmcgKGZvciB0cmFpbmVyIGRlbW9uc3RyYXRpb25zKVxuICAgIHNvY2tldC5vbignc3RhcnRfc2NyZWVuX3NoYXJlJywgKHsgc2Vzc2lvbklkIH0pID0+IHtcbiAgICAgIHNvY2tldC50byhgY2FsbF8ke3Nlc3Npb25JZH1gKS5lbWl0KCdzY3JlZW5fc2hhcmVfc3RhcnRlZCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICB1c2VyTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oJ3N0b3Bfc2NyZWVuX3NoYXJlJywgKHsgc2Vzc2lvbklkIH0pID0+IHtcbiAgICAgIHNvY2tldC50byhgY2FsbF8ke3Nlc3Npb25JZH1gKS5lbWl0KCdzY3JlZW5fc2hhcmVfc3RvcHBlZCcsIHtcbiAgICAgICAgdXNlcklkOiBzb2NrZXQudXNlcklkLFxuICAgICAgICB1c2VyTmFtZTogc29ja2V0LnVzZXJOYW1lLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGdldENhbGxQYXJ0aWNpcGFudHMoc2Vzc2lvbklkOiBzdHJpbmcsIHJvb20/OiBTZXQ8c3RyaW5nPikge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgc2Vzc2lvbiBwYXJ0aWNpcGFudHMgd2hvIGFyZSBjdXJyZW50bHkgaW4gdGhlIGNhbGxcbiAgICAgIGNvbnN0IHNlc3Npb25QYXJ0aWNpcGFudHMgPSBhd2FpdCBwcmlzbWEubGl2ZV9zZXNzaW9uX3BhcnRpY2lwYW50cy5maW5kTWFueSh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIC8vIG5vIHN0YXR1cyBmaWVsZCBpbiBMaXZlU2Vzc2lvblBhcnRpY2lwYW50XG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2Vyczoge1xuICAgICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBpbWFnZTogdHJ1ZSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gQWxzbyBpbmNsdWRlIHRyYWluZXJcbiAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEubGl2ZV93b3Jrb3V0X3Nlc3Npb25zLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogc2Vzc2lvbklkIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICB1c2Vyczoge1xuICAgICAgICAgICAgc2VsZWN0OiB7IGlkOiB0cnVlLCBuYW1lOiB0cnVlLCBpbWFnZTogdHJ1ZSB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgYWxsUGFydGljaXBhbnRzID0gWy4uLnNlc3Npb25QYXJ0aWNpcGFudHNdO1xuICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgYWxsUGFydGljaXBhbnRzLnB1c2goe1xuICAgICAgICAgIHVzZXJzOiBzZXNzaW9uLnVzZXJzLFxuICAgICAgICAgIHVzZXJJZDogc2Vzc2lvbi50cmFpbmVySWQsXG4gICAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICAgIGpvaW5lZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGlkOiBgdHJhaW5lcl8ke3Nlc3Npb24udHJhaW5lcklkfWAsXG4gICAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgICAgbGVmdEF0OiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRmlsdGVyIHRvIG9ubHkgdGhvc2UgY3VycmVudGx5IGluIHRoZSBjYWxsIHJvb21cbiAgICAgIHJldHVybiBhbGxQYXJ0aWNpcGFudHNcbiAgICAgICAgLmZpbHRlcigocDogeyB1c2VySWQ6IHN0cmluZyB9KSA9PiAocm9vbSA/IHRoaXMuY29ubmVjdGVkVXNlcnMuaGFzKHAudXNlcklkKSA6IGZhbHNlKSlcbiAgICAgICAgLm1hcCgocDogeyB1c2VySWQ6IHN0cmluZzsgdXNlcnM/OiB7IG5hbWU/OiBzdHJpbmcgfCBudWxsOyBpbWFnZT86IHN0cmluZyB8IG51bGwgfSB9KSA9PiAoe1xuICAgICAgICAgIHVzZXJJZDogcC51c2VySWQsXG4gICAgICAgICAgdXNlck5hbWU6IHAudXNlcnM/Lm5hbWUgfHwgJ1Vua25vd24nLFxuICAgICAgICAgIGltYWdlOiBwLnVzZXJzPy5pbWFnZSxcbiAgICAgICAgICBpc1RyYWluZXI6IHAudXNlcklkID09PSBzZXNzaW9uPy50cmFpbmVySWQsXG4gICAgICAgICAgaXNPbmxpbmU6IHRydWUsXG4gICAgICAgIH0pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBjYWxsIHBhcnRpY2lwYW50czonLCBlcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZHMgZm9yIGV4dGVybmFsIHVzZVxuICBwdWJsaWMgc2VuZFRvVXNlcih1c2VySWQ6IHN0cmluZywgZXZlbnQ6IHN0cmluZywgZGF0YTogYW55KSB7XG4gICAgY29uc3Qgc29ja2V0SWQgPSB0aGlzLmNvbm5lY3RlZFVzZXJzLmdldCh1c2VySWQpO1xuICAgIGlmIChzb2NrZXRJZCkge1xuICAgICAgdGhpcy5pby50byhzb2NrZXRJZCkuZW1pdChldmVudCwgZGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNlbmRUb1Jvb20ocm9vbUlkOiBzdHJpbmcsIGV2ZW50OiBzdHJpbmcsIGRhdGE6IGFueSkge1xuICAgIHRoaXMuaW8udG8ocm9vbUlkKS5lbWl0KGV2ZW50LCBkYXRhKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRVc2Vyc0luUm9vbShyb29tSWQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByb29tID0gdGhpcy5pby5zb2NrZXRzLmFkYXB0ZXIucm9vbXMuZ2V0KHJvb21JZCk7XG4gICAgcmV0dXJuIHJvb20gPyBBcnJheS5mcm9tKHJvb20pIDogW107XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29ubmVjdGVkVXNlckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkVXNlcnMuc2l6ZTtcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5sZXQgc29ja2V0U2VydmVyOiBTb2NrZXRTZXJ2ZXIgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVTb2NrZXRTZXJ2ZXIgPSAoaHR0cFNlcnZlcjogSFRUUFNlcnZlcik6IFNvY2tldFNlcnZlciA9PiB7XG4gIGlmICghc29ja2V0U2VydmVyKSB7XG4gICAgc29ja2V0U2VydmVyID0gbmV3IFNvY2tldFNlcnZlcihodHRwU2VydmVyKTtcbiAgfVxuICByZXR1cm4gc29ja2V0U2VydmVyO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNvY2tldFNlcnZlciA9ICgpOiBTb2NrZXRTZXJ2ZXIgfCBudWxsID0+IHtcbiAgcmV0dXJuIHNvY2tldFNlcnZlcjtcbn07XG4iXSwibmFtZXMiOlsiU2VydmVyIiwiU29ja2V0SU9TZXJ2ZXIiLCJwcmlzbWEiLCJtb2RlcmF0ZUNvbnRlbnQiLCJyYW5kb21VVUlEIiwiU29ja2V0U2VydmVyIiwiaW8iLCJjb25uZWN0ZWRVc2VycyIsIk1hcCIsImh0dHBTZXJ2ZXIiLCJjb3JzIiwib3JpZ2luIiwicHJvY2VzcyIsIm1ldGhvZHMiLCJjcmVkZW50aWFscyIsInRyYW5zcG9ydHMiLCJzZXR1cE1pZGRsZXdhcmUiLCJzZXR1cEV2ZW50SGFuZGxlcnMiLCJ1c2UiLCJzb2NrZXQiLCJuZXh0IiwidXNlcklkIiwiaGFuZHNoYWtlIiwiYXV0aCIsIkVycm9yIiwidXNlciIsInVzZXJzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJuYW1lIiwic3RhdHVzIiwidXNlck5hbWUiLCJlcnJvciIsImNvbnNvbGUiLCJvbiIsImxvZyIsInNldCIsInNldHVwQ2hhdEhhbmRsZXJzIiwic2V0dXBMaXZlU2Vzc2lvbkhhbmRsZXJzIiwic2V0dXBXb3Jrb3V0UHJvZ3Jlc3NIYW5kbGVycyIsInNldHVwVmlkZW9DYWxsSGFuZGxlcnMiLCJyZWFzb24iLCJkZWxldGUiLCJyb29tSWQiLCJoYXNBY2Nlc3MiLCJ2ZXJpZnlSb29tQWNjZXNzIiwiZW1pdCIsIm1lc3NhZ2UiLCJqb2luIiwidG8iLCJsZWF2ZSIsImNvbnRlbnQiLCJ0eXBlIiwibWV0YWRhdGEiLCJtb2RlcmF0aW9uUmVzdWx0IiwiZmxhZ2dlZCIsImZsYWdnZWRSZWFzb24iLCJjaGF0X21lc3NhZ2VzIiwiY3JlYXRlIiwiZGF0YSIsInNlbmRlcklkIiwiaW5jbHVkZSIsInNlbmRlck5hbWUiLCJ0aW1lc3RhbXAiLCJjcmVhdGVkQXQiLCJnZXRUaW1lIiwic2VuZE1lc3NhZ2VOb3RpZmljYXRpb25zIiwiaXNUeXBpbmciLCJzZXNzaW9uSWQiLCJ2ZXJpZnlTZXNzaW9uQWNjZXNzIiwicm9vbSIsInNvY2tldHMiLCJhZGFwdGVyIiwicm9vbXMiLCJnZXQiLCJwYXJ0aWNpcGFudHMiLCJnZXRTZXNzaW9uUGFydGljaXBhbnRzIiwibmV3UGFydGljaXBhbnQiLCJsZWZ0UGFydGljaXBhbnQiLCJ1cGRhdGUiLCJ1cGRhdGVkQnkiLCJwcm9ncmVzcyIsIndvcmtvdXRfcHJvZ3Jlc3MiLCJ1cHNlcnQiLCJ1c2VySWRfc2Vzc2lvbklkIiwidXBkYXRlZEF0IiwiRGF0ZSIsIm5vdyIsInBhcnRpY2lwYW50IiwiY2hhdF9yb29tX3BhcnRpY2lwYW50cyIsImZpbmRGaXJzdCIsImlzQWN0aXZlIiwic2Vzc2lvbiIsImxpdmVfd29ya291dF9zZXNzaW9ucyIsIk9SIiwidHJhaW5lcklkIiwibGl2ZV9zZXNzaW9uX3BhcnRpY2lwYW50cyIsInNvbWUiLCJkYlBhcnRpY2lwYW50cyIsImZpbmRNYW55IiwibWFwIiwicCIsImlzT25saW5lIiwiaGFzIiwicm9vbVBhcnRpY2lwYW50cyIsIm5vdCIsImRldmljZV90b2tlbnMiLCJsZW5ndGgiLCJkZXZpY2VUb2tlbiIsInNlbmRQdXNoTm90aWZpY2F0aW9uIiwidG9rZW4iLCJ0aXRsZSIsImJvZHkiLCJzdWJzdHJpbmciLCJtZXNzYWdlSWQiLCJub3RpZmljYXRpb24iLCJzb3VuZCIsImJhZGdlIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJBY2NlcHQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwianNvbiIsIm9rIiwiZXJyb3JzIiwiaXNUcmFpbmVyIiwiY2FsbFJvb20iLCJnZXRDYWxsUGFydGljaXBhbnRzIiwib2ZmZXIiLCJmcm9tIiwiZnJvbU5hbWUiLCJhbnN3ZXIiLCJjYW5kaWRhdGUiLCJpc0F1ZGlvRW5hYmxlZCIsImlzVmlkZW9FbmFibGVkIiwic2Vzc2lvblBhcnRpY2lwYW50cyIsImltYWdlIiwiYWxsUGFydGljaXBhbnRzIiwicHVzaCIsImpvaW5lZEF0IiwibGVmdEF0IiwiZmlsdGVyIiwic2VuZFRvVXNlciIsImV2ZW50Iiwic29ja2V0SWQiLCJzZW5kVG9Sb29tIiwiZ2V0VXNlcnNJblJvb20iLCJBcnJheSIsImdldENvbm5lY3RlZFVzZXJDb3VudCIsInNpemUiLCJzb2NrZXRTZXJ2ZXIiLCJpbml0aWFsaXplU29ja2V0U2VydmVyIiwiZ2V0U29ja2V0U2VydmVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/socket/server.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/utils/error-handling.ts":
/*!******************************************!*\
  !*** ./src/core/utils/error-handling.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthenticationError: () => (/* binding */ AuthenticationError),\n/* harmony export */   BaseAppError: () => (/* binding */ BaseAppError),\n/* harmony export */   ErrorCode: () => (/* binding */ ErrorCode),\n/* harmony export */   ExternalServiceError: () => (/* binding */ ExternalServiceError),\n/* harmony export */   ModerationError: () => (/* binding */ ModerationError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   RateLimitError: () => (/* binding */ RateLimitError),\n/* harmony export */   SafetyViolationError: () => (/* binding */ SafetyViolationError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   createErrorResponse: () => (/* binding */ createErrorResponse),\n/* harmony export */   createSuccessResponse: () => (/* binding */ createSuccessResponse),\n/* harmony export */   getFriendlyErrorMessage: () => (/* binding */ getFriendlyErrorMessage),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   normalizeError: () => (/* binding */ normalizeError),\n/* harmony export */   safeAsync: () => (/* binding */ safeAsync),\n/* harmony export */   withErrorHandling: () => (/* binding */ withErrorHandling)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * Centralized Error Management for Massimino\n * Comprehensive error handling with safety-focused logging and user feedback\n */ \n\n\n// ============================================================================\n// ERROR TYPE DEFINITIONS\n// ============================================================================\nvar ErrorCode = /*#__PURE__*/ function(ErrorCode) {\n    // Authentication & Authorization\n    ErrorCode[\"UNAUTHORIZED\"] = \"UNAUTHORIZED\";\n    ErrorCode[\"FORBIDDEN\"] = \"FORBIDDEN\";\n    ErrorCode[\"TOKEN_EXPIRED\"] = \"TOKEN_EXPIRED\";\n    ErrorCode[\"INVALID_CREDENTIALS\"] = \"INVALID_CREDENTIALS\";\n    ErrorCode[\"ACCOUNT_SUSPENDED\"] = \"ACCOUNT_SUSPENDED\";\n    ErrorCode[\"ACCOUNT_BANNED\"] = \"ACCOUNT_BANNED\";\n    // Validation\n    ErrorCode[\"VALIDATION_ERROR\"] = \"VALIDATION_ERROR\";\n    ErrorCode[\"INVALID_INPUT\"] = \"INVALID_INPUT\";\n    ErrorCode[\"MISSING_REQUIRED_FIELD\"] = \"MISSING_REQUIRED_FIELD\";\n    // Content Moderation\n    ErrorCode[\"CONTENT_BLOCKED\"] = \"CONTENT_BLOCKED\";\n    ErrorCode[\"CONTENT_FLAGGED\"] = \"CONTENT_FLAGGED\";\n    ErrorCode[\"MODERATION_ERROR\"] = \"MODERATION_ERROR\";\n    ErrorCode[\"SAFETY_VIOLATION\"] = \"SAFETY_VIOLATION\";\n    // Resource Management\n    ErrorCode[\"NOT_FOUND\"] = \"NOT_FOUND\";\n    ErrorCode[\"RESOURCE_EXISTS\"] = \"RESOURCE_EXISTS\";\n    ErrorCode[\"RESOURCE_LIMIT_EXCEEDED\"] = \"RESOURCE_LIMIT_EXCEEDED\";\n    // Rate Limiting\n    ErrorCode[\"RATE_LIMIT_EXCEEDED\"] = \"RATE_LIMIT_EXCEEDED\";\n    ErrorCode[\"TOO_MANY_REQUESTS\"] = \"TOO_MANY_REQUESTS\";\n    // File Handling\n    ErrorCode[\"FILE_TOO_LARGE\"] = \"FILE_TOO_LARGE\";\n    ErrorCode[\"INVALID_FILE_TYPE\"] = \"INVALID_FILE_TYPE\";\n    ErrorCode[\"UPLOAD_FAILED\"] = \"UPLOAD_FAILED\";\n    // Database\n    ErrorCode[\"DATABASE_ERROR\"] = \"DATABASE_ERROR\";\n    ErrorCode[\"CONSTRAINT_VIOLATION\"] = \"CONSTRAINT_VIOLATION\";\n    ErrorCode[\"CONNECTION_ERROR\"] = \"CONNECTION_ERROR\";\n    // External Services\n    ErrorCode[\"OPENAI_ERROR\"] = \"OPENAI_ERROR\";\n    ErrorCode[\"EMAIL_SERVICE_ERROR\"] = \"EMAIL_SERVICE_ERROR\";\n    ErrorCode[\"EXTERNAL_SERVICE_ERROR\"] = \"EXTERNAL_SERVICE_ERROR\";\n    // General\n    ErrorCode[\"INTERNAL_SERVER_ERROR\"] = \"INTERNAL_SERVER_ERROR\";\n    ErrorCode[\"BAD_REQUEST\"] = \"BAD_REQUEST\";\n    ErrorCode[\"UNKNOWN_ERROR\"] = \"UNKNOWN_ERROR\";\n    return ErrorCode;\n}({});\n// ============================================================================\n// CUSTOM ERROR CLASSES\n// ============================================================================\n/**\n * Base application error class\n */ class BaseAppError extends Error {\n    code;\n    statusCode;\n    details;\n    userMessage;\n    shouldLog;\n    shouldNotifyUser;\n    constructor(message, code, statusCode, options = {}){\n        super(message);\n        this.name = this.constructor.name;\n        this.code = code;\n        this.statusCode = statusCode;\n        this.details = options.details;\n        this.userMessage = options.userMessage || message;\n        this.shouldLog = options.shouldLog ?? true;\n        this.shouldNotifyUser = options.shouldNotifyUser ?? false;\n        // Maintains proper stack trace for where our error was thrown (only available on V8)\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        }\n    }\n}\n/**\n * Validation error for input validation failures\n */ class ValidationError extends BaseAppError {\n    constructor(message, details){\n        super(message, \"VALIDATION_ERROR\", 400, {\n            details,\n            userMessage: 'Please check your input and try again.',\n            shouldLog: false\n        });\n    }\n}\n/**\n * Authentication error\n */ class AuthenticationError extends BaseAppError {\n    constructor(message, code = \"UNAUTHORIZED\"){\n        const statusCode = code === \"FORBIDDEN\" ? 403 : 401;\n        super(message, code, statusCode, {\n            userMessage: 'Authentication required. Please sign in and try again.',\n            shouldLog: true\n        });\n    }\n}\n/**\n * Content moderation error\n */ class ModerationError extends BaseAppError {\n    constructor(message, code = \"CONTENT_BLOCKED\", details){\n        super(message, code, 400, {\n            details,\n            userMessage: 'Your content violates our community guidelines. Please review and modify your submission.',\n            shouldLog: true,\n            shouldNotifyUser: true\n        });\n    }\n}\n/**\n * Safety violation error (more serious than moderation)\n */ class SafetyViolationError extends BaseAppError {\n    constructor(message, details){\n        super(message, \"SAFETY_VIOLATION\", 403, {\n            details,\n            userMessage: 'This action violates our safety policies and has been blocked.',\n            shouldLog: true,\n            shouldNotifyUser: true\n        });\n    }\n}\n/**\n * Resource not found error\n */ class NotFoundError extends BaseAppError {\n    constructor(resource, identifier){\n        const message = identifier ? `${resource} with identifier ${identifier} not found` : `${resource} not found`;\n        super(message, \"NOT_FOUND\", 404, {\n            userMessage: 'The requested resource could not be found.',\n            shouldLog: false\n        });\n    }\n}\n/**\n * Rate limiting error\n */ class RateLimitError extends BaseAppError {\n    constructor(limit, windowMs){\n        super(`Rate limit exceeded: ${limit} requests per ${windowMs}ms`, \"RATE_LIMIT_EXCEEDED\", 429, {\n            details: {\n                limit,\n                windowMs\n            },\n            userMessage: 'Too many requests. Please slow down and try again later.',\n            shouldLog: true\n        });\n    }\n}\n/**\n * External service error\n */ class ExternalServiceError extends BaseAppError {\n    constructor(service, message, details){\n        super(`${service} error: ${message}`, \"EXTERNAL_SERVICE_ERROR\", 503, {\n            details: {\n                service,\n                ...details\n            },\n            userMessage: 'A service is temporarily unavailable. Please try again later.',\n            shouldLog: true,\n            shouldNotifyUser: true\n        });\n    }\n}\n// ============================================================================\n// ERROR DETECTION AND TRANSFORMATION\n// ============================================================================\n/**\n * Convert unknown errors to standardized AppError format\n */ function normalizeError(error, context) {\n    // Already an AppError\n    if (error instanceof BaseAppError) {\n        return error;\n    }\n    // Zod validation errors\n    if (error instanceof zod__WEBPACK_IMPORTED_MODULE_2__.ZodError) {\n        const issues = error.issues.map((issue)=>({\n                field: issue.path.join('.'),\n                message: issue.message,\n                code: issue.code\n            }));\n        return new ValidationError('Validation failed', {\n            issues\n        });\n    }\n    // Prisma database errors\n    if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_1__.Prisma.PrismaClientKnownRequestError) {\n        return handlePrismaError(error, context);\n    }\n    // Standard JavaScript errors\n    if (error instanceof Error) {\n        // Check for specific error patterns\n        if (error.message.includes('fetch failed') || error.message.includes('ENOTFOUND')) {\n            return new ExternalServiceError('Network', error.message);\n        }\n        if (error.message.includes('OpenAI')) {\n            return new ExternalServiceError('OpenAI', error.message, {\n                originalError: error.message\n            });\n        }\n        // Generic error conversion\n        return new BaseAppError(error.message, \"INTERNAL_SERVER_ERROR\", 500, {\n            details: {\n                originalError: error.message,\n                stack: error.stack\n            },\n            userMessage: 'An unexpected error occurred. Please try again.',\n            shouldLog: true\n        });\n    }\n    // Unknown error types\n    return new BaseAppError('Unknown error occurred', \"UNKNOWN_ERROR\", 500, {\n        details: {\n            error: String(error)\n        },\n        userMessage: 'An unexpected error occurred. Please try again.',\n        shouldLog: true\n    });\n}\n/**\n * Handle Prisma database errors\n */ function handlePrismaError(error, _context) {\n    switch(error.code){\n        case 'P2002':\n            const field = error.meta?.target?.join(', ') || 'field';\n            return new BaseAppError(`Duplicate entry for ${field}`, \"CONSTRAINT_VIOLATION\", 409, {\n                details: {\n                    field,\n                    constraint: 'unique'\n                },\n                userMessage: `This ${field} is already taken. Please choose another.`,\n                shouldLog: false\n            });\n        case 'P2003':\n            return new BaseAppError('Referenced record does not exist', \"CONSTRAINT_VIOLATION\", 400, {\n                details: {\n                    constraint: 'foreign_key'\n                },\n                userMessage: 'Invalid reference to another record.',\n                shouldLog: true\n            });\n        case 'P2004':\n            return new BaseAppError('Database constraint violation', \"CONSTRAINT_VIOLATION\", 400, {\n                userMessage: 'The operation violates database constraints.',\n                shouldLog: true\n            });\n        case 'P2025':\n            return new NotFoundError('Record');\n        case 'P1001':\n        case 'P1002':\n            return new BaseAppError('Database connection error', \"CONNECTION_ERROR\", 503, {\n                userMessage: 'Database is temporarily unavailable. Please try again later.',\n                shouldLog: true,\n                shouldNotifyUser: true\n            });\n        default:\n            return new BaseAppError('Database error', \"DATABASE_ERROR\", 500, {\n                details: {\n                    prismaCode: error.code,\n                    prismaMessage: error.message\n                },\n                userMessage: 'A database error occurred. Please try again.',\n                shouldLog: true\n            });\n    }\n}\n/**\n * Log errors with appropriate level and detail\n */ function logError(error, context) {\n    if (!error.shouldLog) return;\n    const logEntry = {\n        timestamp: new Date(),\n        level: getLogLevel(error),\n        message: error.message,\n        code: error.code,\n        statusCode: error.statusCode,\n        details: error.details\n    };\n    if (context) {\n        logEntry.context = context;\n    }\n    if (error.stack) {\n        logEntry.stack = error.stack;\n    }\n    // Log to console (in production, this would go to a logging service)\n    switch(logEntry.level){\n        case 'error':\n            console.error('🚨 Application Error:', logEntry);\n            break;\n        case 'warn':\n            console.warn('⚠️ Application Warning:', logEntry);\n            break;\n        case 'info':\n            console.info('ℹ️ Application Info:', logEntry);\n            break;\n    }\n    // In production, also send to monitoring service\n    if (false) {}\n}\n/**\n * Determine appropriate log level based on error\n */ function getLogLevel(error) {\n    if (error.statusCode >= 500) return 'error';\n    if (error.statusCode >= 400) return 'warn';\n    return 'info';\n}\n/**\n * Send error to monitoring service (placeholder)\n */ function sendToMonitoringService(logEntry) {\n    // In production, this would send to Sentry, DataDog, etc.\n    // For now, just a placeholder\n    if (process.env.SENTRY_DSN && logEntry.level === 'error') {\n        // Sentry integration would go here\n        console.log('📊 Would send to monitoring service:', {\n            message: logEntry.message,\n            code: logEntry.code,\n            userId: logEntry.context?.userId\n        });\n    }\n}\n// ============================================================================\n// ERROR RESPONSE HELPERS\n// ============================================================================\n/**\n * Create standardized error response for API endpoints\n */ function createErrorResponse(error, context) {\n    // Log the error\n    logError(error, context);\n    // Create safe response for user\n    const responseBody = {\n        success: false,\n        error: {\n            code: error.code,\n            message: error.userMessage || error.message,\n            ... true && {\n                details: error.details,\n                stack: error.stack\n            }\n        },\n        ...context?.requestId && {\n            requestId: context.requestId\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(responseBody, {\n        status: error.statusCode,\n        headers: {\n            'X-Error-Code': error.code,\n            'X-Request-ID': context?.requestId || 'unknown'\n        }\n    });\n}\n/**\n * Create success response\n */ function createSuccessResponse(data, options = {}) {\n    const responseBody = {\n        success: true,\n        data,\n        ...options.message && {\n            message: options.message\n        },\n        ...options.pagination && {\n            pagination: options.pagination\n        },\n        ...options.requestId && {\n            requestId: options.requestId\n        }\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(responseBody);\n}\n// ============================================================================\n// ERROR HANDLING MIDDLEWARE\n// ============================================================================\n/**\n * Async error wrapper for API routes\n */ function withErrorHandling(handler) {\n    return async (...args)=>{\n        try {\n            return await handler(...args);\n        } catch (error) {\n            const context = {\n                timestamp: new Date()\n            };\n            const normalizedError = normalizeError(error, context);\n            return createErrorResponse(normalizedError, context);\n        }\n    };\n}\n/**\n * Try-catch wrapper with error normalization\n */ async function safeAsync(operation, context) {\n    try {\n        const data = await operation();\n        return {\n            data\n        };\n    } catch (error) {\n        const normalizedError = normalizeError(error, context);\n        logError(normalizedError, context);\n        return {\n            error: normalizedError\n        };\n    }\n}\n// ============================================================================\n// USER-FRIENDLY ERROR MESSAGES\n// ============================================================================\n/**\n * Get user-friendly error message for common scenarios\n */ function getFriendlyErrorMessage(code, _context) {\n    const messages = {\n        [\"UNAUTHORIZED\"]: 'Please sign in to continue.',\n        [\"FORBIDDEN\"]: 'You don\\'t have permission to perform this action.',\n        [\"TOKEN_EXPIRED\"]: 'Your session has expired. Please sign in again.',\n        [\"INVALID_CREDENTIALS\"]: 'Invalid email or password.',\n        [\"ACCOUNT_SUSPENDED\"]: 'Your account has been temporarily suspended. Contact support for assistance.',\n        [\"ACCOUNT_BANNED\"]: 'Your account has been permanently banned.',\n        [\"VALIDATION_ERROR\"]: 'Please check your input and try again.',\n        [\"INVALID_INPUT\"]: 'Some information you provided is not valid.',\n        [\"MISSING_REQUIRED_FIELD\"]: 'Please fill in all required fields.',\n        [\"CONTENT_BLOCKED\"]: 'Your content violates our community guidelines and has been blocked.',\n        [\"CONTENT_FLAGGED\"]: 'Your content has been flagged for review.',\n        [\"MODERATION_ERROR\"]: 'Unable to process your content. Please try again.',\n        [\"SAFETY_VIOLATION\"]: 'This action violates our safety policies.',\n        [\"NOT_FOUND\"]: 'The requested resource could not be found.',\n        [\"RESOURCE_EXISTS\"]: 'This resource already exists.',\n        [\"RESOURCE_LIMIT_EXCEEDED\"]: 'You have reached your limit for this resource.',\n        [\"RATE_LIMIT_EXCEEDED\"]: 'Too many requests. Please slow down and try again.',\n        [\"TOO_MANY_REQUESTS\"]: 'Too many requests. Please wait before trying again.',\n        [\"FILE_TOO_LARGE\"]: 'The file you uploaded is too large.',\n        [\"INVALID_FILE_TYPE\"]: 'This file type is not supported.',\n        [\"UPLOAD_FAILED\"]: 'File upload failed. Please try again.',\n        [\"DATABASE_ERROR\"]: 'A database error occurred. Please try again.',\n        [\"CONSTRAINT_VIOLATION\"]: 'This action would violate data constraints.',\n        [\"CONNECTION_ERROR\"]: 'Unable to connect to the database.',\n        [\"OPENAI_ERROR\"]: 'Content moderation service is temporarily unavailable.',\n        [\"EMAIL_SERVICE_ERROR\"]: 'Unable to send email at this time.',\n        [\"EXTERNAL_SERVICE_ERROR\"]: 'An external service is temporarily unavailable.',\n        [\"INTERNAL_SERVER_ERROR\"]: 'An unexpected error occurred. Please try again.',\n        [\"BAD_REQUEST\"]: 'Invalid request. Please check your input.',\n        [\"UNKNOWN_ERROR\"]: 'An unknown error occurred. Please try again.'\n    };\n    return messages[code] || 'An error occurred. Please try again.';\n}\n// ============================================================================\n// EXPORT UTILITIES\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS91dGlscy9lcnJvci1oYW5kbGluZy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUUwQztBQUNaO0FBQ1M7QUFFeEMsK0VBQStFO0FBQy9FLHlCQUF5QjtBQUN6QiwrRUFBK0U7QUFFeEUsdUNBQUtHO0lBQ1YsaUNBQWlDOzs7Ozs7O0lBUWpDLGFBQWE7Ozs7SUFLYixxQkFBcUI7Ozs7O0lBTXJCLHNCQUFzQjs7OztJQUt0QixnQkFBZ0I7OztJQUloQixnQkFBZ0I7Ozs7SUFLaEIsV0FBVzs7OztJQUtYLG9CQUFvQjs7OztJQUtwQixVQUFVOzs7O1dBNUNBQTtNQWdEWDtBQXFCRCwrRUFBK0U7QUFDL0UsdUJBQXVCO0FBQ3ZCLCtFQUErRTtBQUUvRTs7Q0FFQyxHQUNELE1BQU1DLHFCQUFxQkM7SUFDVEMsS0FBZ0I7SUFDaEJDLFdBQW1CO0lBQ25CQyxRQUFjO0lBQ2RDLFlBQXFCO0lBQ3JCQyxVQUFtQjtJQUNuQkMsaUJBQTBCO0lBRTFDLFlBQ0VDLE9BQWUsRUFDZk4sSUFBZSxFQUNmQyxVQUFrQixFQUNsQk0sVUFLSSxDQUFDLENBQUMsQ0FDTjtRQUNBLEtBQUssQ0FBQ0Q7UUFDTixJQUFJLENBQUNFLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDQSxJQUFJO1FBQ2pDLElBQUksQ0FBQ1IsSUFBSSxHQUFHQTtRQUNaLElBQUksQ0FBQ0MsVUFBVSxHQUFHQTtRQUNsQixJQUFJLENBQUNDLE9BQU8sR0FBR0ssUUFBUUwsT0FBTztRQUM5QixJQUFJLENBQUNDLFdBQVcsR0FBR0ksUUFBUUosV0FBVyxJQUFJRztRQUMxQyxJQUFJLENBQUNGLFNBQVMsR0FBR0csUUFBUUgsU0FBUyxJQUFJO1FBQ3RDLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUdFLFFBQVFGLGdCQUFnQixJQUFJO1FBRXBELHFGQUFxRjtRQUNyRixJQUFJTixNQUFNVSxpQkFBaUIsRUFBRTtZQUMzQlYsTUFBTVUsaUJB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dEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL3V0aWxzL2Vycm9yLWhhbmRsaW5nLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ2VudHJhbGl6ZWQgRXJyb3IgTWFuYWdlbWVudCBmb3IgTWFzc2ltaW5vXG4gKiBDb21wcmVoZW5zaXZlIGVycm9yIGhhbmRsaW5nIHdpdGggc2FmZXR5LWZvY3VzZWQgbG9nZ2luZyBhbmQgdXNlciBmZWVkYmFja1xuICovXG5cbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFpvZEVycm9yIH0gZnJvbSAnem9kJztcbmltcG9ydCB7IFByaXNtYSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVJST1IgVFlQRSBERUZJTklUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgZW51bSBFcnJvckNvZGUge1xuICAvLyBBdXRoZW50aWNhdGlvbiAmIEF1dGhvcml6YXRpb25cbiAgVU5BVVRIT1JJWkVEID0gJ1VOQVVUSE9SSVpFRCcsXG4gIEZPUkJJRERFTiA9ICdGT1JCSURERU4nLFxuICBUT0tFTl9FWFBJUkVEID0gJ1RPS0VOX0VYUElSRUQnLFxuICBJTlZBTElEX0NSRURFTlRJQUxTID0gJ0lOVkFMSURfQ1JFREVOVElBTFMnLFxuICBBQ0NPVU5UX1NVU1BFTkRFRCA9ICdBQ0NPVU5UX1NVU1BFTkRFRCcsXG4gIEFDQ09VTlRfQkFOTkVEID0gJ0FDQ09VTlRfQkFOTkVEJyxcbiAgXG4gIC8vIFZhbGlkYXRpb25cbiAgVkFMSURBVElPTl9FUlJPUiA9ICdWQUxJREFUSU9OX0VSUk9SJyxcbiAgSU5WQUxJRF9JTlBVVCA9ICdJTlZBTElEX0lOUFVUJyxcbiAgTUlTU0lOR19SRVFVSVJFRF9GSUVMRCA9ICdNSVNTSU5HX1JFUVVJUkVEX0ZJRUxEJyxcbiAgXG4gIC8vIENvbnRlbnQgTW9kZXJhdGlvblxuICBDT05URU5UX0JMT0NLRUQgPSAnQ09OVEVOVF9CTE9DS0VEJyxcbiAgQ09OVEVOVF9GTEFHR0VEID0gJ0NPTlRFTlRfRkxBR0dFRCcsXG4gIE1PREVSQVRJT05fRVJST1IgPSAnTU9ERVJBVElPTl9FUlJPUicsXG4gIFNBRkVUWV9WSU9MQVRJT04gPSAnU0FGRVRZX1ZJT0xBVElPTicsXG4gIFxuICAvLyBSZXNvdXJjZSBNYW5hZ2VtZW50XG4gIE5PVF9GT1VORCA9ICdOT1RfRk9VTkQnLFxuICBSRVNPVVJDRV9FWElTVFMgPSAnUkVTT1VSQ0VfRVhJU1RTJyxcbiAgUkVTT1VSQ0VfTElNSVRfRVhDRUVERUQgPSAnUkVTT1VSQ0VfTElNSVRfRVhDRUVERUQnLFxuICBcbiAgLy8gUmF0ZSBMaW1pdGluZ1xuICBSQVRFX0xJTUlUX0VYQ0VFREVEID0gJ1JBVEVfTElNSVRfRVhDRUVERUQnLFxuICBUT09fTUFOWV9SRVFVRVNUUyA9ICdUT09fTUFOWV9SRVFVRVNUUycsXG4gIFxuICAvLyBGaWxlIEhhbmRsaW5nXG4gIEZJTEVfVE9PX0xBUkdFID0gJ0ZJTEVfVE9PX0xBUkdFJyxcbiAgSU5WQUxJRF9GSUxFX1RZUEUgPSAnSU5WQUxJRF9GSUxFX1RZUEUnLFxuICBVUExPQURfRkFJTEVEID0gJ1VQTE9BRF9GQUlMRUQnLFxuICBcbiAgLy8gRGF0YWJhc2VcbiAgREFUQUJBU0VfRVJST1IgPSAnREFUQUJBU0VfRVJST1InLFxuICBDT05TVFJBSU5UX1ZJT0xBVElPTiA9ICdDT05TVFJBSU5UX1ZJT0xBVElPTicsXG4gIENPTk5FQ1RJT05fRVJST1IgPSAnQ09OTkVDVElPTl9FUlJPUicsXG4gIFxuICAvLyBFeHRlcm5hbCBTZXJ2aWNlc1xuICBPUEVOQUlfRVJST1IgPSAnT1BFTkFJX0VSUk9SJyxcbiAgRU1BSUxfU0VSVklDRV9FUlJPUiA9ICdFTUFJTF9TRVJWSUNFX0VSUk9SJyxcbiAgRVhURVJOQUxfU0VSVklDRV9FUlJPUiA9ICdFWFRFUk5BTF9TRVJWSUNFX0VSUk9SJyxcbiAgXG4gIC8vIEdlbmVyYWxcbiAgSU5URVJOQUxfU0VSVkVSX0VSUk9SID0gJ0lOVEVSTkFMX1NFUlZFUl9FUlJPUicsXG4gIEJBRF9SRVFVRVNUID0gJ0JBRF9SRVFVRVNUJyxcbiAgVU5LTk9XTl9FUlJPUiA9ICdVTktOT1dOX0VSUk9SJyxcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBcHBFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29kZTogRXJyb3JDb2RlO1xuICBzdGF0dXNDb2RlOiBudW1iZXI7XG4gIGRldGFpbHM/OiBhbnk7XG4gIHVzZXJNZXNzYWdlPzogc3RyaW5nO1xuICBzaG91bGRMb2c/OiBib29sZWFuO1xuICBzaG91bGROb3RpZnlVc2VyPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckNvbnRleHQge1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIHJlcXVlc3RJZD86IHN0cmluZztcbiAgZW5kcG9pbnQ/OiBzdHJpbmc7XG4gIHVzZXJBZ2VudD86IHN0cmluZztcbiAgaXBBZGRyZXNzPzogc3RyaW5nO1xuICB0aW1lc3RhbXA/OiBEYXRlO1xuICBhZGRpdGlvbmFsRGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENVU1RPTSBFUlJPUiBDTEFTU0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQmFzZSBhcHBsaWNhdGlvbiBlcnJvciBjbGFzc1xuICovXG5jbGFzcyBCYXNlQXBwRXJyb3IgZXh0ZW5kcyBFcnJvciBpbXBsZW1lbnRzIEFwcEVycm9yIHtcbiAgcHVibGljIHJlYWRvbmx5IGNvZGU6IEVycm9yQ29kZTtcbiAgcHVibGljIHJlYWRvbmx5IHN0YXR1c0NvZGU6IG51bWJlcjtcbiAgcHVibGljIHJlYWRvbmx5IGRldGFpbHM/OiBhbnk7XG4gIHB1YmxpYyByZWFkb25seSB1c2VyTWVzc2FnZT86IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHNob3VsZExvZzogYm9vbGVhbjtcbiAgcHVibGljIHJlYWRvbmx5IHNob3VsZE5vdGlmeVVzZXI6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGNvZGU6IEVycm9yQ29kZSxcbiAgICBzdGF0dXNDb2RlOiBudW1iZXIsXG4gICAgb3B0aW9uczoge1xuICAgICAgZGV0YWlscz86IGFueTtcbiAgICAgIHVzZXJNZXNzYWdlPzogc3RyaW5nO1xuICAgICAgc2hvdWxkTG9nPzogYm9vbGVhbjtcbiAgICAgIHNob3VsZE5vdGlmeVVzZXI/OiBib29sZWFuO1xuICAgIH0gPSB7fVxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xuICAgIHRoaXMuZGV0YWlscyA9IG9wdGlvbnMuZGV0YWlscztcbiAgICB0aGlzLnVzZXJNZXNzYWdlID0gb3B0aW9ucy51c2VyTWVzc2FnZSB8fCBtZXNzYWdlO1xuICAgIHRoaXMuc2hvdWxkTG9nID0gb3B0aW9ucy5zaG91bGRMb2cgPz8gdHJ1ZTtcbiAgICB0aGlzLnNob3VsZE5vdGlmeVVzZXIgPSBvcHRpb25zLnNob3VsZE5vdGlmeVVzZXIgPz8gZmFsc2U7XG4gICAgXG4gICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24gKG9ubHkgYXZhaWxhYmxlIG9uIFY4KVxuICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVmFsaWRhdGlvbiBlcnJvciBmb3IgaW5wdXQgdmFsaWRhdGlvbiBmYWlsdXJlc1xuICovXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRXJyb3JDb2RlLlZBTElEQVRJT05fRVJST1IsXG4gICAgICA0MDAsXG4gICAgICB7XG4gICAgICAgIGRldGFpbHMsXG4gICAgICAgIHVzZXJNZXNzYWdlOiAnUGxlYXNlIGNoZWNrIHlvdXIgaW5wdXQgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBzaG91bGRMb2c6IGZhbHNlLCAvLyBEb24ndCBsb2cgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQXV0aGVudGljYXRpb24gZXJyb3JcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBCYXNlQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIGNvZGU6IEVycm9yQ29kZSA9IEVycm9yQ29kZS5VTkFVVEhPUklaRUQpIHtcbiAgICBjb25zdCBzdGF0dXNDb2RlID0gY29kZSA9PT0gRXJyb3JDb2RlLkZPUkJJRERFTiA/IDQwMyA6IDQwMTtcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBjb2RlLFxuICAgICAgc3RhdHVzQ29kZSxcbiAgICAgIHtcbiAgICAgICAgdXNlck1lc3NhZ2U6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gUGxlYXNlIHNpZ24gaW4gYW5kIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBzaG91bGRMb2c6IHRydWUsXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIENvbnRlbnQgbW9kZXJhdGlvbiBlcnJvclxuICovXG5leHBvcnQgY2xhc3MgTW9kZXJhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBjb2RlOiBFcnJvckNvZGUgPSBFcnJvckNvZGUuQ09OVEVOVF9CTE9DS0VELCBkZXRhaWxzPzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgY29kZSxcbiAgICAgIDQwMCxcbiAgICAgIHtcbiAgICAgICAgZGV0YWlscyxcbiAgICAgICAgdXNlck1lc3NhZ2U6ICdZb3VyIGNvbnRlbnQgdmlvbGF0ZXMgb3VyIGNvbW11bml0eSBndWlkZWxpbmVzLiBQbGVhc2UgcmV2aWV3IGFuZCBtb2RpZnkgeW91ciBzdWJtaXNzaW9uLicsXG4gICAgICAgIHNob3VsZExvZzogdHJ1ZSxcbiAgICAgICAgc2hvdWxkTm90aWZ5VXNlcjogdHJ1ZSxcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogU2FmZXR5IHZpb2xhdGlvbiBlcnJvciAobW9yZSBzZXJpb3VzIHRoYW4gbW9kZXJhdGlvbilcbiAqL1xuZXhwb3J0IGNsYXNzIFNhZmV0eVZpb2xhdGlvbkVycm9yIGV4dGVuZHMgQmFzZUFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBtZXNzYWdlLFxuICAgICAgRXJyb3JDb2RlLlNBRkVUWV9WSU9MQVRJT04sXG4gICAgICA0MDMsXG4gICAgICB7XG4gICAgICAgIGRldGFpbHMsXG4gICAgICAgIHVzZXJNZXNzYWdlOiAnVGhpcyBhY3Rpb24gdmlvbGF0ZXMgb3VyIHNhZmV0eSBwb2xpY2llcyBhbmQgaGFzIGJlZW4gYmxvY2tlZC4nLFxuICAgICAgICBzaG91bGRMb2c6IHRydWUsXG4gICAgICAgIHNob3VsZE5vdGlmeVVzZXI6IHRydWUsXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlc291cmNlIG5vdCBmb3VuZCBlcnJvclxuICovXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEJhc2VBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlc291cmNlOiBzdHJpbmcsIGlkZW50aWZpZXI/OiBzdHJpbmcpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gaWRlbnRpZmllciBcbiAgICAgID8gYCR7cmVzb3VyY2V9IHdpdGggaWRlbnRpZmllciAke2lkZW50aWZpZXJ9IG5vdCBmb3VuZGBcbiAgICAgIDogYCR7cmVzb3VyY2V9IG5vdCBmb3VuZGA7XG4gICAgICBcbiAgICBzdXBlcihcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBFcnJvckNvZGUuTk9UX0ZPVU5ELFxuICAgICAgNDA0LFxuICAgICAge1xuICAgICAgICB1c2VyTWVzc2FnZTogJ1RoZSByZXF1ZXN0ZWQgcmVzb3VyY2UgY291bGQgbm90IGJlIGZvdW5kLicsXG4gICAgICAgIHNob3VsZExvZzogZmFsc2UsXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFJhdGUgbGltaXRpbmcgZXJyb3JcbiAqL1xuZXhwb3J0IGNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQmFzZUFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobGltaXQ6IG51bWJlciwgd2luZG93TXM6IG51bWJlcikge1xuICAgIHN1cGVyKFxuICAgICAgYFJhdGUgbGltaXQgZXhjZWVkZWQ6ICR7bGltaXR9IHJlcXVlc3RzIHBlciAke3dpbmRvd01zfW1zYCxcbiAgICAgIEVycm9yQ29kZS5SQVRFX0xJTUlUX0VYQ0VFREVELFxuICAgICAgNDI5LFxuICAgICAge1xuICAgICAgICBkZXRhaWxzOiB7IGxpbWl0LCB3aW5kb3dNcyB9LFxuICAgICAgICB1c2VyTWVzc2FnZTogJ1RvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2Ugc2xvdyBkb3duIGFuZCB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgc2hvdWxkTG9nOiB0cnVlLFxuICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBzZXJ2aWNlIGVycm9yXG4gKi9cbmV4cG9ydCBjbGFzcyBFeHRlcm5hbFNlcnZpY2VFcnJvciBleHRlbmRzIEJhc2VBcHBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHNlcnZpY2U6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogYW55KSB7XG4gICAgc3VwZXIoXG4gICAgICBgJHtzZXJ2aWNlfSBlcnJvcjogJHttZXNzYWdlfWAsXG4gICAgICBFcnJvckNvZGUuRVhURVJOQUxfU0VSVklDRV9FUlJPUixcbiAgICAgIDUwMyxcbiAgICAgIHtcbiAgICAgICAgZGV0YWlsczogeyBzZXJ2aWNlLCAuLi5kZXRhaWxzIH0sXG4gICAgICAgIHVzZXJNZXNzYWdlOiAnQSBzZXJ2aWNlIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLicsXG4gICAgICAgIHNob3VsZExvZzogdHJ1ZSxcbiAgICAgICAgc2hvdWxkTm90aWZ5VXNlcjogdHJ1ZSxcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVSUk9SIERFVEVDVElPTiBBTkQgVFJBTlNGT1JNQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDb252ZXJ0IHVua25vd24gZXJyb3JzIHRvIHN0YW5kYXJkaXplZCBBcHBFcnJvciBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZUVycm9yKGVycm9yOiB1bmtub3duLCBjb250ZXh0PzogRXJyb3JDb250ZXh0KTogQXBwRXJyb3Ige1xuICAvLyBBbHJlYWR5IGFuIEFwcEVycm9yXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEJhc2VBcHBFcnJvcikge1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8vIFpvZCB2YWxpZGF0aW9uIGVycm9yc1xuICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBab2RFcnJvcikge1xuICAgIGNvbnN0IGlzc3VlcyA9IGVycm9yLmlzc3Vlcy5tYXAoaXNzdWUgPT4gKHtcbiAgICAgIGZpZWxkOiBpc3N1ZS5wYXRoLmpvaW4oJy4nKSxcbiAgICAgIG1lc3NhZ2U6IGlzc3VlLm1lc3NhZ2UsXG4gICAgICBjb2RlOiBpc3N1ZS5jb2RlLFxuICAgIH0pKTtcbiAgICBcbiAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25FcnJvcignVmFsaWRhdGlvbiBmYWlsZWQnLCB7IGlzc3VlcyB9KTtcbiAgfVxuXG4gIC8vIFByaXNtYSBkYXRhYmFzZSBlcnJvcnNcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJpc21hLlByaXNtYUNsaWVudEtub3duUmVxdWVzdEVycm9yKSB7XG4gICAgcmV0dXJuIGhhbmRsZVByaXNtYUVycm9yKGVycm9yLCBjb250ZXh0KTtcbiAgfVxuXG4gIC8vIFN0YW5kYXJkIEphdmFTY3JpcHQgZXJyb3JzXG4gIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGVycm9yIHBhdHRlcm5zXG4gICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoIGZhaWxlZCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0VOT1RGT1VORCcpKSB7XG4gICAgICByZXR1cm4gbmV3IEV4dGVybmFsU2VydmljZUVycm9yKCdOZXR3b3JrJywgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICAgIFxuICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdPcGVuQUknKSkge1xuICAgICAgcmV0dXJuIG5ldyBFeHRlcm5hbFNlcnZpY2VFcnJvcignT3BlbkFJJywgZXJyb3IubWVzc2FnZSwgeyBvcmlnaW5hbEVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xuICAgIH1cblxuICAgIC8vIEdlbmVyaWMgZXJyb3IgY29udmVyc2lvblxuICAgIHJldHVybiBuZXcgQmFzZUFwcEVycm9yKFxuICAgICAgZXJyb3IubWVzc2FnZSxcbiAgICAgIEVycm9yQ29kZS5JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICAgICA1MDAsXG4gICAgICB7XG4gICAgICAgIGRldGFpbHM6IHsgb3JpZ2luYWxFcnJvcjogZXJyb3IubWVzc2FnZSwgc3RhY2s6IGVycm9yLnN0YWNrIH0sXG4gICAgICAgIHVzZXJNZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICBzaG91bGRMb2c6IHRydWUsXG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8vIFVua25vd24gZXJyb3IgdHlwZXNcbiAgcmV0dXJuIG5ldyBCYXNlQXBwRXJyb3IoXG4gICAgJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnLFxuICAgIEVycm9yQ29kZS5VTktOT1dOX0VSUk9SLFxuICAgIDUwMCxcbiAgICB7XG4gICAgICBkZXRhaWxzOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICB1c2VyTWVzc2FnZTogJ0FuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgICAgIHNob3VsZExvZzogdHJ1ZSxcbiAgICB9XG4gICk7XG59XG5cbi8qKlxuICogSGFuZGxlIFByaXNtYSBkYXRhYmFzZSBlcnJvcnNcbiAqL1xuZnVuY3Rpb24gaGFuZGxlUHJpc21hRXJyb3IoZXJyb3I6IFByaXNtYS5QcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciwgX2NvbnRleHQ/OiBFcnJvckNvbnRleHQpOiBBcHBFcnJvciB7XG4gIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgIGNhc2UgJ1AyMDAyJzogLy8gVW5pcXVlIGNvbnN0cmFpbnQgdmlvbGF0aW9uXG4gICAgICBjb25zdCBmaWVsZCA9IChlcnJvci5tZXRhPy50YXJnZXQgYXMgc3RyaW5nW10pPy5qb2luKCcsICcpIHx8ICdmaWVsZCc7XG4gICAgICByZXR1cm4gbmV3IEJhc2VBcHBFcnJvcihcbiAgICAgICAgYER1cGxpY2F0ZSBlbnRyeSBmb3IgJHtmaWVsZH1gLFxuICAgICAgICBFcnJvckNvZGUuQ09OU1RSQUlOVF9WSU9MQVRJT04sXG4gICAgICAgIDQwOSxcbiAgICAgICAge1xuICAgICAgICAgIGRldGFpbHM6IHsgZmllbGQsIGNvbnN0cmFpbnQ6ICd1bmlxdWUnIH0sXG4gICAgICAgICAgdXNlck1lc3NhZ2U6IGBUaGlzICR7ZmllbGR9IGlzIGFscmVhZHkgdGFrZW4uIFBsZWFzZSBjaG9vc2UgYW5vdGhlci5gLFxuICAgICAgICAgIHNob3VsZExvZzogZmFsc2UsXG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICBjYXNlICdQMjAwMyc6IC8vIEZvcmVpZ24ga2V5IGNvbnN0cmFpbnQgdmlvbGF0aW9uXG4gICAgICByZXR1cm4gbmV3IEJhc2VBcHBFcnJvcihcbiAgICAgICAgJ1JlZmVyZW5jZWQgcmVjb3JkIGRvZXMgbm90IGV4aXN0JyxcbiAgICAgICAgRXJyb3JDb2RlLkNPTlNUUkFJTlRfVklPTEFUSU9OLFxuICAgICAgICA0MDAsXG4gICAgICAgIHtcbiAgICAgICAgICBkZXRhaWxzOiB7IGNvbnN0cmFpbnQ6ICdmb3JlaWduX2tleScgfSxcbiAgICAgICAgICB1c2VyTWVzc2FnZTogJ0ludmFsaWQgcmVmZXJlbmNlIHRvIGFub3RoZXIgcmVjb3JkLicsXG4gICAgICAgICAgc2hvdWxkTG9nOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgY2FzZSAnUDIwMDQnOiAvLyBEYXRhYmFzZSBjb25zdHJhaW50IHZpb2xhdGlvblxuICAgICAgcmV0dXJuIG5ldyBCYXNlQXBwRXJyb3IoXG4gICAgICAgICdEYXRhYmFzZSBjb25zdHJhaW50IHZpb2xhdGlvbicsXG4gICAgICAgIEVycm9yQ29kZS5DT05TVFJBSU5UX1ZJT0xBVElPTixcbiAgICAgICAgNDAwLFxuICAgICAgICB7XG4gICAgICAgICAgdXNlck1lc3NhZ2U6ICdUaGUgb3BlcmF0aW9uIHZpb2xhdGVzIGRhdGFiYXNlIGNvbnN0cmFpbnRzLicsXG4gICAgICAgICAgc2hvdWxkTG9nOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgY2FzZSAnUDIwMjUnOiAvLyBSZWNvcmQgbm90IGZvdW5kXG4gICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXJyb3IoJ1JlY29yZCcpO1xuXG4gICAgY2FzZSAnUDEwMDEnOiAvLyBDYW4ndCByZWFjaCBkYXRhYmFzZSBzZXJ2ZXJcbiAgICBjYXNlICdQMTAwMic6IC8vIERhdGFiYXNlIHNlcnZlciB0aW1lb3V0XG4gICAgICByZXR1cm4gbmV3IEJhc2VBcHBFcnJvcihcbiAgICAgICAgJ0RhdGFiYXNlIGNvbm5lY3Rpb24gZXJyb3InLFxuICAgICAgICBFcnJvckNvZGUuQ09OTkVDVElPTl9FUlJPUixcbiAgICAgICAgNTAzLFxuICAgICAgICB7XG4gICAgICAgICAgdXNlck1lc3NhZ2U6ICdEYXRhYmFzZSBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nLFxuICAgICAgICAgIHNob3VsZExvZzogdHJ1ZSxcbiAgICAgICAgICBzaG91bGROb3RpZnlVc2VyOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBuZXcgQmFzZUFwcEVycm9yKFxuICAgICAgICAnRGF0YWJhc2UgZXJyb3InLFxuICAgICAgICBFcnJvckNvZGUuREFUQUJBU0VfRVJST1IsXG4gICAgICAgIDUwMCxcbiAgICAgICAge1xuICAgICAgICAgIGRldGFpbHM6IHsgcHJpc21hQ29kZTogZXJyb3IuY29kZSwgcHJpc21hTWVzc2FnZTogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICAgIHVzZXJNZXNzYWdlOiAnQSBkYXRhYmFzZSBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgICAgICAgIHNob3VsZExvZzogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFUlJPUiBMT0dHSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBMb2dFbnRyeSB7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgbGV2ZWw6ICdlcnJvcicgfCAnd2FybicgfCAnaW5mbyc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgY29kZTogRXJyb3JDb2RlO1xuICBzdGF0dXNDb2RlOiBudW1iZXI7XG4gIGNvbnRleHQ/OiBFcnJvckNvbnRleHQ7XG4gIHN0YWNrPzogc3RyaW5nO1xuICBkZXRhaWxzPzogYW55O1xufVxuXG4vKipcbiAqIExvZyBlcnJvcnMgd2l0aCBhcHByb3ByaWF0ZSBsZXZlbCBhbmQgZGV0YWlsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2dFcnJvcihlcnJvcjogQXBwRXJyb3IsIGNvbnRleHQ/OiBFcnJvckNvbnRleHQpOiB2b2lkIHtcbiAgaWYgKCFlcnJvci5zaG91bGRMb2cpIHJldHVybjtcblxuICBjb25zdCBsb2dFbnRyeTogTG9nRW50cnkgPSB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgIGxldmVsOiBnZXRMb2dMZXZlbChlcnJvciksXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgIHN0YXR1c0NvZGU6IGVycm9yLnN0YXR1c0NvZGUsXG4gICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcbiAgfTtcblxuICBpZiAoY29udGV4dCkge1xuICAgIGxvZ0VudHJ5LmNvbnRleHQgPSBjb250ZXh0O1xuICB9XG5cbiAgaWYgKGVycm9yLnN0YWNrKSB7XG4gICAgbG9nRW50cnkuc3RhY2sgPSBlcnJvci5zdGFjaztcbiAgfVxuXG4gIC8vIExvZyB0byBjb25zb2xlIChpbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIGdvIHRvIGEgbG9nZ2luZyBzZXJ2aWNlKVxuICBzd2l0Y2ggKGxvZ0VudHJ5LmxldmVsKSB7XG4gICAgY2FzZSAnZXJyb3InOlxuICAgICAgY29uc29sZS5lcnJvcign8J+aqCBBcHBsaWNhdGlvbiBFcnJvcjonLCBsb2dFbnRyeSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3YXJuJzpcbiAgICAgIGNvbnNvbGUud2Fybign4pqg77iPIEFwcGxpY2F0aW9uIFdhcm5pbmc6JywgbG9nRW50cnkpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnaW5mbyc6XG4gICAgICBjb25zb2xlLmluZm8oJ+KEue+4jyBBcHBsaWNhdGlvbiBJbmZvOicsIGxvZ0VudHJ5KTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gSW4gcHJvZHVjdGlvbiwgYWxzbyBzZW5kIHRvIG1vbml0b3Jpbmcgc2VydmljZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIHNlbmRUb01vbml0b3JpbmdTZXJ2aWNlKGxvZ0VudHJ5KTtcbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZSBhcHByb3ByaWF0ZSBsb2cgbGV2ZWwgYmFzZWQgb24gZXJyb3JcbiAqL1xuZnVuY3Rpb24gZ2V0TG9nTGV2ZWwoZXJyb3I6IEFwcEVycm9yKTogJ2Vycm9yJyB8ICd3YXJuJyB8ICdpbmZvJyB7XG4gIGlmIChlcnJvci5zdGF0dXNDb2RlID49IDUwMCkgcmV0dXJuICdlcnJvcic7XG4gIGlmIChlcnJvci5zdGF0dXNDb2RlID49IDQwMCkgcmV0dXJuICd3YXJuJztcbiAgcmV0dXJuICdpbmZvJztcbn1cblxuLyoqXG4gKiBTZW5kIGVycm9yIHRvIG1vbml0b3Jpbmcgc2VydmljZSAocGxhY2Vob2xkZXIpXG4gKi9cbmZ1bmN0aW9uIHNlbmRUb01vbml0b3JpbmdTZXJ2aWNlKGxvZ0VudHJ5OiBMb2dFbnRyeSk6IHZvaWQge1xuICAvLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHdvdWxkIHNlbmQgdG8gU2VudHJ5LCBEYXRhRG9nLCBldGMuXG4gIC8vIEZvciBub3csIGp1c3QgYSBwbGFjZWhvbGRlclxuICBpZiAocHJvY2Vzcy5lbnYuU0VOVFJZX0RTTiAmJiBsb2dFbnRyeS5sZXZlbCA9PT0gJ2Vycm9yJykge1xuICAgIC8vIFNlbnRyeSBpbnRlZ3JhdGlvbiB3b3VsZCBnbyBoZXJlXG4gICAgY29uc29sZS5sb2coJ/Cfk4ogV291bGQgc2VuZCB0byBtb25pdG9yaW5nIHNlcnZpY2U6Jywge1xuICAgICAgbWVzc2FnZTogbG9nRW50cnkubWVzc2FnZSxcbiAgICAgIGNvZGU6IGxvZ0VudHJ5LmNvZGUsXG4gICAgICB1c2VySWQ6IGxvZ0VudHJ5LmNvbnRleHQ/LnVzZXJJZCxcbiAgICB9KTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFUlJPUiBSRVNQT05TRSBIRUxQRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIHN0YW5kYXJkaXplZCBlcnJvciByZXNwb25zZSBmb3IgQVBJIGVuZHBvaW50c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcjogQXBwRXJyb3IsIGNvbnRleHQ/OiBFcnJvckNvbnRleHQpOiBOZXh0UmVzcG9uc2Uge1xuICAvLyBMb2cgdGhlIGVycm9yXG4gIGxvZ0Vycm9yKGVycm9yLCBjb250ZXh0KTtcblxuICAvLyBDcmVhdGUgc2FmZSByZXNwb25zZSBmb3IgdXNlclxuICBjb25zdCByZXNwb25zZUJvZHkgPSB7XG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgZXJyb3I6IHtcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICBtZXNzYWdlOiBlcnJvci51c2VyTWVzc2FnZSB8fCBlcnJvci5tZXNzYWdlLFxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHtcbiAgICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlscyxcbiAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgfSksXG4gICAgfSxcbiAgICAuLi4oY29udGV4dD8ucmVxdWVzdElkICYmIHsgcmVxdWVzdElkOiBjb250ZXh0LnJlcXVlc3RJZCB9KSxcbiAgfTtcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2VCb2R5LCB7IFxuICAgIHN0YXR1czogZXJyb3Iuc3RhdHVzQ29kZSxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnWC1FcnJvci1Db2RlJzogZXJyb3IuY29kZSxcbiAgICAgICdYLVJlcXVlc3QtSUQnOiBjb250ZXh0Py5yZXF1ZXN0SWQgfHwgJ3Vua25vd24nLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBzdWNjZXNzIHJlc3BvbnNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdWNjZXNzUmVzcG9uc2UoXG4gIGRhdGE6IGFueSxcbiAgb3B0aW9uczoge1xuICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgcGFnaW5hdGlvbj86IHtcbiAgICAgIHBhZ2U6IG51bWJlcjtcbiAgICAgIGxpbWl0OiBudW1iZXI7XG4gICAgICB0b3RhbDogbnVtYmVyO1xuICAgICAgdG90YWxQYWdlczogbnVtYmVyO1xuICAgIH07XG4gICAgcmVxdWVzdElkPzogc3RyaW5nO1xuICB9ID0ge31cbik6IE5leHRSZXNwb25zZSB7XG4gIGNvbnN0IHJlc3BvbnNlQm9keSA9IHtcbiAgICBzdWNjZXNzOiB0cnVlLFxuICAgIGRhdGEsXG4gICAgLi4uKG9wdGlvbnMubWVzc2FnZSAmJiB7IG1lc3NhZ2U6IG9wdGlvbnMubWVzc2FnZSB9KSxcbiAgICAuLi4ob3B0aW9ucy5wYWdpbmF0aW9uICYmIHsgcGFnaW5hdGlvbjogb3B0aW9ucy5wYWdpbmF0aW9uIH0pLFxuICAgIC4uLihvcHRpb25zLnJlcXVlc3RJZCAmJiB7IHJlcXVlc3RJZDogb3B0aW9ucy5yZXF1ZXN0SWQgfSksXG4gIH07XG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlQm9keSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVSUk9SIEhBTkRMSU5HIE1JRERMRVdBUkVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBBc3luYyBlcnJvciB3cmFwcGVyIGZvciBBUEkgcm91dGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGluZzxUIGV4dGVuZHMgYW55W10sIFI+KFxuICBoYW5kbGVyOiAoLi4uYXJnczogVCkgPT4gUHJvbWlzZTxSPlxuKSB7XG4gIHJldHVybiBhc3luYyAoLi4uYXJnczogVCk6IFByb21pc2U8UiB8IE5leHRSZXNwb25zZT4gPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgaGFuZGxlciguLi5hcmdzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgY29udGV4dDogRXJyb3JDb250ZXh0ID0ge1xuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgY29udGV4dCB3b3VsZCBiZSBleHRyYWN0ZWQgZnJvbSByZXF1ZXN0IGlmIGF2YWlsYWJsZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3Qgbm9ybWFsaXplZEVycm9yID0gbm9ybWFsaXplRXJyb3IoZXJyb3IsIGNvbnRleHQpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUVycm9yUmVzcG9uc2Uobm9ybWFsaXplZEVycm9yLCBjb250ZXh0KTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogVHJ5LWNhdGNoIHdyYXBwZXIgd2l0aCBlcnJvciBub3JtYWxpemF0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlQXN5bmM8VD4oXG4gIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPixcbiAgY29udGV4dD86IEVycm9yQ29udGV4dFxuKTogUHJvbWlzZTx7IGRhdGE/OiBUOyBlcnJvcj86IEFwcEVycm9yIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgcmV0dXJuIHsgZGF0YSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFcnJvciA9IG5vcm1hbGl6ZUVycm9yKGVycm9yLCBjb250ZXh0KTtcbiAgICBsb2dFcnJvcihub3JtYWxpemVkRXJyb3IsIGNvbnRleHQpO1xuICAgIHJldHVybiB7IGVycm9yOiBub3JtYWxpemVkRXJyb3IgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVU0VSLUZSSUVORExZIEVSUk9SIE1FU1NBR0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2V0IHVzZXItZnJpZW5kbHkgZXJyb3IgbWVzc2FnZSBmb3IgY29tbW9uIHNjZW5hcmlvc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJpZW5kbHlFcnJvck1lc3NhZ2UoY29kZTogRXJyb3JDb2RlLCBfY29udGV4dD86IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IG1lc3NhZ2VzOiBSZWNvcmQ8RXJyb3JDb2RlLCBzdHJpbmc+ID0ge1xuICAgIFtFcnJvckNvZGUuVU5BVVRIT1JJWkVEXTogJ1BsZWFzZSBzaWduIGluIHRvIGNvbnRpbnVlLicsXG4gICAgW0Vycm9yQ29kZS5GT1JCSURERU5dOiAnWW91IGRvblxcJ3QgaGF2ZSBwZXJtaXNzaW9uIHRvIHBlcmZvcm0gdGhpcyBhY3Rpb24uJyxcbiAgICBbRXJyb3JDb2RlLlRPS0VOX0VYUElSRURdOiAnWW91ciBzZXNzaW9uIGhhcyBleHBpcmVkLiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi4nLFxuICAgIFtFcnJvckNvZGUuSU5WQUxJRF9DUkVERU5USUFMU106ICdJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkLicsXG4gICAgW0Vycm9yQ29kZS5BQ0NPVU5UX1NVU1BFTkRFRF06ICdZb3VyIGFjY291bnQgaGFzIGJlZW4gdGVtcG9yYXJpbHkgc3VzcGVuZGVkLiBDb250YWN0IHN1cHBvcnQgZm9yIGFzc2lzdGFuY2UuJyxcbiAgICBbRXJyb3JDb2RlLkFDQ09VTlRfQkFOTkVEXTogJ1lvdXIgYWNjb3VudCBoYXMgYmVlbiBwZXJtYW5lbnRseSBiYW5uZWQuJyxcbiAgICBcbiAgICBbRXJyb3JDb2RlLlZBTElEQVRJT05fRVJST1JdOiAnUGxlYXNlIGNoZWNrIHlvdXIgaW5wdXQgYW5kIHRyeSBhZ2Fpbi4nLFxuICAgIFtFcnJvckNvZGUuSU5WQUxJRF9JTlBVVF06ICdTb21lIGluZm9ybWF0aW9uIHlvdSBwcm92aWRlZCBpcyBub3QgdmFsaWQuJyxcbiAgICBbRXJyb3JDb2RlLk1JU1NJTkdfUkVRVUlSRURfRklFTERdOiAnUGxlYXNlIGZpbGwgaW4gYWxsIHJlcXVpcmVkIGZpZWxkcy4nLFxuICAgIFxuICAgIFtFcnJvckNvZGUuQ09OVEVOVF9CTE9DS0VEXTogJ1lvdXIgY29udGVudCB2aW9sYXRlcyBvdXIgY29tbXVuaXR5IGd1aWRlbGluZXMgYW5kIGhhcyBiZWVuIGJsb2NrZWQuJyxcbiAgICBbRXJyb3JDb2RlLkNPTlRFTlRfRkxBR0dFRF06ICdZb3VyIGNvbnRlbnQgaGFzIGJlZW4gZmxhZ2dlZCBmb3IgcmV2aWV3LicsXG4gICAgW0Vycm9yQ29kZS5NT0RFUkFUSU9OX0VSUk9SXTogJ1VuYWJsZSB0byBwcm9jZXNzIHlvdXIgY29udGVudC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLFxuICAgIFtFcnJvckNvZGUuU0FGRVRZX1ZJT0xBVElPTl06ICdUaGlzIGFjdGlvbiB2aW9sYXRlcyBvdXIgc2FmZXR5IHBvbGljaWVzLicsXG4gICAgXG4gICAgW0Vycm9yQ29kZS5OT1RfRk9VTkRdOiAnVGhlIHJlcXVlc3RlZCByZXNvdXJjZSBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBbRXJyb3JDb2RlLlJFU09VUkNFX0VYSVNUU106ICdUaGlzIHJlc291cmNlIGFscmVhZHkgZXhpc3RzLicsXG4gICAgW0Vycm9yQ29kZS5SRVNPVVJDRV9MSU1JVF9FWENFRURFRF06ICdZb3UgaGF2ZSByZWFjaGVkIHlvdXIgbGltaXQgZm9yIHRoaXMgcmVzb3VyY2UuJyxcbiAgICBcbiAgICBbRXJyb3JDb2RlLlJBVEVfTElNSVRfRVhDRUVERURdOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSBzbG93IGRvd24gYW5kIHRyeSBhZ2Fpbi4nLFxuICAgIFtFcnJvckNvZGUuVE9PX01BTllfUkVRVUVTVFNdOiAnVG9vIG1hbnkgcmVxdWVzdHMuIFBsZWFzZSB3YWl0IGJlZm9yZSB0cnlpbmcgYWdhaW4uJyxcbiAgICBcbiAgICBbRXJyb3JDb2RlLkZJTEVfVE9PX0xBUkdFXTogJ1RoZSBmaWxlIHlvdSB1cGxvYWRlZCBpcyB0b28gbGFyZ2UuJyxcbiAgICBbRXJyb3JDb2RlLklOVkFMSURfRklMRV9UWVBFXTogJ1RoaXMgZmlsZSB0eXBlIGlzIG5vdCBzdXBwb3J0ZWQuJyxcbiAgICBbRXJyb3JDb2RlLlVQTE9BRF9GQUlMRURdOiAnRmlsZSB1cGxvYWQgZmFpbGVkLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgXG4gICAgW0Vycm9yQ29kZS5EQVRBQkFTRV9FUlJPUl06ICdBIGRhdGFiYXNlIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgW0Vycm9yQ29kZS5DT05TVFJBSU5UX1ZJT0xBVElPTl06ICdUaGlzIGFjdGlvbiB3b3VsZCB2aW9sYXRlIGRhdGEgY29uc3RyYWludHMuJyxcbiAgICBbRXJyb3JDb2RlLkNPTk5FQ1RJT05fRVJST1JdOiAnVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlLicsXG4gICAgXG4gICAgW0Vycm9yQ29kZS5PUEVOQUlfRVJST1JdOiAnQ29udGVudCBtb2RlcmF0aW9uIHNlcnZpY2UgaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuJyxcbiAgICBbRXJyb3JDb2RlLkVNQUlMX1NFUlZJQ0VfRVJST1JdOiAnVW5hYmxlIHRvIHNlbmQgZW1haWwgYXQgdGhpcyB0aW1lLicsXG4gICAgW0Vycm9yQ29kZS5FWFRFUk5BTF9TRVJWSUNFX0VSUk9SXTogJ0FuIGV4dGVybmFsIHNlcnZpY2UgaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuJyxcbiAgICBcbiAgICBbRXJyb3JDb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUl06ICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgW0Vycm9yQ29kZS5CQURfUkVRVUVTVF06ICdJbnZhbGlkIHJlcXVlc3QuIFBsZWFzZSBjaGVjayB5b3VyIGlucHV0LicsXG4gICAgW0Vycm9yQ29kZS5VTktOT1dOX0VSUk9SXTogJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyxcbiAgfTtcblxuICByZXR1cm4gbWVzc2FnZXNbY29kZV0gfHwgJ0FuIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLic7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVYUE9SVCBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHtcbiAgQmFzZUFwcEVycm9yLFxufTsiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiWm9kRXJyb3IiLCJQcmlzbWEiLCJFcnJvckNvZGUiLCJCYXNlQXBwRXJyb3IiLCJFcnJvciIsImNvZGUiLCJzdGF0dXNDb2RlIiwiZGV0YWlscyIsInVzZXJNZXNzYWdlIiwic2hvdWxkTG9nIiwic2hvdWxkTm90aWZ5VXNlciIsIm1lc3NhZ2UiLCJvcHRpb25zIiwibmFtZSIsImNhcHR1cmVTdGFja1RyYWNlIiwiVmFsaWRhdGlvbkVycm9yIiwiQXV0aGVudGljYXRpb25FcnJvciIsIk1vZGVyYXRpb25FcnJvciIsIlNhZmV0eVZpb2xhdGlvbkVycm9yIiwiTm90Rm91bmRFcnJvciIsInJlc291cmNlIiwiaWRlbnRpZmllciIsIlJhdGVMaW1pdEVycm9yIiwibGltaXQiLCJ3aW5kb3dNcyIsIkV4dGVybmFsU2VydmljZUVycm9yIiwic2VydmljZSIsIm5vcm1hbGl6ZUVycm9yIiwiZXJyb3IiLCJjb250ZXh0IiwiaXNzdWVzIiwibWFwIiwiaXNzdWUiLCJmaWVsZCIsInBhdGgiLCJqb2luIiwiUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IiLCJoYW5kbGVQcmlzbWFFcnJvciIsImluY2x1ZGVzIiwib3JpZ2luYWxFcnJvciIsInN0YWNrIiwiU3RyaW5nIiwiX2NvbnRleHQiLCJtZXRhIiwidGFyZ2V0IiwiY29uc3RyYWludCIsInByaXNtYUNvZGUiLCJwcmlzbWFNZXNzYWdlIiwibG9nRXJyb3IiLCJsb2dFbnRyeSIsInRpbWVzdGFtcCIsIkRhdGUiLCJsZXZlbCIsImdldExvZ0xldmVsIiwiY29uc29sZSIsIndhcm4iLCJpbmZvIiwicHJvY2VzcyIsInNlbmRUb01vbml0b3JpbmdTZXJ2aWNlIiwiZW52IiwiU0VOVFJZX0RTTiIsImxvZyIsInVzZXJJZCIsImNyZWF0ZUVycm9yUmVzcG9uc2UiLCJyZXNwb25zZUJvZHkiLCJzdWNjZXNzIiwicmVxdWVzdElkIiwianNvbiIsInN0YXR1cyIsImhlYWRlcnMiLCJjcmVhdGVTdWNjZXNzUmVzcG9uc2UiLCJkYXRhIiwicGFnaW5hdGlvbiIsIndpdGhFcnJvckhhbmRsaW5nIiwiaGFuZGxlciIsImFyZ3MiLCJub3JtYWxpemVkRXJyb3IiLCJzYWZlQXN5bmMiLCJvcGVyYXRpb24iLCJnZXRGcmllbmRseUVycm9yTWVzc2FnZSIsIm1lc3NhZ2VzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/utils/error-handling.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/utils/validation.ts":
/*!**************************************!*\
  !*** ./src/core/utils/validation.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiResponseSchema: () => (/* binding */ ApiResponseSchema),\n/* harmony export */   CommentCreationSchema: () => (/* binding */ CommentCreationSchema),\n/* harmony export */   CommunityCreationSchema: () => (/* binding */ CommunityCreationSchema),\n/* harmony export */   ContentLimits: () => (/* binding */ ContentLimits),\n/* harmony export */   DirectMessageSchema: () => (/* binding */ DirectMessageSchema),\n/* harmony export */   FileUploadSchema: () => (/* binding */ FileUploadSchema),\n/* harmony export */   ModerationActionSchema: () => (/* binding */ ModerationActionSchema),\n/* harmony export */   PaginationSchema: () => (/* binding */ PaginationSchema),\n/* harmony export */   PostCreationSchema: () => (/* binding */ PostCreationSchema),\n/* harmony export */   ReportSubmissionSchema: () => (/* binding */ ReportSubmissionSchema),\n/* harmony export */   SearchSchema: () => (/* binding */ SearchSchema),\n/* harmony export */   TrainerProfileSchema: () => (/* binding */ TrainerProfileSchema),\n/* harmony export */   UserProfileUpdateSchema: () => (/* binding */ UserProfileUpdateSchema),\n/* harmony export */   UserRegistrationSchema: () => (/* binding */ UserRegistrationSchema),\n/* harmony export */   ValidationPatterns: () => (/* binding */ ValidationPatterns),\n/* harmony export */   sanitizeTextInput: () => (/* binding */ sanitizeTextInput),\n/* harmony export */   validateContentSafety: () => (/* binding */ validateContentSafety),\n/* harmony export */   validateHashtags: () => (/* binding */ validateHashtags),\n/* harmony export */   validateMentions: () => (/* binding */ validateMentions)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Input Validation Schemas for Massimino\n * Comprehensive validation with safety-first approach using Zod\n */ \n\n// ============================================================================\n// BASIC VALIDATION HELPERS\n// ============================================================================\n/**\n * Common validation patterns and constraints\n */ const ValidationPatterns = {\n    // Text content validation\n    EMAIL: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n    PHONE: /^\\+?[\\d\\s\\-\\(\\)]{10,15}$/,\n    URL: /^https?:\\/\\/[^\\s$.?#].[^\\s]*$/,\n    // Fitness-specific patterns\n    USERNAME: /^[a-zA-Z0-9_]{3,20}$/,\n    HASHTAG: /^#[a-zA-Z0-9_]{1,30}$/,\n    MENTION: /^@[a-zA-Z0-9_]{1,20}$/,\n    // Safety patterns (things to watch for)\n    SUSPICIOUS_CONTACT: /(\\b(call|text|dm|message)\\s+me\\b|@gmail\\.com|\\d{3}[-.]?\\d{3}[-.]?\\d{4})/i,\n    EXTERNAL_LINKS: /\\b(?:bit\\.ly|tinyurl|t\\.co|goo\\.gl|short\\.link)\\b/i,\n    CRYPTOCURRENCY: /\\b(bitcoin|btc|ethereum|eth|crypto|NFT|blockchain)\\b/i\n};\n/**\n * Content length constraints\n */ const ContentLimits = {\n    POST_TITLE: {\n        min: 1,\n        max: 200\n    },\n    POST_CONTENT: {\n        min: 1,\n        max: 5000\n    },\n    COMMENT: {\n        min: 1,\n        max: 1000\n    },\n    MESSAGE: {\n        min: 1,\n        max: 2000\n    },\n    BIO: {\n        min: 0,\n        max: 500\n    },\n    USERNAME: {\n        min: 3,\n        max: 20\n    },\n    NAME: {\n        min: 1,\n        max: 50\n    },\n    EMAIL: {\n        min: 5,\n        max: 100\n    }\n};\n// ============================================================================\n// USER VALIDATION SCHEMAS\n// ============================================================================\n/**\n * User registration validation\n */ const UserRegistrationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.NAME.min, 'Name is required').max(ContentLimits.NAME.max, 'Name is too long').regex(/^[a-zA-Z\\s\\-'\\.]+$/, 'Name contains invalid characters').transform((str)=>str.trim()),\n    email: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.EMAIL.min, 'Email is required').max(ContentLimits.EMAIL.max, 'Email is too long').email('Invalid email format').toLowerCase(),\n    role: zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.UserRole).default(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.UserRole.CLIENT),\n    // Safety agreement\n    agreeToGuidelines: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().refine((val)=>val === true, 'You must agree to the community guidelines'),\n    agreeToTerms: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().refine((val)=>val === true, 'You must agree to the terms of service'),\n    // Optional fields\n    profileImage: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Invalid image URL').optional(),\n    timezone: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\n/**\n * User profile update validation\n */ const UserProfileUpdateSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.NAME.min).max(ContentLimits.NAME.max).regex(/^[a-zA-Z\\s\\-'\\.]+$/, 'Name contains invalid characters').transform((str)=>str.trim()).optional(),\n    bio: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(ContentLimits.BIO.max, 'Bio is too long').transform((str)=>str.trim()).optional(),\n    profileImage: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Invalid image URL').optional(),\n    // Privacy settings\n    profileVisibility: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'PUBLIC',\n        'PRIVATE',\n        'TRAINERS_ONLY'\n    ]).optional(),\n    showRealName: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional(),\n    acceptDMs: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional(),\n    onlyTrainerDMs: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\n/**\n * Trainer profile validation\n */ const TrainerProfileSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    bio: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(50, 'Trainer bio must be at least 50 characters').max(ContentLimits.BIO.max, 'Bio is too long').transform((str)=>str.trim()),\n    specializations: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).min(1, 'At least one specialization is required').max(10, 'Maximum 10 specializations allowed').refine((arr)=>arr.every((spec)=>spec.length >= 3 && spec.length <= 50), 'Each specialization must be 3-50 characters'),\n    certifications: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Certification name is required'),\n        organization: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Organization is required'),\n        date: zod__WEBPACK_IMPORTED_MODULE_1__.string().datetime('Invalid certification date'),\n        expirationDate: zod__WEBPACK_IMPORTED_MODULE_1__.string().datetime().optional(),\n        credentialUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url().optional()\n    })).min(1, 'At least one certification is required'),\n    yearsExperience: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(0, 'Years of experience cannot be negative').max(50, 'Years of experience seems unrealistic'),\n    hourlyRate: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(10, 'Minimum hourly rate is $10').max(500, 'Maximum hourly rate is $500').optional()\n});\n// ============================================================================\n// CONTENT VALIDATION SCHEMAS\n// ============================================================================\n/**\n * Post creation validation\n */ const PostCreationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.POST_TITLE.min, 'Title is required').max(ContentLimits.POST_TITLE.max, 'Title is too long').transform((str)=>str.trim()).refine((str)=>!ValidationPatterns.SUSPICIOUS_CONTACT.test(str), 'Title contains potentially inappropriate contact information'),\n    content: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.POST_CONTENT.min, 'Content is required').max(ContentLimits.POST_CONTENT.max, 'Content is too long').transform((str)=>str.trim()).refine((str)=>str.split('\\n').length <= 100, 'Too many line breaks in content'),\n    communityId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid community ID').optional(),\n    tags: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(ValidationPatterns.HASHTAG)).max(10, 'Maximum 10 tags allowed').optional(),\n    attachments: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            'IMAGE',\n            'VIDEO',\n            'DOCUMENT'\n        ]),\n        url: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Invalid attachment URL'),\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100),\n        size: zod__WEBPACK_IMPORTED_MODULE_1__.number().max(50 * 1024 * 1024)\n    })).max(5, 'Maximum 5 attachments allowed').optional()\n});\n/**\n * Comment creation validation\n */ const CommentCreationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    content: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.COMMENT.min, 'Comment cannot be empty').max(ContentLimits.COMMENT.max, 'Comment is too long').transform((str)=>str.trim()).refine((str)=>!ValidationPatterns.SUSPICIOUS_CONTACT.test(str), 'Comment contains potentially inappropriate contact information'),\n    postId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid post ID'),\n    parentId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid parent comment ID').optional()\n});\n/**\n * Direct message validation\n */ const DirectMessageSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    content: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(ContentLimits.MESSAGE.min, 'Message cannot be empty').max(ContentLimits.MESSAGE.max, 'Message is too long').transform((str)=>str.trim()),\n    recipientId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid recipient ID'),\n    attachments: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n            'IMAGE',\n            'DOCUMENT'\n        ]),\n        url: zod__WEBPACK_IMPORTED_MODULE_1__.string().url(),\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100)\n    })).max(3, 'Maximum 3 attachments allowed').optional()\n});\n/**\n * Community creation validation\n */ const CommunityCreationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(3, 'Community name must be at least 3 characters').max(50, 'Community name is too long').regex(/^[a-zA-Z0-9\\s\\-_]+$/, 'Community name contains invalid characters').transform((str)=>str.trim()),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(10, 'Description must be at least 10 characters').max(500, 'Description is too long').transform((str)=>str.trim()),\n    type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'PUBLIC',\n        'PRIVATE',\n        'TRAINER'\n    ]),\n    rules: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().min(5).max(200)).max(10, 'Maximum 10 community rules allowed').optional(),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'GENERAL_FITNESS',\n        'STRENGTH_TRAINING',\n        'CARDIO',\n        'YOGA',\n        'NUTRITION',\n        'WEIGHT_LOSS',\n        'MUSCLE_BUILDING',\n        'ENDURANCE',\n        'BEGINNERS',\n        'ADVANCED',\n        'WOMENS_FITNESS',\n        'MENS_FITNESS'\n    ])\n});\n// ============================================================================\n// MODERATION VALIDATION SCHEMAS\n// ============================================================================\n/**\n * Report submission validation\n */ const ReportSubmissionSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    reportedUserId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid user ID'),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(10, 'Please provide a detailed description').max(1000, 'Description is too long').transform((str)=>str.trim()),\n    evidence: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        screenshots: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().url()).max(5).optional(),\n        messageIds: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid()).max(10).optional(),\n        additionalContext: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).optional()\n    }).optional(),\n    contentId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid().optional(),\n    contentType: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'POST',\n        'COMMENT',\n        'MESSAGE',\n        'PROFILE'\n    ]).optional()\n});\n/**\n * Moderation action validation\n */ const ModerationActionSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    userId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid('Invalid user ID'),\n    action: zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction),\n    reason: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(10, 'Please provide a detailed reason').max(500, 'Reason is too long').transform((str)=>str.trim()),\n    duration: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1, 'Duration must be positive').max(8760, 'Maximum duration is 1 year (8760 hours)').optional(),\n    severity: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1).max(5),\n    violationType: zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType),\n    evidence: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        contentId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid().optional(),\n        screenshots: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().url()).optional(),\n        moderationLogId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid().optional()\n    }).optional()\n});\n// ============================================================================\n// SEARCH AND FILTERING SCHEMAS\n// ============================================================================\n/**\n * Search validation\n */ const SearchSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    query: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Search query is required').max(100, 'Search query is too long').transform((str)=>str.trim()),\n    type: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'POSTS',\n        'USERS',\n        'COMMUNITIES',\n        'ALL'\n    ]).default('ALL'),\n    filters: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        category: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n        dateFrom: zod__WEBPACK_IMPORTED_MODULE_1__.string().datetime().optional(),\n        dateTo: zod__WEBPACK_IMPORTED_MODULE_1__.string().datetime().optional(),\n        userRole: zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.UserRole).optional()\n    }).optional(),\n    page: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1).max(100).default(1),\n    limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1).max(100).default(20)\n});\n/**\n * Pagination validation\n */ const PaginationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1, 'Page must be at least 1').default(1),\n    limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1, 'Limit must be at least 1').max(100, 'Maximum limit is 100').default(20),\n    sortBy: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    sortOrder: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'asc',\n        'desc'\n    ]).default('desc')\n});\n// ============================================================================\n// API REQUEST VALIDATION\n// ============================================================================\n/**\n * Generic API response validation\n */ const ApiResponseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    success: zod__WEBPACK_IMPORTED_MODULE_1__.boolean(),\n    data: zod__WEBPACK_IMPORTED_MODULE_1__.any().optional(),\n    error: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        code: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        message: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        details: zod__WEBPACK_IMPORTED_MODULE_1__.any().optional()\n    }).optional(),\n    pagination: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        page: zod__WEBPACK_IMPORTED_MODULE_1__.number(),\n        limit: zod__WEBPACK_IMPORTED_MODULE_1__.number(),\n        total: zod__WEBPACK_IMPORTED_MODULE_1__.number(),\n        totalPages: zod__WEBPACK_IMPORTED_MODULE_1__.number()\n    }).optional()\n});\n/**\n * File upload validation\n */ const FileUploadSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    file: zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Filename is required'),\n        size: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(1, 'File cannot be empty').max(50 * 1024 * 1024, 'File too large (max 50MB)'),\n        type: zod__WEBPACK_IMPORTED_MODULE_1__.string().refine((type)=>[\n                'image/jpeg',\n                'image/png',\n                'image/webp',\n                'image/gif',\n                'video/mp4',\n                'video/webm',\n                'application/pdf',\n                'text/plain'\n            ].includes(type), 'File type not allowed')\n    }),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'PROFILE_IMAGE',\n        'POST_ATTACHMENT',\n        'MESSAGE_ATTACHMENT',\n        'CERTIFICATE'\n    ]),\n    alt: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(200, 'Alt text too long').optional()\n});\n// ============================================================================\n// VALIDATION UTILITIES\n// ============================================================================\n/**\n * Validate content for safety issues\n */ function validateContentSafety(content) {\n    const issues = [];\n    const suggestions = [];\n    // Check for suspicious contact patterns\n    if (ValidationPatterns.SUSPICIOUS_CONTACT.test(content)) {\n        issues.push('Content contains potential contact information sharing');\n        suggestions.push('Avoid sharing personal contact details in public posts');\n    }\n    // Check for external links\n    if (ValidationPatterns.EXTERNAL_LINKS.test(content)) {\n        issues.push('Content contains potentially unsafe shortened links');\n        suggestions.push('Use full URLs instead of shortened links for transparency');\n    }\n    // Check for off-topic content\n    if (ValidationPatterns.CRYPTOCURRENCY.test(content)) {\n        issues.push('Content may be off-topic for fitness platform');\n        suggestions.push('Keep discussions focused on fitness, health, and wellness');\n    }\n    // Check content length and quality\n    if (content.length < 10) {\n        issues.push('Content is very short');\n        suggestions.push('Provide more detailed information to help the community');\n    }\n    // Check for excessive caps\n    const capsRatio = (content.match(/[A-Z]/g) || []).length / content.length;\n    if (capsRatio > 0.5 && content.length > 20) {\n        issues.push('Excessive use of capital letters');\n        suggestions.push('Use normal capitalization for better readability');\n    }\n    return {\n        isValid: issues.length === 0,\n        issues,\n        suggestions\n    };\n}\n/**\n * Clean and sanitize text input\n */ function sanitizeTextInput(text) {\n    return text.trim().replace(/\\s+/g, ' ') // Replace multiple spaces with single space\n    .replace(/\\n{3,}/g, '\\n\\n') // Replace excessive line breaks\n    .replace(/[^\\w\\s\\-_.,:;!?@#()[\\]{}'\"]/g, '') // Remove special characters except common ones\n    .substring(0, 5000); // Truncate to max length\n}\n/**\n * Extract and validate mentions\n */ function validateMentions(content) {\n    const mentionMatches = content.match(/@(\\w+)/g) || [];\n    const mentions = mentionMatches.map((m)=>m.substring(1));\n    const errors = [];\n    if (mentions.length > 10) {\n        errors.push('Too many mentions (maximum 10 allowed)');\n    }\n    mentions.forEach((mention)=>{\n        if (!ValidationPatterns.USERNAME.test(mention)) {\n            errors.push(`Invalid username format: @${mention}`);\n        }\n    });\n    return {\n        mentions,\n        isValid: errors.length === 0,\n        errors\n    };\n}\n/**\n * Validate hashtags\n */ function validateHashtags(content) {\n    const hashtagMatches = content.match(/#(\\w+)/g) || [];\n    const hashtags = hashtagMatches.map((h)=>h.toLowerCase());\n    const errors = [];\n    if (hashtags.length > 20) {\n        errors.push('Too many hashtags (maximum 20 allowed)');\n    }\n    hashtags.forEach((hashtag)=>{\n        if (hashtag.length < 2) {\n            errors.push(`Hashtag too short: ${hashtag}`);\n        }\n        if (hashtag.length > 30) {\n            errors.push(`Hashtag too long: ${hashtag}`);\n        }\n    });\n    return {\n        hashtags,\n        isValid: errors.length === 0,\n        errors\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxDQUFDLGtCQUFrQixFQUFFb0IsU0FBUztRQUM1QztJQUNGO0lBRUEsT0FBTztRQUNMRjtRQUNBZixTQUFTVSxPQUFPeEYsTUFBTSxLQUFLO1FBQzNCd0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL2NvcmUvdXRpbHMvdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIElucHV0IFZhbGlkYXRpb24gU2NoZW1hcyBmb3IgTWFzc2ltaW5vXG4gKiBDb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gd2l0aCBzYWZldHktZmlyc3QgYXBwcm9hY2ggdXNpbmcgWm9kXG4gKi9cblxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBVc2VyUm9sZSwgVmlvbGF0aW9uVHlwZSwgTW9kZXJhdGlvbkFjdGlvbiBhcyBQcmlzbWFNb2RlcmF0aW9uQWN0aW9uIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBCQVNJQyBWQUxJREFUSU9OIEhFTFBFUlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDb21tb24gdmFsaWRhdGlvbiBwYXR0ZXJucyBhbmQgY29uc3RyYWludHNcbiAqL1xuZXhwb3J0IGNvbnN0IFZhbGlkYXRpb25QYXR0ZXJucyA9IHtcbiAgLy8gVGV4dCBjb250ZW50IHZhbGlkYXRpb25cbiAgRU1BSUw6IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvLFxuICBQSE9ORTogL15cXCs/W1xcZFxcc1xcLVxcKFxcKV17MTAsMTV9JC8sXG4gIFVSTDogL15odHRwcz86XFwvXFwvW15cXHMkLj8jXS5bXlxcc10qJC8sXG4gIFxuICAvLyBGaXRuZXNzLXNwZWNpZmljIHBhdHRlcm5zXG4gIFVTRVJOQU1FOiAvXlthLXpBLVowLTlfXXszLDIwfSQvLFxuICBIQVNIVEFHOiAvXiNbYS16QS1aMC05X117MSwzMH0kLyxcbiAgTUVOVElPTjogL15AW2EtekEtWjAtOV9dezEsMjB9JC8sXG4gIFxuICAvLyBTYWZldHkgcGF0dGVybnMgKHRoaW5ncyB0byB3YXRjaCBmb3IpXG4gIFNVU1BJQ0lPVVNfQ09OVEFDVDogLyhcXGIoY2FsbHx0ZXh0fGRtfG1lc3NhZ2UpXFxzK21lXFxifEBnbWFpbFxcLmNvbXxcXGR7M31bLS5dP1xcZHszfVstLl0/XFxkezR9KS9pLFxuICBFWFRFUk5BTF9MSU5LUzogL1xcYig/OmJpdFxcLmx5fHRpbnl1cmx8dFxcLmNvfGdvb1xcLmdsfHNob3J0XFwubGluaylcXGIvaSxcbiAgQ1JZUFRPQ1VSUkVOQ1k6IC9cXGIoYml0Y29pbnxidGN8ZXRoZXJldW18ZXRofGNyeXB0b3xORlR8YmxvY2tjaGFpbilcXGIvaSxcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogQ29udGVudCBsZW5ndGggY29uc3RyYWludHNcbiAqL1xuZXhwb3J0IGNvbnN0IENvbnRlbnRMaW1pdHMgPSB7XG4gIFBPU1RfVElUTEU6IHsgbWluOiAxLCBtYXg6IDIwMCB9LFxuICBQT1NUX0NPTlRFTlQ6IHsgbWluOiAxLCBtYXg6IDUwMDAgfSxcbiAgQ09NTUVOVDogeyBtaW46IDEsIG1heDogMTAwMCB9LFxuICBNRVNTQUdFOiB7IG1pbjogMSwgbWF4OiAyMDAwIH0sXG4gIEJJTzogeyBtaW46IDAsIG1heDogNTAwIH0sXG4gIFVTRVJOQU1FOiB7IG1pbjogMywgbWF4OiAyMCB9LFxuICBOQU1FOiB7IG1pbjogMSwgbWF4OiA1MCB9LFxuICBFTUFJTDogeyBtaW46IDUsIG1heDogMTAwIH0sXG59IGFzIGNvbnN0O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVU0VSIFZBTElEQVRJT04gU0NIRU1BU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFVzZXIgcmVnaXN0cmF0aW9uIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFVzZXJSZWdpc3RyYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKClcbiAgICAubWluKENvbnRlbnRMaW1pdHMuTkFNRS5taW4sICdOYW1lIGlzIHJlcXVpcmVkJylcbiAgICAubWF4KENvbnRlbnRMaW1pdHMuTkFNRS5tYXgsICdOYW1lIGlzIHRvbyBsb25nJylcbiAgICAucmVnZXgoL15bYS16QS1aXFxzXFwtJ1xcLl0rJC8sICdOYW1lIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycycpXG4gICAgLnRyYW5zZm9ybShzdHIgPT4gc3RyLnRyaW0oKSksXG4gIFxuICBlbWFpbDogei5zdHJpbmcoKVxuICAgIC5taW4oQ29udGVudExpbWl0cy5FTUFJTC5taW4sICdFbWFpbCBpcyByZXF1aXJlZCcpXG4gICAgLm1heChDb250ZW50TGltaXRzLkVNQUlMLm1heCwgJ0VtYWlsIGlzIHRvbyBsb25nJylcbiAgICAuZW1haWwoJ0ludmFsaWQgZW1haWwgZm9ybWF0JylcbiAgICAudG9Mb3dlckNhc2UoKSxcbiAgXG4gIHJvbGU6IHoubmF0aXZlRW51bShVc2VyUm9sZSkuZGVmYXVsdChVc2VyUm9sZS5DTElFTlQpLFxuICBcbiAgLy8gU2FmZXR5IGFncmVlbWVudFxuICBhZ3JlZVRvR3VpZGVsaW5lczogei5ib29sZWFuKClcbiAgICAucmVmaW5lKHZhbCA9PiB2YWwgPT09IHRydWUsICdZb3UgbXVzdCBhZ3JlZSB0byB0aGUgY29tbXVuaXR5IGd1aWRlbGluZXMnKSxcbiAgXG4gIGFncmVlVG9UZXJtczogei5ib29sZWFuKClcbiAgICAucmVmaW5lKHZhbCA9PiB2YWwgPT09IHRydWUsICdZb3UgbXVzdCBhZ3JlZSB0byB0aGUgdGVybXMgb2Ygc2VydmljZScpLFxuICBcbiAgLy8gT3B0aW9uYWwgZmllbGRzXG4gIHByb2ZpbGVJbWFnZTogei5zdHJpbmcoKS51cmwoJ0ludmFsaWQgaW1hZ2UgVVJMJykub3B0aW9uYWwoKSxcbiAgdGltZXpvbmU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIFVzZXIgcHJvZmlsZSB1cGRhdGUgdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgVXNlclByb2ZpbGVVcGRhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKClcbiAgICAubWluKENvbnRlbnRMaW1pdHMuTkFNRS5taW4pXG4gICAgLm1heChDb250ZW50TGltaXRzLk5BTUUubWF4KVxuICAgIC5yZWdleCgvXlthLXpBLVpcXHNcXC0nXFwuXSskLywgJ05hbWUgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKVxuICAgIC5vcHRpb25hbCgpLFxuICBcbiAgYmlvOiB6LnN0cmluZygpXG4gICAgLm1heChDb250ZW50TGltaXRzLkJJTy5tYXgsICdCaW8gaXMgdG9vIGxvbmcnKVxuICAgIC50cmFuc2Zvcm0oc3RyID0+IHN0ci50cmltKCkpXG4gICAgLm9wdGlvbmFsKCksXG4gIFxuICBwcm9maWxlSW1hZ2U6IHouc3RyaW5nKCkudXJsKCdJbnZhbGlkIGltYWdlIFVSTCcpLm9wdGlvbmFsKCksXG4gIFxuICAvLyBQcml2YWN5IHNldHRpbmdzXG4gIHByb2ZpbGVWaXNpYmlsaXR5OiB6LmVudW0oWydQVUJMSUMnLCAnUFJJVkFURScsICdUUkFJTkVSU19PTkxZJ10pLm9wdGlvbmFsKCksXG4gIHNob3dSZWFsTmFtZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgYWNjZXB0RE1zOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICBvbmx5VHJhaW5lckRNczogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIFRyYWluZXIgcHJvZmlsZSB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBUcmFpbmVyUHJvZmlsZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgYmlvOiB6LnN0cmluZygpXG4gICAgLm1pbig1MCwgJ1RyYWluZXIgYmlvIG11c3QgYmUgYXQgbGVhc3QgNTAgY2hhcmFjdGVycycpXG4gICAgLm1heChDb250ZW50TGltaXRzLkJJTy5tYXgsICdCaW8gaXMgdG9vIGxvbmcnKVxuICAgIC50cmFuc2Zvcm0oc3RyID0+IHN0ci50cmltKCkpLFxuICBcbiAgc3BlY2lhbGl6YXRpb25zOiB6LmFycmF5KHouc3RyaW5nKCkpXG4gICAgLm1pbigxLCAnQXQgbGVhc3Qgb25lIHNwZWNpYWxpemF0aW9uIGlzIHJlcXVpcmVkJylcbiAgICAubWF4KDEwLCAnTWF4aW11bSAxMCBzcGVjaWFsaXphdGlvbnMgYWxsb3dlZCcpXG4gICAgLnJlZmluZShcbiAgICAgIGFyciA9PiBhcnIuZXZlcnkoc3BlYyA9PiBzcGVjLmxlbmd0aCA+PSAzICYmIHNwZWMubGVuZ3RoIDw9IDUwKSxcbiAgICAgICdFYWNoIHNwZWNpYWxpemF0aW9uIG11c3QgYmUgMy01MCBjaGFyYWN0ZXJzJ1xuICAgICksXG4gIFxuICBjZXJ0aWZpY2F0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ0NlcnRpZmljYXRpb24gbmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIG9yZ2FuaXphdGlvbjogei5zdHJpbmcoKS5taW4oMSwgJ09yZ2FuaXphdGlvbiBpcyByZXF1aXJlZCcpLFxuICAgIGRhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoJ0ludmFsaWQgY2VydGlmaWNhdGlvbiBkYXRlJyksXG4gICAgZXhwaXJhdGlvbkRhdGU6IHouc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpLFxuICAgIGNyZWRlbnRpYWxVcmw6IHouc3RyaW5nKCkudXJsKCkub3B0aW9uYWwoKSxcbiAgfSkpLm1pbigxLCAnQXQgbGVhc3Qgb25lIGNlcnRpZmljYXRpb24gaXMgcmVxdWlyZWQnKSxcbiAgXG4gIHllYXJzRXhwZXJpZW5jZTogei5udW1iZXIoKVxuICAgIC5taW4oMCwgJ1llYXJzIG9mIGV4cGVyaWVuY2UgY2Fubm90IGJlIG5lZ2F0aXZlJylcbiAgICAubWF4KDUwLCAnWWVhcnMgb2YgZXhwZXJpZW5jZSBzZWVtcyB1bnJlYWxpc3RpYycpLFxuICBcbiAgaG91cmx5UmF0ZTogei5udW1iZXIoKVxuICAgIC5taW4oMTAsICdNaW5pbXVtIGhvdXJseSByYXRlIGlzICQxMCcpXG4gICAgLm1heCg1MDAsICdNYXhpbXVtIGhvdXJseSByYXRlIGlzICQ1MDAnKVxuICAgIC5vcHRpb25hbCgpLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTlRFTlQgVkFMSURBVElPTiBTQ0hFTUFTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogUG9zdCBjcmVhdGlvbiB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBQb3N0Q3JlYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRpdGxlOiB6LnN0cmluZygpXG4gICAgLm1pbihDb250ZW50TGltaXRzLlBPU1RfVElUTEUubWluLCAnVGl0bGUgaXMgcmVxdWlyZWQnKVxuICAgIC5tYXgoQ29udGVudExpbWl0cy5QT1NUX1RJVExFLm1heCwgJ1RpdGxlIGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKVxuICAgIC5yZWZpbmUoXG4gICAgICBzdHIgPT4gIVZhbGlkYXRpb25QYXR0ZXJucy5TVVNQSUNJT1VTX0NPTlRBQ1QudGVzdChzdHIpLFxuICAgICAgJ1RpdGxlIGNvbnRhaW5zIHBvdGVudGlhbGx5IGluYXBwcm9wcmlhdGUgY29udGFjdCBpbmZvcm1hdGlvbidcbiAgICApLFxuICBcbiAgY29udGVudDogei5zdHJpbmcoKVxuICAgIC5taW4oQ29udGVudExpbWl0cy5QT1NUX0NPTlRFTlQubWluLCAnQ29udGVudCBpcyByZXF1aXJlZCcpXG4gICAgLm1heChDb250ZW50TGltaXRzLlBPU1RfQ09OVEVOVC5tYXgsICdDb250ZW50IGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKVxuICAgIC5yZWZpbmUoXG4gICAgICBzdHIgPT4gc3RyLnNwbGl0KCdcXG4nKS5sZW5ndGggPD0gMTAwLFxuICAgICAgJ1RvbyBtYW55IGxpbmUgYnJlYWtzIGluIGNvbnRlbnQnXG4gICAgKSxcbiAgXG4gIGNvbW11bml0eUlkOiB6LnN0cmluZygpLnV1aWQoJ0ludmFsaWQgY29tbXVuaXR5IElEJykub3B0aW9uYWwoKSxcbiAgXG4gIHRhZ3M6IHouYXJyYXkoei5zdHJpbmcoKS5yZWdleChWYWxpZGF0aW9uUGF0dGVybnMuSEFTSFRBRykpXG4gICAgLm1heCgxMCwgJ01heGltdW0gMTAgdGFncyBhbGxvd2VkJylcbiAgICAub3B0aW9uYWwoKSxcbiAgXG4gIGF0dGFjaG1lbnRzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmVudW0oWydJTUFHRScsICdWSURFTycsICdET0NVTUVOVCddKSxcbiAgICB1cmw6IHouc3RyaW5nKCkudXJsKCdJbnZhbGlkIGF0dGFjaG1lbnQgVVJMJyksXG4gICAgbmFtZTogei5zdHJpbmcoKS5taW4oMSkubWF4KDEwMCksXG4gICAgc2l6ZTogei5udW1iZXIoKS5tYXgoNTAgKiAxMDI0ICogMTAyNCksIC8vIDUwTUIgbWF4XG4gIH0pKS5tYXgoNSwgJ01heGltdW0gNSBhdHRhY2htZW50cyBhbGxvd2VkJykub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIENvbW1lbnQgY3JlYXRpb24gdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgQ29tbWVudENyZWF0aW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBjb250ZW50OiB6LnN0cmluZygpXG4gICAgLm1pbihDb250ZW50TGltaXRzLkNPTU1FTlQubWluLCAnQ29tbWVudCBjYW5ub3QgYmUgZW1wdHknKVxuICAgIC5tYXgoQ29udGVudExpbWl0cy5DT01NRU5ULm1heCwgJ0NvbW1lbnQgaXMgdG9vIGxvbmcnKVxuICAgIC50cmFuc2Zvcm0oc3RyID0+IHN0ci50cmltKCkpXG4gICAgLnJlZmluZShcbiAgICAgIHN0ciA9PiAhVmFsaWRhdGlvblBhdHRlcm5zLlNVU1BJQ0lPVVNfQ09OVEFDVC50ZXN0KHN0ciksXG4gICAgICAnQ29tbWVudCBjb250YWlucyBwb3RlbnRpYWxseSBpbmFwcHJvcHJpYXRlIGNvbnRhY3QgaW5mb3JtYXRpb24nXG4gICAgKSxcbiAgXG4gIHBvc3RJZDogei5zdHJpbmcoKS51dWlkKCdJbnZhbGlkIHBvc3QgSUQnKSxcbiAgXG4gIHBhcmVudElkOiB6LnN0cmluZygpLnV1aWQoJ0ludmFsaWQgcGFyZW50IGNvbW1lbnQgSUQnKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogRGlyZWN0IG1lc3NhZ2UgdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgRGlyZWN0TWVzc2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgY29udGVudDogei5zdHJpbmcoKVxuICAgIC5taW4oQ29udGVudExpbWl0cy5NRVNTQUdFLm1pbiwgJ01lc3NhZ2UgY2Fubm90IGJlIGVtcHR5JylcbiAgICAubWF4KENvbnRlbnRMaW1pdHMuTUVTU0FHRS5tYXgsICdNZXNzYWdlIGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKSxcbiAgXG4gIHJlY2lwaWVudElkOiB6LnN0cmluZygpLnV1aWQoJ0ludmFsaWQgcmVjaXBpZW50IElEJyksXG4gIFxuICBhdHRhY2htZW50czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgdHlwZTogei5lbnVtKFsnSU1BR0UnLCAnRE9DVU1FTlQnXSksXG4gICAgdXJsOiB6LnN0cmluZygpLnVybCgpLFxuICAgIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm1heCgxMDApLFxuICB9KSkubWF4KDMsICdNYXhpbXVtIDMgYXR0YWNobWVudHMgYWxsb3dlZCcpLm9wdGlvbmFsKCksXG59KTtcblxuLyoqXG4gKiBDb21tdW5pdHkgY3JlYXRpb24gdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgQ29tbXVuaXR5Q3JlYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKClcbiAgICAubWluKDMsICdDb21tdW5pdHkgbmFtZSBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycycpXG4gICAgLm1heCg1MCwgJ0NvbW11bml0eSBuYW1lIGlzIHRvbyBsb25nJylcbiAgICAucmVnZXgoL15bYS16QS1aMC05XFxzXFwtX10rJC8sICdDb21tdW5pdHkgbmFtZSBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMnKVxuICAgIC50cmFuc2Zvcm0oc3RyID0+IHN0ci50cmltKCkpLFxuICBcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKClcbiAgICAubWluKDEwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBhdCBsZWFzdCAxMCBjaGFyYWN0ZXJzJylcbiAgICAubWF4KDUwMCwgJ0Rlc2NyaXB0aW9uIGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKSxcbiAgXG4gIHR5cGU6IHouZW51bShbJ1BVQkxJQycsICdQUklWQVRFJywgJ1RSQUlORVInXSksXG4gIFxuICBydWxlczogei5hcnJheSh6LnN0cmluZygpLm1pbig1KS5tYXgoMjAwKSlcbiAgICAubWF4KDEwLCAnTWF4aW11bSAxMCBjb21tdW5pdHkgcnVsZXMgYWxsb3dlZCcpXG4gICAgLm9wdGlvbmFsKCksXG4gIFxuICBjYXRlZ29yeTogei5lbnVtKFtcbiAgICAnR0VORVJBTF9GSVRORVNTJywgJ1NUUkVOR1RIX1RSQUlOSU5HJywgJ0NBUkRJTycsICdZT0dBJywgXG4gICAgJ05VVFJJVElPTicsICdXRUlHSFRfTE9TUycsICdNVVNDTEVfQlVJTERJTkcnLCAnRU5EVVJBTkNFJyxcbiAgICAnQkVHSU5ORVJTJywgJ0FEVkFOQ0VEJywgJ1dPTUVOU19GSVRORVNTJywgJ01FTlNfRklUTkVTUydcbiAgXSksXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTU9ERVJBVElPTiBWQUxJREFUSU9OIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBSZXBvcnQgc3VibWlzc2lvbiB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBSZXBvcnRTdWJtaXNzaW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICByZXBvcnRlZFVzZXJJZDogei5zdHJpbmcoKS51dWlkKCdJbnZhbGlkIHVzZXIgSUQnKSxcbiAgXG4gIGNhdGVnb3J5OiB6Lm5hdGl2ZUVudW0oVmlvbGF0aW9uVHlwZSksXG4gIFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKVxuICAgIC5taW4oMTAsICdQbGVhc2UgcHJvdmlkZSBhIGRldGFpbGVkIGRlc2NyaXB0aW9uJylcbiAgICAubWF4KDEwMDAsICdEZXNjcmlwdGlvbiBpcyB0b28gbG9uZycpXG4gICAgLnRyYW5zZm9ybShzdHIgPT4gc3RyLnRyaW0oKSksXG4gIFxuICBldmlkZW5jZTogei5vYmplY3Qoe1xuICAgIHNjcmVlbnNob3RzOiB6LmFycmF5KHouc3RyaW5nKCkudXJsKCkpLm1heCg1KS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2VJZHM6IHouYXJyYXkoei5zdHJpbmcoKS51dWlkKCkpLm1heCgxMCkub3B0aW9uYWwoKSxcbiAgICBhZGRpdGlvbmFsQ29udGV4dDogei5zdHJpbmcoKS5tYXgoNTAwKS5vcHRpb25hbCgpLFxuICB9KS5vcHRpb25hbCgpLFxuICBcbiAgY29udGVudElkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICBjb250ZW50VHlwZTogei5lbnVtKFsnUE9TVCcsICdDT01NRU5UJywgJ01FU1NBR0UnLCAnUFJPRklMRSddKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogTW9kZXJhdGlvbiBhY3Rpb24gdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgTW9kZXJhdGlvbkFjdGlvblNjaGVtYSA9IHoub2JqZWN0KHtcbiAgdXNlcklkOiB6LnN0cmluZygpLnV1aWQoJ0ludmFsaWQgdXNlciBJRCcpLFxuICBcbiAgYWN0aW9uOiB6Lm5hdGl2ZUVudW0oUHJpc21hTW9kZXJhdGlvbkFjdGlvbiksXG4gIFxuICByZWFzb246IHouc3RyaW5nKClcbiAgICAubWluKDEwLCAnUGxlYXNlIHByb3ZpZGUgYSBkZXRhaWxlZCByZWFzb24nKVxuICAgIC5tYXgoNTAwLCAnUmVhc29uIGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKSxcbiAgXG4gIGR1cmF0aW9uOiB6Lm51bWJlcigpXG4gICAgLm1pbigxLCAnRHVyYXRpb24gbXVzdCBiZSBwb3NpdGl2ZScpXG4gICAgLm1heCg4NzYwLCAnTWF4aW11bSBkdXJhdGlvbiBpcyAxIHllYXIgKDg3NjAgaG91cnMpJylcbiAgICAub3B0aW9uYWwoKSxcbiAgXG4gIHNldmVyaXR5OiB6Lm51bWJlcigpLm1pbigxKS5tYXgoNSksXG4gIFxuICB2aW9sYXRpb25UeXBlOiB6Lm5hdGl2ZUVudW0oVmlvbGF0aW9uVHlwZSksXG4gIFxuICBldmlkZW5jZTogei5vYmplY3Qoe1xuICAgIGNvbnRlbnRJZDogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgICBzY3JlZW5zaG90czogei5hcnJheSh6LnN0cmluZygpLnVybCgpKS5vcHRpb25hbCgpLFxuICAgIG1vZGVyYXRpb25Mb2dJZDogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgfSkub3B0aW9uYWwoKSxcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTRUFSQ0ggQU5EIEZJTFRFUklORyBTQ0hFTUFTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogU2VhcmNoIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFNlYXJjaFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcXVlcnk6IHouc3RyaW5nKClcbiAgICAubWluKDEsICdTZWFyY2ggcXVlcnkgaXMgcmVxdWlyZWQnKVxuICAgIC5tYXgoMTAwLCAnU2VhcmNoIHF1ZXJ5IGlzIHRvbyBsb25nJylcbiAgICAudHJhbnNmb3JtKHN0ciA9PiBzdHIudHJpbSgpKSxcbiAgXG4gIHR5cGU6IHouZW51bShbJ1BPU1RTJywgJ1VTRVJTJywgJ0NPTU1VTklUSUVTJywgJ0FMTCddKS5kZWZhdWx0KCdBTEwnKSxcbiAgXG4gIGZpbHRlcnM6IHoub2JqZWN0KHtcbiAgICBjYXRlZ29yeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGRhdGVGcm9tOiB6LnN0cmluZygpLmRhdGV0aW1lKCkub3B0aW9uYWwoKSxcbiAgICBkYXRlVG86IHouc3RyaW5nKCkuZGF0ZXRpbWUoKS5vcHRpb25hbCgpLFxuICAgIHVzZXJSb2xlOiB6Lm5hdGl2ZUVudW0oVXNlclJvbGUpLm9wdGlvbmFsKCksXG4gIH0pLm9wdGlvbmFsKCksXG4gIFxuICBwYWdlOiB6Lm51bWJlcigpLm1pbigxKS5tYXgoMTAwKS5kZWZhdWx0KDEpLFxuICBsaW1pdDogei5udW1iZXIoKS5taW4oMSkubWF4KDEwMCkuZGVmYXVsdCgyMCksXG59KTtcblxuLyoqXG4gKiBQYWdpbmF0aW9uIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IFBhZ2luYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHBhZ2U6IHoubnVtYmVyKCkubWluKDEsICdQYWdlIG11c3QgYmUgYXQgbGVhc3QgMScpLmRlZmF1bHQoMSksXG4gIGxpbWl0OiB6Lm51bWJlcigpLm1pbigxLCAnTGltaXQgbXVzdCBiZSBhdCBsZWFzdCAxJykubWF4KDEwMCwgJ01heGltdW0gbGltaXQgaXMgMTAwJykuZGVmYXVsdCgyMCksXG4gIHNvcnRCeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBzb3J0T3JkZXI6IHouZW51bShbJ2FzYycsICdkZXNjJ10pLmRlZmF1bHQoJ2Rlc2MnKSxcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBBUEkgUkVRVUVTVCBWQUxJREFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogR2VuZXJpYyBBUEkgcmVzcG9uc2UgdmFsaWRhdGlvblxuICovXG5leHBvcnQgY29uc3QgQXBpUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN1Y2Nlc3M6IHouYm9vbGVhbigpLFxuICBkYXRhOiB6LmFueSgpLm9wdGlvbmFsKCksXG4gIGVycm9yOiB6Lm9iamVjdCh7XG4gICAgY29kZTogei5zdHJpbmcoKSxcbiAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgIGRldGFpbHM6IHouYW55KCkub3B0aW9uYWwoKSxcbiAgfSkub3B0aW9uYWwoKSxcbiAgcGFnaW5hdGlvbjogei5vYmplY3Qoe1xuICAgIHBhZ2U6IHoubnVtYmVyKCksXG4gICAgbGltaXQ6IHoubnVtYmVyKCksXG4gICAgdG90YWw6IHoubnVtYmVyKCksXG4gICAgdG90YWxQYWdlczogei5udW1iZXIoKSxcbiAgfSkub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIEZpbGUgdXBsb2FkIHZhbGlkYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IEZpbGVVcGxvYWRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGZpbGU6IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnRmlsZW5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgICBzaXplOiB6Lm51bWJlcigpXG4gICAgICAubWluKDEsICdGaWxlIGNhbm5vdCBiZSBlbXB0eScpXG4gICAgICAubWF4KDUwICogMTAyNCAqIDEwMjQsICdGaWxlIHRvbyBsYXJnZSAobWF4IDUwTUIpJyksXG4gICAgdHlwZTogei5zdHJpbmcoKS5yZWZpbmUoXG4gICAgICB0eXBlID0+IFtcbiAgICAgICAgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvcG5nJywgJ2ltYWdlL3dlYnAnLCAnaW1hZ2UvZ2lmJyxcbiAgICAgICAgJ3ZpZGVvL21wNCcsICd2aWRlby93ZWJtJyxcbiAgICAgICAgJ2FwcGxpY2F0aW9uL3BkZicsICd0ZXh0L3BsYWluJ1xuICAgICAgXS5pbmNsdWRlcyh0eXBlKSxcbiAgICAgICdGaWxlIHR5cGUgbm90IGFsbG93ZWQnXG4gICAgKSxcbiAgfSksXG4gIFxuICBjYXRlZ29yeTogei5lbnVtKFsnUFJPRklMRV9JTUFHRScsICdQT1NUX0FUVEFDSE1FTlQnLCAnTUVTU0FHRV9BVFRBQ0hNRU5UJywgJ0NFUlRJRklDQVRFJ10pLFxuICBcbiAgYWx0OiB6LnN0cmluZygpLm1heCgyMDAsICdBbHQgdGV4dCB0b28gbG9uZycpLm9wdGlvbmFsKCksXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBVElPTiBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBWYWxpZGF0ZSBjb250ZW50IGZvciBzYWZldHkgaXNzdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvbnRlbnRTYWZldHkoY29udGVudDogc3RyaW5nKToge1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBpc3N1ZXM6IHN0cmluZ1tdO1xuICBzdWdnZXN0aW9uczogc3RyaW5nW107XG59IHtcbiAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBzdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBDaGVjayBmb3Igc3VzcGljaW91cyBjb250YWN0IHBhdHRlcm5zXG4gIGlmIChWYWxpZGF0aW9uUGF0dGVybnMuU1VTUElDSU9VU19DT05UQUNULnRlc3QoY29udGVudCkpIHtcbiAgICBpc3N1ZXMucHVzaCgnQ29udGVudCBjb250YWlucyBwb3RlbnRpYWwgY29udGFjdCBpbmZvcm1hdGlvbiBzaGFyaW5nJyk7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnQXZvaWQgc2hhcmluZyBwZXJzb25hbCBjb250YWN0IGRldGFpbHMgaW4gcHVibGljIHBvc3RzJyk7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgZXh0ZXJuYWwgbGlua3NcbiAgaWYgKFZhbGlkYXRpb25QYXR0ZXJucy5FWFRFUk5BTF9MSU5LUy50ZXN0KGNvbnRlbnQpKSB7XG4gICAgaXNzdWVzLnB1c2goJ0NvbnRlbnQgY29udGFpbnMgcG90ZW50aWFsbHkgdW5zYWZlIHNob3J0ZW5lZCBsaW5rcycpO1xuICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1VzZSBmdWxsIFVSTHMgaW5zdGVhZCBvZiBzaG9ydGVuZWQgbGlua3MgZm9yIHRyYW5zcGFyZW5jeScpO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIG9mZi10b3BpYyBjb250ZW50XG4gIGlmIChWYWxpZGF0aW9uUGF0dGVybnMuQ1JZUFRPQ1VSUkVOQ1kudGVzdChjb250ZW50KSkge1xuICAgIGlzc3Vlcy5wdXNoKCdDb250ZW50IG1heSBiZSBvZmYtdG9waWMgZm9yIGZpdG5lc3MgcGxhdGZvcm0nKTtcbiAgICBzdWdnZXN0aW9ucy5wdXNoKCdLZWVwIGRpc2N1c3Npb25zIGZvY3VzZWQgb24gZml0bmVzcywgaGVhbHRoLCBhbmQgd2VsbG5lc3MnKTtcbiAgfVxuXG4gIC8vIENoZWNrIGNvbnRlbnQgbGVuZ3RoIGFuZCBxdWFsaXR5XG4gIGlmIChjb250ZW50Lmxlbmd0aCA8IDEwKSB7XG4gICAgaXNzdWVzLnB1c2goJ0NvbnRlbnQgaXMgdmVyeSBzaG9ydCcpO1xuICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1Byb3ZpZGUgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiB0byBoZWxwIHRoZSBjb21tdW5pdHknKTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBleGNlc3NpdmUgY2Fwc1xuICBjb25zdCBjYXBzUmF0aW8gPSAoY29udGVudC5tYXRjaCgvW0EtWl0vZykgfHwgW10pLmxlbmd0aCAvIGNvbnRlbnQubGVuZ3RoO1xuICBpZiAoY2Fwc1JhdGlvID4gMC41ICYmIGNvbnRlbnQubGVuZ3RoID4gMjApIHtcbiAgICBpc3N1ZXMucHVzaCgnRXhjZXNzaXZlIHVzZSBvZiBjYXBpdGFsIGxldHRlcnMnKTtcbiAgICBzdWdnZXN0aW9ucy5wdXNoKCdVc2Ugbm9ybWFsIGNhcGl0YWxpemF0aW9uIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHknKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaXNWYWxpZDogaXNzdWVzLmxlbmd0aCA9PT0gMCxcbiAgICBpc3N1ZXMsXG4gICAgc3VnZ2VzdGlvbnMsXG4gIH07XG59XG5cbi8qKlxuICogQ2xlYW4gYW5kIHNhbml0aXplIHRleHQgaW5wdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplVGV4dElucHV0KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0ZXh0XG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgLy8gUmVwbGFjZSBtdWx0aXBsZSBzcGFjZXMgd2l0aCBzaW5nbGUgc3BhY2VcbiAgICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJykgLy8gUmVwbGFjZSBleGNlc3NpdmUgbGluZSBicmVha3NcbiAgICAucmVwbGFjZSgvW15cXHdcXHNcXC1fLiw6OyE/QCMoKVtcXF17fSdcIl0vZywgJycpIC8vIFJlbW92ZSBzcGVjaWFsIGNoYXJhY3RlcnMgZXhjZXB0IGNvbW1vbiBvbmVzXG4gICAgLnN1YnN0cmluZygwLCA1MDAwKTsgLy8gVHJ1bmNhdGUgdG8gbWF4IGxlbmd0aFxufVxuXG4vKipcbiAqIEV4dHJhY3QgYW5kIHZhbGlkYXRlIG1lbnRpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU1lbnRpb25zKGNvbnRlbnQ6IHN0cmluZyk6IHtcbiAgbWVudGlvbnM6IHN0cmluZ1tdO1xuICBpc1ZhbGlkOiBib29sZWFuO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xufSB7XG4gIGNvbnN0IG1lbnRpb25NYXRjaGVzID0gY29udGVudC5tYXRjaCgvQChcXHcrKS9nKSB8fCBbXTtcbiAgY29uc3QgbWVudGlvbnMgPSBtZW50aW9uTWF0Y2hlcy5tYXAobSA9PiBtLnN1YnN0cmluZygxKSk7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICBpZiAobWVudGlvbnMubGVuZ3RoID4gMTApIHtcbiAgICBlcnJvcnMucHVzaCgnVG9vIG1hbnkgbWVudGlvbnMgKG1heGltdW0gMTAgYWxsb3dlZCknKTtcbiAgfVxuXG4gIG1lbnRpb25zLmZvckVhY2gobWVudGlvbiA9PiB7XG4gICAgaWYgKCFWYWxpZGF0aW9uUGF0dGVybnMuVVNFUk5BTUUudGVzdChtZW50aW9uKSkge1xuICAgICAgZXJyb3JzLnB1c2goYEludmFsaWQgdXNlcm5hbWUgZm9ybWF0OiBAJHttZW50aW9ufWApO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBtZW50aW9ucyxcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9ycyxcbiAgfTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBoYXNodGFnc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVIYXNodGFncyhjb250ZW50OiBzdHJpbmcpOiB7XG4gIGhhc2h0YWdzOiBzdHJpbmdbXTtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbn0ge1xuICBjb25zdCBoYXNodGFnTWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2goLyMoXFx3KykvZykgfHwgW107XG4gIGNvbnN0IGhhc2h0YWdzID0gaGFzaHRhZ01hdGNoZXMubWFwKGggPT4gaC50b0xvd2VyQ2FzZSgpKTtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGlmIChoYXNodGFncy5sZW5ndGggPiAyMCkge1xuICAgIGVycm9ycy5wdXNoKCdUb28gbWFueSBoYXNodGFncyAobWF4aW11bSAyMCBhbGxvd2VkKScpO1xuICB9XG5cbiAgaGFzaHRhZ3MuZm9yRWFjaChoYXNodGFnID0+IHtcbiAgICBpZiAoaGFzaHRhZy5sZW5ndGggPCAyKSB7XG4gICAgICBlcnJvcnMucHVzaChgSGFzaHRhZyB0b28gc2hvcnQ6ICR7aGFzaHRhZ31gKTtcbiAgICB9XG4gICAgaWYgKGhhc2h0YWcubGVuZ3RoID4gMzApIHtcbiAgICAgIGVycm9ycy5wdXNoKGBIYXNodGFnIHRvbyBsb25nOiAke2hhc2h0YWd9YCk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGhhc2h0YWdzLFxuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzLFxuICB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWFBPUlQgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8vIFR5cGUgZXhwb3J0cyBmb3IgVHlwZVNjcmlwdFxuZXhwb3J0IHR5cGUgVXNlclJlZ2lzdHJhdGlvbiA9IHouaW5mZXI8dHlwZW9mIFVzZXJSZWdpc3RyYXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgVXNlclByb2ZpbGVVcGRhdGUgPSB6LmluZmVyPHR5cGVvZiBVc2VyUHJvZmlsZVVwZGF0ZVNjaGVtYT47XG5leHBvcnQgdHlwZSBUcmFpbmVyUHJvZmlsZSA9IHouaW5mZXI8dHlwZW9mIFRyYWluZXJQcm9maWxlU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFBvc3RDcmVhdGlvbiA9IHouaW5mZXI8dHlwZW9mIFBvc3RDcmVhdGlvblNjaGVtYT47XG5leHBvcnQgdHlwZSBDb21tZW50Q3JlYXRpb24gPSB6LmluZmVyPHR5cGVvZiBDb21tZW50Q3JlYXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgRGlyZWN0TWVzc2FnZSA9IHouaW5mZXI8dHlwZW9mIERpcmVjdE1lc3NhZ2VTY2hlbWE+O1xuZXhwb3J0IHR5cGUgQ29tbXVuaXR5Q3JlYXRpb24gPSB6LmluZmVyPHR5cGVvZiBDb21tdW5pdHlDcmVhdGlvblNjaGVtYT47XG5leHBvcnQgdHlwZSBSZXBvcnRTdWJtaXNzaW9uID0gei5pbmZlcjx0eXBlb2YgUmVwb3J0U3VibWlzc2lvblNjaGVtYT47XG5leHBvcnQgdHlwZSBNb2RlcmF0aW9uQWN0aW9uID0gei5pbmZlcjx0eXBlb2YgTW9kZXJhdGlvbkFjdGlvblNjaGVtYT47XG5leHBvcnQgdHlwZSBTZWFyY2hQYXJhbXMgPSB6LmluZmVyPHR5cGVvZiBTZWFyY2hTY2hlbWE+O1xuZXhwb3J0IHR5cGUgUGFnaW5hdGlvblBhcmFtcyA9IHouaW5mZXI8dHlwZW9mIFBhZ2luYXRpb25TY2hlbWE+OyJdLCJuYW1lcyI6WyJ6IiwiVXNlclJvbGUiLCJWaW9sYXRpb25UeXBlIiwiTW9kZXJhdGlvbkFjdGlvbiIsIlByaXNtYU1vZGVyYXRpb25BY3Rpb24iLCJWYWxpZGF0aW9uUGF0dGVybnMiLCJFTUFJTCIsIlBIT05FIiwiVVJMIiwiVVNFUk5BTUUiLCJIQVNIVEFHIiwiTUVOVElPTiIsIlNVU1BJQ0lPVVNfQ09OVEFDVCIsIkVYVEVSTkFMX0xJTktTIiwiQ1JZUFRPQ1VSUkVOQ1kiLCJDb250ZW50TGltaXRzIiwiUE9TVF9USVRMRSIsIm1pbiIsIm1heCIsIlBPU1RfQ09OVEVOVCIsIkNPTU1FTlQiLCJNRVNTQUdFIiwiQklPIiwiTkFNRSIsIlVzZXJSZWdpc3RyYXRpb25TY2hlbWEiLCJvYmplY3QiLCJuYW1lIiwic3RyaW5nIiwicmVnZXgiLCJ0cmFuc2Zvcm0iLCJzdHIiLCJ0cmltIiwiZW1haWwiLCJ0b0xvd2VyQ2FzZSIsInJvbGUiLCJuYXRpdmVFbnVtIiwiZGVmYXVsdCIsIkNMSUVOVCIsImFncmVlVG9HdWlkZWxpbmVzIiwiYm9vbGVhbiIsInJlZmluZSIsInZhbCIsImFncmVlVG9UZXJtcyIsInByb2ZpbGVJbWFnZSIsInVybCIsIm9wdGlvbmFsIiwidGltZXpvbmUiLCJVc2VyUHJvZmlsZVVwZGF0ZVNjaGVtYSIsImJpbyIsInByb2ZpbGVWaXNpYmlsaXR5IiwiZW51bSIsInNob3dSZWFsTmFtZSIsImFjY2VwdERNcyIsIm9ubHlUcmFpbmVyRE1zIiwiVHJhaW5lclByb2ZpbGVTY2hlbWEiLCJzcGVjaWFsaXphdGlvbnMiLCJhcnJheSIsImFyciIsImV2ZXJ5Iiwic3BlYyIsImxlbmd0aCIsImNlcnRpZmljYXRpb25zIiwib3JnYW5pemF0aW9uIiwiZGF0ZSIsImRhdGV0aW1lIiwiZXhwaXJhdGlvbkRhdGUiLCJjcmVkZW50aWFsVXJsIiwieWVhcnNFeHBlcmllbmNlIiwibnVtYmVyIiwiaG91cmx5UmF0ZSIsIlBvc3RDcmVhdGlvblNjaGVtYSIsInRpdGxlIiwidGVzdCIsImNvbnRlbnQiLCJzcGxpdCIsImNvbW11bml0eUlkIiwidXVpZCIsInRhZ3MiLCJhdHRhY2htZW50cyIsInR5cGUiLCJzaXplIiwiQ29tbWVudENyZWF0aW9uU2NoZW1hIiwicG9zdElkIiwicGFyZW50SWQiLCJEaXJlY3RNZXNzYWdlU2NoZW1hIiwicmVjaXBpZW50SWQiLCJDb21tdW5pdHlDcmVhdGlvblNjaGVtYSIsImRlc2NyaXB0aW9uIiwicnVsZXMiLCJjYXRlZ29yeSIsIlJlcG9ydFN1Ym1pc3Npb25TY2hlbWEiLCJyZXBvcnRlZFVzZXJJZCIsImV2aWRlbmNlIiwic2NyZWVuc2hvdHMiLCJtZXNzYWdlSWRzIiwiYWRkaXRpb25hbENvbnRleHQiLCJjb250ZW50SWQiLCJjb250ZW50VHlwZSIsIk1vZGVyYXRpb25BY3Rpb25TY2hlbWEiLCJ1c2VySWQiLCJhY3Rpb24iLCJyZWFzb24iLCJkdXJhdGlvbiIsInNldmVyaXR5IiwidmlvbGF0aW9uVHlwZSIsIm1vZGVyYXRpb25Mb2dJZCIsIlNlYXJjaFNjaGVtYSIsInF1ZXJ5IiwiZmlsdGVycyIsImRhdGVGcm9tIiwiZGF0ZVRvIiwidXNlclJvbGUiLCJwYWdlIiwibGltaXQiLCJQYWdpbmF0aW9uU2NoZW1hIiwic29ydEJ5Iiwic29ydE9yZGVyIiwiQXBpUmVzcG9uc2VTY2hlbWEiLCJzdWNjZXNzIiwiZGF0YSIsImFueSIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJkZXRhaWxzIiwicGFnaW5hdGlvbiIsInRvdGFsIiwidG90YWxQYWdlcyIsIkZpbGVVcGxvYWRTY2hlbWEiLCJmaWxlIiwiaW5jbHVkZXMiLCJhbHQiLCJ2YWxpZGF0ZUNvbnRlbnRTYWZldHkiLCJpc3N1ZXMiLCJzdWdnZXN0aW9ucyIsInB1c2giLCJjYXBzUmF0aW8iLCJtYXRjaCIsImlzVmFsaWQiLCJzYW5pdGl6ZVRleHRJbnB1dCIsInRleHQiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwidmFsaWRhdGVNZW50aW9ucyIsIm1lbnRpb25NYXRjaGVzIiwibWVudGlvbnMiLCJtYXAiLCJtIiwiZXJyb3JzIiwiZm9yRWFjaCIsIm1lbnRpb24iLCJ2YWxpZGF0ZUhhc2h0YWdzIiwiaGFzaHRhZ01hdGNoZXMiLCJoYXNodGFncyIsImgiLCJoYXNodGFnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/utils/validation.ts\n");

/***/ }),

/***/ "(rsc)/./src/core/utils/workout-validation.ts":
/*!**********************************************!*\
  !*** ./src/core/utils/workout-validation.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addCoachFeedbackRequestSchema: () => (/* binding */ addCoachFeedbackRequestSchema),\n/* harmony export */   addPersonalRecordSchema: () => (/* binding */ addPersonalRecordSchema),\n/* harmony export */   addProgressMetricSchema: () => (/* binding */ addProgressMetricSchema),\n/* harmony export */   createExerciseSchema: () => (/* binding */ createExerciseSchema),\n/* harmony export */   createExerciseVariationSchema: () => (/* binding */ createExerciseVariationSchema),\n/* harmony export */   createTrainingProgramSchema: () => (/* binding */ createTrainingProgramSchema),\n/* harmony export */   createWorkoutEntriesRequestSchema: () => (/* binding */ createWorkoutEntriesRequestSchema),\n/* harmony export */   createWorkoutLogEntrySchema: () => (/* binding */ createWorkoutLogEntrySchema),\n/* harmony export */   createWorkoutSessionSchema: () => (/* binding */ createWorkoutSessionSchema),\n/* harmony export */   createWorkoutTemplateSchema: () => (/* binding */ createWorkoutTemplateSchema),\n/* harmony export */   dateRangeSchema: () => (/* binding */ dateRangeSchema),\n/* harmony export */   dateStringSchema: () => (/* binding */ dateStringSchema),\n/* harmony export */   deleteWorkoutEntryRequestSchema: () => (/* binding */ deleteWorkoutEntryRequestSchema),\n/* harmony export */   durationStringSchema: () => (/* binding */ durationStringSchema),\n/* harmony export */   enhancedCreateExerciseSchema: () => (/* binding */ enhancedCreateExerciseSchema),\n/* harmony export */   enhancedUpdateExerciseSchema: () => (/* binding */ enhancedUpdateExerciseSchema),\n/* harmony export */   exerciseSchema: () => (/* binding */ exerciseSchema),\n/* harmony export */   exerciseSearchOptionsSchema: () => (/* binding */ exerciseSearchOptionsSchema),\n/* harmony export */   intensityStringSchema: () => (/* binding */ intensityStringSchema),\n/* harmony export */   intensityTypeSchema: () => (/* binding */ intensityTypeSchema),\n/* harmony export */   paginationSchema: () => (/* binding */ paginationSchema),\n/* harmony export */   programWeekSchema: () => (/* binding */ programWeekSchema),\n/* harmony export */   rateProgramSchema: () => (/* binding */ rateProgramSchema),\n/* harmony export */   rateTemplateSchema: () => (/* binding */ rateTemplateSchema),\n/* harmony export */   setTypeSchema: () => (/* binding */ setTypeSchema),\n/* harmony export */   tempoStringSchema: () => (/* binding */ tempoStringSchema),\n/* harmony export */   timeStringSchema: () => (/* binding */ timeStringSchema),\n/* harmony export */   updateExerciseSchema: () => (/* binding */ updateExerciseSchema),\n/* harmony export */   updateExerciseVariationSchema: () => (/* binding */ updateExerciseVariationSchema),\n/* harmony export */   updateProgramProgressSchema: () => (/* binding */ updateProgramProgressSchema),\n/* harmony export */   updateTrainingProgramSchema: () => (/* binding */ updateTrainingProgramSchema),\n/* harmony export */   updateWorkoutEntryRequestSchema: () => (/* binding */ updateWorkoutEntryRequestSchema),\n/* harmony export */   updateWorkoutLogEntrySchema: () => (/* binding */ updateWorkoutLogEntrySchema),\n/* harmony export */   updateWorkoutSessionSchema: () => (/* binding */ updateWorkoutSessionSchema),\n/* harmony export */   updateWorkoutTemplateSchema: () => (/* binding */ updateWorkoutTemplateSchema),\n/* harmony export */   validateDateString: () => (/* binding */ validateDateString),\n/* harmony export */   validateIntensityString: () => (/* binding */ validateIntensityString),\n/* harmony export */   validateTempoString: () => (/* binding */ validateTempoString),\n/* harmony export */   validateTimeString: () => (/* binding */ validateTimeString),\n/* harmony export */   validateWeightString: () => (/* binding */ validateWeightString),\n/* harmony export */   weightStringSchema: () => (/* binding */ weightStringSchema),\n/* harmony export */   weightUnitSchema: () => (/* binding */ weightUnitSchema),\n/* harmony export */   workoutFilterOptionsSchema: () => (/* binding */ workoutFilterOptionsSchema),\n/* harmony export */   workoutLogEntryBaseSchema: () => (/* binding */ workoutLogEntryBaseSchema),\n/* harmony export */   workoutLogEntrySchema: () => (/* binding */ workoutLogEntrySchema),\n/* harmony export */   workoutSessionFilterOptionsSchema: () => (/* binding */ workoutSessionFilterOptionsSchema),\n/* harmony export */   workoutSessionSchema: () => (/* binding */ workoutSessionSchema),\n/* harmony export */   workoutSortOptionsSchema: () => (/* binding */ workoutSortOptionsSchema),\n/* harmony export */   workoutStatsRequestSchema: () => (/* binding */ workoutStatsRequestSchema),\n/* harmony export */   workoutStatsResponseSchema: () => (/* binding */ workoutStatsResponseSchema),\n/* harmony export */   workoutTemplateExerciseSchema: () => (/* binding */ workoutTemplateExerciseSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Workout Log Validation Schemas for Massimino\n * Comprehensive validation using Zod for workout tracking and management\n */ \n\n// ============================================================================\n// BASE SCHEMAS\n// ============================================================================\n/**\n * Date string validation (YYYY-MM-DD format)\n */ const dateStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, {\n    message: 'Date must be in YYYY-MM-DD format'\n});\n/**\n * Time string validation (HH:MM format)\n */ const timeStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/, {\n    message: 'Time must be in HH:MM format'\n});\n/**\n * Duration string validation (HH:MM:SS format)\n */ const durationStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/, {\n    message: 'Duration must be in HH:MM:SS format'\n});\n/**\n * Weight string validation (single number or comma-separated)\n */ const weightStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().refine((value)=>{\n    const weights = value.split(',').map((w)=>w.trim());\n    return weights.every((w)=>!isNaN(parseFloat(w)) && parseFloat(w) > 0);\n}, {\n    message: 'Weight must be a single number or comma-separated numbers (e.g., \"40\" or \"40,45,50\")'\n});\n/**\n * Intensity string validation (%1RM or RPE format)\n */ const intensityStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().refine((value)=>{\n    // Check for percentage format (e.g., \"85%\")\n    if (/^\\d{1,3}%$/.test(value)) {\n        const percentage = parseInt(value);\n        return percentage >= 1 && percentage <= 100;\n    }\n    // Check for RPE format (e.g., \"RPE 8\" or \"8\")\n    if (/^(RPE\\s?)?[1-9](\\.[0-9])?$/.test(value)) {\n        const rpe = parseFloat(value.replace('RPE', '').trim());\n        return rpe >= 1 && rpe <= 10;\n    }\n    return false;\n}, {\n    message: 'Intensity must be percentage (e.g., \"85%\") or RPE (e.g., \"RPE 8\" or \"8\")'\n});\n/**\n * Tempo string validation (e.g., \"3-1-1-0\")\n */ const tempoStringSchema = zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^\\d+-\\d+-\\d+-\\d+$/, {\n    message: 'Tempo must be in format: eccentric-pause-concentric-pause (e.g., \"3-1-1-0\")'\n});\n// ============================================================================\n// ENUM SCHEMAS\n// ============================================================================\nconst setTypeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.SetType);\nconst weightUnitSchema = zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.WeightUnit);\nconst intensityTypeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.nativeEnum(_prisma_client__WEBPACK_IMPORTED_MODULE_0__.IntensityType);\n// ============================================================================\n// WORKOUT LOG ENTRY SCHEMAS\n// ============================================================================\n/**\n * Base workout log entry schema\n */ const workoutLogEntryBaseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    sessionId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid().optional(),\n    date: dateStringSchema,\n    exerciseId: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Exercise is required'),\n    setNumber: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Set number must be a positive integer'),\n    setType: setTypeSchema,\n    reps: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Reps must be a positive integer'),\n    weight: weightStringSchema,\n    unit: weightUnitSchema,\n    subOrder: zod__WEBPACK_IMPORTED_MODULE_1__.string().regex(/^[A-Z]$/).optional(),\n    intensity: intensityStringSchema.optional(),\n    intensityType: intensityTypeSchema.optional(),\n    tempo: tempoStringSchema.optional(),\n    restSeconds: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().min(0, 'Rest time must be non-negative').optional(),\n    userComments: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Comments must be less than 500 characters').optional(),\n    coachFeedback: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(1000, 'Coach feedback must be less than 1000 characters').optional()\n});\n/**\n * Create workout log entry schema\n */ const createWorkoutLogEntrySchema = workoutLogEntryBaseSchema;\n/**\n * Update workout log entry schema (all fields optional)\n */ const updateWorkoutLogEntrySchema = workoutLogEntryBaseSchema.partial();\n/**\n * Workout log entry with calculated fields\n */ const workoutLogEntrySchema = workoutLogEntryBaseSchema.extend({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    userId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    coachId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid().optional(),\n    order: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n    trainingVolume: zod__WEBPACK_IMPORTED_MODULE_1__.number().nonnegative().optional(),\n    duration: durationStringSchema.optional(),\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n    updatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date()\n});\n// ============================================================================\n// EXERCISE SCHEMAS\n// ============================================================================\n/**\n * Create exercise schema\n */ const createExerciseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Exercise name is required').max(100, 'Exercise name must be less than 100 characters'),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Category is required'),\n    muscleGroups: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).min(1, 'At least one muscle group is required'),\n    equipment: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).min(1, 'At least one equipment type is required'),\n    instructions: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(2000, 'Instructions must be less than 2000 characters').optional(),\n    videoUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Must be a valid URL').optional(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Must be a valid URL').optional(),\n    difficulty: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'BEGINNER',\n        'INTERMEDIATE',\n        'ADVANCED'\n    ]).default('BEGINNER'),\n    safetyNotes: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(1000, 'Safety notes must be less than 1000 characters').optional()\n});\n/**\n * Update exercise schema\n */ const updateExerciseSchema = createExerciseSchema.partial().extend({\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\n/**\n * Exercise with all fields\n */ const exerciseSchema = createExerciseSchema.extend({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean(),\n    usageCount: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    lastUsed: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional(),\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n    updatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date()\n});\n// ============================================================================\n// WORKOUT SESSION SCHEMAS\n// ============================================================================\n/**\n * Create workout session schema\n */ const createWorkoutSessionSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    date: dateStringSchema,\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(100, 'Title must be less than 100 characters').optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(1000, 'Notes must be less than 1000 characters').optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(100, 'Location must be less than 100 characters').optional(),\n    startTime: timeStringSchema,\n    endTime: timeStringSchema.optional(),\n    isTemplate: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false)\n});\n/**\n * Update workout session schema\n */ const updateWorkoutSessionSchema = createWorkoutSessionSchema.partial();\n/**\n * Workout session with all fields\n */ const workoutSessionSchema = createWorkoutSessionSchema.extend({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    userId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    coachId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid().optional(),\n    startTime: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n    endTime: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional(),\n    duration: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative().optional(),\n    totalVolume: zod__WEBPACK_IMPORTED_MODULE_1__.number().nonnegative().optional(),\n    totalSets: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    totalReps: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    isComplete: zod__WEBPACK_IMPORTED_MODULE_1__.boolean(),\n    isTemplate: zod__WEBPACK_IMPORTED_MODULE_1__.boolean(),\n    createdAt: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n    updatedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date()\n});\n// ============================================================================\n// FILTER AND SORT SCHEMAS\n// ============================================================================\n/**\n * Date range filter schema\n */ const dateRangeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    start: zod__WEBPACK_IMPORTED_MODULE_1__.date(),\n    end: zod__WEBPACK_IMPORTED_MODULE_1__.date()\n}).refine((data)=>data.start <= data.end, {\n    message: 'Start date must be before or equal to end date',\n    path: [\n        'end'\n    ]\n});\n/**\n * Workout filter options schema\n */ const workoutFilterOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    dateRange: dateRangeSchema.optional(),\n    exercises: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid()).optional(),\n    setTypes: zod__WEBPACK_IMPORTED_MODULE_1__.array(setTypeSchema).optional(),\n    coachId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid().optional(),\n    userId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid().optional()\n});\n/**\n * Workout sort options schema\n */ const workoutSortOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    field: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'date',\n        'exerciseId',\n        'setNumber',\n        'setType',\n        'reps',\n        'weight',\n        'trainingVolume',\n        'createdAt'\n    ]),\n    direction: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'asc',\n        'desc'\n    ])\n});\n/**\n * Pagination schema\n */ const paginationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    page: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive().default(1),\n    limit: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive().max(100).default(50)\n});\n// ============================================================================\n// API REQUEST SCHEMAS\n// ============================================================================\n/**\n * Create multiple workout entries request\n */ const createWorkoutEntriesRequestSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    sessionId: zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid().optional(),\n    entries: zod__WEBPACK_IMPORTED_MODULE_1__.array(createWorkoutLogEntrySchema).min(1, 'At least one entry is required')\n});\n/**\n * Update workout entry request\n */ const updateWorkoutEntryRequestSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    data: updateWorkoutLogEntrySchema\n});\n/**\n * Delete workout entry request\n */ const deleteWorkoutEntryRequestSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid()\n});\n/**\n * Add coach feedback request\n */ const addCoachFeedbackRequestSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    entryId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n    feedback: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Feedback is required').max(1000, 'Feedback must be less than 1000 characters')\n});\n// ============================================================================\n// SEARCH AND FILTER SCHEMAS\n// ============================================================================\n/**\n * Exercise search options schema\n */ const exerciseSearchOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    muscleGroups: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).optional(),\n    equipment: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).optional(),\n    difficulty: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'BEGINNER',\n        'INTERMEDIATE',\n        'ADVANCED'\n    ]).optional(),\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional(),\n    search: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(100, 'Search query must be less than 100 characters').optional()\n});\n/**\n * Workout session filter options schema\n */ const workoutSessionFilterOptionsSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    dateRange: dateRangeSchema.optional(),\n    isComplete: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional(),\n    isTemplate: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\n// ============================================================================\n// STATISTICS SCHEMAS\n// ============================================================================\n/**\n * Workout statistics request schema\n */ const workoutStatsRequestSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    dateRange: dateRangeSchema.optional()\n});\n/**\n * Workout statistics response schema\n */ const workoutStatsResponseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    totalWorkouts: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    totalVolume: zod__WEBPACK_IMPORTED_MODULE_1__.number().nonnegative(),\n    totalSets: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    totalReps: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().nonnegative(),\n    averageWorkoutDuration: zod__WEBPACK_IMPORTED_MODULE_1__.number().nonnegative(),\n    mostUsedExercises: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        exerciseId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid(),\n        count: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive(),\n        name: zod__WEBPACK_IMPORTED_MODULE_1__.string()\n    })),\n    volumeByMuscleGroup: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.object({\n        muscleGroup: zod__WEBPACK_IMPORTED_MODULE_1__.string(),\n        volume: zod__WEBPACK_IMPORTED_MODULE_1__.number().nonnegative()\n    }))\n});\n// ============================================================================\n// VALIDATION HELPERS\n// ============================================================================\n/**\n * Validate weight string and return parsed values\n */ const validateWeightString = (weight)=>{\n    const result = weightStringSchema.safeParse(weight);\n    if (!result.success) {\n        throw new Error(result.error.errors[0]?.message ?? 'Invalid weight');\n    }\n    return weight.split(',').map((w)=>w.trim()).map((w)=>parseFloat(w)).filter((w)=>!isNaN(w));\n};\n/**\n * Validate intensity string and return parsed value\n */ const validateIntensityString = (intensity)=>{\n    const result = intensityStringSchema.safeParse(intensity);\n    if (!result.success) {\n        throw new Error(result.error.errors[0]?.message ?? 'Invalid intensity');\n    }\n    // Check if it's a percentage\n    if (intensity.includes('%')) {\n        const percentage = parseInt(intensity);\n        return {\n            value: percentage,\n            type: 'percentage'\n        };\n    }\n    // Must be RPE\n    const rpe = parseFloat(intensity.replace('RPE', '').trim());\n    return {\n        value: rpe,\n        type: 'rpe'\n    };\n};\n/**\n * Validate tempo string and return parsed values\n */ const validateTempoString = (tempo)=>{\n    const result = tempoStringSchema.safeParse(tempo);\n    if (!result.success) {\n        throw new Error(result.error.errors[0]?.message ?? 'Invalid tempo');\n    }\n    const [eccentric, pause1, concentric, pause2] = tempo.split('-').map(Number);\n    return {\n        eccentric,\n        pause1,\n        concentric,\n        pause2\n    };\n};\n/**\n * Validate date string and return Date object\n */ const validateDateString = (date)=>{\n    const result = dateStringSchema.safeParse(date);\n    if (!result.success) {\n        throw new Error(result.error.errors[0]?.message ?? 'Invalid date');\n    }\n    return new Date(date);\n};\n/**\n * Validate time string and return Date object\n */ const validateTimeString = (time)=>{\n    const result = timeStringSchema.safeParse(time);\n    if (!result.success) {\n        throw new Error(result.error.errors[0]?.message ?? 'Invalid time');\n    }\n    return new Date(`2000-01-01T${time}`);\n};\n// ============================================================================\n// WORKOUT TEMPLATE SCHEMAS (Phase 3)\n// ============================================================================\n/**\n * Workout template exercise schema\n */ const workoutTemplateExerciseSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    exerciseId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid('Invalid exercise ID'),\n    order: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Order must be positive'),\n    sets: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Sets must be positive'),\n    reps: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Reps is required'),\n    weight: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    restTime: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(200, 'Notes must be less than 200 characters').optional(),\n    isSuperset: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n    supersetGroup: zod__WEBPACK_IMPORTED_MODULE_1__.string().optional()\n});\n/**\n * Create workout template schema\n */ const createWorkoutTemplateSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Template name is required').max(100, 'Name must be less than 100 characters'),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Description must be less than 500 characters').optional(),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Category is required').optional(),\n    difficulty: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'BEGINNER',\n        'INTERMEDIATE',\n        'ADVANCED'\n    ]).default('BEGINNER'),\n    duration: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(50, 'Duration must be less than 50 characters').optional(),\n    equipment: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n    isPublic: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n    price: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(0, 'Price must be non-negative').optional(),\n    currency: zod__WEBPACK_IMPORTED_MODULE_1__.string().length(3, 'Currency must be 3 characters').default('USD'),\n    tags: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n    exercises: zod__WEBPACK_IMPORTED_MODULE_1__.array(workoutTemplateExerciseSchema).min(1, 'At least one exercise is required')\n});\n/**\n * Update workout template schema\n */ const updateWorkoutTemplateSchema = createWorkoutTemplateSchema.partial().omit({\n    exercises: true\n});\n/**\n * Rate template schema\n */ const rateTemplateSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    rating: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().min(1, 'Rating must be at least 1').max(5, 'Rating must be at most 5'),\n    review: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Review must be less than 500 characters').optional()\n});\n// ============================================================================\n// TRAINING PROGRAM SCHEMAS (Phase 3)\n// ============================================================================\n/**\n * Program week schema\n */ const programWeekSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    weekNumber: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Week number must be positive'),\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(100, 'Title must be less than 100 characters').optional(),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Description must be less than 500 characters').optional(),\n    workouts: zod__WEBPACK_IMPORTED_MODULE_1__.any() // JSON field for flexible workout structure\n});\n/**\n * Create training program schema\n */ const createTrainingProgramSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Program name is required').max(100, 'Name must be less than 100 characters'),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(1000, 'Description must be less than 1000 characters').optional(),\n    duration: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Duration is required').max(50, 'Duration must be less than 50 characters'),\n    difficulty: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'BEGINNER',\n        'INTERMEDIATE',\n        'ADVANCED'\n    ]).default('BEGINNER'),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Category is required').optional(),\n    isPublic: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false),\n    price: zod__WEBPACK_IMPORTED_MODULE_1__.number().min(0, 'Price must be non-negative').optional(),\n    currency: zod__WEBPACK_IMPORTED_MODULE_1__.string().length(3, 'Currency must be 3 characters').default('USD'),\n    tags: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n    weeks: zod__WEBPACK_IMPORTED_MODULE_1__.array(programWeekSchema).min(1, 'At least one week is required')\n});\n/**\n * Update training program schema\n */ const updateTrainingProgramSchema = createTrainingProgramSchema.partial().omit({\n    weeks: true\n});\n/**\n * Rate program schema\n */ const rateProgramSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    rating: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().min(1, 'Rating must be at least 1').max(5, 'Rating must be at most 5'),\n    review: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Review must be less than 500 characters').optional()\n});\n/**\n * Update program progress schema\n */ const updateProgramProgressSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    currentWeek: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Week must be positive'),\n    currentDay: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Day must be positive'),\n    progressData: zod__WEBPACK_IMPORTED_MODULE_1__.any().optional() // JSON field for flexible progress data\n});\n// ============================================================================\n// EXERCISE VARIATION SCHEMAS (Phase 3)\n// ============================================================================\n/**\n * Create exercise variation schema\n */ const createExerciseVariationSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    name: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Variation name is required').max(100, 'Name must be less than 100 characters'),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Description must be less than 500 characters').optional(),\n    difficulty: zod__WEBPACK_IMPORTED_MODULE_1__[\"enum\"]([\n        'BEGINNER',\n        'INTERMEDIATE',\n        'ADVANCED'\n    ]).default('BEGINNER'),\n    videoUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Must be a valid URL').optional(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Must be a valid URL').optional(),\n    instructions: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(1000, 'Instructions must be less than 1000 characters').optional()\n});\n/**\n * Update exercise variation schema\n */ const updateExerciseVariationSchema = createExerciseVariationSchema.partial().extend({\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\n// ============================================================================\n// ANALYTICS & PROGRESS SCHEMAS (Phase 3)\n// ============================================================================\n/**\n * Add progress metric schema\n */ const addProgressMetricSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    metricType: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Metric type is required'),\n    value: zod__WEBPACK_IMPORTED_MODULE_1__.number({\n        invalid_type_error: 'Value must be a number'\n    }),\n    unit: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(20, 'Unit must be less than 20 characters').optional(),\n    bodyPart: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(50, 'Body part must be less than 50 characters').optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Notes must be less than 500 characters').optional(),\n    imageUrl: zod__WEBPACK_IMPORTED_MODULE_1__.string().url('Must be a valid URL').optional(),\n    recordedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional()\n});\n/**\n * Add personal record schema\n */ const addPersonalRecordSchema = zod__WEBPACK_IMPORTED_MODULE_1__.object({\n    exerciseId: zod__WEBPACK_IMPORTED_MODULE_1__.string().cuid('Invalid exercise ID'),\n    recordType: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Record type is required'),\n    value: zod__WEBPACK_IMPORTED_MODULE_1__.number({\n        invalid_type_error: 'Value must be a number'\n    }),\n    unit: zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1, 'Unit is required'),\n    reps: zod__WEBPACK_IMPORTED_MODULE_1__.number().int().positive('Reps must be positive').optional(),\n    notes: zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500, 'Notes must be less than 500 characters').optional(),\n    achievedAt: zod__WEBPACK_IMPORTED_MODULE_1__.date().optional()\n});\n// ============================================================================\n// ENHANCED EXERCISE SCHEMAS (Phase 3)\n// ============================================================================\n/**\n * Enhanced create exercise schema with Phase 3 features\n */ const enhancedCreateExerciseSchema = createExerciseSchema.extend({\n    formCues: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n    commonMistakes: zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string()).default([]),\n    isCustom: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(false)\n});\n/**\n * Enhanced update exercise schema\n */ const enhancedUpdateExerciseSchema = enhancedCreateExerciseSchema.partial().extend({\n    isActive: zod__WEBPACK_IMPORTED_MODULE_1__.boolean().optional()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29yZS91dGlscy93b3Jrb3V0LXZhbGlkYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXVCO0FBQzRDO0FBRXBFLCtFQUErRTtBQUMvRSxlQUFlO0FBQ2YsK0VBQStFO0FBRS9FOztDQUVDLEdBQ00sTUFBTUksbUJBQW1CSix1Q0FBUSxHQUFHTSxLQUFLLENBQUMsdUJBQXVCO0lBQ3RFQyxTQUFTO0FBQ1gsR0FBRztBQUVIOztDQUVDLEdBQ00sTUFBTUMsbUJBQW1CUix1Q0FBUSxHQUFHTSxLQUFLLENBQUMsb0NBQW9DO0lBQ25GQyxTQUFTO0FBQ1gsR0FBRztBQUVIOztDQUVDLEdBQ00sTUFBTUUsdUJBQXVCVCx1Q0FBUSxHQUFHTSxLQUFLLENBQUMsK0NBQStDO0lBQ2xHQyxTQUFTO0FBQ1gsR0FBRztBQUVIOztDQUVDLEdBQ00sTUFBTUcscUJBQXFCVix1Q0FBUSxHQUFHVyxNQUFNLENBQ2pELENBQUNDO0lBQ0MsTUFBTUMsVUFBVUQsTUFBTUUsS0FBSyxDQUFDLEtBQUtDLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsSUFBSTtJQUNoRCxPQUFPSixRQUFRSyxLQUFLLENBQUNGLENBQUFBLElBQUssQ0FBQ0csTUFBTUMsV0FBV0osT0FBT0ksV0FBV0osS0FBSztBQUNyRSxHQUNBO0lBQ0VULFNBQVM7QUFDWCxHQUNBO0FBRUY7O0NBRUMsR0FDTSxNQUFNYyx3QkFBd0JyQix1Q0FBUSxHQUFHVyxNQUFNLENBQ3BELENBQUNDO0lBQ0MsNENBQTRDO0lBQzVDLElBQUksYUFBYVUsSUFBSSxDQUFDVixRQUFRO1FBQzVCLE1BQU1XLGFBQWFDLFNBQVNaO1FBQzVCLE9BQU9XLGNBQWMsS0FBS0EsY0FBYztJQUMxQztJQUNBLDhDQUE4QztJQUM5QyxJQUFJLDZCQUE2QkQsSUFBSSxDQUFDVixRQUFRO1FBQzVDLE1BQU1h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QyxFQUFFO0lBQzlDc0gsVUFBVXpNLHdDQUFTLEdBQUdtRixPQUFPLENBQUM7QUFDaEMsR0FBRztBQUVIOztDQUVDLEdBQ00sTUFBTXVILCtCQUErQkosNkJBQTZCNUksT0FBTyxHQUFHRSxNQUFNLENBQUM7SUFDeEYwQixVQUFVdEYsd0NBQVMsR0FBR29DLFFBQVE7QUFDaEMsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9jb3JlL3V0aWxzL3dvcmtvdXQtdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFdvcmtvdXQgTG9nIFZhbGlkYXRpb24gU2NoZW1hcyBmb3IgTWFzc2ltaW5vXG4gKiBDb21wcmVoZW5zaXZlIHZhbGlkYXRpb24gdXNpbmcgWm9kIGZvciB3b3Jrb3V0IHRyYWNraW5nIGFuZCBtYW5hZ2VtZW50XG4gKi9cblxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBTZXRUeXBlLCBXZWlnaHRVbml0LCBJbnRlbnNpdHlUeXBlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBCQVNFIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBEYXRlIHN0cmluZyB2YWxpZGF0aW9uIChZWVlZLU1NLUREIGZvcm1hdClcbiAqL1xuZXhwb3J0IGNvbnN0IGRhdGVTdHJpbmdTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLywge1xuICBtZXNzYWdlOiAnRGF0ZSBtdXN0IGJlIGluIFlZWVktTU0tREQgZm9ybWF0Jyxcbn0pO1xuXG4vKipcbiAqIFRpbWUgc3RyaW5nIHZhbGlkYXRpb24gKEhIOk1NIGZvcm1hdClcbiAqL1xuZXhwb3J0IGNvbnN0IHRpbWVTdHJpbmdTY2hlbWEgPSB6LnN0cmluZygpLnJlZ2V4KC9eKFswMV0/WzAtOV18MlswLTNdKTpbMC01XVswLTldJC8sIHtcbiAgbWVzc2FnZTogJ1RpbWUgbXVzdCBiZSBpbiBISDpNTSBmb3JtYXQnLFxufSk7XG5cbi8qKlxuICogRHVyYXRpb24gc3RyaW5nIHZhbGlkYXRpb24gKEhIOk1NOlNTIGZvcm1hdClcbiAqL1xuZXhwb3J0IGNvbnN0IGR1cmF0aW9uU3RyaW5nU2NoZW1hID0gei5zdHJpbmcoKS5yZWdleCgvXihbMDFdP1swLTldfDJbMC0zXSk6WzAtNV1bMC05XTpbMC01XVswLTldJC8sIHtcbiAgbWVzc2FnZTogJ0R1cmF0aW9uIG11c3QgYmUgaW4gSEg6TU06U1MgZm9ybWF0Jyxcbn0pO1xuXG4vKipcbiAqIFdlaWdodCBzdHJpbmcgdmFsaWRhdGlvbiAoc2luZ2xlIG51bWJlciBvciBjb21tYS1zZXBhcmF0ZWQpXG4gKi9cbmV4cG9ydCBjb25zdCB3ZWlnaHRTdHJpbmdTY2hlbWEgPSB6LnN0cmluZygpLnJlZmluZShcbiAgKHZhbHVlKSA9PiB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IHZhbHVlLnNwbGl0KCcsJykubWFwKHcgPT4gdy50cmltKCkpO1xuICAgIHJldHVybiB3ZWlnaHRzLmV2ZXJ5KHcgPT4gIWlzTmFOKHBhcnNlRmxvYXQodykpICYmIHBhcnNlRmxvYXQodykgPiAwKTtcbiAgfSxcbiAge1xuICAgIG1lc3NhZ2U6ICdXZWlnaHQgbXVzdCBiZSBhIHNpbmdsZSBudW1iZXIgb3IgY29tbWEtc2VwYXJhdGVkIG51bWJlcnMgKGUuZy4sIFwiNDBcIiBvciBcIjQwLDQ1LDUwXCIpJyxcbiAgfVxuKTtcblxuLyoqXG4gKiBJbnRlbnNpdHkgc3RyaW5nIHZhbGlkYXRpb24gKCUxUk0gb3IgUlBFIGZvcm1hdClcbiAqL1xuZXhwb3J0IGNvbnN0IGludGVuc2l0eVN0cmluZ1NjaGVtYSA9IHouc3RyaW5nKCkucmVmaW5lKFxuICAodmFsdWUpID0+IHtcbiAgICAvLyBDaGVjayBmb3IgcGVyY2VudGFnZSBmb3JtYXQgKGUuZy4sIFwiODUlXCIpXG4gICAgaWYgKC9eXFxkezEsM30lJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICByZXR1cm4gcGVyY2VudGFnZSA+PSAxICYmIHBlcmNlbnRhZ2UgPD0gMTAwO1xuICAgIH1cbiAgICAvLyBDaGVjayBmb3IgUlBFIGZvcm1hdCAoZS5nLiwgXCJSUEUgOFwiIG9yIFwiOFwiKVxuICAgIGlmICgvXihSUEVcXHM/KT9bMS05XShcXC5bMC05XSk/JC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIGNvbnN0IHJwZSA9IHBhcnNlRmxvYXQodmFsdWUucmVwbGFjZSgnUlBFJywgJycpLnRyaW0oKSk7XG4gICAgICByZXR1cm4gcnBlID49IDEgJiYgcnBlIDw9IDEwO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0sXG4gIHtcbiAgICBtZXNzYWdlOiAnSW50ZW5zaXR5IG11c3QgYmUgcGVyY2VudGFnZSAoZS5nLiwgXCI4NSVcIikgb3IgUlBFIChlLmcuLCBcIlJQRSA4XCIgb3IgXCI4XCIpJyxcbiAgfVxuKTtcblxuLyoqXG4gKiBUZW1wbyBzdHJpbmcgdmFsaWRhdGlvbiAoZS5nLiwgXCIzLTEtMS0wXCIpXG4gKi9cbmV4cG9ydCBjb25zdCB0ZW1wb1N0cmluZ1NjaGVtYSA9IHouc3RyaW5nKCkucmVnZXgoL15cXGQrLVxcZCstXFxkKy1cXGQrJC8sIHtcbiAgbWVzc2FnZTogJ1RlbXBvIG11c3QgYmUgaW4gZm9ybWF0OiBlY2NlbnRyaWMtcGF1c2UtY29uY2VudHJpYy1wYXVzZSAoZS5nLiwgXCIzLTEtMS0wXCIpJyxcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFTlVNIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IHNldFR5cGVTY2hlbWEgPSB6Lm5hdGl2ZUVudW0oU2V0VHlwZSk7XG5leHBvcnQgY29uc3Qgd2VpZ2h0VW5pdFNjaGVtYSA9IHoubmF0aXZlRW51bShXZWlnaHRVbml0KTtcbmV4cG9ydCBjb25zdCBpbnRlbnNpdHlUeXBlU2NoZW1hID0gei5uYXRpdmVFbnVtKEludGVuc2l0eVR5cGUpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBXT1JLT1VUIExPRyBFTlRSWSBTQ0hFTUFTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQmFzZSB3b3Jrb3V0IGxvZyBlbnRyeSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHdvcmtvdXRMb2dFbnRyeUJhc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHNlc3Npb25JZDogei5zdHJpbmcoKS51dWlkKCkub3B0aW9uYWwoKSxcbiAgZGF0ZTogZGF0ZVN0cmluZ1NjaGVtYSxcbiAgZXhlcmNpc2VJZDogei5zdHJpbmcoKS5taW4oMSwgJ0V4ZXJjaXNlIGlzIHJlcXVpcmVkJyksXG4gIHNldE51bWJlcjogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgnU2V0IG51bWJlciBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpLFxuICBzZXRUeXBlOiBzZXRUeXBlU2NoZW1hLFxuICByZXBzOiB6Lm51bWJlcigpLmludCgpLnBvc2l0aXZlKCdSZXBzIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyJyksXG4gIHdlaWdodDogd2VpZ2h0U3RyaW5nU2NoZW1hLFxuICB1bml0OiB3ZWlnaHRVbml0U2NoZW1hLFxuICBzdWJPcmRlcjogei5zdHJpbmcoKS5yZWdleCgvXltBLVpdJC8pLm9wdGlvbmFsKCksXG4gIGludGVuc2l0eTogaW50ZW5zaXR5U3RyaW5nU2NoZW1hLm9wdGlvbmFsKCksXG4gIGludGVuc2l0eVR5cGU6IGludGVuc2l0eVR5cGVTY2hlbWEub3B0aW9uYWwoKSxcbiAgdGVtcG86IHRlbXBvU3RyaW5nU2NoZW1hLm9wdGlvbmFsKCksXG4gIHJlc3RTZWNvbmRzOiB6Lm51bWJlcigpLmludCgpLm1pbigwLCAnUmVzdCB0aW1lIG11c3QgYmUgbm9uLW5lZ2F0aXZlJykub3B0aW9uYWwoKSxcbiAgdXNlckNvbW1lbnRzOiB6LnN0cmluZygpLm1heCg1MDAsICdDb21tZW50cyBtdXN0IGJlIGxlc3MgdGhhbiA1MDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIGNvYWNoRmVlZGJhY2s6IHouc3RyaW5nKCkubWF4KDEwMDAsICdDb2FjaCBmZWVkYmFjayBtdXN0IGJlIGxlc3MgdGhhbiAxMDAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogQ3JlYXRlIHdvcmtvdXQgbG9nIGVudHJ5IHNjaGVtYVxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlV29ya291dExvZ0VudHJ5U2NoZW1hID0gd29ya291dExvZ0VudHJ5QmFzZVNjaGVtYTtcblxuLyoqXG4gKiBVcGRhdGUgd29ya291dCBsb2cgZW50cnkgc2NoZW1hIChhbGwgZmllbGRzIG9wdGlvbmFsKVxuICovXG5leHBvcnQgY29uc3QgdXBkYXRlV29ya291dExvZ0VudHJ5U2NoZW1hID0gd29ya291dExvZ0VudHJ5QmFzZVNjaGVtYS5wYXJ0aWFsKCk7XG5cbi8qKlxuICogV29ya291dCBsb2cgZW50cnkgd2l0aCBjYWxjdWxhdGVkIGZpZWxkc1xuICovXG5leHBvcnQgY29uc3Qgd29ya291dExvZ0VudHJ5U2NoZW1hID0gd29ya291dExvZ0VudHJ5QmFzZVNjaGVtYS5leHRlbmQoe1xuICBpZDogei5zdHJpbmcoKS5jdWlkKCksXG4gIHVzZXJJZDogei5zdHJpbmcoKS5jdWlkKCksXG4gIGNvYWNoSWQ6IHouc3RyaW5nKCkuY3VpZCgpLm9wdGlvbmFsKCksXG4gIG9yZGVyOiB6LnN0cmluZygpLFxuICB0cmFpbmluZ1ZvbHVtZTogei5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLm9wdGlvbmFsKCksXG4gIGR1cmF0aW9uOiBkdXJhdGlvblN0cmluZ1NjaGVtYS5vcHRpb25hbCgpLFxuICBjcmVhdGVkQXQ6IHouZGF0ZSgpLFxuICB1cGRhdGVkQXQ6IHouZGF0ZSgpLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVYRVJDSVNFIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgZXhlcmNpc2Ugc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVFeGVyY2lzZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSwgJ0V4ZXJjaXNlIG5hbWUgaXMgcmVxdWlyZWQnKS5tYXgoMTAwLCAnRXhlcmNpc2UgbmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycycpLFxuICBjYXRlZ29yeTogei5zdHJpbmcoKS5taW4oMSwgJ0NhdGVnb3J5IGlzIHJlcXVpcmVkJyksXG4gIG11c2NsZUdyb3Vwczogei5hcnJheSh6LnN0cmluZygpKS5taW4oMSwgJ0F0IGxlYXN0IG9uZSBtdXNjbGUgZ3JvdXAgaXMgcmVxdWlyZWQnKSxcbiAgZXF1aXBtZW50OiB6LmFycmF5KHouc3RyaW5nKCkpLm1pbigxLCAnQXQgbGVhc3Qgb25lIGVxdWlwbWVudCB0eXBlIGlzIHJlcXVpcmVkJyksXG4gIGluc3RydWN0aW9uczogei5zdHJpbmcoKS5tYXgoMjAwMCwgJ0luc3RydWN0aW9ucyBtdXN0IGJlIGxlc3MgdGhhbiAyMDAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICB2aWRlb1VybDogei5zdHJpbmcoKS51cmwoJ011c3QgYmUgYSB2YWxpZCBVUkwnKS5vcHRpb25hbCgpLFxuICBpbWFnZVVybDogei5zdHJpbmcoKS51cmwoJ011c3QgYmUgYSB2YWxpZCBVUkwnKS5vcHRpb25hbCgpLFxuICBkaWZmaWN1bHR5OiB6LmVudW0oWydCRUdJTk5FUicsICdJTlRFUk1FRElBVEUnLCAnQURWQU5DRUQnXSkuZGVmYXVsdCgnQkVHSU5ORVInKSxcbiAgc2FmZXR5Tm90ZXM6IHouc3RyaW5nKCkubWF4KDEwMDAsICdTYWZldHkgbm90ZXMgbXVzdCBiZSBsZXNzIHRoYW4gMTAwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIFVwZGF0ZSBleGVyY2lzZSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZUV4ZXJjaXNlU2NoZW1hID0gY3JlYXRlRXhlcmNpc2VTY2hlbWEucGFydGlhbCgpLmV4dGVuZCh7XG4gIGlzQWN0aXZlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogRXhlcmNpc2Ugd2l0aCBhbGwgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCBleGVyY2lzZVNjaGVtYSA9IGNyZWF0ZUV4ZXJjaXNlU2NoZW1hLmV4dGVuZCh7XG4gIGlkOiB6LnN0cmluZygpLmN1aWQoKSxcbiAgaXNBY3RpdmU6IHouYm9vbGVhbigpLFxuICB1c2FnZUNvdW50OiB6Lm51bWJlcigpLmludCgpLm5vbm5lZ2F0aXZlKCksXG4gIGxhc3RVc2VkOiB6LmRhdGUoKS5vcHRpb25hbCgpLFxuICBjcmVhdGVkQXQ6IHouZGF0ZSgpLFxuICB1cGRhdGVkQXQ6IHouZGF0ZSgpLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFdPUktPVVQgU0VTU0lPTiBTQ0hFTUFTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIHdvcmtvdXQgc2Vzc2lvbiBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVdvcmtvdXRTZXNzaW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBkYXRlOiBkYXRlU3RyaW5nU2NoZW1hLFxuICB0aXRsZTogei5zdHJpbmcoKS5tYXgoMTAwLCAnVGl0bGUgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBub3Rlczogei5zdHJpbmcoKS5tYXgoMTAwMCwgJ05vdGVzIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLm1heCgxMDAsICdMb2NhdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIHN0YXJ0VGltZTogdGltZVN0cmluZ1NjaGVtYSxcbiAgZW5kVGltZTogdGltZVN0cmluZ1NjaGVtYS5vcHRpb25hbCgpLFxuICBpc1RlbXBsYXRlOiB6LmJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbn0pO1xuXG4vKipcbiAqIFVwZGF0ZSB3b3Jrb3V0IHNlc3Npb24gc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCB1cGRhdGVXb3Jrb3V0U2Vzc2lvblNjaGVtYSA9IGNyZWF0ZVdvcmtvdXRTZXNzaW9uU2NoZW1hLnBhcnRpYWwoKTtcblxuLyoqXG4gKiBXb3Jrb3V0IHNlc3Npb24gd2l0aCBhbGwgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U2Vzc2lvblNjaGVtYSA9IGNyZWF0ZVdvcmtvdXRTZXNzaW9uU2NoZW1hLmV4dGVuZCh7XG4gIGlkOiB6LnN0cmluZygpLmN1aWQoKSxcbiAgdXNlcklkOiB6LnN0cmluZygpLmN1aWQoKSxcbiAgY29hY2hJZDogei5zdHJpbmcoKS5jdWlkKCkub3B0aW9uYWwoKSxcbiAgc3RhcnRUaW1lOiB6LmRhdGUoKSxcbiAgZW5kVGltZTogei5kYXRlKCkub3B0aW9uYWwoKSxcbiAgZHVyYXRpb246IHoubnVtYmVyKCkuaW50KCkubm9ubmVnYXRpdmUoKS5vcHRpb25hbCgpLFxuICB0b3RhbFZvbHVtZTogei5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLm9wdGlvbmFsKCksXG4gIHRvdGFsU2V0czogei5udW1iZXIoKS5pbnQoKS5ub25uZWdhdGl2ZSgpLFxuICB0b3RhbFJlcHM6IHoubnVtYmVyKCkuaW50KCkubm9ubmVnYXRpdmUoKSxcbiAgaXNDb21wbGV0ZTogei5ib29sZWFuKCksXG4gIGlzVGVtcGxhdGU6IHouYm9vbGVhbigpLFxuICBjcmVhdGVkQXQ6IHouZGF0ZSgpLFxuICB1cGRhdGVkQXQ6IHouZGF0ZSgpLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEZJTFRFUiBBTkQgU09SVCBTQ0hFTUFTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRGF0ZSByYW5nZSBmaWx0ZXIgc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCBkYXRlUmFuZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHN0YXJ0OiB6LmRhdGUoKSxcbiAgZW5kOiB6LmRhdGUoKSxcbn0pLnJlZmluZShcbiAgKGRhdGEpID0+IGRhdGEuc3RhcnQgPD0gZGF0YS5lbmQsXG4gIHtcbiAgICBtZXNzYWdlOiAnU3RhcnQgZGF0ZSBtdXN0IGJlIGJlZm9yZSBvciBlcXVhbCB0byBlbmQgZGF0ZScsXG4gICAgcGF0aDogWydlbmQnXSxcbiAgfVxuKTtcblxuLyoqXG4gKiBXb3Jrb3V0IGZpbHRlciBvcHRpb25zIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3Qgd29ya291dEZpbHRlck9wdGlvbnNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRhdGVSYW5nZTogZGF0ZVJhbmdlU2NoZW1hLm9wdGlvbmFsKCksXG4gIGV4ZXJjaXNlczogei5hcnJheSh6LnN0cmluZygpLmN1aWQoKSkub3B0aW9uYWwoKSxcbiAgc2V0VHlwZXM6IHouYXJyYXkoc2V0VHlwZVNjaGVtYSkub3B0aW9uYWwoKSxcbiAgY29hY2hJZDogei5zdHJpbmcoKS5jdWlkKCkub3B0aW9uYWwoKSxcbiAgdXNlcklkOiB6LnN0cmluZygpLmN1aWQoKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogV29ya291dCBzb3J0IG9wdGlvbnMgc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCB3b3Jrb3V0U29ydE9wdGlvbnNTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGZpZWxkOiB6LmVudW0oWydkYXRlJywgJ2V4ZXJjaXNlSWQnLCAnc2V0TnVtYmVyJywgJ3NldFR5cGUnLCAncmVwcycsICd3ZWlnaHQnLCAndHJhaW5pbmdWb2x1bWUnLCAnY3JlYXRlZEF0J10pLFxuICBkaXJlY3Rpb246IHouZW51bShbJ2FzYycsICdkZXNjJ10pLFxufSk7XG5cbi8qKlxuICogUGFnaW5hdGlvbiBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHBhZ2luYXRpb25TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHBhZ2U6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKS5kZWZhdWx0KDEpLFxuICBsaW1pdDogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgpLm1heCgxMDApLmRlZmF1bHQoNTApLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFQSSBSRVFVRVNUIFNDSEVNQVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgbXVsdGlwbGUgd29ya291dCBlbnRyaWVzIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVdvcmtvdXRFbnRyaWVzUmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgc2Vzc2lvbklkOiB6LnN0cmluZygpLnV1aWQoKS5vcHRpb25hbCgpLFxuICBlbnRyaWVzOiB6LmFycmF5KGNyZWF0ZVdvcmtvdXRMb2dFbnRyeVNjaGVtYSkubWluKDEsICdBdCBsZWFzdCBvbmUgZW50cnkgaXMgcmVxdWlyZWQnKSxcbn0pO1xuXG4vKipcbiAqIFVwZGF0ZSB3b3Jrb3V0IGVudHJ5IHJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVdvcmtvdXRFbnRyeVJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGlkOiB6LnN0cmluZygpLmN1aWQoKSxcbiAgZGF0YTogdXBkYXRlV29ya291dExvZ0VudHJ5U2NoZW1hLFxufSk7XG5cbi8qKlxuICogRGVsZXRlIHdvcmtvdXQgZW50cnkgcmVxdWVzdFxuICovXG5leHBvcnQgY29uc3QgZGVsZXRlV29ya291dEVudHJ5UmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCkuY3VpZCgpLFxufSk7XG5cbi8qKlxuICogQWRkIGNvYWNoIGZlZWRiYWNrIHJlcXVlc3RcbiAqL1xuZXhwb3J0IGNvbnN0IGFkZENvYWNoRmVlZGJhY2tSZXF1ZXN0U2NoZW1hID0gei5vYmplY3Qoe1xuICBlbnRyeUlkOiB6LnN0cmluZygpLmN1aWQoKSxcbiAgZmVlZGJhY2s6IHouc3RyaW5nKCkubWluKDEsICdGZWVkYmFjayBpcyByZXF1aXJlZCcpLm1heCgxMDAwLCAnRmVlZGJhY2sgbXVzdCBiZSBsZXNzIHRoYW4gMTAwMCBjaGFyYWN0ZXJzJyksXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0VBUkNIIEFORCBGSUxURVIgU0NIRU1BU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEV4ZXJjaXNlIHNlYXJjaCBvcHRpb25zIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3QgZXhlcmNpc2VTZWFyY2hPcHRpb25zU2NoZW1hID0gei5vYmplY3Qoe1xuICBjYXRlZ29yeTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBtdXNjbGVHcm91cHM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgZXF1aXBtZW50OiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIGRpZmZpY3VsdHk6IHouZW51bShbJ0JFR0lOTkVSJywgJ0lOVEVSTUVESUFURScsICdBRFZBTkNFRCddKS5vcHRpb25hbCgpLFxuICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgc2VhcmNoOiB6LnN0cmluZygpLm1heCgxMDAsICdTZWFyY2ggcXVlcnkgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxufSk7XG5cbi8qKlxuICogV29ya291dCBzZXNzaW9uIGZpbHRlciBvcHRpb25zIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3Qgd29ya291dFNlc3Npb25GaWx0ZXJPcHRpb25zU2NoZW1hID0gei5vYmplY3Qoe1xuICBkYXRlUmFuZ2U6IGRhdGVSYW5nZVNjaGVtYS5vcHRpb25hbCgpLFxuICBpc0NvbXBsZXRlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxuICBpc1RlbXBsYXRlOiB6LmJvb2xlYW4oKS5vcHRpb25hbCgpLFxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNUQVRJU1RJQ1MgU0NIRU1BU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFdvcmtvdXQgc3RhdGlzdGljcyByZXF1ZXN0IHNjaGVtYVxuICovXG5leHBvcnQgY29uc3Qgd29ya291dFN0YXRzUmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZGF0ZVJhbmdlOiBkYXRlUmFuZ2VTY2hlbWEub3B0aW9uYWwoKSxcbn0pO1xuXG4vKipcbiAqIFdvcmtvdXQgc3RhdGlzdGljcyByZXNwb25zZSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHdvcmtvdXRTdGF0c1Jlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICB0b3RhbFdvcmtvdXRzOiB6Lm51bWJlcigpLmludCgpLm5vbm5lZ2F0aXZlKCksXG4gIHRvdGFsVm9sdW1lOiB6Lm51bWJlcigpLm5vbm5lZ2F0aXZlKCksXG4gIHRvdGFsU2V0czogei5udW1iZXIoKS5pbnQoKS5ub25uZWdhdGl2ZSgpLFxuICB0b3RhbFJlcHM6IHoubnVtYmVyKCkuaW50KCkubm9ubmVnYXRpdmUoKSxcbiAgYXZlcmFnZVdvcmtvdXREdXJhdGlvbjogei5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLFxuICBtb3N0VXNlZEV4ZXJjaXNlczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgZXhlcmNpc2VJZDogei5zdHJpbmcoKS5jdWlkKCksXG4gICAgY291bnQ6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICB9KSksXG4gIHZvbHVtZUJ5TXVzY2xlR3JvdXA6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgIG11c2NsZUdyb3VwOiB6LnN0cmluZygpLFxuICAgIHZvbHVtZTogei5udW1iZXIoKS5ub25uZWdhdGl2ZSgpLFxuICB9KSksXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBVElPTiBIRUxQRVJTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVmFsaWRhdGUgd2VpZ2h0IHN0cmluZyBhbmQgcmV0dXJuIHBhcnNlZCB2YWx1ZXNcbiAqL1xuZXhwb3J0IGNvbnN0IHZhbGlkYXRlV2VpZ2h0U3RyaW5nID0gKHdlaWdodDogc3RyaW5nKTogbnVtYmVyW10gPT4ge1xuICBjb25zdCByZXN1bHQgPSB3ZWlnaHRTdHJpbmdTY2hlbWEuc2FmZVBhcnNlKHdlaWdodCk7XG4gIGlmICghcmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IocmVzdWx0LmVycm9yLmVycm9yc1swXT8ubWVzc2FnZSA/PyAnSW52YWxpZCB3ZWlnaHQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHdlaWdodFxuICAgIC5zcGxpdCgnLCcpXG4gICAgLm1hcCh3ID0+IHcudHJpbSgpKVxuICAgIC5tYXAodyA9PiBwYXJzZUZsb2F0KHcpKVxuICAgIC5maWx0ZXIodyA9PiAhaXNOYU4odykpO1xufTtcblxuLyoqXG4gKiBWYWxpZGF0ZSBpbnRlbnNpdHkgc3RyaW5nIGFuZCByZXR1cm4gcGFyc2VkIHZhbHVlXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUludGVuc2l0eVN0cmluZyA9IChpbnRlbnNpdHk6IHN0cmluZyk6IHsgdmFsdWU6IG51bWJlcjsgdHlwZTogJ3BlcmNlbnRhZ2UnIHwgJ3JwZScgfSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGludGVuc2l0eVN0cmluZ1NjaGVtYS5zYWZlUGFyc2UoaW50ZW5zaXR5KTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IuZXJyb3JzWzBdPy5tZXNzYWdlID8/ICdJbnZhbGlkIGludGVuc2l0eScpO1xuICB9XG4gIFxuICAvLyBDaGVjayBpZiBpdCdzIGEgcGVyY2VudGFnZVxuICBpZiAoaW50ZW5zaXR5LmluY2x1ZGVzKCclJykpIHtcbiAgICBjb25zdCBwZXJjZW50YWdlID0gcGFyc2VJbnQoaW50ZW5zaXR5KTtcbiAgICByZXR1cm4geyB2YWx1ZTogcGVyY2VudGFnZSwgdHlwZTogJ3BlcmNlbnRhZ2UnIH07XG4gIH1cbiAgXG4gIC8vIE11c3QgYmUgUlBFXG4gIGNvbnN0IHJwZSA9IHBhcnNlRmxvYXQoaW50ZW5zaXR5LnJlcGxhY2UoJ1JQRScsICcnKS50cmltKCkpO1xuICByZXR1cm4geyB2YWx1ZTogcnBlLCB0eXBlOiAncnBlJyB9O1xufTtcblxuLyoqXG4gKiBWYWxpZGF0ZSB0ZW1wbyBzdHJpbmcgYW5kIHJldHVybiBwYXJzZWQgdmFsdWVzXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVRlbXBvU3RyaW5nID0gKHRlbXBvOiBzdHJpbmcpOiB7IGVjY2VudHJpYzogbnVtYmVyOyBwYXVzZTE6IG51bWJlcjsgY29uY2VudHJpYzogbnVtYmVyOyBwYXVzZTI6IG51bWJlciB9ID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gdGVtcG9TdHJpbmdTY2hlbWEuc2FmZVBhcnNlKHRlbXBvKTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IuZXJyb3JzWzBdPy5tZXNzYWdlID8/ICdJbnZhbGlkIHRlbXBvJyk7XG4gIH1cbiAgXG4gIGNvbnN0IFtlY2NlbnRyaWMsIHBhdXNlMSwgY29uY2VudHJpYywgcGF1c2UyXSA9IHRlbXBvLnNwbGl0KCctJykubWFwKE51bWJlcikgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHJldHVybiB7IGVjY2VudHJpYywgcGF1c2UxLCBjb25jZW50cmljLCBwYXVzZTIgfTtcbn07XG5cbi8qKlxuICogVmFsaWRhdGUgZGF0ZSBzdHJpbmcgYW5kIHJldHVybiBEYXRlIG9iamVjdFxuICovXG5leHBvcnQgY29uc3QgdmFsaWRhdGVEYXRlU3RyaW5nID0gKGRhdGU6IHN0cmluZyk6IERhdGUgPT4ge1xuICBjb25zdCByZXN1bHQgPSBkYXRlU3RyaW5nU2NoZW1hLnNhZmVQYXJzZShkYXRlKTtcbiAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBFcnJvcihyZXN1bHQuZXJyb3IuZXJyb3JzWzBdPy5tZXNzYWdlID8/ICdJbnZhbGlkIGRhdGUnKTtcbiAgfVxuICBcbiAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpO1xufTtcblxuLyoqXG4gKiBWYWxpZGF0ZSB0aW1lIHN0cmluZyBhbmQgcmV0dXJuIERhdGUgb2JqZWN0XG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVRpbWVTdHJpbmcgPSAodGltZTogc3RyaW5nKTogRGF0ZSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IHRpbWVTdHJpbmdTY2hlbWEuc2FmZVBhcnNlKHRpbWUpO1xuICBpZiAoIXJlc3VsdC5zdWNjZXNzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHJlc3VsdC5lcnJvci5lcnJvcnNbMF0/Lm1lc3NhZ2UgPz8gJ0ludmFsaWQgdGltZScpO1xuICB9XG4gIFxuICByZXR1cm4gbmV3IERhdGUoYDIwMDAtMDEtMDFUJHt0aW1lfWApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhQT1JUIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB0eXBlIENyZWF0ZVdvcmtvdXRMb2dFbnRyeUlucHV0ID0gei5pbmZlcjx0eXBlb2YgY3JlYXRlV29ya291dExvZ0VudHJ5U2NoZW1hPjtcbmV4cG9ydCB0eXBlIFVwZGF0ZVdvcmtvdXRMb2dFbnRyeUlucHV0ID0gei5pbmZlcjx0eXBlb2YgdXBkYXRlV29ya291dExvZ0VudHJ5U2NoZW1hPjtcbmV4cG9ydCB0eXBlIFdvcmtvdXRMb2dFbnRyeU91dHB1dCA9IHouaW5mZXI8dHlwZW9mIHdvcmtvdXRMb2dFbnRyeVNjaGVtYT47XG5cbmV4cG9ydCB0eXBlIENyZWF0ZUV4ZXJjaXNlSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBjcmVhdGVFeGVyY2lzZVNjaGVtYT47XG5leHBvcnQgdHlwZSBVcGRhdGVFeGVyY2lzZUlucHV0ID0gei5pbmZlcjx0eXBlb2YgdXBkYXRlRXhlcmNpc2VTY2hlbWE+O1xuZXhwb3J0IHR5cGUgRXhlcmNpc2VPdXRwdXQgPSB6LmluZmVyPHR5cGVvZiBleGVyY2lzZVNjaGVtYT47XG5cbmV4cG9ydCB0eXBlIENyZWF0ZVdvcmtvdXRTZXNzaW9uSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBjcmVhdGVXb3Jrb3V0U2Vzc2lvblNjaGVtYT47XG5leHBvcnQgdHlwZSBVcGRhdGVXb3Jrb3V0U2Vzc2lvbklucHV0ID0gei5pbmZlcjx0eXBlb2YgdXBkYXRlV29ya291dFNlc3Npb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgV29ya291dFNlc3Npb25PdXRwdXQgPSB6LmluZmVyPHR5cGVvZiB3b3Jrb3V0U2Vzc2lvblNjaGVtYT47XG5cbmV4cG9ydCB0eXBlIFdvcmtvdXRGaWx0ZXJPcHRpb25zSW5wdXQgPSB6LmluZmVyPHR5cGVvZiB3b3Jrb3V0RmlsdGVyT3B0aW9uc1NjaGVtYT47XG5leHBvcnQgdHlwZSBXb3Jrb3V0U29ydE9wdGlvbnNJbnB1dCA9IHouaW5mZXI8dHlwZW9mIHdvcmtvdXRTb3J0T3B0aW9uc1NjaGVtYT47XG5leHBvcnQgdHlwZSBQYWdpbmF0aW9uSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBwYWdpbmF0aW9uU2NoZW1hPjtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlV29ya291dEVudHJpZXNSZXF1ZXN0ID0gei5pbmZlcjx0eXBlb2YgY3JlYXRlV29ya291dEVudHJpZXNSZXF1ZXN0U2NoZW1hPjtcbmV4cG9ydCB0eXBlIFVwZGF0ZVdvcmtvdXRFbnRyeVJlcXVlc3QgPSB6LmluZmVyPHR5cGVvZiB1cGRhdGVXb3Jrb3V0RW50cnlSZXF1ZXN0U2NoZW1hPjtcbmV4cG9ydCB0eXBlIERlbGV0ZVdvcmtvdXRFbnRyeVJlcXVlc3QgPSB6LmluZmVyPHR5cGVvZiBkZWxldGVXb3Jrb3V0RW50cnlSZXF1ZXN0U2NoZW1hPjtcbmV4cG9ydCB0eXBlIEFkZENvYWNoRmVlZGJhY2tSZXF1ZXN0ID0gei5pbmZlcjx0eXBlb2YgYWRkQ29hY2hGZWVkYmFja1JlcXVlc3RTY2hlbWE+O1xuXG5leHBvcnQgdHlwZSBXb3Jrb3V0U3RhdHNSZXF1ZXN0ID0gei5pbmZlcjx0eXBlb2Ygd29ya291dFN0YXRzUmVxdWVzdFNjaGVtYT47XG5leHBvcnQgdHlwZSBXb3Jrb3V0U3RhdHNSZXNwb25zZSA9IHouaW5mZXI8dHlwZW9mIHdvcmtvdXRTdGF0c1Jlc3BvbnNlU2NoZW1hPjtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gV09SS09VVCBURU1QTEFURSBTQ0hFTUFTIChQaGFzZSAzKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFdvcmtvdXQgdGVtcGxhdGUgZXhlcmNpc2Ugc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCB3b3Jrb3V0VGVtcGxhdGVFeGVyY2lzZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgZXhlcmNpc2VJZDogei5zdHJpbmcoKS5jdWlkKCdJbnZhbGlkIGV4ZXJjaXNlIElEJyksXG4gIG9yZGVyOiB6Lm51bWJlcigpLmludCgpLnBvc2l0aXZlKCdPcmRlciBtdXN0IGJlIHBvc2l0aXZlJyksXG4gIHNldHM6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoJ1NldHMgbXVzdCBiZSBwb3NpdGl2ZScpLFxuICByZXBzOiB6LnN0cmluZygpLm1pbigxLCAnUmVwcyBpcyByZXF1aXJlZCcpLFxuICB3ZWlnaHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcmVzdFRpbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgbm90ZXM6IHouc3RyaW5nKCkubWF4KDIwMCwgJ05vdGVzIG11c3QgYmUgbGVzcyB0aGFuIDIwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgaXNTdXBlcnNldDogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIHN1cGVyc2V0R3JvdXA6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxufSk7XG5cbi8qKlxuICogQ3JlYXRlIHdvcmtvdXQgdGVtcGxhdGUgc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVXb3Jrb3V0VGVtcGxhdGVTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEsICdUZW1wbGF0ZSBuYW1lIGlzIHJlcXVpcmVkJykubWF4KDEwMCwgJ05hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWF4KDUwMCwgJ0Rlc2NyaXB0aW9uIG11c3QgYmUgbGVzcyB0aGFuIDUwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgY2F0ZWdvcnk6IHouc3RyaW5nKCkubWluKDEsICdDYXRlZ29yeSBpcyByZXF1aXJlZCcpLm9wdGlvbmFsKCksXG4gIGRpZmZpY3VsdHk6IHouZW51bShbJ0JFR0lOTkVSJywgJ0lOVEVSTUVESUFURScsICdBRFZBTkNFRCddKS5kZWZhdWx0KCdCRUdJTk5FUicpLFxuICBkdXJhdGlvbjogei5zdHJpbmcoKS5tYXgoNTAsICdEdXJhdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiA1MCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgZXF1aXBtZW50OiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICBpc1B1YmxpYzogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSksXG4gIHByaWNlOiB6Lm51bWJlcigpLm1pbigwLCAnUHJpY2UgbXVzdCBiZSBub24tbmVnYXRpdmUnKS5vcHRpb25hbCgpLFxuICBjdXJyZW5jeTogei5zdHJpbmcoKS5sZW5ndGgoMywgJ0N1cnJlbmN5IG11c3QgYmUgMyBjaGFyYWN0ZXJzJykuZGVmYXVsdCgnVVNEJyksXG4gIHRhZ3M6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIGV4ZXJjaXNlczogei5hcnJheSh3b3Jrb3V0VGVtcGxhdGVFeGVyY2lzZVNjaGVtYSkubWluKDEsICdBdCBsZWFzdCBvbmUgZXhlcmNpc2UgaXMgcmVxdWlyZWQnKVxufSk7XG5cbi8qKlxuICogVXBkYXRlIHdvcmtvdXQgdGVtcGxhdGUgc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCB1cGRhdGVXb3Jrb3V0VGVtcGxhdGVTY2hlbWEgPSBjcmVhdGVXb3Jrb3V0VGVtcGxhdGVTY2hlbWEucGFydGlhbCgpLm9taXQoeyBleGVyY2lzZXM6IHRydWUgfSk7XG5cbi8qKlxuICogUmF0ZSB0ZW1wbGF0ZSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHJhdGVUZW1wbGF0ZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgcmF0aW5nOiB6Lm51bWJlcigpLmludCgpLm1pbigxLCAnUmF0aW5nIG11c3QgYmUgYXQgbGVhc3QgMScpLm1heCg1LCAnUmF0aW5nIG11c3QgYmUgYXQgbW9zdCA1JyksXG4gIHJldmlldzogei5zdHJpbmcoKS5tYXgoNTAwLCAnUmV2aWV3IG11c3QgYmUgbGVzcyB0aGFuIDUwMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKVxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRSQUlOSU5HIFBST0dSQU0gU0NIRU1BUyAoUGhhc2UgMylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBQcm9ncmFtIHdlZWsgc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9ncmFtV2Vla1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgd2Vla051bWJlcjogei5udW1iZXIoKS5pbnQoKS5wb3NpdGl2ZSgnV2VlayBudW1iZXIgbXVzdCBiZSBwb3NpdGl2ZScpLFxuICB0aXRsZTogei5zdHJpbmcoKS5tYXgoMTAwLCAnVGl0bGUgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICB3b3Jrb3V0czogei5hbnkoKSAvLyBKU09OIGZpZWxkIGZvciBmbGV4aWJsZSB3b3Jrb3V0IHN0cnVjdHVyZVxufSk7XG5cbi8qKlxuICogQ3JlYXRlIHRyYWluaW5nIHByb2dyYW0gc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVUcmFpbmluZ1Byb2dyYW1TY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEsICdQcm9ncmFtIG5hbWUgaXMgcmVxdWlyZWQnKS5tYXgoMTAwLCAnTmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycycpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoMTAwMCwgJ0Rlc2NyaXB0aW9uIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIGR1cmF0aW9uOiB6LnN0cmluZygpLm1pbigxLCAnRHVyYXRpb24gaXMgcmVxdWlyZWQnKS5tYXgoNTAsICdEdXJhdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiA1MCBjaGFyYWN0ZXJzJyksXG4gIGRpZmZpY3VsdHk6IHouZW51bShbJ0JFR0lOTkVSJywgJ0lOVEVSTUVESUFURScsICdBRFZBTkNFRCddKS5kZWZhdWx0KCdCRUdJTk5FUicpLFxuICBjYXRlZ29yeTogei5zdHJpbmcoKS5taW4oMSwgJ0NhdGVnb3J5IGlzIHJlcXVpcmVkJykub3B0aW9uYWwoKSxcbiAgaXNQdWJsaWM6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICBwcmljZTogei5udW1iZXIoKS5taW4oMCwgJ1ByaWNlIG11c3QgYmUgbm9uLW5lZ2F0aXZlJykub3B0aW9uYWwoKSxcbiAgY3VycmVuY3k6IHouc3RyaW5nKCkubGVuZ3RoKDMsICdDdXJyZW5jeSBtdXN0IGJlIDMgY2hhcmFjdGVycycpLmRlZmF1bHQoJ1VTRCcpLFxuICB0YWdzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICB3ZWVrczogei5hcnJheShwcm9ncmFtV2Vla1NjaGVtYSkubWluKDEsICdBdCBsZWFzdCBvbmUgd2VlayBpcyByZXF1aXJlZCcpXG59KTtcblxuLyoqXG4gKiBVcGRhdGUgdHJhaW5pbmcgcHJvZ3JhbSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVRyYWluaW5nUHJvZ3JhbVNjaGVtYSA9IGNyZWF0ZVRyYWluaW5nUHJvZ3JhbVNjaGVtYS5wYXJ0aWFsKCkub21pdCh7IHdlZWtzOiB0cnVlIH0pO1xuXG4vKipcbiAqIFJhdGUgcHJvZ3JhbSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHJhdGVQcm9ncmFtU2NoZW1hID0gei5vYmplY3Qoe1xuICByYXRpbmc6IHoubnVtYmVyKCkuaW50KCkubWluKDEsICdSYXRpbmcgbXVzdCBiZSBhdCBsZWFzdCAxJykubWF4KDUsICdSYXRpbmcgbXVzdCBiZSBhdCBtb3N0IDUnKSxcbiAgcmV2aWV3OiB6LnN0cmluZygpLm1heCg1MDAsICdSZXZpZXcgbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpXG59KTtcblxuLyoqXG4gKiBVcGRhdGUgcHJvZ3JhbSBwcm9ncmVzcyBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVByb2dyYW1Qcm9ncmVzc1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgY3VycmVudFdlZWs6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoJ1dlZWsgbXVzdCBiZSBwb3NpdGl2ZScpLFxuICBjdXJyZW50RGF5OiB6Lm51bWJlcigpLmludCgpLnBvc2l0aXZlKCdEYXkgbXVzdCBiZSBwb3NpdGl2ZScpLFxuICBwcm9ncmVzc0RhdGE6IHouYW55KCkub3B0aW9uYWwoKSAvLyBKU09OIGZpZWxkIGZvciBmbGV4aWJsZSBwcm9ncmVzcyBkYXRhXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhFUkNJU0UgVkFSSUFUSU9OIFNDSEVNQVMgKFBoYXNlIDMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ3JlYXRlIGV4ZXJjaXNlIHZhcmlhdGlvbiBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUV4ZXJjaXNlVmFyaWF0aW9uU2NoZW1hID0gei5vYmplY3Qoe1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxLCAnVmFyaWF0aW9uIG5hbWUgaXMgcmVxdWlyZWQnKS5tYXgoMTAwLCAnTmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVycycpLFxuICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5tYXgoNTAwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBkaWZmaWN1bHR5OiB6LmVudW0oWydCRUdJTk5FUicsICdJTlRFUk1FRElBVEUnLCAnQURWQU5DRUQnXSkuZGVmYXVsdCgnQkVHSU5ORVInKSxcbiAgdmlkZW9Vcmw6IHouc3RyaW5nKCkudXJsKCdNdXN0IGJlIGEgdmFsaWQgVVJMJykub3B0aW9uYWwoKSxcbiAgaW1hZ2VVcmw6IHouc3RyaW5nKCkudXJsKCdNdXN0IGJlIGEgdmFsaWQgVVJMJykub3B0aW9uYWwoKSxcbiAgaW5zdHJ1Y3Rpb25zOiB6LnN0cmluZygpLm1heCgxMDAwLCAnSW5zdHJ1Y3Rpb25zIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKClcbn0pO1xuXG4vKipcbiAqIFVwZGF0ZSBleGVyY2lzZSB2YXJpYXRpb24gc2NoZW1hXG4gKi9cbmV4cG9ydCBjb25zdCB1cGRhdGVFeGVyY2lzZVZhcmlhdGlvblNjaGVtYSA9IGNyZWF0ZUV4ZXJjaXNlVmFyaWF0aW9uU2NoZW1hLnBhcnRpYWwoKS5leHRlbmQoe1xuICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFOQUxZVElDUyAmIFBST0dSRVNTIFNDSEVNQVMgKFBoYXNlIDMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQWRkIHByb2dyZXNzIG1ldHJpYyBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGFkZFByb2dyZXNzTWV0cmljU2NoZW1hID0gei5vYmplY3Qoe1xuICBtZXRyaWNUeXBlOiB6LnN0cmluZygpLm1pbigxLCAnTWV0cmljIHR5cGUgaXMgcmVxdWlyZWQnKSxcbiAgdmFsdWU6IHoubnVtYmVyKHsgaW52YWxpZF90eXBlX2Vycm9yOiAnVmFsdWUgbXVzdCBiZSBhIG51bWJlcicgfSksXG4gIHVuaXQ6IHouc3RyaW5nKCkubWF4KDIwLCAnVW5pdCBtdXN0IGJlIGxlc3MgdGhhbiAyMCBjaGFyYWN0ZXJzJykub3B0aW9uYWwoKSxcbiAgYm9keVBhcnQ6IHouc3RyaW5nKCkubWF4KDUwLCAnQm9keSBwYXJ0IG11c3QgYmUgbGVzcyB0aGFuIDUwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBub3Rlczogei5zdHJpbmcoKS5tYXgoNTAwLCAnTm90ZXMgbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnMnKS5vcHRpb25hbCgpLFxuICBpbWFnZVVybDogei5zdHJpbmcoKS51cmwoJ011c3QgYmUgYSB2YWxpZCBVUkwnKS5vcHRpb25hbCgpLFxuICByZWNvcmRlZEF0OiB6LmRhdGUoKS5vcHRpb25hbCgpXG59KTtcblxuLyoqXG4gKiBBZGQgcGVyc29uYWwgcmVjb3JkIHNjaGVtYVxuICovXG5leHBvcnQgY29uc3QgYWRkUGVyc29uYWxSZWNvcmRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGV4ZXJjaXNlSWQ6IHouc3RyaW5nKCkuY3VpZCgnSW52YWxpZCBleGVyY2lzZSBJRCcpLFxuICByZWNvcmRUeXBlOiB6LnN0cmluZygpLm1pbigxLCAnUmVjb3JkIHR5cGUgaXMgcmVxdWlyZWQnKSxcbiAgdmFsdWU6IHoubnVtYmVyKHsgaW52YWxpZF90eXBlX2Vycm9yOiAnVmFsdWUgbXVzdCBiZSBhIG51bWJlcicgfSksXG4gIHVuaXQ6IHouc3RyaW5nKCkubWluKDEsICdVbml0IGlzIHJlcXVpcmVkJyksXG4gIHJlcHM6IHoubnVtYmVyKCkuaW50KCkucG9zaXRpdmUoJ1JlcHMgbXVzdCBiZSBwb3NpdGl2ZScpLm9wdGlvbmFsKCksXG4gIG5vdGVzOiB6LnN0cmluZygpLm1heCg1MDAsICdOb3RlcyBtdXN0IGJlIGxlc3MgdGhhbiA1MDAgY2hhcmFjdGVycycpLm9wdGlvbmFsKCksXG4gIGFjaGlldmVkQXQ6IHouZGF0ZSgpLm9wdGlvbmFsKClcbn0pO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFTkhBTkNFRCBFWEVSQ0lTRSBTQ0hFTUFTIChQaGFzZSAzKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEVuaGFuY2VkIGNyZWF0ZSBleGVyY2lzZSBzY2hlbWEgd2l0aCBQaGFzZSAzIGZlYXR1cmVzXG4gKi9cbmV4cG9ydCBjb25zdCBlbmhhbmNlZENyZWF0ZUV4ZXJjaXNlU2NoZW1hID0gY3JlYXRlRXhlcmNpc2VTY2hlbWEuZXh0ZW5kKHtcbiAgZm9ybUN1ZXM6IHouYXJyYXkoei5zdHJpbmcoKSkuZGVmYXVsdChbXSksXG4gIGNvbW1vbk1pc3Rha2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLmRlZmF1bHQoW10pLFxuICBpc0N1c3RvbTogei5ib29sZWFuKCkuZGVmYXVsdChmYWxzZSlcbn0pO1xuXG4vKipcbiAqIEVuaGFuY2VkIHVwZGF0ZSBleGVyY2lzZSBzY2hlbWFcbiAqL1xuZXhwb3J0IGNvbnN0IGVuaGFuY2VkVXBkYXRlRXhlcmNpc2VTY2hlbWEgPSBlbmhhbmNlZENyZWF0ZUV4ZXJjaXNlU2NoZW1hLnBhcnRpYWwoKS5leHRlbmQoe1xuICBpc0FjdGl2ZTogei5ib29sZWFuKCkub3B0aW9uYWwoKVxufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVYUE9SVCBORVcgVFlQRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHR5cGUgQ3JlYXRlV29ya291dFRlbXBsYXRlSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBjcmVhdGVXb3Jrb3V0VGVtcGxhdGVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgVXBkYXRlV29ya291dFRlbXBsYXRlSW5wdXQgPSB6LmluZmVyPHR5cGVvZiB1cGRhdGVXb3Jrb3V0VGVtcGxhdGVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgUmF0ZVRlbXBsYXRlSW5wdXQgPSB6LmluZmVyPHR5cGVvZiByYXRlVGVtcGxhdGVTY2hlbWE+O1xuXG5leHBvcnQgdHlwZSBDcmVhdGVUcmFpbmluZ1Byb2dyYW1JbnB1dCA9IHouaW5mZXI8dHlwZW9mIGNyZWF0ZVRyYWluaW5nUHJvZ3JhbVNjaGVtYT47XG5leHBvcnQgdHlwZSBVcGRhdGVUcmFpbmluZ1Byb2dyYW1JbnB1dCA9IHouaW5mZXI8dHlwZW9mIHVwZGF0ZVRyYWluaW5nUHJvZ3JhbVNjaGVtYT47XG5leHBvcnQgdHlwZSBSYXRlUHJvZ3JhbUlucHV0ID0gei5pbmZlcjx0eXBlb2YgcmF0ZVByb2dyYW1TY2hlbWE+O1xuZXhwb3J0IHR5cGUgVXBkYXRlUHJvZ3JhbVByb2dyZXNzSW5wdXQgPSB6LmluZmVyPHR5cGVvZiB1cGRhdGVQcm9ncmFtUHJvZ3Jlc3NTY2hlbWE+O1xuXG5leHBvcnQgdHlwZSBDcmVhdGVFeGVyY2lzZVZhcmlhdGlvbklucHV0ID0gei5pbmZlcjx0eXBlb2YgY3JlYXRlRXhlcmNpc2VWYXJpYXRpb25TY2hlbWE+O1xuZXhwb3J0IHR5cGUgVXBkYXRlRXhlcmNpc2VWYXJpYXRpb25JbnB1dCA9IHouaW5mZXI8dHlwZW9mIHVwZGF0ZUV4ZXJjaXNlVmFyaWF0aW9uU2NoZW1hPjtcblxuZXhwb3J0IHR5cGUgQWRkUHJvZ3Jlc3NNZXRyaWNJbnB1dCA9IHouaW5mZXI8dHlwZW9mIGFkZFByb2dyZXNzTWV0cmljU2NoZW1hPjtcbmV4cG9ydCB0eXBlIEFkZFBlcnNvbmFsUmVjb3JkSW5wdXQgPSB6LmluZmVyPHR5cGVvZiBhZGRQZXJzb25hbFJlY29yZFNjaGVtYT47XG5cbmV4cG9ydCB0eXBlIEVuaGFuY2VkQ3JlYXRlRXhlcmNpc2VJbnB1dCA9IHouaW5mZXI8dHlwZW9mIGVuaGFuY2VkQ3JlYXRlRXhlcmNpc2VTY2hlbWE+O1xuZXhwb3J0IHR5cGUgRW5oYW5jZWRVcGRhdGVFeGVyY2lzZUlucHV0ID0gei5pbmZlcjx0eXBlb2YgZW5oYW5jZWRVcGRhdGVFeGVyY2lzZVNjaGVtYT47XG4iXSwibmFtZXMiOlsieiIsIlNldFR5cGUiLCJXZWlnaHRVbml0IiwiSW50ZW5zaXR5VHlwZSIsImRhdGVTdHJpbmdTY2hlbWEiLCJzdHJpbmciLCJyZWdleCIsIm1lc3NhZ2UiLCJ0aW1lU3RyaW5nU2NoZW1hIiwiZHVyYXRpb25TdHJpbmdTY2hlbWEiLCJ3ZWlnaHRTdHJpbmdTY2hlbWEiLCJyZWZpbmUiLCJ2YWx1ZSIsIndlaWdodHMiLCJzcGxpdCIsIm1hcCIsInciLCJ0cmltIiwiZXZlcnkiLCJpc05hTiIsInBhcnNlRmxvYXQiLCJpbnRlbnNpdHlTdHJpbmdTY2hlbWEiLCJ0ZXN0IiwicGVyY2VudGFnZSIsInBhcnNlSW50IiwicnBlIiwicmVwbGFjZSIsInRlbXBvU3RyaW5nU2NoZW1hIiwic2V0VHlwZVNjaGVtYSIsIm5hdGl2ZUVudW0iLCJ3ZWlnaHRVbml0U2NoZW1hIiwiaW50ZW5zaXR5VHlwZVNjaGVtYSIsIndvcmtvdXRMb2dFbnRyeUJhc2VTY2hlbWEiLCJvYmplY3QiLCJzZXNzaW9uSWQiLCJ1dWlkIiwib3B0aW9uYWwiLCJkYXRlIiwiZXhlcmNpc2VJZCIsIm1pbiIsInNldE51bWJlciIsIm51bWJlciIsImludCIsInBvc2l0aXZlIiwic2V0VHlwZSIsInJlcHMiLCJ3ZWlnaHQiLCJ1bml0Iiwic3ViT3JkZXIiLCJpbnRlbnNpdHkiLCJpbnRlbnNpdHlUeXBlIiwidGVtcG8iLCJyZXN0U2Vjb25kcyIsInVzZXJDb21tZW50cyIsIm1heCIsImNvYWNoRmVlZGJhY2siLCJjcmVhdGVXb3Jrb3V0TG9nRW50cnlTY2hlbWEiLCJ1cGRhdGVXb3Jrb3V0TG9nRW50cnlTY2hlbWEiLCJwYXJ0aWFsIiwid29ya291dExvZ0VudHJ5U2NoZW1hIiwiZXh0ZW5kIiwiaWQiLCJjdWlkIiwidXNlcklkIiwiY29hY2hJZCIsIm9yZGVyIiwidHJhaW5pbmdWb2x1bWUiLCJub25uZWdhdGl2ZSIsImR1cmF0aW9uIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwiY3JlYXRlRXhlcmNpc2VTY2hlbWEiLCJuYW1lIiwiY2F0ZWdvcnkiLCJtdXNjbGVHcm91cHMiLCJhcnJheSIsImVxdWlwbWVudCIsImluc3RydWN0aW9ucyIsInZpZGVvVXJsIiwidXJsIiwiaW1hZ2VVcmwiLCJkaWZmaWN1bHR5IiwiZW51bSIsImRlZmF1bHQiLCJzYWZldHlOb3RlcyIsInVwZGF0ZUV4ZXJjaXNlU2NoZW1hIiwiaXNBY3RpdmUiLCJib29sZWFuIiwiZXhlcmNpc2VTY2hlbWEiLCJ1c2FnZUNvdW50IiwibGFzdFVzZWQiLCJjcmVhdGVXb3Jrb3V0U2Vzc2lvblNjaGVtYSIsInRpdGxlIiwibm90ZXMiLCJsb2NhdGlvbiIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJpc1RlbXBsYXRlIiwidXBkYXRlV29ya291dFNlc3Npb25TY2hlbWEiLCJ3b3Jrb3V0U2Vzc2lvblNjaGVtYSIsInRvdGFsVm9sdW1lIiwidG90YWxTZXRzIiwidG90YWxSZXBzIiwiaXNDb21wbGV0ZSIsImRhdGVSYW5nZVNjaGVtYSIsInN0YXJ0IiwiZW5kIiwiZGF0YSIsInBhdGgiLCJ3b3Jrb3V0RmlsdGVyT3B0aW9uc1NjaGVtYSIsImRhdGVSYW5nZSIsImV4ZXJjaXNlcyIsInNldFR5cGVzIiwid29ya291dFNvcnRPcHRpb25zU2NoZW1hIiwiZmllbGQiLCJkaXJlY3Rpb24iLCJwYWdpbmF0aW9uU2NoZW1hIiwicGFnZSIsImxpbWl0IiwiY3JlYXRlV29ya291dEVudHJpZXNSZXF1ZXN0U2NoZW1hIiwiZW50cmllcyIsInVwZGF0ZVdvcmtvdXRFbnRyeVJlcXVlc3RTY2hlbWEiLCJkZWxldGVXb3Jrb3V0RW50cnlSZXF1ZXN0U2NoZW1hIiwiYWRkQ29hY2hGZWVkYmFja1JlcXVlc3RTY2hlbWEiLCJlbnRyeUlkIiwiZmVlZGJhY2siLCJleGVyY2lzZVNlYXJjaE9wdGlvbnNTY2hlbWEiLCJzZWFyY2giLCJ3b3Jrb3V0U2Vzc2lvbkZpbHRlck9wdGlvbnNTY2hlbWEiLCJ3b3Jrb3V0U3RhdHNSZXF1ZXN0U2NoZW1hIiwid29ya291dFN0YXRzUmVzcG9uc2VTY2hlbWEiLCJ0b3RhbFdvcmtvdXRzIiwiYXZlcmFnZVdvcmtvdXREdXJhdGlvbiIsIm1vc3RVc2VkRXhlcmNpc2VzIiwiY291bnQiLCJ2b2x1bWVCeU11c2NsZUdyb3VwIiwibXVzY2xlR3JvdXAiLCJ2b2x1bWUiLCJ2YWxpZGF0ZVdlaWdodFN0cmluZyIsInJlc3VsdCIsInNhZmVQYXJzZSIsInN1Y2Nlc3MiLCJFcnJvciIsImVycm9yIiwiZXJyb3JzIiwiZmlsdGVyIiwidmFsaWRhdGVJbnRlbnNpdHlTdHJpbmciLCJpbmNsdWRlcyIsInR5cGUiLCJ2YWxpZGF0ZVRlbXBvU3RyaW5nIiwiZWNjZW50cmljIiwicGF1c2UxIiwiY29uY2VudHJpYyIsInBhdXNlMiIsIk51bWJlciIsInZhbGlkYXRlRGF0ZVN0cmluZyIsIkRhdGUiLCJ2YWxpZGF0ZVRpbWVTdHJpbmciLCJ0aW1lIiwid29ya291dFRlbXBsYXRlRXhlcmNpc2VTY2hlbWEiLCJzZXRzIiwicmVzdFRpbWUiLCJpc1N1cGVyc2V0Iiwic3VwZXJzZXRHcm91cCIsImNyZWF0ZVdvcmtvdXRUZW1wbGF0ZVNjaGVtYSIsImRlc2NyaXB0aW9uIiwiaXNQdWJsaWMiLCJwcmljZSIsImN1cnJlbmN5IiwibGVuZ3RoIiwidGFncyIsInVwZGF0ZVdvcmtvdXRUZW1wbGF0ZVNjaGVtYSIsIm9taXQiLCJyYXRlVGVtcGxhdGVTY2hlbWEiLCJyYXRpbmciLCJyZXZpZXciLCJwcm9ncmFtV2Vla1NjaGVtYSIsIndlZWtOdW1iZXIiLCJ3b3Jrb3V0cyIsImFueSIsImNyZWF0ZVRyYWluaW5nUHJvZ3JhbVNjaGVtYSIsIndlZWtzIiwidXBkYXRlVHJhaW5pbmdQcm9ncmFtU2NoZW1hIiwicmF0ZVByb2dyYW1TY2hlbWEiLCJ1cGRhdGVQcm9ncmFtUHJvZ3Jlc3NTY2hlbWEiLCJjdXJyZW50V2VlayIsImN1cnJlbnREYXkiLCJwcm9ncmVzc0RhdGEiLCJjcmVhdGVFeGVyY2lzZVZhcmlhdGlvblNjaGVtYSIsInVwZGF0ZUV4ZXJjaXNlVmFyaWF0aW9uU2NoZW1hIiwiYWRkUHJvZ3Jlc3NNZXRyaWNTY2hlbWEiLCJtZXRyaWNUeXBlIiwiaW52YWxpZF90eXBlX2Vycm9yIiwiYm9keVBhcnQiLCJyZWNvcmRlZEF0IiwiYWRkUGVyc29uYWxSZWNvcmRTY2hlbWEiLCJyZWNvcmRUeXBlIiwiYWNoaWV2ZWRBdCIsImVuaGFuY2VkQ3JlYXRlRXhlcmNpc2VTY2hlbWEiLCJmb3JtQ3VlcyIsImNvbW1vbk1pc3Rha2VzIiwiaXNDdXN0b20iLCJlbmhhbmNlZFVwZGF0ZUV4ZXJjaXNlU2NoZW1hIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/core/utils/workout-validation.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai/context_builder.ts":
/*!********************************************!*\
  !*** ./src/services/ai/context_builder.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildUserContext: () => (/* binding */ buildUserContext)\n/* harmony export */ });\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n\nasync function buildUserContext(userId, opts) {\n    const focusIds = opts?.focusAssessmentIds?.filter(Boolean);\n    const [user, assessments, recentWorkouts] = await Promise.all([\n        _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n            where: {\n                id: userId\n            },\n            select: {\n                name: true,\n                role: true,\n                // Preference fields present in current schema\n                fitnessGoals: true,\n                experienceLevel: true,\n                preferredWorkoutTypes: true,\n                availableWorkoutDays: true,\n                preferredWorkoutDuration: true\n            }\n        }),\n        focusIds?.length ? _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.assessments.findMany({\n            where: {\n                id: {\n                    in: focusIds\n                },\n                clientId: userId,\n                status: 'complete'\n            },\n            orderBy: {\n                updatedAt: 'desc'\n            },\n            take: 3\n        }) : _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.assessments.findMany({\n            where: {\n                clientId: userId,\n                status: 'complete'\n            },\n            orderBy: {\n                updatedAt: 'desc'\n            },\n            take: 3\n        }),\n        _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.workout_log_entries.findMany({\n            where: {\n                userId\n            },\n            include: {\n                exercises: true\n            },\n            orderBy: {\n                date: 'desc'\n            },\n            take: 10\n        })\n    ]);\n    const userProfile = formatUserProfile(user);\n    const assessmentSummary = summarizeAssessments(assessments);\n    const workoutHistory = summarizeWorkouts(recentWorkouts);\n    return {\n        userProfile,\n        assessmentSummary,\n        workoutHistory\n    };\n}\nfunction formatUserProfile(user) {\n    if (!user) return 'User profile not available.';\n    const parts = [];\n    parts.push(`Name: ${user.name || 'N/A'}`);\n    parts.push(`Role: ${user.role || 'CLIENT'}`);\n    if (user.fitnessGoals?.length) parts.push(`Goals: ${user.fitnessGoals.join(', ')}`);\n    if (user.experienceLevel) parts.push(`Experience: ${user.experienceLevel}`);\n    if (user.preferredWorkoutTypes?.length) parts.push(`Prefers: ${user.preferredWorkoutTypes.join(', ')}`);\n    if (user.availableWorkoutDays?.length) parts.push(`Days: ${user.availableWorkoutDays.join(', ')}`);\n    if (user.preferredWorkoutDuration) parts.push(`Duration: ${user.preferredWorkoutDuration}`);\n    if (user.age) parts.push(`Age: ${user.age}`);\n    if (user.height) parts.push(`Height: ${user.height}`);\n    if (user.weight) parts.push(`Weight: ${user.weight}`);\n    if (user.injuries?.length) parts.push(`Injuries: ${user.injuries.join(', ')}`);\n    return parts.join('\\n');\n}\nfunction summarizeAssessments(assessments) {\n    if (!assessments?.length) return 'No recent assessments.';\n    const lines = [\n        'Recent Assessments:'\n    ];\n    for (const a of assessments){\n        const when = new Date(a.updatedAt || a.createdAt).toISOString().split('T')[0];\n        lines.push(`- ${a.type} (${when})`);\n        if (a.data?.overactive_muscles) lines.push(`  Overactive: ${a.data.overactive_muscles}`);\n        if (a.data?.underactive_muscles) lines.push(`  Underactive: ${a.data.underactive_muscles}`);\n        if (a.data?.bmi) lines.push(`  BMI: ${a.data.bmi}`);\n        if (a.data?.vo2_max) lines.push(`  VO2 Max: ${a.data.vo2_max}`);\n    }\n    return lines.join('\\n');\n}\nfunction summarizeWorkouts(entries) {\n    if (!entries?.length) return 'No recent workouts.';\n    const lines = [\n        'Recent Workouts (last 10 entries):'\n    ];\n    for (const e of entries){\n        const when = new Date(e.date).toISOString().split('T')[0];\n        lines.push(`- ${when} • ${e.exercises?.name || 'Exercise'} • sets#${e.setNumber} • reps ${e.reps}`);\n    }\n    return lines.join('\\n');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWkvY29udGV4dF9idWlsZGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXdDO0FBUWpDLGVBQWVDLGlCQUFpQkMsTUFBYyxFQUFFQyxJQUF3QztJQUM3RixNQUFNQyxXQUFXRCxNQUFNRSxvQkFBb0JDLE9BQU9DO0lBQ2xELE1BQU0sQ0FBQ0MsTUFBTUMsYUFBYUMsZUFBZSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUM1RFosa0RBQU1BLENBQUNhLEtBQUssQ0FBQ0MsVUFBVSxDQUFDO1lBQ3RCQyxPQUFPO2dCQUFFQyxJQUFJZDtZQUFPO1lBQ3BCZSxRQUFRO2dCQUNOQyxNQUFNO2dCQUNOQyxNQUFNO2dCQUNOLDhDQUE4QztnQkFDOUNDLGNBQWM7Z0JBQ2RDLGlCQUFpQjtnQkFDakJDLHVCQUF1QjtnQkFDdkJDLHNCQUFzQjtnQkFDdEJDLDBCQUEwQjtZQUM1QjtRQUNGO1FBQ0FwQixVQUFVcUIsU0FDTnpCLGtEQUFNQSxDQUFDUyxXQUFXLENBQUNpQixRQUFRLENBQUM7WUFDMUJYLE9BQU87Z0JBQUVDLElBQUk7b0JBQUVXLElBQUl2QjtnQkFBUztnQkFBR3dCLFVBQVUxQjtnQkFBUTJCLFFBQVE7WUFBVztZQUNwRUMsU0FBUztnQkFBRUMsV0FBVztZQUFPO1lBQzdCQyxNQUFNO1FBQ1IsS0FDQWhDLGtEQUFNQSxDQUFDUyxXQUFXLENBQUNpQixRQUFRLENBQUM7WUFDMUJYLE9BQU87Z0JBQUVhLFVBQVUxQjtnQkFBUTJCLFFBQVE7WUFBVztZQUM5Q0MsU0FBUztnQkFBRUMsV0FBVztZQUFPO1lBQzdCQyxNQUFNO1FBQ1I7UUFDSmhDLGtEQUFNQSxDQUFDaUMsbUJBQW1CLENBQUNQLFFBQVEsQ0FBQztZQUNsQ1gsT0FBTztnQkFBRWI7WUFBTztZQUNoQmdDLFNBQVM7Z0JBQUVDLFdBQVc7WUFBSztZQUMzQkwsU0FBUztnQkFBRU0sTUFBTTtZQUFPO1lBQ3hCSixNQUFNO1FBQ1I7S0FDRDtJQUVELE1BQU1LLGNB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QVNaLE1BQU1OLElBQUksQ0FBQyxDQUFDLFdBQVcsRUFBRU8sRUFBRU8sSUFBSSxDQUFDSSxPQUFPLEVBQUU7SUFDaEU7SUFDQSxPQUFPWixNQUFNTCxJQUFJLENBQUM7QUFDcEI7QUFFQSxTQUFTSCxrQkFBa0JxQixPQUFjO0lBQ3ZDLElBQUksQ0FBQ0EsU0FBU3RDLFFBQVEsT0FBTztJQUM3QixNQUFNeUIsUUFBa0I7UUFBQztLQUFxQztJQUM5RCxLQUFLLE1BQU1jLEtBQUtELFFBQVM7UUFDdkIsTUFBTVgsT0FBTyxJQUFJQyxLQUFLVyxFQUFFNUIsSUFBSSxFQUFFbUIsV0FBVyxHQUFHQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDekROLE1BQU1OLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRVEsS0FBSyxHQUFHLEVBQUVZLEVBQUU3QixTQUFTLEVBQUVqQixRQUFRLFdBQVcsUUFBUSxFQUFFOEMsRUFBRUMsU0FBUyxDQUFDLFFBQVEsRUFBRUQsRUFBRUUsSUFBSSxFQUFFO0lBQ3BHO0lBQ0EsT0FBT2hCLE1BQU1MLElBQUksQ0FBQztBQUNwQiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9zZXJ2aWNlcy9haS9jb250ZXh0X2J1aWxkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJpc21hIH0gZnJvbSAnQC9jb3JlL2RhdGFiYXNlJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJDb250ZXh0IHtcbiAgdXNlclByb2ZpbGU6IHN0cmluZ1xuICBhc3Nlc3NtZW50U3VtbWFyeTogc3RyaW5nXG4gIHdvcmtvdXRIaXN0b3J5OiBzdHJpbmdcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkVXNlckNvbnRleHQodXNlcklkOiBzdHJpbmcsIG9wdHM/OiB7IGZvY3VzQXNzZXNzbWVudElkcz86IHN0cmluZ1tdIH0pOiBQcm9taXNlPFVzZXJDb250ZXh0PiB7XG4gIGNvbnN0IGZvY3VzSWRzID0gb3B0cz8uZm9jdXNBc3Nlc3NtZW50SWRzPy5maWx0ZXIoQm9vbGVhbilcbiAgY29uc3QgW3VzZXIsIGFzc2Vzc21lbnRzLCByZWNlbnRXb3Jrb3V0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLnVzZXJzLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgIHJvbGU6IHRydWUsXG4gICAgICAgIC8vIFByZWZlcmVuY2UgZmllbGRzIHByZXNlbnQgaW4gY3VycmVudCBzY2hlbWFcbiAgICAgICAgZml0bmVzc0dvYWxzOiB0cnVlLFxuICAgICAgICBleHBlcmllbmNlTGV2ZWw6IHRydWUsXG4gICAgICAgIHByZWZlcnJlZFdvcmtvdXRUeXBlczogdHJ1ZSxcbiAgICAgICAgYXZhaWxhYmxlV29ya291dERheXM6IHRydWUsXG4gICAgICAgIHByZWZlcnJlZFdvcmtvdXREdXJhdGlvbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSksXG4gICAgZm9jdXNJZHM/Lmxlbmd0aFxuICAgICAgPyBwcmlzbWEuYXNzZXNzbWVudHMuZmluZE1hbnkoe1xuICAgICAgICAgIHdoZXJlOiB7IGlkOiB7IGluOiBmb2N1c0lkcyB9LCBjbGllbnRJZDogdXNlcklkLCBzdGF0dXM6ICdjb21wbGV0ZScgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgdGFrZTogMyxcbiAgICAgICAgfSlcbiAgICAgIDogcHJpc21hLmFzc2Vzc21lbnRzLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyBjbGllbnRJZDogdXNlcklkLCBzdGF0dXM6ICdjb21wbGV0ZScgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHVwZGF0ZWRBdDogJ2Rlc2MnIH0sXG4gICAgICAgICAgdGFrZTogMyxcbiAgICAgICAgfSksXG4gICAgcHJpc21hLndvcmtvdXRfbG9nX2VudHJpZXMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHsgdXNlcklkIH0sXG4gICAgICBpbmNsdWRlOiB7IGV4ZXJjaXNlczogdHJ1ZSB9LFxuICAgICAgb3JkZXJCeTogeyBkYXRlOiAnZGVzYycgfSxcbiAgICAgIHRha2U6IDEwLFxuICAgIH0pLFxuICBdKVxuXG4gIGNvbnN0IHVzZXJQcm9maWxlID0gZm9ybWF0VXNlclByb2ZpbGUodXNlciBhcyBhbnkpXG4gIGNvbnN0IGFzc2Vzc21lbnRTdW1tYXJ5ID0gc3VtbWFyaXplQXNzZXNzbWVudHMoYXNzZXNzbWVudHMgYXMgYW55W10pXG4gIGNvbnN0IHdvcmtvdXRIaXN0b3J5ID0gc3VtbWFyaXplV29ya291dHMocmVjZW50V29ya291dHMgYXMgYW55W10pXG5cbiAgcmV0dXJuIHsgdXNlclByb2ZpbGUsIGFzc2Vzc21lbnRTdW1tYXJ5LCB3b3Jrb3V0SGlzdG9yeSB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFVzZXJQcm9maWxlKHVzZXI6IGFueSk6IHN0cmluZyB7XG4gIGlmICghdXNlcikgcmV0dXJuICdVc2VyIHByb2ZpbGUgbm90IGF2YWlsYWJsZS4nXG4gIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdXG4gIHBhcnRzLnB1c2goYE5hbWU6ICR7dXNlci5uYW1lIHx8ICdOL0EnfWApXG4gIHBhcnRzLnB1c2goYFJvbGU6ICR7dXNlci5yb2xlIHx8ICdDTElFTlQnfWApXG4gIGlmICh1c2VyLmZpdG5lc3NHb2Fscz8ubGVuZ3RoKSBwYXJ0cy5wdXNoKGBHb2FsczogJHt1c2VyLmZpdG5lc3NHb2Fscy5qb2luKCcsICcpfWApXG4gIGlmICh1c2VyLmV4cGVyaWVuY2VMZXZlbCkgcGFydHMucHVzaChgRXhwZXJpZW5jZTogJHt1c2VyLmV4cGVyaWVuY2VMZXZlbH1gKVxuICBpZiAodXNlci5wcmVmZXJyZWRXb3Jrb3V0VHlwZXM/Lmxlbmd0aCkgcGFydHMucHVzaChgUHJlZmVyczogJHt1c2VyLnByZWZlcnJlZFdvcmtvdXRUeXBlcy5qb2luKCcsICcpfWApXG4gIGlmICh1c2VyLmF2YWlsYWJsZVdvcmtvdXREYXlzPy5sZW5ndGgpIHBhcnRzLnB1c2goYERheXM6ICR7dXNlci5hdmFpbGFibGVXb3Jrb3V0RGF5cy5qb2luKCcsICcpfWApXG4gIGlmICh1c2VyLnByZWZlcnJlZFdvcmtvdXREdXJhdGlvbikgcGFydHMucHVzaChgRHVyYXRpb246ICR7dXNlci5wcmVmZXJyZWRXb3Jrb3V0RHVyYXRpb259YClcbiAgaWYgKHVzZXIuYWdlKSBwYXJ0cy5wdXNoKGBBZ2U6ICR7dXNlci5hZ2V9YClcbiAgaWYgKHVzZXIuaGVpZ2h0KSBwYXJ0cy5wdXNoKGBIZWlnaHQ6ICR7dXNlci5oZWlnaHR9YClcbiAgaWYgKHVzZXIud2VpZ2h0KSBwYXJ0cy5wdXNoKGBXZWlnaHQ6ICR7dXNlci53ZWlnaHR9YClcbiAgaWYgKHVzZXIuaW5qdXJpZXM/Lmxlbmd0aCkgcGFydHMucHVzaChgSW5qdXJpZXM6ICR7dXNlci5pbmp1cmllcy5qb2luKCcsICcpfWApXG4gIHJldHVybiBwYXJ0cy5qb2luKCdcXG4nKVxufVxuXG5mdW5jdGlvbiBzdW1tYXJpemVBc3Nlc3NtZW50cyhhc3Nlc3NtZW50czogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIWFzc2Vzc21lbnRzPy5sZW5ndGgpIHJldHVybiAnTm8gcmVjZW50IGFzc2Vzc21lbnRzLidcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gWydSZWNlbnQgQXNzZXNzbWVudHM6J11cbiAgZm9yIChjb25zdCBhIG9mIGFzc2Vzc21lbnRzKSB7XG4gICAgY29uc3Qgd2hlbiA9IG5ldyBEYXRlKGEudXBkYXRlZEF0IHx8IGEuY3JlYXRlZEF0KS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICBsaW5lcy5wdXNoKGAtICR7YS50eXBlfSAoJHt3aGVufSlgKVxuICAgIGlmIChhLmRhdGE/Lm92ZXJhY3RpdmVfbXVzY2xlcykgbGluZXMucHVzaChgICBPdmVyYWN0aXZlOiAke2EuZGF0YS5vdmVyYWN0aXZlX211c2NsZXN9YClcbiAgICBpZiAoYS5kYXRhPy51bmRlcmFjdGl2ZV9tdXNjbGVzKSBsaW5lcy5wdXNoKGAgIFVuZGVyYWN0aXZlOiAke2EuZGF0YS51bmRlcmFjdGl2ZV9tdXNjbGVzfWApXG4gICAgaWYgKGEuZGF0YT8uYm1pKSBsaW5lcy5wdXNoKGAgIEJNSTogJHthLmRhdGEuYm1pfWApXG4gICAgaWYgKGEuZGF0YT8udm8yX21heCkgbGluZXMucHVzaChgICBWTzIgTWF4OiAke2EuZGF0YS52bzJfbWF4fWApXG4gIH1cbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpXG59XG5cbmZ1bmN0aW9uIHN1bW1hcml6ZVdvcmtvdXRzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgaWYgKCFlbnRyaWVzPy5sZW5ndGgpIHJldHVybiAnTm8gcmVjZW50IHdvcmtvdXRzLidcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gWydSZWNlbnQgV29ya291dHMgKGxhc3QgMTAgZW50cmllcyk6J11cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBjb25zdCB3aGVuID0gbmV3IERhdGUoZS5kYXRlKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICBsaW5lcy5wdXNoKGAtICR7d2hlbn0g4oCiICR7ZS5leGVyY2lzZXM/Lm5hbWUgfHwgJ0V4ZXJjaXNlJ30g4oCiIHNldHMjJHtlLnNldE51bWJlcn0g4oCiIHJlcHMgJHtlLnJlcHN9YClcbiAgfVxuICByZXR1cm4gbGluZXMuam9pbignXFxuJylcbn1cbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJidWlsZFVzZXJDb250ZXh0IiwidXNlcklkIiwib3B0cyIsImZvY3VzSWRzIiwiZm9jdXNBc3Nlc3NtZW50SWRzIiwiZmlsdGVyIiwiQm9vbGVhbiIsInVzZXIiLCJhc3Nlc3NtZW50cyIsInJlY2VudFdvcmtvdXRzIiwiUHJvbWlzZSIsImFsbCIsInVzZXJzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJuYW1lIiwicm9sZSIsImZpdG5lc3NHb2FscyIsImV4cGVyaWVuY2VMZXZlbCIsInByZWZlcnJlZFdvcmtvdXRUeXBlcyIsImF2YWlsYWJsZVdvcmtvdXREYXlzIiwicHJlZmVycmVkV29ya291dER1cmF0aW9uIiwibGVuZ3RoIiwiZmluZE1hbnkiLCJpbiIsImNsaWVudElkIiwic3RhdHVzIiwib3JkZXJCeSIsInVwZGF0ZWRBdCIsInRha2UiLCJ3b3Jrb3V0X2xvZ19lbnRyaWVzIiwiaW5jbHVkZSIsImV4ZXJjaXNlcyIsImRhdGUiLCJ1c2VyUHJvZmlsZSIsImZvcm1hdFVzZXJQcm9maWxlIiwiYXNzZXNzbWVudFN1bW1hcnkiLCJzdW1tYXJpemVBc3Nlc3NtZW50cyIsIndvcmtvdXRIaXN0b3J5Iiwic3VtbWFyaXplV29ya291dHMiLCJwYXJ0cyIsInB1c2giLCJqb2luIiwiYWdlIiwiaGVpZ2h0Iiwid2VpZ2h0IiwiaW5qdXJpZXMiLCJsaW5lcyIsImEiLCJ3aGVuIiwiRGF0ZSIsImNyZWF0ZWRBdCIsInRvSVNPU3RyaW5nIiwic3BsaXQiLCJ0eXBlIiwiZGF0YSIsIm92ZXJhY3RpdmVfbXVzY2xlcyIsInVuZGVyYWN0aXZlX211c2NsZXMiLCJibWkiLCJ2bzJfbWF4IiwiZW50cmllcyIsImUiLCJzZXROdW1iZXIiLCJyZXBzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai/context_builder.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai/massichat_service.ts":
/*!**********************************************!*\
  !*** ./src/services/ai/massichat_service.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   acceptWorkoutProposal: () => (/* binding */ acceptWorkoutProposal),\n/* harmony export */   sendMassichatMessage: () => (/* binding */ sendMassichatMessage)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _context_builder__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context_builder */ \"(rsc)/./src/services/ai/context_builder.ts\");\n/* harmony import */ var _vector_search__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./vector_search */ \"(rsc)/./src/services/ai/vector_search.ts\");\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY,\n    organization: process.env.OPENAI_ORG_ID,\n    // Optional: allow pinning a specific OpenAI project if provided\n    project: process.env.OPENAI_PROJECT\n});\nfunction provider() {\n    const p = (process.env.AI_PROVIDER || 'openai').toLowerCase();\n    return p === 'anthropic' ? 'anthropic' : 'openai';\n}\nasync function sendMassichatMessage(req) {\n    const prov = provider();\n    if (prov === 'openai') {\n        if (!process.env.OPENAI_API_KEY) {\n            throw new Error('OPENAI_API_KEY not configured. Set it in your environment to use Massichat.');\n        }\n    } else {\n        if (!process.env.ANTHROPIC_API_KEY) {\n            throw new Error('ANTHROPIC_API_KEY not configured. Set it in your environment or set AI_PROVIDER=openai.');\n        }\n    }\n    const db = _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma;\n    if (!db?.ai_chat_sessions?.create || !db?.ai_chat_messages?.create) {\n        throw new Error('Massichat tables not available. Run: npm run db:generate && npm run db:migrate');\n    }\n    // 1) ensure session\n    let sessionId = req.sessionId;\n    let session;\n    if (sessionId) {\n        session = await db.ai_chat_sessions.findUnique({\n            where: {\n                id: sessionId\n            }\n        });\n    }\n    if (!session) {\n        session = await db.ai_chat_sessions.create({\n            data: {\n                userId: req.userId,\n                title: null,\n                status: 'active'\n            }\n        });\n        sessionId = session.id;\n    }\n    // 2) build context\n    const focus = req.assessmentId ? [\n        req.assessmentId\n    ] : req.assessmentIds;\n    const context = await (0,_context_builder__WEBPACK_IMPORTED_MODULE_1__.buildUserContext)(req.userId, ...focus ? [\n        {\n            focusAssessmentIds: focus\n        }\n    ] : []);\n    // 3) persist user message\n    await db.ai_chat_messages.create({\n        data: {\n            sessionId,\n            role: 'user',\n            content: req.message,\n            metadata: null,\n            aiProvider: null\n        }\n    });\n    // 4) build prompt\n    const system = `You are Massichat, a specialized AI fitness coach for the Massimino app.\nAlways prioritize safety and progressive overload principles. Use concise, helpful answers.\n\nClarifications policy:\n- Ask at most ONE very short clarifying question ONLY if absolutely necessary for safety.\n- Even if you ask a question, you MUST still provide an initial recommendation or workout using safe, reasonable assumptions. Never reply with a question alone.\n- If assumptions are used, state them briefly in one line (\"Assuming: ...\").\n\nWhen proposing a workout:\n1) First write a brief 1-2 sentence rationale (and assumptions if any).\n2) Then on a new line write exactly: WORKOUT_PROPOSAL_JSON\n3) Immediately after, include a fenced JSON block with fields:\n   { title, description, items:[{ exerciseName, sets, reps, restSeconds, notes? }] }\n4) After the JSON block, include one single line:\n   FOLLOW_UP_SUGGESTIONS: [\"<short suggestion 1>\", \"<short suggestion 2>\", \"<short suggestion 3>\"]\n   Keep each suggestion under 10 words.\n5) No other prose after the suggestions line.`;\n    const userContext = `User Profile:\\n${context.userProfile}\\n\\nAssessments:\\n${context.assessmentSummary}\\n\\nHistory:\\n${context.workoutHistory}`;\n    // 3.b) Knowledge snippets (top-3)\n    let kbContext = '';\n    try {\n        const hits = await (0,_vector_search__WEBPACK_IMPORTED_MODULE_2__.searchKnowledgeBase)(req.message, 3);\n        if (hits.length) {\n            kbContext = '\\n\\nKnowledge Base Snippets (for reference):\\n' + hits.map((h)=>`- (${h.similarity.toFixed(2)}) ${h.content.slice(0, 300)}...`).join('\\n');\n        }\n    } catch  {}\n    // 5) call OpenAI\n    let aiText = 'I could not generate a response.';\n    let modelUsed = '';\n    if (prov === 'openai') {\n        const completion = await openai.chat.completions.create({\n            model: 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: system\n                },\n                {\n                    role: 'system',\n                    content: userContext + kbContext\n                },\n                {\n                    role: 'user',\n                    content: req.message\n                }\n            ],\n            temperature: 0.4,\n            max_tokens: 800\n        });\n        aiText = completion.choices[0]?.message?.content || aiText;\n        modelUsed = 'gpt-4o-mini';\n    } else {\n        // Anthropic (Claude) via HTTP to avoid SDK dependency\n        const resp = await fetch('https://api.anthropic.com/v1/messages', {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n                'x-api-key': process.env.ANTHROPIC_API_KEY,\n                'anthropic-version': '2023-06-01'\n            },\n            body: JSON.stringify({\n                model: process.env.ANTHROPIC_MODEL || 'claude-3-5-sonnet-20241022',\n                max_tokens: 800,\n                temperature: 0.4,\n                system,\n                messages: [\n                    {\n                        role: 'user',\n                        content: [\n                            {\n                                type: 'text',\n                                text: `${userContext}${kbContext}\\n\\n${req.message}`\n                            }\n                        ]\n                    }\n                ]\n            })\n        });\n        if (!resp.ok) {\n            const err = await resp.text().catch(()=>'');\n            throw new Error(`Anthropic error: ${resp.status} ${err}`);\n        }\n        const data = await resp.json();\n        const parts = Array.isArray(data?.content) ? data.content : [];\n        aiText = parts.map((p)=>p?.text).filter(Boolean).join('\\n').trim() || aiText;\n        modelUsed = data?.model || 'claude';\n    }\n    const suggestions = extractFollowUps(aiText);\n    // 6) detect workout proposal JSON\n    const parsed = tryParseWorkoutProposal(aiText);\n    let workoutProposal;\n    if (parsed) {\n        if (!db?.ai_workout_proposals?.create) {\n            // If proposals table is missing, still return the text without requiring acceptance\n            workoutProposal = undefined;\n        } else {\n            const proposal = await db.ai_workout_proposals.create({\n                data: {\n                    sessionId,\n                    userId: req.userId,\n                    status: 'pending',\n                    workoutData: parsed,\n                    aiReasoning: extractReasoning(aiText)\n                }\n            });\n            workoutProposal = {\n                id: proposal.id,\n                summary: parsed.title || 'Proposed workout',\n                workoutData: parsed\n            };\n        }\n    }\n    // Fallback: if the assistant did not include a JSON proposal, make a second, strict JSON-only attempt\n    if (!workoutProposal) {\n        try {\n            const jsonOnly = await requestWorkoutJson({\n                provider: prov,\n                modelUsed,\n                system,\n                userContext: userContext + kbContext,\n                userMessage: req.message\n            });\n            if (jsonOnly) {\n                const proposal = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.ai_workout_proposals.create({\n                    data: {\n                        sessionId,\n                        userId: req.userId,\n                        status: 'pending',\n                        workoutData: jsonOnly,\n                        aiReasoning: extractReasoning(aiText)\n                    }\n                });\n                workoutProposal = {\n                    id: proposal.id,\n                    summary: jsonOnly.title || 'Proposed workout',\n                    workoutData: jsonOnly\n                };\n            }\n        } catch  {}\n    }\n    // 7) persist assistant message\n    await db.ai_chat_messages.create({\n        data: {\n            sessionId,\n            role: 'assistant',\n            content: aiText,\n            metadata: {\n                model: modelUsed\n            },\n            aiProvider: prov\n        }\n    });\n    // 8) update session title on first turn\n    if (!session.title) {\n        await db.ai_chat_sessions.update({\n            where: {\n                id: sessionId\n            },\n            data: {\n                title: req.message.slice(0, 60)\n            }\n        });\n    }\n    return {\n        sessionId: sessionId,\n        message: aiText,\n        ...workoutProposal ? {\n            workoutProposal\n        } : {},\n        requiresAcceptance: Boolean(workoutProposal),\n        ...suggestions.length ? {\n            suggestions\n        } : {}\n    };\n}\nasync function acceptWorkoutProposal(proposalId, overrides) {\n    const db = _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma;\n    if (!db?.ai_workout_proposals?.findUnique || !db?.workout_log_entries?.create) {\n        throw new Error('Workout proposal tables not available. Run: npm run db:migrate');\n    }\n    const proposal = await db.ai_workout_proposals.findUnique({\n        where: {\n            id: proposalId\n        }\n    });\n    if (!proposal || proposal.status !== 'pending') throw new Error('Invalid proposal');\n    const data = overrides ?? proposal.workoutData;\n    // Minimal implementation: create entries for today\n    const today = new Date();\n    const entries = [];\n    for (const item of data.items || []){\n        entries.push({\n            id: cryptoRandom(),\n            userId: proposal.userId,\n            exerciseId: await resolveExerciseId(item.exerciseName),\n            date: today,\n            order: '0',\n            setNumber: item.sets || 1,\n            setType: 'STRAIGHT',\n            reps: parseInt(String(item.reps || '8'), 10) || 8,\n            weight: '0',\n            unit: 'KG',\n            restSeconds: item.restSeconds ?? null,\n            userComments: item.notes ?? null,\n            createdAt: today,\n            updatedAt: today\n        });\n    }\n    // Create all entries in a transaction\n    await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction(async (tx)=>{\n        for (const e of entries){\n            await tx.workout_log_entries.create({\n                data: e\n            });\n        }\n        await tx.ai_workout_proposals.update({\n            where: {\n                id: proposalId\n            },\n            data: {\n                status: 'accepted',\n                acceptedAt: new Date()\n            }\n        });\n    });\n    return 'ok';\n}\nfunction tryParseWorkoutProposal(text) {\n    // Preferred: Look for a JSON block after explicit marker\n    const marker = 'WORKOUT_PROPOSAL_JSON';\n    const idx = text.indexOf(marker);\n    if (idx !== -1) {\n        const after = text.slice(idx + marker.length);\n        const match = after.match(/```json[\\s\\S]*?```|\\{[\\s\\S]*\\}/);\n        if (match) {\n            const raw = match[0].replace(/```json|```/g, '').trim();\n            try {\n                return JSON.parse(raw);\n            } catch  {}\n        }\n    }\n    // Fallback: any fenced JSON block in the message\n    const fence = text.match(/```json\\s*([\\s\\S]*?)\\s*```/i);\n    if (fence?.[1]) {\n        try {\n            const obj = JSON.parse(fence[1]);\n            if (isWorkoutShape(obj)) return obj;\n        } catch  {}\n    }\n    // Last resort: first JSON-looking object in text\n    const brace = text.match(/\\{[\\s\\S]*\\}/);\n    if (brace) {\n        try {\n            const obj = JSON.parse(brace[0]);\n            if (isWorkoutShape(obj)) return obj;\n        } catch  {}\n    }\n    return null;\n}\nfunction isWorkoutShape(obj) {\n    return Boolean(obj && typeof obj === 'object' && Array.isArray(obj.items) && (obj.title || obj.description));\n}\nasync function requestWorkoutJson(args) {\n    const instruction = `Return ONLY a fenced JSON block (no prose) immediately after this line: WORKOUT_PROPOSAL_JSON\\n\\n\\nThe JSON MUST have: {\\n  \"title\": string,\\n  \"description\": string,\\n  \"items\": [{ \"exerciseName\": string, \"sets\": number, \"reps\": number, \"restSeconds\": number, \"notes\"?: string }]\\n}\\nNo additional text before or after the JSON.`;\n    if (args.provider === 'openai') {\n        const resp = await openai.chat.completions.create({\n            model: args.modelUsed || 'gpt-4o-mini',\n            messages: [\n                {\n                    role: 'system',\n                    content: args.system\n                },\n                {\n                    role: 'system',\n                    content: args.userContext\n                },\n                {\n                    role: 'user',\n                    content: `${args.userMessage}\\n\\n${instruction}`\n                }\n            ],\n            temperature: 0.2,\n            max_tokens: 700\n        });\n        const txt = resp.choices[0]?.message?.content || '';\n        const parsed = tryParseWorkoutProposal(txt);\n        return parsed || null;\n    } else {\n        const resp = await fetch('https://api.anthropic.com/v1/messages', {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n                'x-api-key': process.env.ANTHROPIC_API_KEY,\n                'anthropic-version': '2023-06-01'\n            },\n            body: JSON.stringify({\n                model: process.env.ANTHROPIC_MODEL || 'claude-3-5-sonnet-20241022',\n                max_tokens: 700,\n                temperature: 0.2,\n                system: args.system,\n                messages: [\n                    {\n                        role: 'user',\n                        content: [\n                            {\n                                type: 'text',\n                                text: `${args.userContext}\\n\\n${args.userMessage}\\n\\n${instruction}`\n                            }\n                        ]\n                    }\n                ]\n            })\n        });\n        if (!resp.ok) return null;\n        const data = await resp.json();\n        const txt = (Array.isArray(data?.content) ? data.content : []).map((p)=>p?.text).filter(Boolean).join('\\n');\n        const parsed = tryParseWorkoutProposal(txt || '');\n        return parsed || null;\n    }\n}\nfunction extractReasoning(text) {\n    // naive: everything before marker\n    const marker = 'WORKOUT_PROPOSAL_JSON';\n    const idx = text.indexOf(marker);\n    if (idx === -1) return undefined;\n    return text.slice(0, idx).trim();\n}\nfunction extractFollowUps(text) {\n    // Look for a FOLLOW_UP_SUGGESTIONS: [ ... ] line\n    const m = text.match(/FOLLOW_UP_SUGGESTIONS\\s*:\\s*\\[(.*)\\]/i);\n    if (m && m[1]) {\n        try {\n            const arr = JSON.parse('[' + m[1] + ']');\n            return Array.isArray(arr) ? arr.map((s)=>String(s)).filter(Boolean).slice(0, 5) : [];\n        } catch  {}\n    }\n    // Fallback: parse bullets at the end\n    const lines = text.split(/\\n+/).slice(-5);\n    const hints = lines.map((l)=>l.replace(/^[-•\\*]\\s*/, '').trim()).filter((l)=>l && l.length <= 60);\n    return hints.slice(0, 3);\n}\nasync function resolveExerciseId(name) {\n    if (!name) throw new Error('Exercise name missing');\n    const ex = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.exercises.findFirst({\n        where: {\n            name: {\n                equals: name,\n                mode: 'insensitive'\n            }\n        },\n        select: {\n            id: true\n        }\n    });\n    if (ex) return ex.id;\n    // fallback: pick any existing exercise to avoid failing\n    const any = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.exercises.findFirst({\n        select: {\n            id: true\n        }\n    });\n    if (any) return any.id;\n    throw new Error('No exercises available');\n}\nfunction cryptoRandom() {\n    // Simple UUID v4 replacement without bringing extra deps\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        const r = Math.random() * 16 | 0, v = c === 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWkvbWFzc2ljaGF0X3NlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTJCO0FBQ2E7QUFDWTtBQUNDO0FBRXJELE1BQU1JLFNBQVMsSUFBSUosOENBQU1BLENBQUM7SUFDeEJLLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztJQUNsQ0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxhQUFhO0lBQ3ZDLGdFQUFnRTtJQUNoRUMsU0FBU0wsUUFBUUMsR0FBRyxDQUFDSyxjQUFjO0FBQ3JDO0FBRUEsU0FBU0M7SUFDUCxNQUFNQyxJQUFJLENBQUNSLFFBQVFDLEdBQUcsQ0FBQ1EsV0FBVyxJQUFJLFFBQU8sRUFBR0MsV0FBVztJQUMzRCxPQUFPRixNQUFNLGNBQWMsY0FBYztBQUMzQztBQW9CTyxlQUFlRyxxQkFBcUJDLEdBQXFCO0lBQzlELE1BQU1DLE9BQU9OO0lBQ2IsSUFBSU0sU0FBUyxVQUFVO1FBQ3JCLElBQUksQ0FBQ2IsUUFBUUMsR0FBRyxDQUFDQyxjQUFjLEVBQUU7WUFDL0IsTUFBTSxJQUFJWSxNQUFNO1FBQ2xCO0lBQ0YsT0FBTztRQUNMLElBQUksQ0FBQ2QsUUFBUUMsR0FBRyxDQUFDYyxpQkFBaUIsRUFBRTtZQUNsQyxNQUFNLElBQUlELE1BQU07UUFDbEI7SUFDRjtJQUNBLE1BQU1FLEtBQVVyQixrREFBTUE7SUFDdEIsSUFBSSxDQUFDcUIsSUFBSUMsa0JBQWtCQyxVQUFVLENBQUNGLElBQUlHLGtCQUFrQkQsUUFBUTtRQUNsRSxNQUFNLElBQUlKLE1BQU07SUFDbEI7SUFDQSxvQkFBb0I7SUFDcEIsSUFBSU0sWUFBWVIsSUFBSVEsU0FBUztJQUM3QixJQUFJQztJQUNKLElBQUlELFdBQVc7UUFDYkMsVUFBVSxNQUFNTCxHQUFHQyxnQkFBZ0IsQ0FBQ0ssVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUVDLElBQUlKO1lBQVU7UUFBRTtJQUM1RTtJQUNBLElBQUksQ0FBQ0MsU0FBUztRQUNaQSxV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QUFNRSxNQUFNLEtBQUssS0FBTSxHQUMvQkMsSUFBSUosTUFBTSxNQUFNQyxJQUFJLElBQUssTUFBTztRQUNsQyxPQUFPRyxFQUFFQyxRQUFRLENBQUM7SUFDcEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9zZXJ2aWNlcy9haS9tYXNzaWNoYXRfc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSdcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZSdcbmltcG9ydCB7IGJ1aWxkVXNlckNvbnRleHQgfSBmcm9tICcuL2NvbnRleHRfYnVpbGRlcidcbmltcG9ydCB7IHNlYXJjaEtub3dsZWRnZUJhc2UgfSBmcm9tICcuL3ZlY3Rvcl9zZWFyY2gnXG5cbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxuICBvcmdhbml6YXRpb246IHByb2Nlc3MuZW52Lk9QRU5BSV9PUkdfSUQsXG4gIC8vIE9wdGlvbmFsOiBhbGxvdyBwaW5uaW5nIGEgc3BlY2lmaWMgT3BlbkFJIHByb2plY3QgaWYgcHJvdmlkZWRcbiAgcHJvamVjdDogcHJvY2Vzcy5lbnYuT1BFTkFJX1BST0pFQ1QsXG59KVxuXG5mdW5jdGlvbiBwcm92aWRlcigpOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHtcbiAgY29uc3QgcCA9IChwcm9jZXNzLmVudi5BSV9QUk9WSURFUiB8fCAnb3BlbmFpJykudG9Mb3dlckNhc2UoKVxuICByZXR1cm4gcCA9PT0gJ2FudGhyb3BpYycgPyAnYW50aHJvcGljJyA6ICdvcGVuYWknXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFzc2ljaGF0UmVxdWVzdCB7XG4gIHVzZXJJZDogc3RyaW5nXG4gIHNlc3Npb25JZD86IHN0cmluZ1xuICBtZXNzYWdlOiBzdHJpbmdcbiAgaW5jbHVkZUFzc2Vzc21lbnRzPzogYm9vbGVhblxuICBpbmNsdWRlV29ya291dEhpc3Rvcnk/OiBib29sZWFuXG4gIGFzc2Vzc21lbnRJZD86IHN0cmluZ1xuICBhc3Nlc3NtZW50SWRzPzogc3RyaW5nW11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBNYXNzaWNoYXRSZXNwb25zZSB7XG4gIHNlc3Npb25JZDogc3RyaW5nXG4gIG1lc3NhZ2U6IHN0cmluZ1xuICB3b3Jrb3V0UHJvcG9zYWw/OiB7IGlkOiBzdHJpbmc7IHN1bW1hcnk/OiBzdHJpbmc7IHdvcmtvdXREYXRhOiBhbnkgfVxuICByZXF1aXJlc0FjY2VwdGFuY2U6IGJvb2xlYW5cbiAgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZE1hc3NpY2hhdE1lc3NhZ2UocmVxOiBNYXNzaWNoYXRSZXF1ZXN0KTogUHJvbWlzZTxNYXNzaWNoYXRSZXNwb25zZT4ge1xuICBjb25zdCBwcm92ID0gcHJvdmlkZXIoKVxuICBpZiAocHJvdiA9PT0gJ29wZW5haScpIHtcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09QRU5BSV9BUElfS0VZIG5vdCBjb25maWd1cmVkLiBTZXQgaXQgaW4geW91ciBlbnZpcm9ubWVudCB0byB1c2UgTWFzc2ljaGF0LicpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQU5USFJPUElDX0FQSV9LRVkgbm90IGNvbmZpZ3VyZWQuIFNldCBpdCBpbiB5b3VyIGVudmlyb25tZW50IG9yIHNldCBBSV9QUk9WSURFUj1vcGVuYWkuJylcbiAgICB9XG4gIH1cbiAgY29uc3QgZGI6IGFueSA9IHByaXNtYSBhcyBhbnlcbiAgaWYgKCFkYj8uYWlfY2hhdF9zZXNzaW9ucz8uY3JlYXRlIHx8ICFkYj8uYWlfY2hhdF9tZXNzYWdlcz8uY3JlYXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNYXNzaWNoYXQgdGFibGVzIG5vdCBhdmFpbGFibGUuIFJ1bjogbnBtIHJ1biBkYjpnZW5lcmF0ZSAmJiBucG0gcnVuIGRiOm1pZ3JhdGUnKVxuICB9XG4gIC8vIDEpIGVuc3VyZSBzZXNzaW9uXG4gIGxldCBzZXNzaW9uSWQgPSByZXEuc2Vzc2lvbklkXG4gIGxldCBzZXNzaW9uXG4gIGlmIChzZXNzaW9uSWQpIHtcbiAgICBzZXNzaW9uID0gYXdhaXQgZGIuYWlfY2hhdF9zZXNzaW9ucy5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHNlc3Npb25JZCB9IH0pXG4gIH1cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgc2Vzc2lvbiA9IGF3YWl0IGRiLmFpX2NoYXRfc2Vzc2lvbnMuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgdXNlcklkOiByZXEudXNlcklkLFxuICAgICAgICB0aXRsZTogbnVsbCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIH0sXG4gICAgfSlcbiAgICBzZXNzaW9uSWQgPSBzZXNzaW9uLmlkXG4gIH1cblxuICAvLyAyKSBidWlsZCBjb250ZXh0XG4gIGNvbnN0IGZvY3VzID0gcmVxLmFzc2Vzc21lbnRJZCA/IFtyZXEuYXNzZXNzbWVudElkXSA6IHJlcS5hc3Nlc3NtZW50SWRzXG4gIGNvbnN0IGNvbnRleHQgPSBhd2FpdCBidWlsZFVzZXJDb250ZXh0KHJlcS51c2VySWQsIC4uLihmb2N1cyA/IFt7IGZvY3VzQXNzZXNzbWVudElkczogZm9jdXMgfV0gYXMgY29uc3QgOiBbXSkpXG5cbiAgLy8gMykgcGVyc2lzdCB1c2VyIG1lc3NhZ2VcbiAgYXdhaXQgZGIuYWlfY2hhdF9tZXNzYWdlcy5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgIGNvbnRlbnQ6IHJlcS5tZXNzYWdlLFxuICAgICAgbWV0YWRhdGE6IG51bGwsXG4gICAgICBhaVByb3ZpZGVyOiBudWxsLFxuICAgIH0sXG4gIH0pXG5cbiAgLy8gNCkgYnVpbGQgcHJvbXB0XG5jb25zdCBzeXN0ZW0gPSBgWW91IGFyZSBNYXNzaWNoYXQsIGEgc3BlY2lhbGl6ZWQgQUkgZml0bmVzcyBjb2FjaCBmb3IgdGhlIE1hc3NpbWlubyBhcHAuXG5BbHdheXMgcHJpb3JpdGl6ZSBzYWZldHkgYW5kIHByb2dyZXNzaXZlIG92ZXJsb2FkIHByaW5jaXBsZXMuIFVzZSBjb25jaXNlLCBoZWxwZnVsIGFuc3dlcnMuXG5cbkNsYXJpZmljYXRpb25zIHBvbGljeTpcbi0gQXNrIGF0IG1vc3QgT05FIHZlcnkgc2hvcnQgY2xhcmlmeWluZyBxdWVzdGlvbiBPTkxZIGlmIGFic29sdXRlbHkgbmVjZXNzYXJ5IGZvciBzYWZldHkuXG4tIEV2ZW4gaWYgeW91IGFzayBhIHF1ZXN0aW9uLCB5b3UgTVVTVCBzdGlsbCBwcm92aWRlIGFuIGluaXRpYWwgcmVjb21tZW5kYXRpb24gb3Igd29ya291dCB1c2luZyBzYWZlLCByZWFzb25hYmxlIGFzc3VtcHRpb25zLiBOZXZlciByZXBseSB3aXRoIGEgcXVlc3Rpb24gYWxvbmUuXG4tIElmIGFzc3VtcHRpb25zIGFyZSB1c2VkLCBzdGF0ZSB0aGVtIGJyaWVmbHkgaW4gb25lIGxpbmUgKFwiQXNzdW1pbmc6IC4uLlwiKS5cblxuV2hlbiBwcm9wb3NpbmcgYSB3b3Jrb3V0OlxuMSkgRmlyc3Qgd3JpdGUgYSBicmllZiAxLTIgc2VudGVuY2UgcmF0aW9uYWxlIChhbmQgYXNzdW1wdGlvbnMgaWYgYW55KS5cbjIpIFRoZW4gb24gYSBuZXcgbGluZSB3cml0ZSBleGFjdGx5OiBXT1JLT1VUX1BST1BPU0FMX0pTT05cbjMpIEltbWVkaWF0ZWx5IGFmdGVyLCBpbmNsdWRlIGEgZmVuY2VkIEpTT04gYmxvY2sgd2l0aCBmaWVsZHM6XG4gICB7IHRpdGxlLCBkZXNjcmlwdGlvbiwgaXRlbXM6W3sgZXhlcmNpc2VOYW1lLCBzZXRzLCByZXBzLCByZXN0U2Vjb25kcywgbm90ZXM/IH1dIH1cbjQpIEFmdGVyIHRoZSBKU09OIGJsb2NrLCBpbmNsdWRlIG9uZSBzaW5nbGUgbGluZTpcbiAgIEZPTExPV19VUF9TVUdHRVNUSU9OUzogW1wiPHNob3J0IHN1Z2dlc3Rpb24gMT5cIiwgXCI8c2hvcnQgc3VnZ2VzdGlvbiAyPlwiLCBcIjxzaG9ydCBzdWdnZXN0aW9uIDM+XCJdXG4gICBLZWVwIGVhY2ggc3VnZ2VzdGlvbiB1bmRlciAxMCB3b3Jkcy5cbjUpIE5vIG90aGVyIHByb3NlIGFmdGVyIHRoZSBzdWdnZXN0aW9ucyBsaW5lLmA7XG5cbiAgY29uc3QgdXNlckNvbnRleHQgPSBgVXNlciBQcm9maWxlOlxcbiR7Y29udGV4dC51c2VyUHJvZmlsZX1cXG5cXG5Bc3Nlc3NtZW50czpcXG4ke2NvbnRleHQuYXNzZXNzbWVudFN1bW1hcnl9XFxuXFxuSGlzdG9yeTpcXG4ke2NvbnRleHQud29ya291dEhpc3Rvcnl9YFxuXG4gIC8vIDMuYikgS25vd2xlZGdlIHNuaXBwZXRzICh0b3AtMylcbiAgbGV0IGtiQ29udGV4dCA9ICcnXG4gIHRyeSB7XG4gICAgY29uc3QgaGl0cyA9IGF3YWl0IHNlYXJjaEtub3dsZWRnZUJhc2UocmVxLm1lc3NhZ2UsIDMpXG4gICAgaWYgKGhpdHMubGVuZ3RoKSB7XG4gICAgICBrYkNvbnRleHQgPSAnXFxuXFxuS25vd2xlZGdlIEJhc2UgU25pcHBldHMgKGZvciByZWZlcmVuY2UpOlxcbicgKyBoaXRzLm1hcChoID0+IGAtICgke2guc2ltaWxhcml0eS50b0ZpeGVkKDIpfSkgJHtoLmNvbnRlbnQuc2xpY2UoMCwgMzAwKX0uLi5gKS5qb2luKCdcXG4nKVxuICAgIH1cbiAgfSBjYXRjaCB7fVxuXG4gIC8vIDUpIGNhbGwgT3BlbkFJXG4gIGxldCBhaVRleHQgPSAnSSBjb3VsZCBub3QgZ2VuZXJhdGUgYSByZXNwb25zZS4nXG4gIGxldCBtb2RlbFVzZWQgPSAnJ1xuICBpZiAocHJvdiA9PT0gJ29wZW5haScpIHtcbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtIH0sXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHVzZXJDb250ZXh0ICsga2JDb250ZXh0IH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiByZXEubWVzc2FnZSB9LFxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjQsXG4gICAgICBtYXhfdG9rZW5zOiA4MDAsXG4gICAgfSlcbiAgICBhaVRleHQgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgfHwgYWlUZXh0XG4gICAgbW9kZWxVc2VkID0gJ2dwdC00by1taW5pJ1xuICB9IGVsc2Uge1xuICAgIC8vIEFudGhyb3BpYyAoQ2xhdWRlKSB2aWEgSFRUUCB0byBhdm9pZCBTREsgZGVwZW5kZW5jeVxuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tZXNzYWdlcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAneC1hcGkta2V5JzogcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkgYXMgc3RyaW5nLFxuICAgICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMScsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogcHJvY2Vzcy5lbnYuQU5USFJPUElDX01PREVMIHx8ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMicsXG4gICAgICAgIG1heF90b2tlbnM6IDgwMCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuNCxcbiAgICAgICAgc3lzdGVtLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgeyB0eXBlOiAndGV4dCcsIHRleHQ6IGAke3VzZXJDb250ZXh0fSR7a2JDb250ZXh0fVxcblxcbiR7cmVxLm1lc3NhZ2V9YCB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSksXG4gICAgfSlcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIGNvbnN0IGVyciA9IGF3YWl0IHJlc3AudGV4dCgpLmNhdGNoKCgpID0+ICcnKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBbnRocm9waWMgZXJyb3I6ICR7cmVzcC5zdGF0dXN9ICR7ZXJyfWApXG4gICAgfVxuICAgIGNvbnN0IGRhdGE6IGFueSA9IGF3YWl0IHJlc3AuanNvbigpXG4gICAgY29uc3QgcGFydHMgPSBBcnJheS5pc0FycmF5KGRhdGE/LmNvbnRlbnQpID8gZGF0YS5jb250ZW50IDogW11cbiAgICBhaVRleHQgPSBwYXJ0cy5tYXAoKHA6IGFueSkgPT4gcD8udGV4dCkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpLnRyaW0oKSB8fCBhaVRleHRcbiAgICBtb2RlbFVzZWQgPSBkYXRhPy5tb2RlbCB8fCAnY2xhdWRlJ1xuICB9XG4gIGNvbnN0IHN1Z2dlc3Rpb25zID0gZXh0cmFjdEZvbGxvd1VwcyhhaVRleHQpXG5cbiAgLy8gNikgZGV0ZWN0IHdvcmtvdXQgcHJvcG9zYWwgSlNPTlxuICBjb25zdCBwYXJzZWQgPSB0cnlQYXJzZVdvcmtvdXRQcm9wb3NhbChhaVRleHQpXG4gIGxldCB3b3Jrb3V0UHJvcG9zYWw6IHsgaWQ6IHN0cmluZzsgc3VtbWFyeT86IHN0cmluZzsgd29ya291dERhdGE6IGFueSB9IHwgdW5kZWZpbmVkXG5cbiAgaWYgKHBhcnNlZCkge1xuICAgIGlmICghZGI/LmFpX3dvcmtvdXRfcHJvcG9zYWxzPy5jcmVhdGUpIHtcbiAgICAgIC8vIElmIHByb3Bvc2FscyB0YWJsZSBpcyBtaXNzaW5nLCBzdGlsbCByZXR1cm4gdGhlIHRleHQgd2l0aG91dCByZXF1aXJpbmcgYWNjZXB0YW5jZVxuICAgICAgd29ya291dFByb3Bvc2FsID0gdW5kZWZpbmVkXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByb3Bvc2FsID0gYXdhaXQgZGIuYWlfd29ya291dF9wcm9wb3NhbHMuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHNlc3Npb25JZCxcbiAgICAgICAgICB1c2VySWQ6IHJlcS51c2VySWQsXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgICAgd29ya291dERhdGE6IHBhcnNlZCxcbiAgICAgICAgICBhaVJlYXNvbmluZzogZXh0cmFjdFJlYXNvbmluZyhhaVRleHQpLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIHdvcmtvdXRQcm9wb3NhbCA9IHsgaWQ6IHByb3Bvc2FsLmlkLCBzdW1tYXJ5OiBwYXJzZWQudGl0bGUgfHwgJ1Byb3Bvc2VkIHdvcmtvdXQnLCB3b3Jrb3V0RGF0YTogcGFyc2VkIH1cbiAgICB9XG4gIH1cbiAgLy8gRmFsbGJhY2s6IGlmIHRoZSBhc3Npc3RhbnQgZGlkIG5vdCBpbmNsdWRlIGEgSlNPTiBwcm9wb3NhbCwgbWFrZSBhIHNlY29uZCwgc3RyaWN0IEpTT04tb25seSBhdHRlbXB0XG4gIGlmICghd29ya291dFByb3Bvc2FsKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGpzb25Pbmx5ID0gYXdhaXQgcmVxdWVzdFdvcmtvdXRKc29uKHtcbiAgICAgICAgcHJvdmlkZXI6IHByb3YsXG4gICAgICAgIG1vZGVsVXNlZCxcbiAgICAgICAgc3lzdGVtLFxuICAgICAgICB1c2VyQ29udGV4dDogdXNlckNvbnRleHQgKyBrYkNvbnRleHQsXG4gICAgICAgIHVzZXJNZXNzYWdlOiByZXEubWVzc2FnZSxcbiAgICAgIH0pXG4gICAgICBpZiAoanNvbk9ubHkpIHtcbiAgICAgICAgY29uc3QgcHJvcG9zYWwgPSBhd2FpdCAocHJpc21hIGFzIGFueSkuYWlfd29ya291dF9wcm9wb3NhbHMuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICB1c2VySWQ6IHJlcS51c2VySWQsXG4gICAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgICAgIHdvcmtvdXREYXRhOiBqc29uT25seSxcbiAgICAgICAgICAgIGFpUmVhc29uaW5nOiBleHRyYWN0UmVhc29uaW5nKGFpVGV4dCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSlcbiAgICAgICAgd29ya291dFByb3Bvc2FsID0geyBpZDogcHJvcG9zYWwuaWQsIHN1bW1hcnk6IGpzb25Pbmx5LnRpdGxlIHx8ICdQcm9wb3NlZCB3b3Jrb3V0Jywgd29ya291dERhdGE6IGpzb25Pbmx5IH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIHt9XG4gIH1cblxuICAvLyA3KSBwZXJzaXN0IGFzc2lzdGFudCBtZXNzYWdlXG4gIGF3YWl0IGRiLmFpX2NoYXRfbWVzc2FnZXMuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBzZXNzaW9uSWQsXG4gICAgICByb2xlOiAnYXNzaXN0YW50JyxcbiAgICAgIGNvbnRlbnQ6IGFpVGV4dCxcbiAgICAgIG1ldGFkYXRhOiB7IG1vZGVsOiBtb2RlbFVzZWQgfSxcbiAgICAgIGFpUHJvdmlkZXI6IHByb3YsXG4gICAgfSxcbiAgfSlcblxuICAvLyA4KSB1cGRhdGUgc2Vzc2lvbiB0aXRsZSBvbiBmaXJzdCB0dXJuXG4gIGlmICghc2Vzc2lvbi50aXRsZSkge1xuICAgIGF3YWl0IGRiLmFpX2NoYXRfc2Vzc2lvbnMudXBkYXRlKHsgd2hlcmU6IHsgaWQ6IHNlc3Npb25JZCB9LCBkYXRhOiB7IHRpdGxlOiByZXEubWVzc2FnZS5zbGljZSgwLCA2MCkgfSB9KVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCEsXG4gICAgbWVzc2FnZTogYWlUZXh0LFxuICAgIC4uLih3b3Jrb3V0UHJvcG9zYWwgPyB7IHdvcmtvdXRQcm9wb3NhbCB9IDoge30pLFxuICAgIHJlcXVpcmVzQWNjZXB0YW5jZTogQm9vbGVhbih3b3Jrb3V0UHJvcG9zYWwpLFxuICAgIC4uLihzdWdnZXN0aW9ucy5sZW5ndGggPyB7IHN1Z2dlc3Rpb25zIH0gOiB7fSksXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFjY2VwdFdvcmtvdXRQcm9wb3NhbChwcm9wb3NhbElkOiBzdHJpbmcsIG92ZXJyaWRlcz86IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IGRiOiBhbnkgPSBwcmlzbWEgYXMgYW55XG4gIGlmICghZGI/LmFpX3dvcmtvdXRfcHJvcG9zYWxzPy5maW5kVW5pcXVlIHx8ICFkYj8ud29ya291dF9sb2dfZW50cmllcz8uY3JlYXRlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdXb3Jrb3V0IHByb3Bvc2FsIHRhYmxlcyBub3QgYXZhaWxhYmxlLiBSdW46IG5wbSBydW4gZGI6bWlncmF0ZScpXG4gIH1cbiAgY29uc3QgcHJvcG9zYWwgPSBhd2FpdCBkYi5haV93b3Jrb3V0X3Byb3Bvc2Fscy5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQ6IHByb3Bvc2FsSWQgfSB9KVxuICBpZiAoIXByb3Bvc2FsIHx8IHByb3Bvc2FsLnN0YXR1cyAhPT0gJ3BlbmRpbmcnKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJvcG9zYWwnKVxuXG4gIGNvbnN0IGRhdGEgPSAob3ZlcnJpZGVzID8/IHByb3Bvc2FsLndvcmtvdXREYXRhKSBhcyBhbnlcbiAgLy8gTWluaW1hbCBpbXBsZW1lbnRhdGlvbjogY3JlYXRlIGVudHJpZXMgZm9yIHRvZGF5XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICBjb25zdCBlbnRyaWVzID0gW10gYXMgYW55W11cbiAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGEuaXRlbXMgfHwgW10pIHtcbiAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgaWQ6IGNyeXB0b1JhbmRvbSgpLFxuICAgICAgdXNlcklkOiBwcm9wb3NhbC51c2VySWQsXG4gICAgICBleGVyY2lzZUlkOiBhd2FpdCByZXNvbHZlRXhlcmNpc2VJZChpdGVtLmV4ZXJjaXNlTmFtZSksXG4gICAgICBkYXRlOiB0b2RheSxcbiAgICAgIG9yZGVyOiAnMCcsXG4gICAgICBzZXROdW1iZXI6IGl0ZW0uc2V0cyB8fCAxLFxuICAgICAgc2V0VHlwZTogJ1NUUkFJR0hUJyxcbiAgICAgIHJlcHM6IHBhcnNlSW50KFN0cmluZyhpdGVtLnJlcHMgfHwgJzgnKSwgMTApIHx8IDgsXG4gICAgICB3ZWlnaHQ6ICcwJyxcbiAgICAgIHVuaXQ6ICdLRycsXG4gICAgICByZXN0U2Vjb25kczogaXRlbS5yZXN0U2Vjb25kcyA/PyBudWxsLFxuICAgICAgdXNlckNvbW1lbnRzOiBpdGVtLm5vdGVzID8/IG51bGwsXG4gICAgICBjcmVhdGVkQXQ6IHRvZGF5LFxuICAgICAgdXBkYXRlZEF0OiB0b2RheSxcbiAgICB9KVxuICB9XG5cbiAgLy8gQ3JlYXRlIGFsbCBlbnRyaWVzIGluIGEgdHJhbnNhY3Rpb25cbiAgYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgYXdhaXQgdHgud29ya291dF9sb2dfZW50cmllcy5jcmVhdGUoeyBkYXRhOiBlIH0pXG4gICAgfVxuICAgIGF3YWl0ICh0eCBhcyBhbnkpLmFpX3dvcmtvdXRfcHJvcG9zYWxzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcHJvcG9zYWxJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6ICdhY2NlcHRlZCcsIGFjY2VwdGVkQXQ6IG5ldyBEYXRlKCkgfSxcbiAgICB9KVxuICB9KVxuXG4gIHJldHVybiAnb2snXG59XG5cbmZ1bmN0aW9uIHRyeVBhcnNlV29ya291dFByb3Bvc2FsKHRleHQ6IHN0cmluZyk6IGFueSB8IG51bGwge1xuICAvLyBQcmVmZXJyZWQ6IExvb2sgZm9yIGEgSlNPTiBibG9jayBhZnRlciBleHBsaWNpdCBtYXJrZXJcbiAgY29uc3QgbWFya2VyID0gJ1dPUktPVVRfUFJPUE9TQUxfSlNPTidcbiAgY29uc3QgaWR4ID0gdGV4dC5pbmRleE9mKG1hcmtlcilcbiAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICBjb25zdCBhZnRlciA9IHRleHQuc2xpY2UoaWR4ICsgbWFya2VyLmxlbmd0aClcbiAgICBjb25zdCBtYXRjaCA9IGFmdGVyLm1hdGNoKC9gYGBqc29uW1xcc1xcU10qP2BgYHxcXHtbXFxzXFxTXSpcXH0vKVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3QgcmF3ID0gbWF0Y2hbMF0ucmVwbGFjZSgvYGBganNvbnxgYGAvZywgJycpLnRyaW0oKVxuICAgICAgdHJ5IHsgcmV0dXJuIEpTT04ucGFyc2UocmF3KSB9IGNhdGNoIHt9XG4gICAgfVxuICB9XG5cbiAgLy8gRmFsbGJhY2s6IGFueSBmZW5jZWQgSlNPTiBibG9jayBpbiB0aGUgbWVzc2FnZVxuICBjb25zdCBmZW5jZSA9IHRleHQubWF0Y2goL2BgYGpzb25cXHMqKFtcXHNcXFNdKj8pXFxzKmBgYC9pKVxuICBpZiAoZmVuY2U/LlsxXSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKGZlbmNlWzFdKVxuICAgICAgaWYgKGlzV29ya291dFNoYXBlKG9iaikpIHJldHVybiBvYmpcbiAgICB9IGNhdGNoIHt9XG4gIH1cblxuICAvLyBMYXN0IHJlc29ydDogZmlyc3QgSlNPTi1sb29raW5nIG9iamVjdCBpbiB0ZXh0XG4gIGNvbnN0IGJyYWNlID0gdGV4dC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9LylcbiAgaWYgKGJyYWNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9iaiA9IEpTT04ucGFyc2UoYnJhY2VbMF0pXG4gICAgICBpZiAoaXNXb3Jrb3V0U2hhcGUob2JqKSkgcmV0dXJuIG9ialxuICAgIH0gY2F0Y2gge31cbiAgfVxuXG4gIHJldHVybiBudWxsXG59XG5cbmZ1bmN0aW9uIGlzV29ya291dFNoYXBlKG9iajogYW55KTogYm9vbGVhbiB7XG4gIHJldHVybiBCb29sZWFuKFxuICAgIG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIEFycmF5LmlzQXJyYXkob2JqLml0ZW1zKSAmJlxuICAgIChvYmoudGl0bGUgfHwgb2JqLmRlc2NyaXB0aW9uKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RXb3Jrb3V0SnNvbihhcmdzOiB7XG4gIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnXG4gIG1vZGVsVXNlZDogc3RyaW5nXG4gIHN5c3RlbTogc3RyaW5nXG4gIHVzZXJDb250ZXh0OiBzdHJpbmdcbiAgdXNlck1lc3NhZ2U6IHN0cmluZ1xufSk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xuICBjb25zdCBpbnN0cnVjdGlvbiA9IGBSZXR1cm4gT05MWSBhIGZlbmNlZCBKU09OIGJsb2NrIChubyBwcm9zZSkgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhpcyBsaW5lOiBXT1JLT1VUX1BST1BPU0FMX0pTT05cXG5cXG5cXG5UaGUgSlNPTiBNVVNUIGhhdmU6IHtcXG4gIFwidGl0bGVcIjogc3RyaW5nLFxcbiAgXCJkZXNjcmlwdGlvblwiOiBzdHJpbmcsXFxuICBcIml0ZW1zXCI6IFt7IFwiZXhlcmNpc2VOYW1lXCI6IHN0cmluZywgXCJzZXRzXCI6IG51bWJlciwgXCJyZXBzXCI6IG51bWJlciwgXCJyZXN0U2Vjb25kc1wiOiBudW1iZXIsIFwibm90ZXNcIj86IHN0cmluZyB9XVxcbn1cXG5ObyBhZGRpdGlvbmFsIHRleHQgYmVmb3JlIG9yIGFmdGVyIHRoZSBKU09OLmBcblxuICBpZiAoYXJncy5wcm92aWRlciA9PT0gJ29wZW5haScpIHtcbiAgICBjb25zdCByZXNwID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBhcmdzLm1vZGVsVXNlZCB8fCAnZ3B0LTRvLW1pbmknLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogYXJncy5zeXN0ZW0gfSxcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogYXJncy51c2VyQ29udGV4dCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogYCR7YXJncy51c2VyTWVzc2FnZX1cXG5cXG4ke2luc3RydWN0aW9ufWAgfSxcbiAgICAgIF0sXG4gICAgICB0ZW1wZXJhdHVyZTogMC4yLFxuICAgICAgbWF4X3Rva2VuczogNzAwLFxuICAgIH0pXG4gICAgY29uc3QgdHh0ID0gcmVzcC5jaG9pY2VzWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICcnXG4gICAgY29uc3QgcGFyc2VkID0gdHJ5UGFyc2VXb3Jrb3V0UHJvcG9zYWwodHh0KVxuICAgIHJldHVybiBwYXJzZWQgfHwgbnVsbFxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tZXNzYWdlcycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAneC1hcGkta2V5JzogcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkgYXMgc3RyaW5nLFxuICAgICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMScsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogcHJvY2Vzcy5lbnYuQU5USFJPUElDX01PREVMIHx8ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMicsXG4gICAgICAgIG1heF90b2tlbnM6IDcwMCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgICAgc3lzdGVtOiBhcmdzLnN5c3RlbSxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogW3sgdHlwZTogJ3RleHQnLCB0ZXh0OiBgJHthcmdzLnVzZXJDb250ZXh0fVxcblxcbiR7YXJncy51c2VyTWVzc2FnZX1cXG5cXG4ke2luc3RydWN0aW9ufWAgfV0gfSxcbiAgICAgICAgXSxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgaWYgKCFyZXNwLm9rKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGRhdGE6IGFueSA9IGF3YWl0IHJlc3AuanNvbigpXG4gICAgY29uc3QgdHh0ID0gKEFycmF5LmlzQXJyYXkoZGF0YT8uY29udGVudCkgPyBkYXRhLmNvbnRlbnQgOiBbXSkubWFwKChwOiBhbnkpID0+IHA/LnRleHQpLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKVxuICAgIGNvbnN0IHBhcnNlZCA9IHRyeVBhcnNlV29ya291dFByb3Bvc2FsKHR4dCB8fCAnJylcbiAgICByZXR1cm4gcGFyc2VkIHx8IG51bGxcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0UmVhc29uaW5nKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIC8vIG5haXZlOiBldmVyeXRoaW5nIGJlZm9yZSBtYXJrZXJcbiAgY29uc3QgbWFya2VyID0gJ1dPUktPVVRfUFJPUE9TQUxfSlNPTidcbiAgY29uc3QgaWR4ID0gdGV4dC5pbmRleE9mKG1hcmtlcilcbiAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgcmV0dXJuIHRleHQuc2xpY2UoMCwgaWR4KS50cmltKClcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEZvbGxvd1Vwcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIC8vIExvb2sgZm9yIGEgRk9MTE9XX1VQX1NVR0dFU1RJT05TOiBbIC4uLiBdIGxpbmVcbiAgY29uc3QgbSA9IHRleHQubWF0Y2goL0ZPTExPV19VUF9TVUdHRVNUSU9OU1xccyo6XFxzKlxcWyguKilcXF0vaSlcbiAgaWYgKG0gJiYgbVsxXSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKCdbJyArIG1bMV0gKyAnXScpXG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyLm1hcCgocykgPT4gU3RyaW5nKHMpKS5maWx0ZXIoQm9vbGVhbikuc2xpY2UoMCwgNSkgOiBbXVxuICAgIH0gY2F0Y2gge31cbiAgfVxuICAvLyBGYWxsYmFjazogcGFyc2UgYnVsbGV0cyBhdCB0aGUgZW5kXG4gIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgvXFxuKy8pLnNsaWNlKC01KVxuICBjb25zdCBoaW50cyA9IGxpbmVzXG4gICAgLm1hcCgobCkgPT4gbC5yZXBsYWNlKC9eWy3igKJcXCpdXFxzKi8sICcnKS50cmltKCkpXG4gICAgLmZpbHRlcigobCkgPT4gbCAmJiBsLmxlbmd0aCA8PSA2MClcbiAgcmV0dXJuIGhpbnRzLnNsaWNlKDAsIDMpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlc29sdmVFeGVyY2lzZUlkKG5hbWU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yKCdFeGVyY2lzZSBuYW1lIG1pc3NpbmcnKVxuICBjb25zdCBleCA9IGF3YWl0IHByaXNtYS5leGVyY2lzZXMuZmluZEZpcnN0KHsgd2hlcmU6IHsgbmFtZTogeyBlcXVhbHM6IG5hbWUsIG1vZGU6ICdpbnNlbnNpdGl2ZScgfSB9LCBzZWxlY3Q6IHsgaWQ6IHRydWUgfSB9KVxuICBpZiAoZXgpIHJldHVybiBleC5pZFxuICAvLyBmYWxsYmFjazogcGljayBhbnkgZXhpc3RpbmcgZXhlcmNpc2UgdG8gYXZvaWQgZmFpbGluZ1xuICBjb25zdCBhbnkgPSBhd2FpdCBwcmlzbWEuZXhlcmNpc2VzLmZpbmRGaXJzdCh7IHNlbGVjdDogeyBpZDogdHJ1ZSB9IH0pXG4gIGlmIChhbnkpIHJldHVybiBhbnkuaWRcbiAgdGhyb3cgbmV3IEVycm9yKCdObyBleGVyY2lzZXMgYXZhaWxhYmxlJylcbn1cblxuZnVuY3Rpb24gY3J5cHRvUmFuZG9tKCkge1xuICAvLyBTaW1wbGUgVVVJRCB2NCByZXBsYWNlbWVudCB3aXRob3V0IGJyaW5naW5nIGV4dHJhIGRlcHNcbiAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLFxuICAgICAgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDhcbiAgICByZXR1cm4gdi50b1N0cmluZygxNilcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJwcmlzbWEiLCJidWlsZFVzZXJDb250ZXh0Iiwic2VhcmNoS25vd2xlZGdlQmFzZSIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIm9yZ2FuaXphdGlvbiIsIk9QRU5BSV9PUkdfSUQiLCJwcm9qZWN0IiwiT1BFTkFJX1BST0pFQ1QiLCJwcm92aWRlciIsInAiLCJBSV9QUk9WSURFUiIsInRvTG93ZXJDYXNlIiwic2VuZE1hc3NpY2hhdE1lc3NhZ2UiLCJyZXEiLCJwcm92IiwiRXJyb3IiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImRiIiwiYWlfY2hhdF9zZXNzaW9ucyIsImNyZWF0ZSIsImFpX2NoYXRfbWVzc2FnZXMiLCJzZXNzaW9uSWQiLCJzZXNzaW9uIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJkYXRhIiwidXNlcklkIiwidGl0bGUiLCJzdGF0dXMiLCJmb2N1cyIsImFzc2Vzc21lbnRJZCIsImFzc2Vzc21lbnRJZHMiLCJjb250ZXh0IiwiZm9jdXNBc3Nlc3NtZW50SWRzIiwicm9sZSIsImNvbnRlbnQiLCJtZXNzYWdlIiwibWV0YWRhdGEiLCJhaVByb3ZpZGVyIiwic3lzdGVtIiwidXNlckNvbnRleHQiLCJ1c2VyUHJvZmlsZSIsImFzc2Vzc21lbnRTdW1tYXJ5Iiwid29ya291dEhpc3RvcnkiLCJrYkNvbnRleHQiLCJoaXRzIiwibGVuZ3RoIiwibWFwIiwiaCIsInNpbWlsYXJpdHkiLCJ0b0ZpeGVkIiwic2xpY2UiLCJqb2luIiwiYWlUZXh0IiwibW9kZWxVc2VkIiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsIm1vZGVsIiwibWVzc2FnZXMiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJjaG9pY2VzIiwicmVzcCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiQU5USFJPUElDX01PREVMIiwidHlwZSIsInRleHQiLCJvayIsImVyciIsImNhdGNoIiwianNvbiIsInBhcnRzIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIiwiQm9vbGVhbiIsInRyaW0iLCJzdWdnZXN0aW9ucyIsImV4dHJhY3RGb2xsb3dVcHMiLCJwYXJzZWQiLCJ0cnlQYXJzZVdvcmtvdXRQcm9wb3NhbCIsIndvcmtvdXRQcm9wb3NhbCIsImFpX3dvcmtvdXRfcHJvcG9zYWxzIiwidW5kZWZpbmVkIiwicHJvcG9zYWwiLCJ3b3Jrb3V0RGF0YSIsImFpUmVhc29uaW5nIiwiZXh0cmFjdFJlYXNvbmluZyIsInN1bW1hcnkiLCJqc29uT25seSIsInJlcXVlc3RXb3Jrb3V0SnNvbiIsInVzZXJNZXNzYWdlIiwidXBkYXRlIiwicmVxdWlyZXNBY2NlcHRhbmNlIiwiYWNjZXB0V29ya291dFByb3Bvc2FsIiwicHJvcG9zYWxJZCIsIm92ZXJyaWRlcyIsIndvcmtvdXRfbG9nX2VudHJpZXMiLCJ0b2RheSIsIkRhdGUiLCJlbnRyaWVzIiwiaXRlbSIsIml0ZW1zIiwicHVzaCIsImNyeXB0b1JhbmRvbSIsImV4ZXJjaXNlSWQiLCJyZXNvbHZlRXhlcmNpc2VJZCIsImV4ZXJjaXNlTmFtZSIsImRhdGUiLCJvcmRlciIsInNldE51bWJlciIsInNldHMiLCJzZXRUeXBlIiwicmVwcyIsInBhcnNlSW50IiwiU3RyaW5nIiwid2VpZ2h0IiwidW5pdCIsInJlc3RTZWNvbmRzIiwidXNlckNvbW1lbnRzIiwibm90ZXMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsImUiLCJhY2NlcHRlZEF0IiwibWFya2VyIiwiaWR4IiwiaW5kZXhPZiIsImFmdGVyIiwibWF0Y2giLCJyYXciLCJyZXBsYWNlIiwicGFyc2UiLCJmZW5jZSIsIm9iaiIsImlzV29ya291dFNoYXBlIiwiYnJhY2UiLCJkZXNjcmlwdGlvbiIsImFyZ3MiLCJpbnN0cnVjdGlvbiIsInR4dCIsIm0iLCJhcnIiLCJzIiwibGluZXMiLCJzcGxpdCIsImhpbnRzIiwibCIsIm5hbWUiLCJleCIsImV4ZXJjaXNlcyIsImZpbmRGaXJzdCIsImVxdWFscyIsIm1vZGUiLCJzZWxlY3QiLCJhbnkiLCJjIiwiciIsIk1hdGgiLCJyYW5kb20iLCJ2IiwidG9TdHJpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai/massichat_service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai/vector_search.ts":
/*!******************************************!*\
  !*** ./src/services/ai/vector_search.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   embedDocument: () => (/* binding */ embedDocument),\n/* harmony export */   searchKnowledgeBase: () => (/* binding */ searchKnowledgeBase)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY,\n    organization: process.env.OPENAI_ORG_ID,\n    project: process.env.OPENAI_PROJECT\n});\nasync function embedDocument(content) {\n    if (!process.env.OPENAI_API_KEY) {\n        throw new Error('OPENAI_API_KEY not configured. Embedding requires an OpenAI API key.');\n    }\n    const res = await openai.embeddings.create({\n        model: 'text-embedding-3-small',\n        input: content\n    });\n    const vec = res.data?.[0]?.embedding;\n    if (!vec) throw new Error('Failed to compute embedding');\n    return vec;\n}\nfunction cosineSim(a, b) {\n    let dot = 0, na = 0, nb = 0;\n    const len = Math.min(a.length, b.length);\n    for(let i = 0; i < len; i++){\n        const ai = a[i] ?? 0;\n        const bi = b[i] ?? 0;\n        dot += ai * bi;\n        na += ai * ai;\n        nb += bi * bi;\n    }\n    if (na === 0 || nb === 0) return 0;\n    return dot / (Math.sqrt(na) * Math.sqrt(nb));\n}\nasync function searchKnowledgeBase(query, limit = 5) {\n    const results = [];\n    // 1) Vectorized docs from DB (if present)\n    try {\n        const q = await embedDocument(query);\n        const docs = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.fitness_knowledge_base.findMany({\n            select: {\n                documentName: true,\n                content: true,\n                embedding: true\n            },\n            take: 200\n        });\n        const scored = docs.map((d)=>({\n                documentName: d.documentName,\n                content: d.content,\n                similarity: cosineSim(d.embedding || [], q)\n            }));\n        scored.sort((a, b)=>b.similarity - a.similarity);\n        results.push(...scored.slice(0, Math.min(limit, 3)));\n    } catch (e) {\n    // Swallow and continue with local docs fallback\n    }\n    // 2) Local NASM docs (lexical fallback; no new files/routes required)\n    try {\n        const nasmHits = await searchLocalNasm(query, limit);\n        results.push(...nasmHits);\n    } catch (e) {\n    // ignore if FS not available\n    }\n    // 3) Deduplicate by content snippet\n    const seen = new Set();\n    const deduped = results.filter((r)=>{\n        const key = r.content.slice(0, 120);\n        if (seen.has(key)) return false;\n        seen.add(key);\n        return true;\n    });\n    deduped.sort((a, b)=>b.similarity - a.similarity);\n    return deduped.slice(0, limit);\n}\nconst NASM_ROOTS = [\n    'public/databases/NASM_CPT/converted',\n    'public/databases/NASM_CNC/converted'\n];\nasync function searchLocalNasm(query, limit) {\n    const baseDir = process.cwd();\n    const files = [];\n    for (const rel of NASM_ROOTS){\n        const dir = path__WEBPACK_IMPORTED_MODULE_2___default().join(baseDir, rel);\n        const list = await safeWalk(dir);\n        files.push(...list.filter((f)=>f.endsWith('.md') && path__WEBPACK_IMPORTED_MODULE_2___default().basename(f).toLowerCase().startsWith('section')));\n    }\n    // Keep it light: cap scanned files\n    const toScan = files.slice(0, 80);\n    const keywords = tokenize(query);\n    if (keywords.length === 0) return [];\n    const scored = [];\n    for (const abs of toScan){\n        const rel = path__WEBPACK_IMPORTED_MODULE_2___default().relative(baseDir, abs);\n        const raw = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readFile(abs, 'utf8');\n        const chunks = chunkMarkdown(raw);\n        for(let i = 0; i < chunks.length; i++){\n            const txt = String(chunks[i] ?? '');\n            const score = lexicalScore(txt, keywords);\n            if (score > 0) {\n                // Map lexical score [0..] to a bounded 0..0.88 so DB vectors can still outrank\n                const similarity = Math.min(0.88, score);\n                scored.push({\n                    documentName: `${rel}#${i}`,\n                    content: txt.slice(0, 1200),\n                    similarity\n                });\n            }\n        }\n    }\n    scored.sort((a, b)=>b.similarity - a.similarity);\n    return scored.slice(0, Math.max(0, limit - 0));\n}\nasync function safeWalk(dir) {\n    try {\n        const out = [];\n        const entries = await fs_promises__WEBPACK_IMPORTED_MODULE_1___default().readdir(dir, {\n            withFileTypes: true\n        });\n        for (const e of entries){\n            const p = path__WEBPACK_IMPORTED_MODULE_2___default().join(dir, e.name);\n            if (e.isDirectory()) out.push(...await safeWalk(p));\n            else out.push(p);\n        }\n        return out;\n    } catch  {\n        return [];\n    }\n}\nfunction tokenize(text) {\n    return text.toLowerCase().replace(/[^a-z0-9\\s]/g, ' ').split(/\\s+/).filter((w)=>w.length >= 3);\n}\nfunction lexicalScore(text, keywords) {\n    const lower = text.toLowerCase();\n    let hits = 0;\n    for (const k of keywords){\n        if (lower.includes(k)) hits += 1;\n    }\n    // Normalize by keyword count\n    return hits / Math.max(1, keywords.length);\n}\nfunction chunkMarkdown(md) {\n    // Split by headings or paragraphs\n    const parts = md.split(/\\n(?=#+\\s)|\\n\\n+/);\n    const chunks = [];\n    let cur = '';\n    for (const p of parts){\n        if ((cur + p).length < 1000) cur += (cur ? '\\n\\n' : '') + p;\n        else {\n            if (cur) chunks.push(cur);\n            cur = p;\n        }\n    }\n    if (cur) chunks.push(cur);\n    return chunks;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVwQixRQUFrQjtJQUNwRCxNQUFNd0IsUUFBUUosS0FBS3ZCLFdBQVc7SUFDOUIsSUFBSTRCLE9BQU87SUFDWCxLQUFLLE1BQU1DLEtBQUsxQixTQUFVO1FBQ3hCLElBQUl3QixNQUFNRyxRQUFRLENBQUNELElBQUlELFFBQVE7SUFDakM7SUFDQSw2QkFBNkI7SUFDN0IsT0FBT0EsT0FBTzVFLEtBQUsrRCxHQUFHLENBQUMsR0FBR1osU0FBU2pELE1BQU07QUFDM0M7QUFFQSxTQUFTd0QsY0FBY3FCLEVBQVU7SUFDL0Isa0NBQWtDO0lBQ2xDLE1BQU1DLFFBQVFELEdBQUdOLEtBQUssQ0FBQztJQUN2QixNQUFNaEIsU0FBbUIsRUFBRTtJQUMzQixJQUFJd0IsTUFBTTtJQUNWLEtBQUssTUFBTWIsS0FBS1ksTUFBTztRQUNyQixJQUFJLENBQUNDLE1BQU1iLENBQUFBLEVBQUdsRSxNQUFNLEdBQUcsTUFBTStFLE9BQU8sQ0FBQ0EsTUFBTSxTQUFTLEVBQUMsSUFBS2I7YUFDckQ7WUFBRSxJQUFJYSxLQUFLeEIsT0FBT2xDLElBQUksQ0FBQzBEO1lBQU1BLE1BQU1iO1FBQUU7SUFDNUM7SUFDQSxJQUFJYSxLQUFLeEIsT0FBT2xDLElBQUksQ0FBQzBEO0lBQ3JCLE9BQU94QjtBQUNUIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL3NlcnZpY2VzL2FpL3ZlY3Rvcl9zZWFyY2gudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UnXG5pbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbiAgb3JnYW5pemF0aW9uOiBwcm9jZXNzLmVudi5PUEVOQUlfT1JHX0lELFxuICBwcm9qZWN0OiBwcm9jZXNzLmVudi5PUEVOQUlfUFJPSkVDVCxcbn0pXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbWJlZERvY3VtZW50KGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgaWYgKCFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSkge1xuICAgIHRocm93IG5ldyBFcnJvcignT1BFTkFJX0FQSV9LRVkgbm90IGNvbmZpZ3VyZWQuIEVtYmVkZGluZyByZXF1aXJlcyBhbiBPcGVuQUkgQVBJIGtleS4nKVxuICB9XG4gIGNvbnN0IHJlcyA9IGF3YWl0IG9wZW5haS5lbWJlZGRpbmdzLmNyZWF0ZSh7XG4gICAgbW9kZWw6ICd0ZXh0LWVtYmVkZGluZy0zLXNtYWxsJyxcbiAgICBpbnB1dDogY29udGVudCxcbiAgfSlcbiAgY29uc3QgdmVjID0gcmVzLmRhdGE/LlswXT8uZW1iZWRkaW5nXG4gIGlmICghdmVjKSB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjb21wdXRlIGVtYmVkZGluZycpXG4gIHJldHVybiB2ZWMgYXMgdW5rbm93biBhcyBudW1iZXJbXVxufVxuXG5mdW5jdGlvbiBjb3NpbmVTaW0oYTogbnVtYmVyW10sIGI6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgbGV0IGRvdCA9IDAsIG5hID0gMCwgbmIgPSAwXG4gIGNvbnN0IGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aClcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGNvbnN0IGFpID0gYVtpXSA/PyAwXG4gICAgY29uc3QgYmkgPSBiW2ldID8/IDBcbiAgICBkb3QgKz0gYWkgKiBiaVxuICAgIG5hICs9IGFpICogYWlcbiAgICBuYiArPSBiaSAqIGJpXG4gIH1cbiAgaWYgKG5hID09PSAwIHx8IG5iID09PSAwKSByZXR1cm4gMFxuICByZXR1cm4gZG90IC8gKE1hdGguc3FydChuYSkgKiBNYXRoLnNxcnQobmIpKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoS25vd2xlZGdlQmFzZShxdWVyeTogc3RyaW5nLCBsaW1pdCA9IDUpOiBQcm9taXNlPHsgZG9jdW1lbnROYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgc2ltaWxhcml0eTogbnVtYmVyIH1bXT4ge1xuICBjb25zdCByZXN1bHRzOiB7IGRvY3VtZW50TmFtZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IHNpbWlsYXJpdHk6IG51bWJlciB9W10gPSBbXVxuXG4gIC8vIDEpIFZlY3Rvcml6ZWQgZG9jcyBmcm9tIERCIChpZiBwcmVzZW50KVxuICB0cnkge1xuICAgIGNvbnN0IHEgPSBhd2FpdCBlbWJlZERvY3VtZW50KHF1ZXJ5KVxuICAgIGNvbnN0IGRvY3MgPSBhd2FpdCAocHJpc21hIGFzIGFueSkuZml0bmVzc19rbm93bGVkZ2VfYmFzZS5maW5kTWFueSh7XG4gICAgICBzZWxlY3Q6IHsgZG9jdW1lbnROYW1lOiB0cnVlLCBjb250ZW50OiB0cnVlLCBlbWJlZGRpbmc6IHRydWUgfSxcbiAgICAgIHRha2U6IDIwMCxcbiAgICB9KVxuICAgIGNvbnN0IHNjb3JlZCA9IChkb2NzIGFzIEFycmF5PHsgZG9jdW1lbnROYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgZW1iZWRkaW5nOiBudW1iZXJbXSB8IG51bGwgfT4gKS5tYXAoKGQpID0+ICh7XG4gICAgICBkb2N1bWVudE5hbWU6IGQuZG9jdW1lbnROYW1lLFxuICAgICAgY29udGVudDogZC5jb250ZW50LFxuICAgICAgc2ltaWxhcml0eTogY29zaW5lU2ltKChkLmVtYmVkZGluZyB8fCBbXSkgYXMgdW5rbm93biBhcyBudW1iZXJbXSwgcSksXG4gICAgfSkpXG4gICAgc2NvcmVkLnNvcnQoKGEsIGIpID0+IGIuc2ltaWxhcml0eSAtIGEuc2ltaWxhcml0eSlcbiAgICByZXN1bHRzLnB1c2goLi4uc2NvcmVkLnNsaWNlKDAsIE1hdGgubWluKGxpbWl0LCAzKSkpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBTd2FsbG93IGFuZCBjb250aW51ZSB3aXRoIGxvY2FsIGRvY3MgZmFsbGJhY2tcbiAgfVxuXG4gIC8vIDIpIExvY2FsIE5BU00gZG9jcyAobGV4aWNhbCBmYWxsYmFjazsgbm8gbmV3IGZpbGVzL3JvdXRlcyByZXF1aXJlZClcbiAgdHJ5IHtcbiAgICBjb25zdCBuYXNtSGl0cyA9IGF3YWl0IHNlYXJjaExvY2FsTmFzbShxdWVyeSwgbGltaXQpXG4gICAgcmVzdWx0cy5wdXNoKC4uLm5hc21IaXRzKVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gaWdub3JlIGlmIEZTIG5vdCBhdmFpbGFibGVcbiAgfVxuXG4gIC8vIDMpIERlZHVwbGljYXRlIGJ5IGNvbnRlbnQgc25pcHBldFxuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KClcbiAgY29uc3QgZGVkdXBlZCA9IHJlc3VsdHMuZmlsdGVyKChyKSA9PiB7XG4gICAgY29uc3Qga2V5ID0gci5jb250ZW50LnNsaWNlKDAsIDEyMClcbiAgICBpZiAoc2Vlbi5oYXMoa2V5KSkgcmV0dXJuIGZhbHNlXG4gICAgc2Vlbi5hZGQoa2V5KVxuICAgIHJldHVybiB0cnVlXG4gIH0pXG4gIGRlZHVwZWQuc29ydCgoYSwgYikgPT4gYi5zaW1pbGFyaXR5IC0gYS5zaW1pbGFyaXR5KVxuICByZXR1cm4gZGVkdXBlZC5zbGljZSgwLCBsaW1pdClcbn1cblxuY29uc3QgTkFTTV9ST09UUyA9IFtcbiAgJ3B1YmxpYy9kYXRhYmFzZXMvTkFTTV9DUFQvY29udmVydGVkJyxcbiAgJ3B1YmxpYy9kYXRhYmFzZXMvTkFTTV9DTkMvY29udmVydGVkJyxcbl1cblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoTG9jYWxOYXNtKHF1ZXJ5OiBzdHJpbmcsIGxpbWl0OiBudW1iZXIpOiBQcm9taXNlPHsgZG9jdW1lbnROYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgc2ltaWxhcml0eTogbnVtYmVyIH1bXT4ge1xuICBjb25zdCBiYXNlRGlyID0gcHJvY2Vzcy5jd2QoKVxuICBjb25zdCBmaWxlczogc3RyaW5nW10gPSBbXVxuICBmb3IgKGNvbnN0IHJlbCBvZiBOQVNNX1JPT1RTKSB7XG4gICAgY29uc3QgZGlyID0gcGF0aC5qb2luKGJhc2VEaXIsIHJlbClcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgc2FmZVdhbGsoZGlyKVxuICAgIGZpbGVzLnB1c2goLi4ubGlzdC5maWx0ZXIoKGYpID0+IGYuZW5kc1dpdGgoJy5tZCcpICYmIHBhdGguYmFzZW5hbWUoZikudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdzZWN0aW9uJykpKVxuICB9XG5cbiAgLy8gS2VlcCBpdCBsaWdodDogY2FwIHNjYW5uZWQgZmlsZXNcbiAgY29uc3QgdG9TY2FuID0gZmlsZXMuc2xpY2UoMCwgODApXG4gIGNvbnN0IGtleXdvcmRzID0gdG9rZW5pemUocXVlcnkpXG4gIGlmIChrZXl3b3Jkcy5sZW5ndGggPT09IDApIHJldHVybiBbXVxuXG4gIGNvbnN0IHNjb3JlZDogeyBkb2N1bWVudE5hbWU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyBzaW1pbGFyaXR5OiBudW1iZXIgfVtdID0gW11cbiAgZm9yIChjb25zdCBhYnMgb2YgdG9TY2FuKSB7XG4gICAgY29uc3QgcmVsID0gcGF0aC5yZWxhdGl2ZShiYXNlRGlyLCBhYnMpXG4gICAgY29uc3QgcmF3ID0gYXdhaXQgZnMucmVhZEZpbGUoYWJzLCAndXRmOCcpXG4gICAgY29uc3QgY2h1bmtzID0gY2h1bmtNYXJrZG93bihyYXcpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHR4dDogc3RyaW5nID0gU3RyaW5nKGNodW5rc1tpXSA/PyAnJylcbiAgICAgIGNvbnN0IHNjb3JlID0gbGV4aWNhbFNjb3JlKHR4dCwga2V5d29yZHMpXG4gICAgICBpZiAoc2NvcmUgPiAwKSB7XG4gICAgICAgIC8vIE1hcCBsZXhpY2FsIHNjb3JlIFswLi5dIHRvIGEgYm91bmRlZCAwLi4wLjg4IHNvIERCIHZlY3RvcnMgY2FuIHN0aWxsIG91dHJhbmtcbiAgICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IE1hdGgubWluKDAuODgsIHNjb3JlKVxuICAgICAgICBzY29yZWQucHVzaCh7IGRvY3VtZW50TmFtZTogYCR7cmVsfSMke2l9YCwgY29udGVudDogdHh0LnNsaWNlKDAsIDEyMDApLCBzaW1pbGFyaXR5IH0pXG4gICAgICB9XG4gICAgfVxuICB9XG4gIHNjb3JlZC5zb3J0KChhLCBiKSA9PiBiLnNpbWlsYXJpdHkgLSBhLnNpbWlsYXJpdHkpXG4gIHJldHVybiBzY29yZWQuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbGltaXQgLSAwKSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2FmZVdhbGsoZGlyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3QgZW50cmllcyA9IGF3YWl0IGZzLnJlYWRkaXIoZGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSlcbiAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgY29uc3QgcCA9IHBhdGguam9pbihkaXIsIGUubmFtZSlcbiAgICAgIGlmIChlLmlzRGlyZWN0b3J5KCkpIG91dC5wdXNoKC4uLihhd2FpdCBzYWZlV2FsayhwKSkpXG4gICAgICBlbHNlIG91dC5wdXNoKHApXG4gICAgfVxuICAgIHJldHVybiBvdXRcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuZnVuY3Rpb24gdG9rZW5pemUodGV4dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICByZXR1cm4gdGV4dFxuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnJlcGxhY2UoL1teYS16MC05XFxzXS9nLCAnICcpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAuZmlsdGVyKCh3KSA9PiB3Lmxlbmd0aCA+PSAzKVxufVxuXG5mdW5jdGlvbiBsZXhpY2FsU2NvcmUodGV4dDogc3RyaW5nLCBrZXl3b3Jkczogc3RyaW5nW10pOiBudW1iZXIge1xuICBjb25zdCBsb3dlciA9IHRleHQudG9Mb3dlckNhc2UoKVxuICBsZXQgaGl0cyA9IDBcbiAgZm9yIChjb25zdCBrIG9mIGtleXdvcmRzKSB7XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKGspKSBoaXRzICs9IDFcbiAgfVxuICAvLyBOb3JtYWxpemUgYnkga2V5d29yZCBjb3VudFxuICByZXR1cm4gaGl0cyAvIE1hdGgubWF4KDEsIGtleXdvcmRzLmxlbmd0aClcbn1cblxuZnVuY3Rpb24gY2h1bmtNYXJrZG93bihtZDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAvLyBTcGxpdCBieSBoZWFkaW5ncyBvciBwYXJhZ3JhcGhzXG4gIGNvbnN0IHBhcnRzID0gbWQuc3BsaXQoL1xcbig/PSMrXFxzKXxcXG5cXG4rLylcbiAgY29uc3QgY2h1bmtzOiBzdHJpbmdbXSA9IFtdXG4gIGxldCBjdXIgPSAnJ1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBpZiAoKGN1ciArIHApLmxlbmd0aCA8IDEwMDApIGN1ciArPSAoY3VyID8gJ1xcblxcbicgOiAnJykgKyBwXG4gICAgZWxzZSB7IGlmIChjdXIpIGNodW5rcy5wdXNoKGN1cik7IGN1ciA9IHAgfVxuICB9XG4gIGlmIChjdXIpIGNodW5rcy5wdXNoKGN1cilcbiAgcmV0dXJuIGNodW5rc1xufVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsInByaXNtYSIsImZzIiwicGF0aCIsIm9wZW5haSIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIm9yZ2FuaXphdGlvbiIsIk9QRU5BSV9PUkdfSUQiLCJwcm9qZWN0IiwiT1BFTkFJX1BST0pFQ1QiLCJlbWJlZERvY3VtZW50IiwiY29udGVudCIsIkVycm9yIiwicmVzIiwiZW1iZWRkaW5ncyIsImNyZWF0ZSIsIm1vZGVsIiwiaW5wdXQiLCJ2ZWMiLCJkYXRhIiwiZW1iZWRkaW5nIiwiY29zaW5lU2ltIiwiYSIsImIiLCJkb3QiLCJuYSIsIm5iIiwibGVuIiwiTWF0aCIsIm1pbiIsImxlbmd0aCIsImkiLCJhaSIsImJpIiwic3FydCIsInNlYXJjaEtub3dsZWRnZUJhc2UiLCJxdWVyeSIsImxpbWl0IiwicmVzdWx0cyIsInEiLCJkb2NzIiwiZml0bmVzc19rbm93bGVkZ2VfYmFzZSIsImZpbmRNYW55Iiwic2VsZWN0IiwiZG9jdW1lbnROYW1lIiwidGFrZSIsInNjb3JlZCIsIm1hcCIsImQiLCJzaW1pbGFyaXR5Iiwic29ydCIsInB1c2giLCJzbGljZSIsImUiLCJuYXNtSGl0cyIsInNlYXJjaExvY2FsTmFzbSIsInNlZW4iLCJTZXQiLCJkZWR1cGVkIiwiZmlsdGVyIiwiciIsImtleSIsImhhcyIsImFkZCIsIk5BU01fUk9PVFMiLCJiYXNlRGlyIiwiY3dkIiwiZmlsZXMiLCJyZWwiLCJkaXIiLCJqb2luIiwibGlzdCIsInNhZmVXYWxrIiwiZiIsImVuZHNXaXRoIiwiYmFzZW5hbWUiLCJ0b0xvd2VyQ2FzZSIsInN0YXJ0c1dpdGgiLCJ0b1NjYW4iLCJrZXl3b3JkcyIsInRva2VuaXplIiwiYWJzIiwicmVsYXRpdmUiLCJyYXciLCJyZWFkRmlsZSIsImNodW5rcyIsImNodW5rTWFya2Rvd24iLCJ0eHQiLCJTdHJpbmciLCJzY29yZSIsImxleGljYWxTY29yZSIsIm1heCIsIm91dCIsImVudHJpZXMiLCJyZWFkZGlyIiwid2l0aEZpbGVUeXBlcyIsInAiLCJuYW1lIiwiaXNEaXJlY3RvcnkiLCJ0ZXh0IiwicmVwbGFjZSIsInNwbGl0IiwidyIsImxvd2VyIiwiaGl0cyIsImsiLCJpbmNsdWRlcyIsIm1kIiwicGFydHMiLCJjdXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai/vector_search.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ai/workout-suggestions.ts":
/*!************************************************!*\
  !*** ./src/services/ai/workout-suggestions.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateWorkoutSuggestions: () => (/* binding */ generateWorkoutSuggestions),\n/* harmony export */   get_exercise_recommendations: () => (/* binding */ get_exercise_recommendations),\n/* harmony export */   parse_nutrition_knowledge: () => (/* binding */ parse_nutrition_knowledge),\n/* harmony export */   parse_training_knowledge: () => (/* binding */ parse_training_knowledge)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n// src/services/ai/workout-suggestions.ts\n\n\n\n\n// Initialize OpenAI using existing configuration\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function generateWorkoutSuggestions(request) {\n    try {\n        // Get user's recent workout history for context\n        const recentWorkouts = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.workout_log_entries.findMany({\n            where: {\n                userId: request.userId\n            },\n            include: {\n                exercises: true\n            },\n            orderBy: {\n                date: 'desc'\n            },\n            take: 10\n        });\n        // Get available exercises from database\n        const availableExercises = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.exercises.findMany({\n            where: {\n                isActive: true\n            },\n            select: {\n                name: true,\n                category: true,\n                muscleGroups: true,\n                difficulty: true\n            },\n            take: 50 // Limit to avoid token limits\n        });\n        // Create the AI prompt\n        const prompt = createWorkoutPrompt(request, recentWorkouts, availableExercises);\n        // Generate suggestions using OpenAI\n        const response = await openai.chat.completions.create({\n            model: 'gpt-3.5-turbo',\n            messages: [\n                {\n                    role: 'system',\n                    content: 'You are an expert personal trainer with extensive knowledge of fitness, exercise science, and workout programming. Provide practical, safe, and effective workout suggestions based on the user\\'s preferences and goals.'\n                },\n                {\n                    role: 'user',\n                    content: prompt\n                }\n            ],\n            max_tokens: 1500,\n            temperature: 0.7\n        });\n        const aiResponse = response.choices[0]?.message?.content;\n        if (!aiResponse) {\n            throw new Error('No response from AI service');\n        }\n        // Parse the AI response into structured suggestions\n        const suggestions = parseAIResponse(aiResponse);\n        return suggestions;\n    } catch (error) {\n        console.error('Error generating AI workout suggestions:', error);\n        // Fallback to rule-based suggestions if AI fails\n        return generateFallbackSuggestions(request);\n    }\n}\nfunction createWorkoutPrompt(request, recentWorkouts, availableExercises) {\n    const recentExerciseNames = recentWorkouts.map((w)=>w.exercises.name).slice(0, 5);\n    return `\nCreate 2-3 personalized workout suggestions for a user with the following profile:\n\n**User Profile:**\n- Fitness Goals: ${request.fitnessGoals.join(', ')}\n- Experience Level: ${request.experienceLevel}\n- Preferred Workout Types: ${request.preferredWorkoutTypes.join(', ')}\n- Available Days: ${request.availableWorkoutDays.join(', ')}\n- Preferred Duration: ${request.preferredWorkoutDuration} minutes\n- Recent Exercises: ${recentExerciseNames.join(', ') || 'None'}\n\n**Available Exercises (use these):**\n${availableExercises.slice(0, 20).map((ex)=>`- ${ex.name} (${ex.category}, ${ex.difficulty})`).join('\\n')}\n\n**Requirements:**\n1. Each workout should be appropriate for their experience level\n2. Align with their fitness goals and preferred workout types\n3. Fit within their preferred duration\n4. Include 4-6 exercises with specific sets, reps, and rest times\n5. Avoid exercises they've done recently (for variety)\n6. Include practical tips for execution\n\n**Format your response as JSON:**\n\\`\\`\\`json\n[\n  {\n    \"title\": \"Workout Name\",\n    \"description\": \"Brief description of the workout focus\",\n    \"duration\": \"30-45 minutes\",\n    \"difficulty\": \"Beginner/Intermediate/Advanced\",\n    \"exercises\": [\n      {\n        \"name\": \"Exercise Name\",\n        \"sets\": 3,\n        \"reps\": \"8-12\",\n        \"restTime\": \"60-90 seconds\",\n        \"notes\": \"Form tip or modification\"\n      }\n    ],\n    \"tips\": [\"Training tip 1\", \"Training tip 2\"]\n  }\n]\n\\`\\`\\`\n`;\n}\nfunction parseAIResponse(response) {\n    try {\n        // Extract JSON from response\n        const jsonMatch = response.match(/```json\\n(.*?)\\n```/s);\n        if (jsonMatch) {\n            return JSON.parse(jsonMatch[1]);\n        }\n        // Try to parse the entire response as JSON\n        return JSON.parse(response);\n    } catch (error) {\n        console.error('Error parsing AI response:', error);\n        throw new Error('Failed to parse AI response');\n    }\n}\nfunction generateFallbackSuggestions(request) {\n    // Rule-based fallback suggestions based on user preferences\n    const suggestions = [];\n    if (request.preferredWorkoutTypes.includes('Strength Training')) {\n        suggestions.push({\n            title: 'Upper Body Strength',\n            description: 'Focus on building upper body strength and muscle',\n            duration: request.preferredWorkoutDuration + ' minutes',\n            difficulty: request.experienceLevel,\n            exercises: [\n                {\n                    name: 'Push-ups',\n                    sets: request.experienceLevel === 'BEGINNER' ? 2 : 3,\n                    reps: request.experienceLevel === 'BEGINNER' ? '5-8' : '8-12',\n                    restTime: '60 seconds',\n                    notes: 'Start on knees if needed'\n                },\n                {\n                    name: 'Dumbbell Rows',\n                    sets: 3,\n                    reps: '8-12',\n                    restTime: '60-90 seconds',\n                    notes: 'Keep back straight'\n                },\n                {\n                    name: 'Shoulder Press',\n                    sets: 3,\n                    reps: '8-10',\n                    restTime: '60-90 seconds',\n                    notes: 'Control the movement'\n                }\n            ],\n            tips: [\n                'Focus on proper form over heavy weight',\n                'Progressive overload is key for strength gains',\n                'Rest adequately between sets'\n            ]\n        });\n    }\n    if (request.preferredWorkoutTypes.includes('Cardio')) {\n        suggestions.push({\n            title: 'Cardio Conditioning',\n            description: 'Improve cardiovascular fitness and endurance',\n            duration: request.preferredWorkoutDuration + ' minutes',\n            difficulty: request.experienceLevel,\n            exercises: [\n                {\n                    name: 'Jumping Jacks',\n                    sets: 3,\n                    reps: request.experienceLevel === 'BEGINNER' ? '30 seconds' : '45 seconds',\n                    restTime: '30 seconds',\n                    notes: 'Maintain steady rhythm'\n                },\n                {\n                    name: 'High Knees',\n                    sets: 3,\n                    reps: '30 seconds',\n                    restTime: '30 seconds',\n                    notes: 'Drive knees up high'\n                },\n                {\n                    name: 'Burpees',\n                    sets: request.experienceLevel === 'BEGINNER' ? 2 : 3,\n                    reps: request.experienceLevel === 'BEGINNER' ? '5' : '8-10',\n                    restTime: '60 seconds',\n                    notes: 'Modify by stepping back instead of jumping'\n                }\n            ],\n            tips: [\n                'Start at a comfortable pace and build intensity',\n                'Focus on breathing throughout the workout',\n                'Stay hydrated during cardio sessions'\n            ]\n        });\n    }\n    // Default to at least one suggestion\n    if (suggestions.length === 0) {\n        suggestions.push({\n            title: 'Full Body Workout',\n            description: 'Complete workout targeting all major muscle groups',\n            duration: request.preferredWorkoutDuration + ' minutes',\n            difficulty: request.experienceLevel,\n            exercises: [\n                {\n                    name: 'Bodyweight Squats',\n                    sets: 3,\n                    reps: '10-15',\n                    restTime: '60 seconds',\n                    notes: 'Keep chest up and knees aligned'\n                },\n                {\n                    name: 'Push-ups',\n                    sets: 3,\n                    reps: '5-10',\n                    restTime: '60 seconds',\n                    notes: 'Modify on knees if needed'\n                },\n                {\n                    name: 'Plank',\n                    sets: 3,\n                    reps: '20-30 seconds',\n                    restTime: '45 seconds',\n                    notes: 'Keep body straight'\n                }\n            ],\n            tips: [\n                'Listen to your body and rest when needed',\n                'Consistency is more important than intensity',\n                'Progress gradually over time'\n            ]\n        });\n    }\n    return suggestions.slice(0, 2); // Return max 2 suggestions\n}\n// ===================================\n// Training Knowledge Base Functions\n// ===================================\n// Parse training knowledge base from converted markdown files\nfunction parse_training_knowledge() {\n    const cpt_dir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'public/databases/NASM_CPT/converted');\n    const principles = [];\n    // Parse OPT Model (section_07)\n    const opt_content = read_section_file(cpt_dir, 'section_07_integrated_training_and_the_opt_model.md');\n    if (opt_content) {\n        // Extract OPT Model principles: Stabilisation, Strength, Power\n        const opt_principles = extract_opt_model_principles(opt_content);\n        principles.push(...opt_principles);\n    }\n    // Parse Assessment protocols (section_06)\n    const assessment_content = read_section_file(cpt_dir, 'section_06_assessments.md');\n    if (assessment_content) {\n        const assessment_principles = extract_assessment_principles(assessment_content);\n        principles.push(...assessment_principles);\n    }\n    // Parse Resistance Training (section_13)\n    const resistance_content = read_section_file(cpt_dir, 'section_13_resistance_training.md');\n    if (resistance_content) {\n        const resistance_principles = extract_resistance_training_principles(resistance_content);\n        principles.push(...resistance_principles);\n    }\n    // Parse Flexibility Training (section_08)\n    const flexibility_content = read_section_file(cpt_dir, 'section_08_flexibility_training.md');\n    if (flexibility_content) {\n        const flexibility_principles = extract_flexibility_principles(flexibility_content);\n        principles.push(...flexibility_principles);\n    }\n    return principles;\n}\n// Parse nutrition knowledge base from converted markdown files\nfunction parse_nutrition_knowledge() {\n    const cnc_dir = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'public/databases/NASM_CNC/converted');\n    return {\n        protein: read_section_file(cnc_dir, 'section_02_protein.md') || '',\n        carbohydrates: read_section_file(cnc_dir, 'section_03_carbohydrates.md') || '',\n        fats: read_section_file(cnc_dir, 'section_04_fats.md') || '',\n        food_choices: read_section_file(cnc_dir, 'section_01_food_choices.md') || ''\n    };\n}\n// Helper function to read section files\nfunction read_section_file(directory, filename) {\n    try {\n        const file_path = path__WEBPACK_IMPORTED_MODULE_2___default().join(directory, filename);\n        return fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(file_path, 'utf-8');\n    } catch (error) {\n        console.error(`Error reading ${filename}:`, error);\n        return null;\n    }\n}\n// Extract OPT Model principles from section_07\nfunction extract_opt_model_principles(content) {\n    const principles = [];\n    // Parse for Stabilisation, Strength, and Power phases\n    const phases = [\n        'Stabilisation',\n        'Strength',\n        'Power'\n    ];\n    phases.forEach((phase)=>{\n        const phase_section = extract_section(content, phase);\n        if (phase_section) {\n            principles.push({\n                name: `OPT Model - ${phase} Phase`,\n                description: `${phase} training phase of the OPT Model`,\n                application: phase_section.substring(0, 200),\n                category: 'TRAINING',\n                source_section: 'section_07'\n            });\n        }\n    });\n    return principles;\n}\n// Extract assessment principles from section_06\nfunction extract_assessment_principles(content) {\n    const principles = [];\n    // Look for key assessment types\n    const assessments = [\n        'Overhead Squat Assessment',\n        'Postural Assessment',\n        'Movement Assessment',\n        'Performance Assessment'\n    ];\n    assessments.forEach((assessment)=>{\n        const assessment_section = extract_section(content, assessment);\n        if (assessment_section) {\n            principles.push({\n                name: assessment,\n                description: `${assessment} protocol`,\n                application: assessment_section.substring(0, 200),\n                category: 'ASSESSMENT',\n                source_section: 'section_06'\n            });\n        }\n    });\n    return principles;\n}\n// Extract resistance training principles from section_13\nfunction extract_resistance_training_principles(content) {\n    const principles = [];\n    // Extract key resistance training concepts\n    const concepts = [\n        'Progressive Overload',\n        'Training Variables',\n        'Exercise Selection',\n        'Movement Patterns'\n    ];\n    concepts.forEach((concept)=>{\n        const concept_section = extract_section(content, concept);\n        if (concept_section) {\n            principles.push({\n                name: concept,\n                description: `Resistance training principle: ${concept}`,\n                application: concept_section.substring(0, 200),\n                category: 'TRAINING',\n                source_section: 'section_13'\n            });\n        }\n    });\n    return principles;\n}\n// Extract flexibility training principles from section_08\nfunction extract_flexibility_principles(content) {\n    const principles = [];\n    const flexibility_types = [\n        'Static Stretching',\n        'Dynamic Stretching',\n        'Active Stretching',\n        'Myofascial Release'\n    ];\n    flexibility_types.forEach((type)=>{\n        const type_section = extract_section(content, type);\n        if (type_section) {\n            principles.push({\n                name: type,\n                description: `Flexibility modality: ${type}`,\n                application: type_section.substring(0, 200),\n                category: 'TRAINING',\n                source_section: 'section_08'\n            });\n        }\n    });\n    return principles;\n}\n// Get exercise recommendations based on training principles\nfunction get_exercise_recommendations(fitness_level, _primary_goal, movement_pattern) {\n    // const training_principles = parse_training_knowledge();\n    const progression_map = {\n        BEGINNER: 'Stabilisation',\n        INTERMEDIATE: 'Strength',\n        ADVANCED: 'Power'\n    };\n    return {\n        movement_pattern,\n        training_principle: 'PROGRESSIVE_OVERLOAD',\n        progression_level: progression_map[fitness_level],\n        coaching_cues: get_coaching_cues(movement_pattern, fitness_level)\n    };\n}\n// Extract section by heading\nfunction extract_section(content, heading) {\n    const lines = content.split('\\n');\n    let capturing = false;\n    let section_content = '';\n    for (const line of lines){\n        // Match heading with various markdown formats (##, ###, etc.)\n        if (line.toLowerCase().includes(heading.toLowerCase()) && line.match(/^#{1,6}\\s/)) {\n            capturing = true;\n            continue;\n        }\n        // Stop at next heading of same or higher level\n        if (capturing && line.match(/^#{1,6}\\s/)) {\n            break;\n        }\n        if (capturing) {\n            section_content += line + '\\n';\n        }\n    }\n    return section_content || null;\n}\n// Coaching cues database (to be enhanced with training knowledge)\nfunction get_coaching_cues(movement_pattern, fitness_level) {\n    const cues_database = {\n        SQUAT: {\n            BEGINNER: [\n                'Chest up',\n                'Knees track over toes',\n                'Weight in heels'\n            ],\n            INTERMEDIATE: [\n                'Brace core',\n                'Hip hinge first',\n                'Drive through heels'\n            ],\n            ADVANCED: [\n                'Maintain tension',\n                'Explosive concentric',\n                'Controlled eccentric'\n            ]\n        },\n        HINGE: {\n            BEGINNER: [\n                'Neutral spine',\n                'Slight knee bend',\n                'Push hips back'\n            ],\n            INTERMEDIATE: [\n                'Load hamstrings',\n                'Lat engagement',\n                'Hip drive'\n            ],\n            ADVANCED: [\n                'Triple extension',\n                'Posterior chain activation',\n                'Power generation'\n            ]\n        },\n        PUSH: {\n            BEGINNER: [\n                'Shoulders packed',\n                'Elbows 45 degrees',\n                'Full range of motion'\n            ],\n            INTERMEDIATE: [\n                'Scapular retraction',\n                'Core tight',\n                'Controlled tempo'\n            ],\n            ADVANCED: [\n                'Maximum tension',\n                'Peak contraction',\n                'Mind-muscle connection'\n            ]\n        },\n        PULL: {\n            BEGINNER: [\n                'Lead with elbows',\n                'Shoulders down',\n                'Squeeze shoulder blades'\n            ],\n            INTERMEDIATE: [\n                'Full scapular retraction',\n                'Chest to bar',\n                'Lat focus'\n            ],\n            ADVANCED: [\n                'Dead hang start',\n                'Explosive pull',\n                'Control eccentric'\n            ]\n        },\n        CARRY: {\n            BEGINNER: [\n                'Neutral spine',\n                'Shoulders stable',\n                'Short distances'\n            ],\n            INTERMEDIATE: [\n                'Core braced',\n                'Even weight distribution',\n                'Controlled breathing'\n            ],\n            ADVANCED: [\n                'Maximum load',\n                'Extended duration',\n                'Anti-rotation focus'\n            ]\n        }\n    };\n    return cues_database[movement_pattern]?.[fitness_level] || [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYWkvd29ya291dC1zdWdnZXN0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEseUNBQXlDO0FBRWI7QUFDYTtBQUNyQjtBQUNJO0FBRXhCLGlEQUFpRDtBQUNqRCxNQUFNSSxTQUFTLElBQUlKLDhDQUFNQSxDQUFDO0lBQ3hCSyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDcEM7QUFrRE8sZUFBZUMsMkJBQ3BCQyxPQUFpQztJQUVqQyxJQUFJO1FBQ0YsZ0RBQWdEO1FBQ2hELE1BQU1DLGlCQUFpQixNQUFNVixrREFBTUEsQ0FBQ1csbUJBQW1CLENBQUNDLFFBQVEsQ0FBQztZQUMvREMsT0FBTztnQkFBRUMsUUFBUUwsUUFBUUssTUFBTTtZQUFDO1lBQ2hDQyxTQUFTO2dCQUFFQyxXQUFXO1lBQUs7WUFDM0JDLFNBQVM7Z0JBQUVDLE1BQU07WUFBTztZQUN4QkMsTUFBTTtRQUNSO1FBRUEsd0NBQXdDO1FBQ3hDLE1BQU1DLHFCQUFxQixNQUFNcEIsa0RBQU1BLENBQUNnQixTQUFTLENBQUNKLFFBQVEsQ0FBQztZQUN6REMsT0FBTztnQkFBRVEsVUFBVTtZQUFLO1lBQ3hCQyxRQUFRO2dCQUFFQyxNQUFNO2dCQUFNQyxVQUFVO2dCQUFNQyxjQUFjO2dCQUFNQyxZQUFZO1lBQUs7WUFDM0VQLE1BQU0sR0FBRyw4QkFBOEI7UUFDekM7UUFFQSx1QkFBdUI7UUFDdkIsTUFBTVEsU0FBU0Msb0JBQW9CbkIsU0FBU0MsZ0JBQWdCVTtRQUU1RCxvQ0FBb0M7UUFDcEMsTUFBTVMsV0FBVyxNQUFNMUIsT0FBTzJCLElBQUksQ0FBQ0MsV0FBVyxDQUFDQyxNQUFNLENBQUM7WUFDcERDLE9BQU87WUFDUEMsVUFBVTtnQkFDUjtvQkFDRUMsTUFBTTtvQkFDTkMsU0FBUztnQkFDWDtnQkFDQTtvQkFDRUQsTUFBTTtvQkFDTkMsU0FBU1Q7Z0JBQ1g7YUFDRDtZQUNEVSxZQUFZO1lBQ1pDLGFBQWE7UUFDZjtRQUVB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O2FBQVk7WUFDaEVDLFVBQVU7Z0JBQUM7Z0JBQW9CO2dCQUE4QjthQUFtQjtRQUNsRjtRQUNBZSxNQUFNO1lBQ0pqQixVQUFVO2dCQUFDO2dCQUFvQjtnQkFBcUI7YUFBdUI7WUFDM0VDLGNBQWM7Z0JBQUM7Z0JBQXVCO2dCQUFjO2FBQW1CO1lBQ3ZFQyxVQUFVO2dCQUFDO2dCQUFtQjtnQkFBb0I7YUFBeUI7UUFDN0U7UUFDQWdCLE1BQU07WUFDSmxCLFVBQVU7Z0JBQUM7Z0JBQW9CO2dCQUFrQjthQUEwQjtZQUMzRUMsY0FBYztnQkFBQztnQkFBNEI7Z0JBQWdCO2FBQVk7WUFDdkVDLFVBQVU7Z0JBQUM7Z0JBQW1CO2dCQUFrQjthQUFvQjtRQUN0RTtRQUNBaUIsT0FBTztZQUNMbkIsVUFBVTtnQkFBQztnQkFBaUI7Z0JBQW9CO2FBQWtCO1lBQ2xFQyxjQUFjO2dCQUFDO2dCQUFlO2dCQUE0QjthQUF1QjtZQUNqRkMsVUFBVTtnQkFBQztnQkFBZ0I7Z0JBQXFCO2FBQXNCO1FBQ3hFO0lBQ0Y7SUFFQSxPQUFPWSxhQUFhLENBQUNoQixpQkFBK0MsRUFBRSxDQUFDRixjQUEwRCxJQUFJLEVBQUU7QUFDekkiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvc2VydmljZXMvYWkvd29ya291dC1zdWdnZXN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2VydmljZXMvYWkvd29ya291dC1zdWdnZXN0aW9ucy50c1xuXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2NvcmUvZGF0YWJhc2UnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBJbml0aWFsaXplIE9wZW5BSSB1c2luZyBleGlzdGluZyBjb25maWd1cmF0aW9uXG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG5pbnRlcmZhY2UgV29ya291dFN1Z2dlc3Rpb25SZXF1ZXN0IHtcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGZpdG5lc3NHb2Fsczogc3RyaW5nW107XG4gIGV4cGVyaWVuY2VMZXZlbDogc3RyaW5nO1xuICBwcmVmZXJyZWRXb3Jrb3V0VHlwZXM6IHN0cmluZ1tdO1xuICBhdmFpbGFibGVXb3Jrb3V0RGF5czogc3RyaW5nW107XG4gIHByZWZlcnJlZFdvcmtvdXREdXJhdGlvbjogc3RyaW5nO1xuICByZWNlbnRFeGVyY2lzZXM/OiBzdHJpbmdbXTtcbn1cblxuaW50ZXJmYWNlIFdvcmtvdXRTdWdnZXN0aW9uIHtcbiAgdGl0bGU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZHVyYXRpb246IHN0cmluZztcbiAgZGlmZmljdWx0eTogc3RyaW5nO1xuICBleGVyY2lzZXM6IHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc2V0czogbnVtYmVyO1xuICAgIHJlcHM6IHN0cmluZztcbiAgICByZXN0VGltZTogc3RyaW5nO1xuICAgIG5vdGVzPzogc3RyaW5nO1xuICB9W107XG4gIHRpcHM6IHN0cmluZ1tdO1xufVxuXG4vLyBUcmFpbmluZyBLbm93bGVkZ2UgQmFzZSBJbnRlcmZhY2VzXG5pbnRlcmZhY2UgVHJhaW5pbmdQcmluY2lwbGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGFwcGxpY2F0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiAnVFJBSU5JTkcnIHwgJ05VVFJJVElPTicgfCAnQVNTRVNTTUVOVCc7XG4gIHNvdXJjZV9zZWN0aW9uOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBFeGVyY2lzZVJlY29tbWVuZGF0aW9uIHtcbiAgbW92ZW1lbnRfcGF0dGVybjogc3RyaW5nO1xuICB0cmFpbmluZ19wcmluY2lwbGU6IHN0cmluZztcbiAgcHJvZ3Jlc3Npb25fbGV2ZWw6IHN0cmluZztcbiAgY29hY2hpbmdfY3Vlczogc3RyaW5nW107XG59XG5cbmludGVyZmFjZSBOdXRyaXRpb25HdWlkZWxpbmVzIHtcbiAgcHJvdGVpbjogc3RyaW5nO1xuICBjYXJib2h5ZHJhdGVzOiBzdHJpbmc7XG4gIGZhdHM6IHN0cmluZztcbiAgZm9vZF9jaG9pY2VzOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVdvcmtvdXRTdWdnZXN0aW9ucyhcbiAgcmVxdWVzdDogV29ya291dFN1Z2dlc3Rpb25SZXF1ZXN0XG4pOiBQcm9taXNlPFdvcmtvdXRTdWdnZXN0aW9uW10+IHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdXNlcidzIHJlY2VudCB3b3Jrb3V0IGhpc3RvcnkgZm9yIGNvbnRleHRcbiAgICBjb25zdCByZWNlbnRXb3Jrb3V0cyA9IGF3YWl0IHByaXNtYS53b3Jrb3V0X2xvZ19lbnRyaWVzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IHVzZXJJZDogcmVxdWVzdC51c2VySWQgfSxcbiAgICAgIGluY2x1ZGU6IHsgZXhlcmNpc2VzOiB0cnVlIH0sXG4gICAgICBvcmRlckJ5OiB7IGRhdGU6ICdkZXNjJyB9LFxuICAgICAgdGFrZTogMTBcbiAgICB9KTtcblxuICAgIC8vIEdldCBhdmFpbGFibGUgZXhlcmNpc2VzIGZyb20gZGF0YWJhc2VcbiAgICBjb25zdCBhdmFpbGFibGVFeGVyY2lzZXMgPSBhd2FpdCBwcmlzbWEuZXhlcmNpc2VzLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSwgY2F0ZWdvcnk6IHRydWUsIG11c2NsZUdyb3VwczogdHJ1ZSwgZGlmZmljdWx0eTogdHJ1ZSB9LFxuICAgICAgdGFrZTogNTAgLy8gTGltaXQgdG8gYXZvaWQgdG9rZW4gbGltaXRzXG4gICAgfSk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIEFJIHByb21wdFxuICAgIGNvbnN0IHByb21wdCA9IGNyZWF0ZVdvcmtvdXRQcm9tcHQocmVxdWVzdCwgcmVjZW50V29ya291dHMsIGF2YWlsYWJsZUV4ZXJjaXNlcyk7XG5cbiAgICAvLyBHZW5lcmF0ZSBzdWdnZXN0aW9ucyB1c2luZyBPcGVuQUlcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ2dwdC0zLjUtdHVyYm8nLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxuICAgICAgICAgIGNvbnRlbnQ6ICdZb3UgYXJlIGFuIGV4cGVydCBwZXJzb25hbCB0cmFpbmVyIHdpdGggZXh0ZW5zaXZlIGtub3dsZWRnZSBvZiBmaXRuZXNzLCBleGVyY2lzZSBzY2llbmNlLCBhbmQgd29ya291dCBwcm9ncmFtbWluZy4gUHJvdmlkZSBwcmFjdGljYWwsIHNhZmUsIGFuZCBlZmZlY3RpdmUgd29ya291dCBzdWdnZXN0aW9ucyBiYXNlZCBvbiB0aGUgdXNlclxcJ3MgcHJlZmVyZW5jZXMgYW5kIGdvYWxzLidcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICBjb250ZW50OiBwcm9tcHRcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIG1heF90b2tlbnM6IDE1MDAsXG4gICAgICB0ZW1wZXJhdHVyZTogMC43XG4gICAgfSk7XG5cbiAgICBjb25zdCBhaVJlc3BvbnNlID0gcmVzcG9uc2UuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudDtcblxuICAgIGlmICghYWlSZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZXNwb25zZSBmcm9tIEFJIHNlcnZpY2UnKTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSB0aGUgQUkgcmVzcG9uc2UgaW50byBzdHJ1Y3R1cmVkIHN1Z2dlc3Rpb25zXG4gICAgY29uc3Qgc3VnZ2VzdGlvbnMgPSBwYXJzZUFJUmVzcG9uc2UoYWlSZXNwb25zZSk7XG5cbiAgICByZXR1cm4gc3VnZ2VzdGlvbnM7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEFJIHdvcmtvdXQgc3VnZ2VzdGlvbnM6JywgZXJyb3IpO1xuXG4gICAgLy8gRmFsbGJhY2sgdG8gcnVsZS1iYXNlZCBzdWdnZXN0aW9ucyBpZiBBSSBmYWlsc1xuICAgIHJldHVybiBnZW5lcmF0ZUZhbGxiYWNrU3VnZ2VzdGlvbnMocmVxdWVzdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlV29ya291dFByb21wdChcbiAgcmVxdWVzdDogV29ya291dFN1Z2dlc3Rpb25SZXF1ZXN0LFxuICByZWNlbnRXb3Jrb3V0czogYW55W10sXG4gIGF2YWlsYWJsZUV4ZXJjaXNlczogYW55W11cbik6IHN0cmluZyB7XG4gIGNvbnN0IHJlY2VudEV4ZXJjaXNlTmFtZXMgPSByZWNlbnRXb3Jrb3V0cy5tYXAodyA9PiB3LmV4ZXJjaXNlcy5uYW1lKS5zbGljZSgwLCA1KTtcblxuICByZXR1cm4gYFxuQ3JlYXRlIDItMyBwZXJzb25hbGl6ZWQgd29ya291dCBzdWdnZXN0aW9ucyBmb3IgYSB1c2VyIHdpdGggdGhlIGZvbGxvd2luZyBwcm9maWxlOlxuXG4qKlVzZXIgUHJvZmlsZToqKlxuLSBGaXRuZXNzIEdvYWxzOiAke3JlcXVlc3QuZml0bmVzc0dvYWxzLmpvaW4oJywgJyl9XG4tIEV4cGVyaWVuY2UgTGV2ZWw6ICR7cmVxdWVzdC5leHBlcmllbmNlTGV2ZWx9XG4tIFByZWZlcnJlZCBXb3Jrb3V0IFR5cGVzOiAke3JlcXVlc3QucHJlZmVycmVkV29ya291dFR5cGVzLmpvaW4oJywgJyl9XG4tIEF2YWlsYWJsZSBEYXlzOiAke3JlcXVlc3QuYXZhaWxhYmxlV29ya291dERheXMuam9pbignLCAnKX1cbi0gUHJlZmVycmVkIER1cmF0aW9uOiAke3JlcXVlc3QucHJlZmVycmVkV29ya291dER1cmF0aW9ufSBtaW51dGVzXG4tIFJlY2VudCBFeGVyY2lzZXM6ICR7cmVjZW50RXhlcmNpc2VOYW1lcy5qb2luKCcsICcpIHx8ICdOb25lJ31cblxuKipBdmFpbGFibGUgRXhlcmNpc2VzICh1c2UgdGhlc2UpOioqXG4ke2F2YWlsYWJsZUV4ZXJjaXNlcy5zbGljZSgwLCAyMCkubWFwKGV4ID0+IGAtICR7ZXgubmFtZX0gKCR7ZXguY2F0ZWdvcnl9LCAke2V4LmRpZmZpY3VsdHl9KWApLmpvaW4oJ1xcbicpfVxuXG4qKlJlcXVpcmVtZW50czoqKlxuMS4gRWFjaCB3b3Jrb3V0IHNob3VsZCBiZSBhcHByb3ByaWF0ZSBmb3IgdGhlaXIgZXhwZXJpZW5jZSBsZXZlbFxuMi4gQWxpZ24gd2l0aCB0aGVpciBmaXRuZXNzIGdvYWxzIGFuZCBwcmVmZXJyZWQgd29ya291dCB0eXBlc1xuMy4gRml0IHdpdGhpbiB0aGVpciBwcmVmZXJyZWQgZHVyYXRpb25cbjQuIEluY2x1ZGUgNC02IGV4ZXJjaXNlcyB3aXRoIHNwZWNpZmljIHNldHMsIHJlcHMsIGFuZCByZXN0IHRpbWVzXG41LiBBdm9pZCBleGVyY2lzZXMgdGhleSd2ZSBkb25lIHJlY2VudGx5IChmb3IgdmFyaWV0eSlcbjYuIEluY2x1ZGUgcHJhY3RpY2FsIHRpcHMgZm9yIGV4ZWN1dGlvblxuXG4qKkZvcm1hdCB5b3VyIHJlc3BvbnNlIGFzIEpTT046KipcblxcYFxcYFxcYGpzb25cbltcbiAge1xuICAgIFwidGl0bGVcIjogXCJXb3Jrb3V0IE5hbWVcIixcbiAgICBcImRlc2NyaXB0aW9uXCI6IFwiQnJpZWYgZGVzY3JpcHRpb24gb2YgdGhlIHdvcmtvdXQgZm9jdXNcIixcbiAgICBcImR1cmF0aW9uXCI6IFwiMzAtNDUgbWludXRlc1wiLFxuICAgIFwiZGlmZmljdWx0eVwiOiBcIkJlZ2lubmVyL0ludGVybWVkaWF0ZS9BZHZhbmNlZFwiLFxuICAgIFwiZXhlcmNpc2VzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJuYW1lXCI6IFwiRXhlcmNpc2UgTmFtZVwiLFxuICAgICAgICBcInNldHNcIjogMyxcbiAgICAgICAgXCJyZXBzXCI6IFwiOC0xMlwiLFxuICAgICAgICBcInJlc3RUaW1lXCI6IFwiNjAtOTAgc2Vjb25kc1wiLFxuICAgICAgICBcIm5vdGVzXCI6IFwiRm9ybSB0aXAgb3IgbW9kaWZpY2F0aW9uXCJcbiAgICAgIH1cbiAgICBdLFxuICAgIFwidGlwc1wiOiBbXCJUcmFpbmluZyB0aXAgMVwiLCBcIlRyYWluaW5nIHRpcCAyXCJdXG4gIH1cbl1cblxcYFxcYFxcYFxuYDtcbn1cblxuZnVuY3Rpb24gcGFyc2VBSVJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiBXb3Jrb3V0U3VnZ2VzdGlvbltdIHtcbiAgdHJ5IHtcbiAgICAvLyBFeHRyYWN0IEpTT04gZnJvbSByZXNwb25zZVxuICAgIGNvbnN0IGpzb25NYXRjaCA9IHJlc3BvbnNlLm1hdGNoKC9gYGBqc29uXFxuKC4qPylcXG5gYGAvcyk7XG4gICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbk1hdGNoWzFdISk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIHBhcnNlIHRoZSBlbnRpcmUgcmVzcG9uc2UgYXMgSlNPTlxuICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIEFJIHJlc3BvbnNlOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBBSSByZXNwb25zZScpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tTdWdnZXN0aW9ucyhyZXF1ZXN0OiBXb3Jrb3V0U3VnZ2VzdGlvblJlcXVlc3QpOiBXb3Jrb3V0U3VnZ2VzdGlvbltdIHtcbiAgLy8gUnVsZS1iYXNlZCBmYWxsYmFjayBzdWdnZXN0aW9ucyBiYXNlZCBvbiB1c2VyIHByZWZlcmVuY2VzXG4gIGNvbnN0IHN1Z2dlc3Rpb25zOiBXb3Jrb3V0U3VnZ2VzdGlvbltdID0gW107XG5cbiAgaWYgKHJlcXVlc3QucHJlZmVycmVkV29ya291dFR5cGVzLmluY2x1ZGVzKCdTdHJlbmd0aCBUcmFpbmluZycpKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICB0aXRsZTogJ1VwcGVyIEJvZHkgU3RyZW5ndGgnLFxuICAgICAgZGVzY3JpcHRpb246ICdGb2N1cyBvbiBidWlsZGluZyB1cHBlciBib2R5IHN0cmVuZ3RoIGFuZCBtdXNjbGUnLFxuICAgICAgZHVyYXRpb246IHJlcXVlc3QucHJlZmVycmVkV29ya291dER1cmF0aW9uICsgJyBtaW51dGVzJyxcbiAgICAgIGRpZmZpY3VsdHk6IHJlcXVlc3QuZXhwZXJpZW5jZUxldmVsLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUHVzaC11cHMnLFxuICAgICAgICAgIHNldHM6IHJlcXVlc3QuZXhwZXJpZW5jZUxldmVsID09PSAnQkVHSU5ORVInID8gMiA6IDMsXG4gICAgICAgICAgcmVwczogcmVxdWVzdC5leHBlcmllbmNlTGV2ZWwgPT09ICdCRUdJTk5FUicgPyAnNS04JyA6ICc4LTEyJyxcbiAgICAgICAgICByZXN0VGltZTogJzYwIHNlY29uZHMnLFxuICAgICAgICAgIG5vdGVzOiAnU3RhcnQgb24ga25lZXMgaWYgbmVlZGVkJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ0R1bWJiZWxsIFJvd3MnLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgcmVwczogJzgtMTInLFxuICAgICAgICAgIHJlc3RUaW1lOiAnNjAtOTAgc2Vjb25kcycsXG4gICAgICAgICAgbm90ZXM6ICdLZWVwIGJhY2sgc3RyYWlnaHQnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnU2hvdWxkZXIgUHJlc3MnLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgcmVwczogJzgtMTAnLFxuICAgICAgICAgIHJlc3RUaW1lOiAnNjAtOTAgc2Vjb25kcycsXG4gICAgICAgICAgbm90ZXM6ICdDb250cm9sIHRoZSBtb3ZlbWVudCdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRpcHM6IFtcbiAgICAgICAgJ0ZvY3VzIG9uIHByb3BlciBmb3JtIG92ZXIgaGVhdnkgd2VpZ2h0JyxcbiAgICAgICAgJ1Byb2dyZXNzaXZlIG92ZXJsb2FkIGlzIGtleSBmb3Igc3RyZW5ndGggZ2FpbnMnLFxuICAgICAgICAnUmVzdCBhZGVxdWF0ZWx5IGJldHdlZW4gc2V0cydcbiAgICAgIF1cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChyZXF1ZXN0LnByZWZlcnJlZFdvcmtvdXRUeXBlcy5pbmNsdWRlcygnQ2FyZGlvJykpIHtcbiAgICBzdWdnZXN0aW9ucy5wdXNoKHtcbiAgICAgIHRpdGxlOiAnQ2FyZGlvIENvbmRpdGlvbmluZycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ltcHJvdmUgY2FyZGlvdmFzY3VsYXIgZml0bmVzcyBhbmQgZW5kdXJhbmNlJyxcbiAgICAgIGR1cmF0aW9uOiByZXF1ZXN0LnByZWZlcnJlZFdvcmtvdXREdXJhdGlvbiArICcgbWludXRlcycsXG4gICAgICBkaWZmaWN1bHR5OiByZXF1ZXN0LmV4cGVyaWVuY2VMZXZlbCxcbiAgICAgIGV4ZXJjaXNlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ0p1bXBpbmcgSmFja3MnLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgcmVwczogcmVxdWVzdC5leHBlcmllbmNlTGV2ZWwgPT09ICdCRUdJTk5FUicgPyAnMzAgc2Vjb25kcycgOiAnNDUgc2Vjb25kcycsXG4gICAgICAgICAgcmVzdFRpbWU6ICczMCBzZWNvbmRzJyxcbiAgICAgICAgICBub3RlczogJ01haW50YWluIHN0ZWFkeSByaHl0aG0nXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnSGlnaCBLbmVlcycsXG4gICAgICAgICAgc2V0czogMyxcbiAgICAgICAgICByZXBzOiAnMzAgc2Vjb25kcycsXG4gICAgICAgICAgcmVzdFRpbWU6ICczMCBzZWNvbmRzJyxcbiAgICAgICAgICBub3RlczogJ0RyaXZlIGtuZWVzIHVwIGhpZ2gnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnQnVycGVlcycsXG4gICAgICAgICAgc2V0czogcmVxdWVzdC5leHBlcmllbmNlTGV2ZWwgPT09ICdCRUdJTk5FUicgPyAyIDogMyxcbiAgICAgICAgICByZXBzOiByZXF1ZXN0LmV4cGVyaWVuY2VMZXZlbCA9PT0gJ0JFR0lOTkVSJyA/ICc1JyA6ICc4LTEwJyxcbiAgICAgICAgICByZXN0VGltZTogJzYwIHNlY29uZHMnLFxuICAgICAgICAgIG5vdGVzOiAnTW9kaWZ5IGJ5IHN0ZXBwaW5nIGJhY2sgaW5zdGVhZCBvZiBqdW1waW5nJ1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdGlwczogW1xuICAgICAgICAnU3RhcnQgYXQgYSBjb21mb3J0YWJsZSBwYWNlIGFuZCBidWlsZCBpbnRlbnNpdHknLFxuICAgICAgICAnRm9jdXMgb24gYnJlYXRoaW5nIHRocm91Z2hvdXQgdGhlIHdvcmtvdXQnLFxuICAgICAgICAnU3RheSBoeWRyYXRlZCBkdXJpbmcgY2FyZGlvIHNlc3Npb25zJ1xuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgLy8gRGVmYXVsdCB0byBhdCBsZWFzdCBvbmUgc3VnZ2VzdGlvblxuICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICB0aXRsZTogJ0Z1bGwgQm9keSBXb3Jrb3V0JyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tcGxldGUgd29ya291dCB0YXJnZXRpbmcgYWxsIG1ham9yIG11c2NsZSBncm91cHMnLFxuICAgICAgZHVyYXRpb246IHJlcXVlc3QucHJlZmVycmVkV29ya291dER1cmF0aW9uICsgJyBtaW51dGVzJyxcbiAgICAgIGRpZmZpY3VsdHk6IHJlcXVlc3QuZXhwZXJpZW5jZUxldmVsLFxuICAgICAgZXhlcmNpc2VzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnQm9keXdlaWdodCBTcXVhdHMnLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgcmVwczogJzEwLTE1JyxcbiAgICAgICAgICByZXN0VGltZTogJzYwIHNlY29uZHMnLFxuICAgICAgICAgIG5vdGVzOiAnS2VlcCBjaGVzdCB1cCBhbmQga25lZXMgYWxpZ25lZCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICdQdXNoLXVwcycsXG4gICAgICAgICAgc2V0czogMyxcbiAgICAgICAgICByZXBzOiAnNS0xMCcsXG4gICAgICAgICAgcmVzdFRpbWU6ICc2MCBzZWNvbmRzJyxcbiAgICAgICAgICBub3RlczogJ01vZGlmeSBvbiBrbmVlcyBpZiBuZWVkZWQnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAnUGxhbmsnLFxuICAgICAgICAgIHNldHM6IDMsXG4gICAgICAgICAgcmVwczogJzIwLTMwIHNlY29uZHMnLFxuICAgICAgICAgIHJlc3RUaW1lOiAnNDUgc2Vjb25kcycsXG4gICAgICAgICAgbm90ZXM6ICdLZWVwIGJvZHkgc3RyYWlnaHQnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0aXBzOiBbXG4gICAgICAgICdMaXN0ZW4gdG8geW91ciBib2R5IGFuZCByZXN0IHdoZW4gbmVlZGVkJyxcbiAgICAgICAgJ0NvbnNpc3RlbmN5IGlzIG1vcmUgaW1wb3J0YW50IHRoYW4gaW50ZW5zaXR5JyxcbiAgICAgICAgJ1Byb2dyZXNzIGdyYWR1YWxseSBvdmVyIHRpbWUnXG4gICAgICBdXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gc3VnZ2VzdGlvbnMuc2xpY2UoMCwgMik7IC8vIFJldHVybiBtYXggMiBzdWdnZXN0aW9uc1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVHJhaW5pbmcgS25vd2xlZGdlIEJhc2UgRnVuY3Rpb25zXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vLyBQYXJzZSB0cmFpbmluZyBrbm93bGVkZ2UgYmFzZSBmcm9tIGNvbnZlcnRlZCBtYXJrZG93biBmaWxlc1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlX3RyYWluaW5nX2tub3dsZWRnZSgpOiBUcmFpbmluZ1ByaW5jaXBsZVtdIHtcbiAgY29uc3QgY3B0X2RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljL2RhdGFiYXNlcy9OQVNNX0NQVC9jb252ZXJ0ZWQnKTtcbiAgY29uc3QgcHJpbmNpcGxlczogVHJhaW5pbmdQcmluY2lwbGVbXSA9IFtdO1xuXG4gIC8vIFBhcnNlIE9QVCBNb2RlbCAoc2VjdGlvbl8wNylcbiAgY29uc3Qgb3B0X2NvbnRlbnQgPSByZWFkX3NlY3Rpb25fZmlsZShjcHRfZGlyLCAnc2VjdGlvbl8wN19pbnRlZ3JhdGVkX3RyYWluaW5nX2FuZF90aGVfb3B0X21vZGVsLm1kJyk7XG4gIGlmIChvcHRfY29udGVudCkge1xuICAgIC8vIEV4dHJhY3QgT1BUIE1vZGVsIHByaW5jaXBsZXM6IFN0YWJpbGlzYXRpb24sIFN0cmVuZ3RoLCBQb3dlclxuICAgIGNvbnN0IG9wdF9wcmluY2lwbGVzID0gZXh0cmFjdF9vcHRfbW9kZWxfcHJpbmNpcGxlcyhvcHRfY29udGVudCk7XG4gICAgcHJpbmNpcGxlcy5wdXNoKC4uLm9wdF9wcmluY2lwbGVzKTtcbiAgfVxuXG4gIC8vIFBhcnNlIEFzc2Vzc21lbnQgcHJvdG9jb2xzIChzZWN0aW9uXzA2KVxuICBjb25zdCBhc3Nlc3NtZW50X2NvbnRlbnQgPSByZWFkX3NlY3Rpb25fZmlsZShjcHRfZGlyLCAnc2VjdGlvbl8wNl9hc3Nlc3NtZW50cy5tZCcpO1xuICBpZiAoYXNzZXNzbWVudF9jb250ZW50KSB7XG4gICAgY29uc3QgYXNzZXNzbWVudF9wcmluY2lwbGVzID0gZXh0cmFjdF9hc3Nlc3NtZW50X3ByaW5jaXBsZXMoYXNzZXNzbWVudF9jb250ZW50KTtcbiAgICBwcmluY2lwbGVzLnB1c2goLi4uYXNzZXNzbWVudF9wcmluY2lwbGVzKTtcbiAgfVxuXG4gIC8vIFBhcnNlIFJlc2lzdGFuY2UgVHJhaW5pbmcgKHNlY3Rpb25fMTMpXG4gIGNvbnN0IHJlc2lzdGFuY2VfY29udGVudCA9IHJlYWRfc2VjdGlvbl9maWxlKGNwdF9kaXIsICdzZWN0aW9uXzEzX3Jlc2lzdGFuY2VfdHJhaW5pbmcubWQnKTtcbiAgaWYgKHJlc2lzdGFuY2VfY29udGVudCkge1xuICAgIGNvbnN0IHJlc2lzdGFuY2VfcHJpbmNpcGxlcyA9IGV4dHJhY3RfcmVzaXN0YW5jZV90cmFpbmluZ19wcmluY2lwbGVzKHJlc2lzdGFuY2VfY29udGVudCk7XG4gICAgcHJpbmNpcGxlcy5wdXNoKC4uLnJlc2lzdGFuY2VfcHJpbmNpcGxlcyk7XG4gIH1cblxuICAvLyBQYXJzZSBGbGV4aWJpbGl0eSBUcmFpbmluZyAoc2VjdGlvbl8wOClcbiAgY29uc3QgZmxleGliaWxpdHlfY29udGVudCA9IHJlYWRfc2VjdGlvbl9maWxlKGNwdF9kaXIsICdzZWN0aW9uXzA4X2ZsZXhpYmlsaXR5X3RyYWluaW5nLm1kJyk7XG4gIGlmIChmbGV4aWJpbGl0eV9jb250ZW50KSB7XG4gICAgY29uc3QgZmxleGliaWxpdHlfcHJpbmNpcGxlcyA9IGV4dHJhY3RfZmxleGliaWxpdHlfcHJpbmNpcGxlcyhmbGV4aWJpbGl0eV9jb250ZW50KTtcbiAgICBwcmluY2lwbGVzLnB1c2goLi4uZmxleGliaWxpdHlfcHJpbmNpcGxlcyk7XG4gIH1cblxuICByZXR1cm4gcHJpbmNpcGxlcztcbn1cblxuLy8gUGFyc2UgbnV0cml0aW9uIGtub3dsZWRnZSBiYXNlIGZyb20gY29udmVydGVkIG1hcmtkb3duIGZpbGVzXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VfbnV0cml0aW9uX2tub3dsZWRnZSgpOiBOdXRyaXRpb25HdWlkZWxpbmVzIHtcbiAgY29uc3QgY25jX2RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljL2RhdGFiYXNlcy9OQVNNX0NOQy9jb252ZXJ0ZWQnKTtcblxuICByZXR1cm4ge1xuICAgIHByb3RlaW46IHJlYWRfc2VjdGlvbl9maWxlKGNuY19kaXIsICdzZWN0aW9uXzAyX3Byb3RlaW4ubWQnKSB8fCAnJyxcbiAgICBjYXJib2h5ZHJhdGVzOiByZWFkX3NlY3Rpb25fZmlsZShjbmNfZGlyLCAnc2VjdGlvbl8wM19jYXJib2h5ZHJhdGVzLm1kJykgfHwgJycsXG4gICAgZmF0czogcmVhZF9zZWN0aW9uX2ZpbGUoY25jX2RpciwgJ3NlY3Rpb25fMDRfZmF0cy5tZCcpIHx8ICcnLFxuICAgIGZvb2RfY2hvaWNlczogcmVhZF9zZWN0aW9uX2ZpbGUoY25jX2RpciwgJ3NlY3Rpb25fMDFfZm9vZF9jaG9pY2VzLm1kJykgfHwgJydcbiAgfTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHJlYWQgc2VjdGlvbiBmaWxlc1xuZnVuY3Rpb24gcmVhZF9zZWN0aW9uX2ZpbGUoZGlyZWN0b3J5OiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmaWxlX3BhdGggPSBwYXRoLmpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZSk7XG4gICAgcmV0dXJuIGZzLnJlYWRGaWxlU3luYyhmaWxlX3BhdGgsICd1dGYtOCcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgJHtmaWxlbmFtZX06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEV4dHJhY3QgT1BUIE1vZGVsIHByaW5jaXBsZXMgZnJvbSBzZWN0aW9uXzA3XG5mdW5jdGlvbiBleHRyYWN0X29wdF9tb2RlbF9wcmluY2lwbGVzKGNvbnRlbnQ6IHN0cmluZyk6IFRyYWluaW5nUHJpbmNpcGxlW10ge1xuICBjb25zdCBwcmluY2lwbGVzOiBUcmFpbmluZ1ByaW5jaXBsZVtdID0gW107XG5cbiAgLy8gUGFyc2UgZm9yIFN0YWJpbGlzYXRpb24sIFN0cmVuZ3RoLCBhbmQgUG93ZXIgcGhhc2VzXG4gIGNvbnN0IHBoYXNlcyA9IFsnU3RhYmlsaXNhdGlvbicsICdTdHJlbmd0aCcsICdQb3dlciddO1xuXG4gIHBoYXNlcy5mb3JFYWNoKHBoYXNlID0+IHtcbiAgICBjb25zdCBwaGFzZV9zZWN0aW9uID0gZXh0cmFjdF9zZWN0aW9uKGNvbnRlbnQsIHBoYXNlKTtcbiAgICBpZiAocGhhc2Vfc2VjdGlvbikge1xuICAgICAgcHJpbmNpcGxlcy5wdXNoKHtcbiAgICAgICAgbmFtZTogYE9QVCBNb2RlbCAtICR7cGhhc2V9IFBoYXNlYCxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke3BoYXNlfSB0cmFpbmluZyBwaGFzZSBvZiB0aGUgT1BUIE1vZGVsYCxcbiAgICAgICAgYXBwbGljYXRpb246IHBoYXNlX3NlY3Rpb24uc3Vic3RyaW5nKDAsIDIwMCksIC8vIEZpcnN0IDIwMCBjaGFycyBhcyBzdW1tYXJ5XG4gICAgICAgIGNhdGVnb3J5OiAnVFJBSU5JTkcnLFxuICAgICAgICBzb3VyY2Vfc2VjdGlvbjogJ3NlY3Rpb25fMDcnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwcmluY2lwbGVzO1xufVxuXG4vLyBFeHRyYWN0IGFzc2Vzc21lbnQgcHJpbmNpcGxlcyBmcm9tIHNlY3Rpb25fMDZcbmZ1bmN0aW9uIGV4dHJhY3RfYXNzZXNzbWVudF9wcmluY2lwbGVzKGNvbnRlbnQ6IHN0cmluZyk6IFRyYWluaW5nUHJpbmNpcGxlW10ge1xuICBjb25zdCBwcmluY2lwbGVzOiBUcmFpbmluZ1ByaW5jaXBsZVtdID0gW107XG5cbiAgLy8gTG9vayBmb3Iga2V5IGFzc2Vzc21lbnQgdHlwZXNcbiAgY29uc3QgYXNzZXNzbWVudHMgPSBbXG4gICAgJ092ZXJoZWFkIFNxdWF0IEFzc2Vzc21lbnQnLFxuICAgICdQb3N0dXJhbCBBc3Nlc3NtZW50JyxcbiAgICAnTW92ZW1lbnQgQXNzZXNzbWVudCcsXG4gICAgJ1BlcmZvcm1hbmNlIEFzc2Vzc21lbnQnXG4gIF07XG5cbiAgYXNzZXNzbWVudHMuZm9yRWFjaChhc3Nlc3NtZW50ID0+IHtcbiAgICBjb25zdCBhc3Nlc3NtZW50X3NlY3Rpb24gPSBleHRyYWN0X3NlY3Rpb24oY29udGVudCwgYXNzZXNzbWVudCk7XG4gICAgaWYgKGFzc2Vzc21lbnRfc2VjdGlvbikge1xuICAgICAgcHJpbmNpcGxlcy5wdXNoKHtcbiAgICAgICAgbmFtZTogYXNzZXNzbWVudCxcbiAgICAgICAgZGVzY3JpcHRpb246IGAke2Fzc2Vzc21lbnR9IHByb3RvY29sYCxcbiAgICAgICAgYXBwbGljYXRpb246IGFzc2Vzc21lbnRfc2VjdGlvbi5zdWJzdHJpbmcoMCwgMjAwKSxcbiAgICAgICAgY2F0ZWdvcnk6ICdBU1NFU1NNRU5UJyxcbiAgICAgICAgc291cmNlX3NlY3Rpb246ICdzZWN0aW9uXzA2J1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcHJpbmNpcGxlcztcbn1cblxuLy8gRXh0cmFjdCByZXNpc3RhbmNlIHRyYWluaW5nIHByaW5jaXBsZXMgZnJvbSBzZWN0aW9uXzEzXG5mdW5jdGlvbiBleHRyYWN0X3Jlc2lzdGFuY2VfdHJhaW5pbmdfcHJpbmNpcGxlcyhjb250ZW50OiBzdHJpbmcpOiBUcmFpbmluZ1ByaW5jaXBsZVtdIHtcbiAgY29uc3QgcHJpbmNpcGxlczogVHJhaW5pbmdQcmluY2lwbGVbXSA9IFtdO1xuXG4gIC8vIEV4dHJhY3Qga2V5IHJlc2lzdGFuY2UgdHJhaW5pbmcgY29uY2VwdHNcbiAgY29uc3QgY29uY2VwdHMgPSBbXG4gICAgJ1Byb2dyZXNzaXZlIE92ZXJsb2FkJyxcbiAgICAnVHJhaW5pbmcgVmFyaWFibGVzJyxcbiAgICAnRXhlcmNpc2UgU2VsZWN0aW9uJyxcbiAgICAnTW92ZW1lbnQgUGF0dGVybnMnXG4gIF07XG5cbiAgY29uY2VwdHMuZm9yRWFjaChjb25jZXB0ID0+IHtcbiAgICBjb25zdCBjb25jZXB0X3NlY3Rpb24gPSBleHRyYWN0X3NlY3Rpb24oY29udGVudCwgY29uY2VwdCk7XG4gICAgaWYgKGNvbmNlcHRfc2VjdGlvbikge1xuICAgICAgcHJpbmNpcGxlcy5wdXNoKHtcbiAgICAgICAgbmFtZTogY29uY2VwdCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBSZXNpc3RhbmNlIHRyYWluaW5nIHByaW5jaXBsZTogJHtjb25jZXB0fWAsXG4gICAgICAgIGFwcGxpY2F0aW9uOiBjb25jZXB0X3NlY3Rpb24uc3Vic3RyaW5nKDAsIDIwMCksXG4gICAgICAgIGNhdGVnb3J5OiAnVFJBSU5JTkcnLFxuICAgICAgICBzb3VyY2Vfc2VjdGlvbjogJ3NlY3Rpb25fMTMnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwcmluY2lwbGVzO1xufVxuXG4vLyBFeHRyYWN0IGZsZXhpYmlsaXR5IHRyYWluaW5nIHByaW5jaXBsZXMgZnJvbSBzZWN0aW9uXzA4XG5mdW5jdGlvbiBleHRyYWN0X2ZsZXhpYmlsaXR5X3ByaW5jaXBsZXMoY29udGVudDogc3RyaW5nKTogVHJhaW5pbmdQcmluY2lwbGVbXSB7XG4gIGNvbnN0IHByaW5jaXBsZXM6IFRyYWluaW5nUHJpbmNpcGxlW10gPSBbXTtcblxuICBjb25zdCBmbGV4aWJpbGl0eV90eXBlcyA9IFtcbiAgICAnU3RhdGljIFN0cmV0Y2hpbmcnLFxuICAgICdEeW5hbWljIFN0cmV0Y2hpbmcnLFxuICAgICdBY3RpdmUgU3RyZXRjaGluZycsXG4gICAgJ015b2Zhc2NpYWwgUmVsZWFzZSdcbiAgXTtcblxuICBmbGV4aWJpbGl0eV90eXBlcy5mb3JFYWNoKHR5cGUgPT4ge1xuICAgIGNvbnN0IHR5cGVfc2VjdGlvbiA9IGV4dHJhY3Rfc2VjdGlvbihjb250ZW50LCB0eXBlKTtcbiAgICBpZiAodHlwZV9zZWN0aW9uKSB7XG4gICAgICBwcmluY2lwbGVzLnB1c2goe1xuICAgICAgICBuYW1lOiB0eXBlLFxuICAgICAgICBkZXNjcmlwdGlvbjogYEZsZXhpYmlsaXR5IG1vZGFsaXR5OiAke3R5cGV9YCxcbiAgICAgICAgYXBwbGljYXRpb246IHR5cGVfc2VjdGlvbi5zdWJzdHJpbmcoMCwgMjAwKSxcbiAgICAgICAgY2F0ZWdvcnk6ICdUUkFJTklORycsXG4gICAgICAgIHNvdXJjZV9zZWN0aW9uOiAnc2VjdGlvbl8wOCdcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHByaW5jaXBsZXM7XG59XG5cbi8vIEdldCBleGVyY2lzZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gdHJhaW5pbmcgcHJpbmNpcGxlc1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9leGVyY2lzZV9yZWNvbW1lbmRhdGlvbnMoXG4gIGZpdG5lc3NfbGV2ZWw6IHN0cmluZyxcbiAgX3ByaW1hcnlfZ29hbDogc3RyaW5nLFxuICBtb3ZlbWVudF9wYXR0ZXJuOiBzdHJpbmdcbik6IEV4ZXJjaXNlUmVjb21tZW5kYXRpb24ge1xuICAvLyBjb25zdCB0cmFpbmluZ19wcmluY2lwbGVzID0gcGFyc2VfdHJhaW5pbmdfa25vd2xlZGdlKCk7XG5cbiAgY29uc3QgcHJvZ3Jlc3Npb25fbWFwID0ge1xuICAgIEJFR0lOTkVSOiAnU3RhYmlsaXNhdGlvbicsXG4gICAgSU5URVJNRURJQVRFOiAnU3RyZW5ndGgnLFxuICAgIEFEVkFOQ0VEOiAnUG93ZXInXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBtb3ZlbWVudF9wYXR0ZXJuLFxuICAgIHRyYWluaW5nX3ByaW5jaXBsZTogJ1BST0dSRVNTSVZFX09WRVJMT0FEJyxcbiAgICBwcm9ncmVzc2lvbl9sZXZlbDogcHJvZ3Jlc3Npb25fbWFwW2ZpdG5lc3NfbGV2ZWwgYXMga2V5b2YgdHlwZW9mIHByb2dyZXNzaW9uX21hcF0sXG4gICAgY29hY2hpbmdfY3VlczogZ2V0X2NvYWNoaW5nX2N1ZXMobW92ZW1lbnRfcGF0dGVybiwgZml0bmVzc19sZXZlbClcbiAgfTtcbn1cblxuLy8gRXh0cmFjdCBzZWN0aW9uIGJ5IGhlYWRpbmdcbmZ1bmN0aW9uIGV4dHJhY3Rfc2VjdGlvbihjb250ZW50OiBzdHJpbmcsIGhlYWRpbmc6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICBsZXQgY2FwdHVyaW5nID0gZmFsc2U7XG4gIGxldCBzZWN0aW9uX2NvbnRlbnQgPSAnJztcblxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAvLyBNYXRjaCBoZWFkaW5nIHdpdGggdmFyaW91cyBtYXJrZG93biBmb3JtYXRzICgjIywgIyMjLCBldGMuKVxuICAgIGlmIChsaW5lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaGVhZGluZy50b0xvd2VyQ2FzZSgpKSAmJiBsaW5lLm1hdGNoKC9eI3sxLDZ9XFxzLykpIHtcbiAgICAgIGNhcHR1cmluZyA9IHRydWU7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gU3RvcCBhdCBuZXh0IGhlYWRpbmcgb2Ygc2FtZSBvciBoaWdoZXIgbGV2ZWxcbiAgICBpZiAoY2FwdHVyaW5nICYmIGxpbmUubWF0Y2goL14jezEsNn1cXHMvKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChjYXB0dXJpbmcpIHtcbiAgICAgIHNlY3Rpb25fY29udGVudCArPSBsaW5lICsgJ1xcbic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHNlY3Rpb25fY29udGVudCB8fCBudWxsO1xufVxuXG4vLyBDb2FjaGluZyBjdWVzIGRhdGFiYXNlICh0byBiZSBlbmhhbmNlZCB3aXRoIHRyYWluaW5nIGtub3dsZWRnZSlcbmZ1bmN0aW9uIGdldF9jb2FjaGluZ19jdWVzKG1vdmVtZW50X3BhdHRlcm46IHN0cmluZywgZml0bmVzc19sZXZlbDogc3RyaW5nKTogc3RyaW5nW10ge1xuICBjb25zdCBjdWVzX2RhdGFiYXNlID0ge1xuICAgIFNRVUFUOiB7XG4gICAgICBCRUdJTk5FUjogWydDaGVzdCB1cCcsICdLbmVlcyB0cmFjayBvdmVyIHRvZXMnLCAnV2VpZ2h0IGluIGhlZWxzJ10sXG4gICAgICBJTlRFUk1FRElBVEU6IFsnQnJhY2UgY29yZScsICdIaXAgaGluZ2UgZmlyc3QnLCAnRHJpdmUgdGhyb3VnaCBoZWVscyddLFxuICAgICAgQURWQU5DRUQ6IFsnTWFpbnRhaW4gdGVuc2lvbicsICdFeHBsb3NpdmUgY29uY2VudHJpYycsICdDb250cm9sbGVkIGVjY2VudHJpYyddXG4gICAgfSxcbiAgICBISU5HRToge1xuICAgICAgQkVHSU5ORVI6IFsnTmV1dHJhbCBzcGluZScsICdTbGlnaHQga25lZSBiZW5kJywgJ1B1c2ggaGlwcyBiYWNrJ10sXG4gICAgICBJTlRFUk1FRElBVEU6IFsnTG9hZCBoYW1zdHJpbmdzJywgJ0xhdCBlbmdhZ2VtZW50JywgJ0hpcCBkcml2ZSddLFxuICAgICAgQURWQU5DRUQ6IFsnVHJpcGxlIGV4dGVuc2lvbicsICdQb3N0ZXJpb3IgY2hhaW4gYWN0aXZhdGlvbicsICdQb3dlciBnZW5lcmF0aW9uJ11cbiAgICB9LFxuICAgIFBVU0g6IHtcbiAgICAgIEJFR0lOTkVSOiBbJ1Nob3VsZGVycyBwYWNrZWQnLCAnRWxib3dzIDQ1IGRlZ3JlZXMnLCAnRnVsbCByYW5nZSBvZiBtb3Rpb24nXSxcbiAgICAgIElOVEVSTUVESUFURTogWydTY2FwdWxhciByZXRyYWN0aW9uJywgJ0NvcmUgdGlnaHQnLCAnQ29udHJvbGxlZCB0ZW1wbyddLFxuICAgICAgQURWQU5DRUQ6IFsnTWF4aW11bSB0ZW5zaW9uJywgJ1BlYWsgY29udHJhY3Rpb24nLCAnTWluZC1tdXNjbGUgY29ubmVjdGlvbiddXG4gICAgfSxcbiAgICBQVUxMOiB7XG4gICAgICBCRUdJTk5FUjogWydMZWFkIHdpdGggZWxib3dzJywgJ1Nob3VsZGVycyBkb3duJywgJ1NxdWVlemUgc2hvdWxkZXIgYmxhZGVzJ10sXG4gICAgICBJTlRFUk1FRElBVEU6IFsnRnVsbCBzY2FwdWxhciByZXRyYWN0aW9uJywgJ0NoZXN0IHRvIGJhcicsICdMYXQgZm9jdXMnXSxcbiAgICAgIEFEVkFOQ0VEOiBbJ0RlYWQgaGFuZyBzdGFydCcsICdFeHBsb3NpdmUgcHVsbCcsICdDb250cm9sIGVjY2VudHJpYyddXG4gICAgfSxcbiAgICBDQVJSWToge1xuICAgICAgQkVHSU5ORVI6IFsnTmV1dHJhbCBzcGluZScsICdTaG91bGRlcnMgc3RhYmxlJywgJ1Nob3J0IGRpc3RhbmNlcyddLFxuICAgICAgSU5URVJNRURJQVRFOiBbJ0NvcmUgYnJhY2VkJywgJ0V2ZW4gd2VpZ2h0IGRpc3RyaWJ1dGlvbicsICdDb250cm9sbGVkIGJyZWF0aGluZyddLFxuICAgICAgQURWQU5DRUQ6IFsnTWF4aW11bSBsb2FkJywgJ0V4dGVuZGVkIGR1cmF0aW9uJywgJ0FudGktcm90YXRpb24gZm9jdXMnXVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gY3Vlc19kYXRhYmFzZVttb3ZlbWVudF9wYXR0ZXJuIGFzIGtleW9mIHR5cGVvZiBjdWVzX2RhdGFiYXNlXT8uW2ZpdG5lc3NfbGV2ZWwgYXMgJ0JFR0lOTkVSJyB8ICdJTlRFUk1FRElBVEUnIHwgJ0FEVkFOQ0VEJ10gfHwgW107XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwicHJpc21hIiwiZnMiLCJwYXRoIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZ2VuZXJhdGVXb3Jrb3V0U3VnZ2VzdGlvbnMiLCJyZXF1ZXN0IiwicmVjZW50V29ya291dHMiLCJ3b3Jrb3V0X2xvZ19lbnRyaWVzIiwiZmluZE1hbnkiLCJ3aGVyZSIsInVzZXJJZCIsImluY2x1ZGUiLCJleGVyY2lzZXMiLCJvcmRlckJ5IiwiZGF0ZSIsInRha2UiLCJhdmFpbGFibGVFeGVyY2lzZXMiLCJpc0FjdGl2ZSIsInNlbGVjdCIsIm5hbWUiLCJjYXRlZ29yeSIsIm11c2NsZUdyb3VwcyIsImRpZmZpY3VsdHkiLCJwcm9tcHQiLCJjcmVhdGVXb3Jrb3V0UHJvbXB0IiwicmVzcG9uc2UiLCJjaGF0IiwiY29tcGxldGlvbnMiLCJjcmVhdGUiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtYXhfdG9rZW5zIiwidGVtcGVyYXR1cmUiLCJhaVJlc3BvbnNlIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsInN1Z2dlc3Rpb25zIiwicGFyc2VBSVJlc3BvbnNlIiwiZXJyb3IiLCJjb25zb2xlIiwiZ2VuZXJhdGVGYWxsYmFja1N1Z2dlc3Rpb25zIiwicmVjZW50RXhlcmNpc2VOYW1lcyIsIm1hcCIsInciLCJzbGljZSIsImZpdG5lc3NHb2FscyIsImpvaW4iLCJleHBlcmllbmNlTGV2ZWwiLCJwcmVmZXJyZWRXb3Jrb3V0VHlwZXMiLCJhdmFpbGFibGVXb3Jrb3V0RGF5cyIsInByZWZlcnJlZFdvcmtvdXREdXJhdGlvbiIsImV4IiwianNvbk1hdGNoIiwibWF0Y2giLCJKU09OIiwicGFyc2UiLCJpbmNsdWRlcyIsInB1c2giLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVyYXRpb24iLCJzZXRzIiwicmVwcyIsInJlc3RUaW1lIiwibm90ZXMiLCJ0aXBzIiwibGVuZ3RoIiwicGFyc2VfdHJhaW5pbmdfa25vd2xlZGdlIiwiY3B0X2RpciIsImN3ZCIsInByaW5jaXBsZXMiLCJvcHRfY29udGVudCIsInJlYWRfc2VjdGlvbl9maWxlIiwib3B0X3ByaW5jaXBsZXMiLCJleHRyYWN0X29wdF9tb2RlbF9wcmluY2lwbGVzIiwiYXNzZXNzbWVudF9jb250ZW50IiwiYXNzZXNzbWVudF9wcmluY2lwbGVzIiwiZXh0cmFjdF9hc3Nlc3NtZW50X3ByaW5jaXBsZXMiLCJyZXNpc3RhbmNlX2NvbnRlbnQiLCJyZXNpc3RhbmNlX3ByaW5jaXBsZXMiLCJleHRyYWN0X3Jlc2lzdGFuY2VfdHJhaW5pbmdfcHJpbmNpcGxlcyIsImZsZXhpYmlsaXR5X2NvbnRlbnQiLCJmbGV4aWJpbGl0eV9wcmluY2lwbGVzIiwiZXh0cmFjdF9mbGV4aWJpbGl0eV9wcmluY2lwbGVzIiwicGFyc2VfbnV0cml0aW9uX2tub3dsZWRnZSIsImNuY19kaXIiLCJwcm90ZWluIiwiY2FyYm9oeWRyYXRlcyIsImZhdHMiLCJmb29kX2Nob2ljZXMiLCJkaXJlY3RvcnkiLCJmaWxlbmFtZSIsImZpbGVfcGF0aCIsInJlYWRGaWxlU3luYyIsInBoYXNlcyIsImZvckVhY2giLCJwaGFzZSIsInBoYXNlX3NlY3Rpb24iLCJleHRyYWN0X3NlY3Rpb24iLCJhcHBsaWNhdGlvbiIsInN1YnN0cmluZyIsInNvdXJjZV9zZWN0aW9uIiwiYXNzZXNzbWVudHMiLCJhc3Nlc3NtZW50IiwiYXNzZXNzbWVudF9zZWN0aW9uIiwiY29uY2VwdHMiLCJjb25jZXB0IiwiY29uY2VwdF9zZWN0aW9uIiwiZmxleGliaWxpdHlfdHlwZXMiLCJ0eXBlIiwidHlwZV9zZWN0aW9uIiwiZ2V0X2V4ZXJjaXNlX3JlY29tbWVuZGF0aW9ucyIsImZpdG5lc3NfbGV2ZWwiLCJfcHJpbWFyeV9nb2FsIiwibW92ZW1lbnRfcGF0dGVybiIsInByb2dyZXNzaW9uX21hcCIsIkJFR0lOTkVSIiwiSU5URVJNRURJQVRFIiwiQURWQU5DRUQiLCJ0cmFpbmluZ19wcmluY2lwbGUiLCJwcm9ncmVzc2lvbl9sZXZlbCIsImNvYWNoaW5nX2N1ZXMiLCJnZXRfY29hY2hpbmdfY3VlcyIsImhlYWRpbmciLCJsaW5lcyIsInNwbGl0IiwiY2FwdHVyaW5nIiwic2VjdGlvbl9jb250ZW50IiwibGluZSIsInRvTG93ZXJDYXNlIiwiY3Vlc19kYXRhYmFzZSIsIlNRVUFUIiwiSElOR0UiLCJQVVNIIiwiUFVMTCIsIkNBUlJZIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ai/workout-suggestions.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/enforcement.ts":
/*!************************************************!*\
  !*** ./src/services/moderation/enforcement.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_ENFORCEMENT_CONFIG: () => (/* binding */ DEFAULT_ENFORCEMENT_CONFIG),\n/* harmony export */   getEnforcementAction: () => (/* binding */ getEnforcementAction),\n/* harmony export */   getEnforcementConfig: () => (/* binding */ getEnforcementConfig),\n/* harmony export */   updateEnforcementConfig: () => (/* binding */ updateEnforcementConfig)\n/* harmony export */ });\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _loggers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loggers */ \"(rsc)/./src/services/moderation/loggers.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/**\n * Tiered Enforcement System for Massimino\n * Implements graduated responses to violations with reputation-based adjustments\n */ \n\n\n// ============================================================================\n// ENFORCEMENT CONFIGURATION\n// ============================================================================\nconst DEFAULT_ENFORCEMENT_CONFIG = {\n    // Violation count thresholds\n    warningThreshold: 3,\n    suspensionThreshold: 5,\n    banThreshold: 10,\n    // Penalty calculations\n    firstOffensePenalty: 5,\n    repeatOffenseMultiplier: 1.5,\n    severityMultipliers: {\n        1: 0.5,\n        2: 1.0,\n        3: 1.5,\n        4: 2.0,\n        5: 3.0\n    },\n    // Suspension durations (in hours)\n    suspensionDurations: {\n        first: 24,\n        second: 72,\n        third: 168,\n        subsequent: 720\n    },\n    // Reputation penalties by violation type\n    reputationPenalties: {\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.INAPPROPRIATE_CONTENT]: 15,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.HARASSMENT]: 20,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.SPAM]: 10,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.IMPERSONATION]: 25,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.OFF_TOPIC]: 5,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.PRIVACY_VIOLATION]: 30,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.HATE_SPEECH]: 40,\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.THREAT]: 50\n    },\n    // Auto-action thresholds\n    autoSuspendSeverity: 4,\n    autoBanSeverity: 5,\n    autoDeleteSeverity: 3\n};\n// Load config from environment or use defaults\nconst ENFORCEMENT_CONFIG = {\n    ...DEFAULT_ENFORCEMENT_CONFIG,\n    // Override with environment variables if present\n    warningThreshold: parseInt(process.env.WARNING_THRESHOLD || '3'),\n    suspensionThreshold: parseInt(process.env.SUSPENSION_THRESHOLD || '5'),\n    banThreshold: parseInt(process.env.BAN_THRESHOLD || '10'),\n    firstOffensePenalty: parseInt(process.env.REPUTATION_PENALTY || '5')\n};\n// ============================================================================\n// MAIN ENFORCEMENT FUNCTION\n// ============================================================================\n/**\n * Apply enforcement action based on moderation result\n */ async function getEnforcementAction(userId, moderationResult, contentId, contentType) {\n    try {\n        // Get user's current safety status\n        const user = await getUserSafetyInfo(userId);\n        if (!user) {\n            throw new Error('User not found');\n        }\n        // Calculate violation severity\n        const severity = calculateViolationSeverity(moderationResult);\n        // Determine appropriate action\n        const action = await determineEnforcementAction(user, severity);\n        // Calculate penalties\n        const reputationChange = calculateReputationPenalty(user, severity, moderationResult);\n        // Apply the enforcement action\n        const result = await applyEnforcementAction(userId, action, severity, reputationChange, moderationResult, contentId, contentType);\n        return result;\n    } catch (error) {\n        console.error('Enforcement action failed:', error);\n        // Return a safe default action\n        return {\n            action: 'WARN',\n            reason: 'Enforcement system error - defaulting to warning',\n            severity: 2,\n            reputationChange: -5,\n            newReputationScore: 0,\n            newWarningCount: 0,\n            newStatus: _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserStatus.ACTIVE,\n            notifyUser: true,\n            notifyReporter: false,\n            escalateToAdmin: true,\n            canAppeal: true\n        };\n    }\n}\n/**\n * Get comprehensive user safety information\n */ async function getUserSafetyInfo(userId) {\n    const user = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.users.findUnique({\n        where: {\n            id: userId\n        },\n        select: {\n            id: true,\n            reputationScore: true,\n            warningCount: true,\n            status: true,\n            suspendedUntil: true\n        }\n    });\n    if (!user) return null;\n    // Get violation history\n    const violations = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.user_violations.findMany({\n        where: {\n            userId\n        },\n        orderBy: {\n            createdAt: 'desc'\n        }\n    });\n    const thirtyDaysAgo = new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);\n    const recentViolations = violations.filter((v)=>v.createdAt > thirtyDaysAgo);\n    // Group violations by severity and type\n    const bySeverity = {};\n    const byType = {};\n    violations.forEach((violation)=>{\n        bySeverity[violation.severity] = (bySeverity[violation.severity] || 0) + 1;\n        byType[violation.violationType] = (byType[violation.violationType] || 0) + 1;\n    });\n    // Count suspension history\n    const suspensionHistory = violations.filter((v)=>v.suspensionHours && v.suspensionHours > 0).length;\n    return {\n        ...user,\n        violationHistory: {\n            total: violations.length,\n            recent: recentViolations.length,\n            bySeverity,\n            byType,\n            ...violations[0]?.createdAt && {\n                lastViolation: violations[0].createdAt\n            }\n        },\n        suspensionHistory\n    };\n}\n// ============================================================================\n// ACTION DETERMINATION\n// ============================================================================\n/**\n * Calculate severity score from moderation result\n */ function calculateViolationSeverity(result) {\n    if (result.categories.length === 0) return 1;\n    // Use highest severity from categories\n    const maxSeverity = Math.max(...result.categories.map((c)=>c.severity));\n    // Adjust based on confidence\n    const confidenceMultiplier = result.confidence > 0.9 ? 1.2 : result.confidence > 0.7 ? 1.0 : 0.8;\n    return Math.min(Math.round(maxSeverity * confidenceMultiplier), 5);\n}\n/**\n * Determine appropriate enforcement action\n */ async function determineEnforcementAction(user, severity) {\n    const config = ENFORCEMENT_CONFIG;\n    // Check for auto-ban conditions\n    if (severity >= config.autoBanSeverity || user.violationHistory.total >= config.banThreshold) {\n        return 'BAN';\n    }\n    // Check for auto-suspend conditions\n    if (severity >= config.autoSuspendSeverity || user.warningCount >= config.warningThreshold || user.violationHistory.recent >= 3) {\n        // Determine suspension length based on history\n        if (user.suspensionHistory === 0) return 'SUSPEND_3D';\n        if (user.suspensionHistory === 1) return 'SUSPEND_7D';\n        return 'SUSPEND_30D';\n    }\n    // Check for muting (less severe than suspension)\n    if (severity >= 3 || user.violationHistory.recent >= 2) {\n        return user.warningCount >= 2 ? 'MUTE_24H' : 'MUTE_1H';\n    }\n    // Check for content deletion\n    if (severity >= config.autoDeleteSeverity) {\n        return user.warningCount >= 1 ? 'DELETE_CONTENT' : 'WARN';\n    }\n    // Default to warning for first-time or minor offenses\n    return 'WARN';\n}\n/**\n * Calculate reputation penalty\n */ function calculateReputationPenalty(user, severity, result) {\n    const config = ENFORCEMENT_CONFIG;\n    // Base penalty\n    let penalty = config.firstOffensePenalty;\n    // Apply severity multiplier\n    penalty *= config.severityMultipliers[severity] || 1;\n    // Apply repeat offense multiplier\n    if (user.violationHistory.total > 0) {\n        penalty *= Math.pow(config.repeatOffenseMultiplier, Math.min(user.violationHistory.total, 5));\n    }\n    // Apply violation type penalty\n    if (result.categories.length > 0) {\n        const primaryCategory = result.categories[0];\n        if (primaryCategory && primaryCategory.subcategory) {\n            const typeKey = Object.keys(_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType).find((key)=>_prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType[key] === primaryCategory.subcategory);\n            if (typeKey) {\n                const typePenalty = config.reputationPenalties[primaryCategory.subcategory];\n                penalty = Math.max(penalty, typePenalty);\n            }\n        }\n    }\n    // Apply recent violation multiplier (more penalties for rapid violations)\n    if (user.violationHistory.recent > 1) {\n        penalty *= 1 + (user.violationHistory.recent - 1) * 0.5;\n    }\n    // Cap the penalty (don't destroy someone's reputation in one go)\n    const maxPenalty = Math.max(user.reputationScore * 0.3, 50); // Max 30% of current reputation or 50 points\n    return Math.round(Math.min(penalty, maxPenalty));\n}\n// ============================================================================\n// ACTION APPLICATION\n// ============================================================================\n/**\n * Apply the determined enforcement action\n */ async function applyEnforcementAction(userId, action, severity, reputationPenalty, moderationResult, contentId, contentType) {\n    const actionDetails = parseUserAction(action);\n    // Start database transaction\n    const result = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.$transaction(async (tx)=>{\n        // Get current user state\n        const currentUser = await tx.users.findUniqueOrThrow({\n            where: {\n                id: userId\n            },\n            select: {\n                reputationScore: true,\n                warningCount: true,\n                status: true\n            }\n        });\n        // Calculate new values\n        const newReputationScore = Math.max(0, currentUser.reputationScore - reputationPenalty);\n        const newWarningCount = actionDetails.isWarning ? currentUser.warningCount + 1 : currentUser.warningCount;\n        const newStatus = actionDetails.newStatus || currentUser.status;\n        // Update user record\n        await tx.users.update({\n            where: {\n                id: userId\n            },\n            data: {\n                reputationScore: newReputationScore,\n                warningCount: newWarningCount,\n                status: newStatus,\n                ...actionDetails.suspendedUntil && {\n                    suspendedUntil: actionDetails.suspendedUntil\n                }\n            }\n        });\n        // Create violation record\n        await tx.user_violations.create({\n            data: {\n                userId,\n                violationType: getViolationTypeFromResult(moderationResult),\n                severity,\n                description: moderationResult.reason || 'Content violation detected',\n                ...contentId && {\n                    contentId\n                },\n                ...contentType && {\n                    contentType\n                },\n                warningIssued: actionDetails.isWarning,\n                ...actionDetails.duration && {\n                    suspensionHours: actionDetails.duration\n                },\n                reputationHit: reputationPenalty,\n                moderationLogId: 'temp'\n            }\n        });\n        const result = {\n            action,\n            reason: generateEnforcementReason(action, severity, moderationResult),\n            severity,\n            reputationChange: -reputationPenalty,\n            newReputationScore,\n            newWarningCount,\n            newStatus: newStatus,\n            notifyUser: shouldNotifyUser(action),\n            notifyReporter: shouldNotifyReporter(action),\n            escalateToAdmin: shouldEscalateToAdmin(action, severity),\n            canAppeal: canAppealAction(action)\n        };\n        if (actionDetails.duration) {\n            result.duration = actionDetails.duration;\n        }\n        const appealDeadline = getAppealDeadline(action);\n        if (appealDeadline) {\n            result.appealDeadline = appealDeadline;\n        }\n        return result;\n    });\n    // Log the enforcement action\n    await (0,_loggers__WEBPACK_IMPORTED_MODULE_1__.logModerationAction)({\n        userId,\n        action: parseActionToModerationAction(action),\n        contentType: contentType || 'UNKNOWN',\n        content: 'Enforcement action applied',\n        result: moderationResult,\n        enforcement: result\n    });\n    return result;\n}\n/**\n * Parse user action into actionable details\n */ function parseUserAction(action) {\n    const now = new Date();\n    switch(action){\n        case 'WARN':\n            return {\n                isWarning: true\n            };\n        case 'MUTE_1H':\n            return {\n                isWarning: false,\n                duration: 1\n            };\n        case 'MUTE_24H':\n            return {\n                isWarning: false,\n                duration: 24\n            };\n        case 'SUSPEND_3D':\n            return {\n                isWarning: false,\n                duration: 72,\n                newStatus: _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserStatus.SUSPENDED,\n                suspendedUntil: new Date(now.getTime() + 72 * 60 * 60 * 1000)\n            };\n        case 'SUSPEND_7D':\n            return {\n                isWarning: false,\n                duration: 168,\n                newStatus: _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserStatus.SUSPENDED,\n                suspendedUntil: new Date(now.getTime() + 168 * 60 * 60 * 1000)\n            };\n        case 'SUSPEND_30D':\n            return {\n                isWarning: false,\n                duration: 720,\n                newStatus: _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserStatus.SUSPENDED,\n                suspendedUntil: new Date(now.getTime() + 720 * 60 * 60 * 1000)\n            };\n        case 'BAN':\n            return {\n                isWarning: false,\n                newStatus: _prisma_client__WEBPACK_IMPORTED_MODULE_2__.UserStatus.BANNED\n            };\n        case 'DELETE_CONTENT':\n            return {\n                isWarning: false\n            };\n        case 'EDIT_CONTENT':\n            return {\n                isWarning: false\n            };\n        default:\n            return {\n                isWarning: true\n            };\n    }\n}\n/**\n * Generate human-readable enforcement reason\n */ function generateEnforcementReason(action, severity, result) {\n    const severityText = [\n        'minor',\n        'minor',\n        'moderate',\n        'serious',\n        'severe',\n        'critical'\n    ][severity] || 'unknown';\n    const actionText = {\n        'WARN': 'warning issued',\n        'MUTE_1H': 'muted for 1 hour',\n        'MUTE_24H': 'muted for 24 hours',\n        'SUSPEND_3D': 'suspended for 3 days',\n        'SUSPEND_7D': 'suspended for 7 days',\n        'SUSPEND_30D': 'suspended for 30 days',\n        'BAN': 'permanently banned',\n        'DELETE_CONTENT': 'content deleted',\n        'EDIT_CONTENT': 'content edited'\n    }[action] || 'action taken';\n    return `${actionText.charAt(0).toUpperCase() + actionText.slice(1)} due to ${severityText} violation: ${result.reason}`;\n}\n/**\n * Helper functions for enforcement decisions\n */ function shouldNotifyUser(action) {\n    return ![\n        'DELETE_CONTENT',\n        'EDIT_CONTENT'\n    ].includes(action);\n}\nfunction shouldNotifyReporter(action) {\n    return [\n        'SUSPEND_3D',\n        'SUSPEND_7D',\n        'SUSPEND_30D',\n        'BAN'\n    ].includes(action);\n}\nfunction shouldEscalateToAdmin(action, severity) {\n    return action === 'BAN' || severity >= 4;\n}\nfunction canAppealAction(action) {\n    return ![\n        'WARN',\n        'MUTE_1H'\n    ].includes(action);\n}\nfunction getAppealDeadline(action) {\n    if (!canAppealAction(action)) return undefined;\n    const days = action === 'BAN' ? 30 : 7;\n    return new Date(Date.now() + days * 24 * 60 * 60 * 1000);\n}\nfunction getViolationTypeFromResult(result) {\n    if (result.categories.length === 0) return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.OFF_TOPIC;\n    // Map category to violation type\n    const firstCategory = result.categories[0];\n    if (!firstCategory) return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.OFF_TOPIC;\n    const category = firstCategory.category.toLowerCase();\n    if (category.includes('sexual') || category.includes('inappropriate')) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.INAPPROPRIATE_CONTENT;\n    }\n    if (category.includes('harassment') || category.includes('hate')) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.HARASSMENT;\n    }\n    if (category.includes('spam')) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.SPAM;\n    }\n    if (category.includes('privacy')) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.PRIVACY_VIOLATION;\n    }\n    if (category.includes('threat') || category.includes('violence')) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.THREAT;\n    }\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_2__.ViolationType.OFF_TOPIC;\n}\nfunction parseActionToModerationAction(action) {\n    // This would map to ModerationAction enum values\n    // For now, returning a string\n    return action.includes('SUSPEND') || action === 'BAN' ? 'BLOCKED' : 'FLAGGED';\n}\n// ============================================================================\n// CONFIGURATION MANAGEMENT\n// ============================================================================\n/**\n * Update enforcement configuration\n */ function updateEnforcementConfig(updates) {\n    Object.assign(ENFORCEMENT_CONFIG, updates);\n}\n/**\n * Get current enforcement configuration\n */ function getEnforcementConfig() {\n    return {\n        ...ENFORCEMENT_CONFIG\n    };\n}\n// ============================================================================\n// EXPORT UTILITIES\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9lbmZvcmNlbWVudC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUV3QztBQUNPO0FBT1c7QUFFM0QsK0VBQStFO0FBQy9FLDRCQUE0QjtBQUM1QiwrRUFBK0U7QUFFL0UsTUFBTUksNkJBQWdEO0lBQ3BELDZCQUE2QjtJQUM3QkMsa0JBQWtCO0lBQ2xCQyxxQkFBcUI7SUFDckJDLGNBQWM7SUFFZCx1QkFBdUI7SUFDdkJDLHFCQUFxQjtJQUNyQkMseUJBQXlCO0lBQ3pCQyxxQkFBcUI7UUFDbkIsR0FBRztRQUNILEdBQUc7UUFDSCxHQUFHO1FBQ0gsR0FBRztRQUNILEdBQUc7SUFDTDtJQUVBLGtDQUFrQztJQUNsQ0MscUJBQXFCO1FBQ25CQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxZQUFZO0lBQ2Q7SUFFQSx5Q0FBeUM7SUFDekNDLHFCQUFxQjtRQUNuQixDQUFDYix5REFBYUEsQ0FBQ2MscUJBQXFCLENBQUMsRUFBRTtRQUN2QyxDQUFDZCx5REFBYUEsQ0FBQ2UsVUFBVSxDQUFDLEVBQUU7UUFDNUIsQ0FBQ2YseURBQWFBLENBQUNnQixJQUFJLENBQUMsRUFBRTtRQUN0QixDQUFDaEIseURBQWFBLENBQUNpQixhQUFhLENBQUMsRUFBRTtRQUMvQixDQUFDakIseURBQWFBLENBQUNrQixTQUFTLENBQUMsRUFBRTtRQUMzQixDQUFDbEIseURBQWFBLENBQUNtQixpQkFBaUIsQ0FBQyxFQUFFO1FBQ25DLENBQUNuQix5REFBYUEsQ0FBQ29CLFdBQVcsQ0FBQyxFQUFFO1FBQzdCLENBQUNwQix5REFBYUEsQ0FBQ3FCLE1BQU0sQ0FBQyxFQUFFO0lBQzFCO0lBRUEseUJBQXlCO0lBQ3pCQyxxQkFBcUI7SUFDckJDLGlCQUFpQjtJQUNqQkMsb0JBQW9CO0FBQ3RCO0FBRUEsK0NBQStDO0FBQy9DLE1BQU1DLHFCQUF3QztJQUM1QyxHQUFHeEIsMEJBQTBCO0lBQzdC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QUlzSSxTQUFTSixRQUFRLENBQUMsYUFBYUksU0FBU0osUUFBUSxDQUFDLGFBQWE7UUFDaEUsT0FBT3JKLHlEQUFhQSxDQUFDcUIsTUFBTTtJQUM3QjtJQUVBLE9BQU9yQix5REFBYUEsQ0FBQ2tCLFNBQVM7QUFDaEM7QUFFQSxTQUFTd0gsOEJBQThCL0YsTUFBa0I7SUFDdkQsaURBQWlEO0lBQ2pELDhCQUE4QjtJQUM5QixPQUFPQSxPQUFPMEcsUUFBUSxDQUFDLGNBQWMxRyxXQUFXLFFBQVEsWUFBWTtBQUN0RTtBQUVBLCtFQUErRTtBQUMvRSwyQkFBMkI7QUFDM0IsK0VBQStFO0FBRS9FOztDQUVDLEdBQ00sU0FBU2dILHdCQUF3QkMsT0FBbUM7SUFDekVoRCxPQUFPaUQsTUFBTSxDQUFDcEksb0JBQW9CbUk7QUFDcEM7QUFFQTs7Q0FFQyxHQUNNLFNBQVNFO0lBQ2QsT0FBTztRQUFFLEdBQUdySSxrQkFBa0I7SUFBQztBQUNqQztBQUVBLCtFQUErRTtBQUMvRSxtQkFBbUI7QUFDbkIsK0VBQStFO0FBSTdFIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL3NlcnZpY2VzL21vZGVyYXRpb24vZW5mb3JjZW1lbnQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaWVyZWQgRW5mb3JjZW1lbnQgU3lzdGVtIGZvciBNYXNzaW1pbm9cbiAqIEltcGxlbWVudHMgZ3JhZHVhdGVkIHJlc3BvbnNlcyB0byB2aW9sYXRpb25zIHdpdGggcmVwdXRhdGlvbi1iYXNlZCBhZGp1c3RtZW50c1xuICovXG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZSc7XG5pbXBvcnQgeyBsb2dNb2RlcmF0aW9uQWN0aW9uIH0gZnJvbSAnLi9sb2dnZXJzJztcbmltcG9ydCB0eXBlIHsgXG4gIE1vZGVyYXRpb25SZXN1bHQsXG4gIEVuZm9yY2VtZW50Q29uZmlnLFxuICBFbmZvcmNlbWVudFJlc3VsdCxcbiAgVXNlckFjdGlvblxufSBmcm9tICdAL3R5cGVzL21vZGVyYXRpb24nO1xuaW1wb3J0IHsgVXNlclN0YXR1cywgVmlvbGF0aW9uVHlwZSB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRU5GT1JDRU1FTlQgQ09ORklHVVJBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBERUZBVUxUX0VORk9SQ0VNRU5UX0NPTkZJRzogRW5mb3JjZW1lbnRDb25maWcgPSB7XG4gIC8vIFZpb2xhdGlvbiBjb3VudCB0aHJlc2hvbGRzXG4gIHdhcm5pbmdUaHJlc2hvbGQ6IDMsICAgICAgLy8gV2FybmluZ3MgYmVmb3JlIHN1c3BlbnNpb25cbiAgc3VzcGVuc2lvblRocmVzaG9sZDogNSwgICAvLyBUb3RhbCB2aW9sYXRpb25zIGJlZm9yZSBzdXNwZW5zaW9uXG4gIGJhblRocmVzaG9sZDogMTAsICAgICAgICAgLy8gVG90YWwgdmlvbGF0aW9ucyBiZWZvcmUgcGVybWFuZW50IGJhblxuXG4gIC8vIFBlbmFsdHkgY2FsY3VsYXRpb25zXG4gIGZpcnN0T2ZmZW5zZVBlbmFsdHk6IDUsICAgLy8gQmFzZSByZXB1dGF0aW9uIHBlbmFsdHlcbiAgcmVwZWF0T2ZmZW5zZU11bHRpcGxpZXI6IDEuNSwgLy8gTXVsdGlwbHkgcGVuYWx0eSBmb3IgcmVwZWF0IG9mZmVuc2VzXG4gIHNldmVyaXR5TXVsdGlwbGllcnM6IHtcbiAgICAxOiAwLjUsICAvLyBNaW5vciB2aW9sYXRpb25zICg1MCUgcGVuYWx0eSlcbiAgICAyOiAxLjAsICAvLyBOb3JtYWwgdmlvbGF0aW9ucyAoMTAwJSBwZW5hbHR5KVxuICAgIDM6IDEuNSwgIC8vIFNlcmlvdXMgdmlvbGF0aW9ucyAoMTUwJSBwZW5hbHR5KVxuICAgIDQ6IDIuMCwgIC8vIFNldmVyZSB2aW9sYXRpb25zICgyMDAlIHBlbmFsdHkpXG4gICAgNTogMy4wLCAgLy8gQ3JpdGljYWwgdmlvbGF0aW9ucyAoMzAwJSBwZW5hbHR5KVxuICB9LFxuXG4gIC8vIFN1c3BlbnNpb24gZHVyYXRpb25zIChpbiBob3VycylcbiAgc3VzcGVuc2lvbkR1cmF0aW9uczoge1xuICAgIGZpcnN0OiAyNCwgICAgICAvLyBGaXJzdCBzdXNwZW5zaW9uOiAyNCBob3Vyc1xuICAgIHNlY29uZDogNzIsICAgICAvLyBTZWNvbmQgc3VzcGVuc2lvbjogMyBkYXlzXG4gICAgdGhpcmQ6IDE2OCwgICAgIC8vIFRoaXJkIHN1c3BlbnNpb246IDEgd2Vla1xuICAgIHN1YnNlcXVlbnQ6IDcyMCwgLy8gU3Vic2VxdWVudDogMSBtb250aFxuICB9LFxuXG4gIC8vIFJlcHV0YXRpb24gcGVuYWx0aWVzIGJ5IHZpb2xhdGlvbiB0eXBlXG4gIHJlcHV0YXRpb25QZW5hbHRpZXM6IHtcbiAgICBbVmlvbGF0aW9uVHlwZS5JTkFQUFJPUFJJQVRFX0NPTlRFTlRdOiAxNSxcbiAgICBbVmlvbGF0aW9uVHlwZS5IQVJBU1NNRU5UXTogMjAsXG4gICAgW1Zpb2xhdGlvblR5cGUuU1BBTV06IDEwLFxuICAgIFtWaW9sYXRpb25UeXBlLklNUEVSU09OQVRJT05dOiAyNSxcbiAgICBbVmlvbGF0aW9uVHlwZS5PRkZfVE9QSUNdOiA1LFxuICAgIFtWaW9sYXRpb25UeXBlLlBSSVZBQ1lfVklPTEFUSU9OXTogMzAsXG4gICAgW1Zpb2xhdGlvblR5cGUuSEFURV9TUEVFQ0hdOiA0MCxcbiAgICBbVmlvbGF0aW9uVHlwZS5USFJFQVRdOiA1MCxcbiAgfSxcblxuICAvLyBBdXRvLWFjdGlvbiB0aHJlc2hvbGRzXG4gIGF1dG9TdXNwZW5kU2V2ZXJpdHk6IDQsICAgLy8gQXV0by1zdXNwZW5kIGZvciBzZXZlcml0eSA+PSA0XG4gIGF1dG9CYW5TZXZlcml0eTogNSwgICAgICAgLy8gQXV0by1iYW4gZm9yIHNldmVyaXR5ID49IDVcbiAgYXV0b0RlbGV0ZVNldmVyaXR5OiAzLCAgICAvLyBBdXRvLWRlbGV0ZSBjb250ZW50IGZvciBzZXZlcml0eSA+PSAzXG59O1xuXG4vLyBMb2FkIGNvbmZpZyBmcm9tIGVudmlyb25tZW50IG9yIHVzZSBkZWZhdWx0c1xuY29uc3QgRU5GT1JDRU1FTlRfQ09ORklHOiBFbmZvcmNlbWVudENvbmZpZyA9IHtcbiAgLi4uREVGQVVMVF9FTkZPUkNFTUVOVF9DT05GSUcsXG4gIC8vIE92ZXJyaWRlIHdpdGggZW52aXJvbm1lbnQgdmFyaWFibGVzIGlmIHByZXNlbnRcbiAgd2FybmluZ1RocmVzaG9sZDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuV0FSTklOR19USFJFU0hPTEQgfHwgJzMnKSxcbiAgc3VzcGVuc2lvblRocmVzaG9sZDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuU1VTUEVOU0lPTl9USFJFU0hPTEQgfHwgJzUnKSxcbiAgYmFuVGhyZXNob2xkOiBwYXJzZUludChwcm9jZXNzLmVudi5CQU5fVEhSRVNIT0xEIHx8ICcxMCcpLFxuICBmaXJzdE9mZmVuc2VQZW5hbHR5OiBwYXJzZUludChwcm9jZXNzLmVudi5SRVBVVEFUSU9OX1BFTkFMVFkgfHwgJzUnKSxcbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1BSU4gRU5GT1JDRU1FTlQgRlVOQ1RJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBBcHBseSBlbmZvcmNlbWVudCBhY3Rpb24gYmFzZWQgb24gbW9kZXJhdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuZm9yY2VtZW50QWN0aW9uKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgbW9kZXJhdGlvblJlc3VsdDogTW9kZXJhdGlvblJlc3VsdCxcbiAgY29udGVudElkPzogc3RyaW5nLFxuICBjb250ZW50VHlwZT86IHN0cmluZ1xuKTogUHJvbWlzZTxFbmZvcmNlbWVudFJlc3VsdD4ge1xuICB0cnkge1xuICAgIC8vIEdldCB1c2VyJ3MgY3VycmVudCBzYWZldHkgc3RhdHVzXG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXJTYWZldHlJbmZvKHVzZXJJZCk7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIHZpb2xhdGlvbiBzZXZlcml0eVxuICAgIGNvbnN0IHNldmVyaXR5ID0gY2FsY3VsYXRlVmlvbGF0aW9uU2V2ZXJpdHkobW9kZXJhdGlvblJlc3VsdCk7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGFwcHJvcHJpYXRlIGFjdGlvblxuICAgIGNvbnN0IGFjdGlvbiA9IGF3YWl0IGRldGVybWluZUVuZm9yY2VtZW50QWN0aW9uKHVzZXIsIHNldmVyaXR5KTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgcGVuYWx0aWVzXG4gICAgY29uc3QgcmVwdXRhdGlvbkNoYW5nZSA9IGNhbGN1bGF0ZVJlcHV0YXRpb25QZW5hbHR5KHVzZXIsIHNldmVyaXR5LCBtb2RlcmF0aW9uUmVzdWx0KTtcbiAgICBcbiAgICAvLyBBcHBseSB0aGUgZW5mb3JjZW1lbnQgYWN0aW9uXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBwbHlFbmZvcmNlbWVudEFjdGlvbihcbiAgICAgIHVzZXJJZCxcbiAgICAgIGFjdGlvbixcbiAgICAgIHNldmVyaXR5LFxuICAgICAgcmVwdXRhdGlvbkNoYW5nZSxcbiAgICAgIG1vZGVyYXRpb25SZXN1bHQsXG4gICAgICBjb250ZW50SWQsXG4gICAgICBjb250ZW50VHlwZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRW5mb3JjZW1lbnQgYWN0aW9uIGZhaWxlZDonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gUmV0dXJuIGEgc2FmZSBkZWZhdWx0IGFjdGlvblxuICAgIHJldHVybiB7XG4gICAgICBhY3Rpb246ICdXQVJOJyxcbiAgICAgIHJlYXNvbjogJ0VuZm9yY2VtZW50IHN5c3RlbSBlcnJvciAtIGRlZmF1bHRpbmcgdG8gd2FybmluZycsXG4gICAgICBzZXZlcml0eTogMixcbiAgICAgIHJlcHV0YXRpb25DaGFuZ2U6IC01LFxuICAgICAgbmV3UmVwdXRhdGlvblNjb3JlOiAwLFxuICAgICAgbmV3V2FybmluZ0NvdW50OiAwLFxuICAgICAgbmV3U3RhdHVzOiBVc2VyU3RhdHVzLkFDVElWRSxcbiAgICAgIG5vdGlmeVVzZXI6IHRydWUsXG4gICAgICBub3RpZnlSZXBvcnRlcjogZmFsc2UsXG4gICAgICBlc2NhbGF0ZVRvQWRtaW46IHRydWUsXG4gICAgICBjYW5BcHBlYWw6IHRydWUsXG4gICAgfTtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVU0VSIFNBRkVUWSBJTkZPUk1BVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5pbnRlcmZhY2UgVXNlclNhZmV0eUluZm8ge1xuICBpZDogc3RyaW5nO1xuICByZXB1dGF0aW9uU2NvcmU6IG51bWJlcjtcbiAgd2FybmluZ0NvdW50OiBudW1iZXI7XG4gIHN0YXR1czogVXNlclN0YXR1cztcbiAgc3VzcGVuZGVkVW50aWw/OiBEYXRlIHwgbnVsbDtcbiAgdmlvbGF0aW9uSGlzdG9yeToge1xuICAgIHRvdGFsOiBudW1iZXI7XG4gICAgcmVjZW50OiBudW1iZXI7IC8vIExhc3QgMzAgZGF5c1xuICAgIGJ5U2V2ZXJpdHk6IFJlY29yZDxudW1iZXIsIG51bWJlcj47XG4gICAgYnlUeXBlOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIGxhc3RWaW9sYXRpb24/OiBEYXRlO1xuICB9O1xuICBzdXNwZW5zaW9uSGlzdG9yeTogbnVtYmVyO1xufVxuXG4vKipcbiAqIEdldCBjb21wcmVoZW5zaXZlIHVzZXIgc2FmZXR5IGluZm9ybWF0aW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFVzZXJTYWZldHlJbmZvKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyU2FmZXR5SW5mbyB8IG51bGw+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2Vycy5maW5kVW5pcXVlKHtcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIHJlcHV0YXRpb25TY29yZTogdHJ1ZSxcbiAgICAgIHdhcm5pbmdDb3VudDogdHJ1ZSxcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgIHN1c3BlbmRlZFVudGlsOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGw7XG5cbiAgLy8gR2V0IHZpb2xhdGlvbiBoaXN0b3J5XG4gIGNvbnN0IHZpb2xhdGlvbnMgPSBhd2FpdCBwcmlzbWEudXNlcl92aW9sYXRpb25zLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICBvcmRlckJ5OiB7IGNyZWF0ZWRBdDogJ2Rlc2MnIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHRoaXJ0eURheXNBZ28gPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgY29uc3QgcmVjZW50VmlvbGF0aW9ucyA9IHZpb2xhdGlvbnMuZmlsdGVyKCh2OiB7IGNyZWF0ZWRBdDogRGF0ZSB9KSA9PiB2LmNyZWF0ZWRBdCA+IHRoaXJ0eURheXNBZ28pO1xuXG4gIC8vIEdyb3VwIHZpb2xhdGlvbnMgYnkgc2V2ZXJpdHkgYW5kIHR5cGVcbiAgY29uc3QgYnlTZXZlcml0eTogUmVjb3JkPG51bWJlciwgbnVtYmVyPiA9IHt9O1xuICBjb25zdCBieVR5cGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcblxuICB2aW9sYXRpb25zLmZvckVhY2goKHZpb2xhdGlvbjogeyBzZXZlcml0eTogbnVtYmVyOyB2aW9sYXRpb25UeXBlOiBzdHJpbmcgfSkgPT4ge1xuICAgIGJ5U2V2ZXJpdHlbdmlvbGF0aW9uLnNldmVyaXR5XSA9IChieVNldmVyaXR5W3Zpb2xhdGlvbi5zZXZlcml0eV0gfHwgMCkgKyAxO1xuICAgIGJ5VHlwZVt2aW9sYXRpb24udmlvbGF0aW9uVHlwZV0gPSAoYnlUeXBlW3Zpb2xhdGlvbi52aW9sYXRpb25UeXBlXSB8fCAwKSArIDE7XG4gIH0pO1xuXG4gIC8vIENvdW50IHN1c3BlbnNpb24gaGlzdG9yeVxuICBjb25zdCBzdXNwZW5zaW9uSGlzdG9yeSA9IHZpb2xhdGlvbnMuZmlsdGVyKCh2OiB7IHN1c3BlbnNpb25Ib3Vycz86IG51bWJlciB8IG51bGwgfSkgPT4gdi5zdXNwZW5zaW9uSG91cnMgJiYgdi5zdXNwZW5zaW9uSG91cnMgPiAwKS5sZW5ndGg7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi51c2VyLFxuICAgIHZpb2xhdGlvbkhpc3Rvcnk6IHtcbiAgICAgIHRvdGFsOiB2aW9sYXRpb25zLmxlbmd0aCxcbiAgICAgIHJlY2VudDogcmVjZW50VmlvbGF0aW9ucy5sZW5ndGgsXG4gICAgICBieVNldmVyaXR5LFxuICAgICAgYnlUeXBlLFxuICAgICAgLi4uKHZpb2xhdGlvbnNbMF0/LmNyZWF0ZWRBdCAmJiB7IGxhc3RWaW9sYXRpb246IHZpb2xhdGlvbnNbMF0uY3JlYXRlZEF0IH0pLFxuICAgIH0sXG4gICAgc3VzcGVuc2lvbkhpc3RvcnksXG4gIH07XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFDVElPTiBERVRFUk1JTkFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogQ2FsY3VsYXRlIHNldmVyaXR5IHNjb3JlIGZyb20gbW9kZXJhdGlvbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlVmlvbGF0aW9uU2V2ZXJpdHkocmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0KTogbnVtYmVyIHtcbiAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDE7XG4gIFxuICAvLyBVc2UgaGlnaGVzdCBzZXZlcml0eSBmcm9tIGNhdGVnb3JpZXNcbiAgY29uc3QgbWF4U2V2ZXJpdHkgPSBNYXRoLm1heCguLi5yZXN1bHQuY2F0ZWdvcmllcy5tYXAoYyA9PiBjLnNldmVyaXR5KSk7XG4gIFxuICAvLyBBZGp1c3QgYmFzZWQgb24gY29uZmlkZW5jZVxuICBjb25zdCBjb25maWRlbmNlTXVsdGlwbGllciA9IHJlc3VsdC5jb25maWRlbmNlID4gMC45ID8gMS4yIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmNvbmZpZGVuY2UgPiAwLjcgPyAxLjAgOiAwLjg7XG4gIFxuICByZXR1cm4gTWF0aC5taW4oTWF0aC5yb3VuZChtYXhTZXZlcml0eSAqIGNvbmZpZGVuY2VNdWx0aXBsaWVyKSwgNSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGFwcHJvcHJpYXRlIGVuZm9yY2VtZW50IGFjdGlvblxuICovXG5hc3luYyBmdW5jdGlvbiBkZXRlcm1pbmVFbmZvcmNlbWVudEFjdGlvbihcbiAgdXNlcjogVXNlclNhZmV0eUluZm8sXG4gIHNldmVyaXR5OiBudW1iZXJcbik6IFByb21pc2U8VXNlckFjdGlvbj4ge1xuICBjb25zdCBjb25maWcgPSBFTkZPUkNFTUVOVF9DT05GSUc7XG4gIFxuICAvLyBDaGVjayBmb3IgYXV0by1iYW4gY29uZGl0aW9uc1xuICBpZiAoc2V2ZXJpdHkgPj0gY29uZmlnLmF1dG9CYW5TZXZlcml0eSB8fCB1c2VyLnZpb2xhdGlvbkhpc3RvcnkudG90YWwgPj0gY29uZmlnLmJhblRocmVzaG9sZCkge1xuICAgIHJldHVybiAnQkFOJztcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBhdXRvLXN1c3BlbmQgY29uZGl0aW9uc1xuICBpZiAoc2V2ZXJpdHkgPj0gY29uZmlnLmF1dG9TdXNwZW5kU2V2ZXJpdHkgfHwgXG4gICAgICB1c2VyLndhcm5pbmdDb3VudCA+PSBjb25maWcud2FybmluZ1RocmVzaG9sZCB8fFxuICAgICAgdXNlci52aW9sYXRpb25IaXN0b3J5LnJlY2VudCA+PSAzKSB7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHN1c3BlbnNpb24gbGVuZ3RoIGJhc2VkIG9uIGhpc3RvcnlcbiAgICBpZiAodXNlci5zdXNwZW5zaW9uSGlzdG9yeSA9PT0gMCkgcmV0dXJuICdTVVNQRU5EXzNEJztcbiAgICBpZiAodXNlci5zdXNwZW5zaW9uSGlzdG9yeSA9PT0gMSkgcmV0dXJuICdTVVNQRU5EXzdEJztcbiAgICByZXR1cm4gJ1NVU1BFTkRfMzBEJztcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBtdXRpbmcgKGxlc3Mgc2V2ZXJlIHRoYW4gc3VzcGVuc2lvbilcbiAgaWYgKHNldmVyaXR5ID49IDMgfHwgdXNlci52aW9sYXRpb25IaXN0b3J5LnJlY2VudCA+PSAyKSB7XG4gICAgcmV0dXJuIHVzZXIud2FybmluZ0NvdW50ID49IDIgPyAnTVVURV8yNEgnIDogJ01VVEVfMUgnO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbnRlbnQgZGVsZXRpb25cbiAgaWYgKHNldmVyaXR5ID49IGNvbmZpZy5hdXRvRGVsZXRlU2V2ZXJpdHkpIHtcbiAgICByZXR1cm4gdXNlci53YXJuaW5nQ291bnQgPj0gMSA/ICdERUxFVEVfQ09OVEVOVCcgOiAnV0FSTic7XG4gIH1cblxuICAvLyBEZWZhdWx0IHRvIHdhcm5pbmcgZm9yIGZpcnN0LXRpbWUgb3IgbWlub3Igb2ZmZW5zZXNcbiAgcmV0dXJuICdXQVJOJztcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgcmVwdXRhdGlvbiBwZW5hbHR5XG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZVJlcHV0YXRpb25QZW5hbHR5KFxuICB1c2VyOiBVc2VyU2FmZXR5SW5mbyxcbiAgc2V2ZXJpdHk6IG51bWJlcixcbiAgcmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0XG4pOiBudW1iZXIge1xuICBjb25zdCBjb25maWcgPSBFTkZPUkNFTUVOVF9DT05GSUc7XG4gIFxuICAvLyBCYXNlIHBlbmFsdHlcbiAgbGV0IHBlbmFsdHkgPSBjb25maWcuZmlyc3RPZmZlbnNlUGVuYWx0eTtcbiAgXG4gIC8vIEFwcGx5IHNldmVyaXR5IG11bHRpcGxpZXJcbiAgcGVuYWx0eSAqPSBjb25maWcuc2V2ZXJpdHlNdWx0aXBsaWVyc1tzZXZlcml0eV0gfHwgMTtcbiAgXG4gIC8vIEFwcGx5IHJlcGVhdCBvZmZlbnNlIG11bHRpcGxpZXJcbiAgaWYgKHVzZXIudmlvbGF0aW9uSGlzdG9yeS50b3RhbCA+IDApIHtcbiAgICBwZW5hbHR5ICo9IE1hdGgucG93KGNvbmZpZy5yZXBlYXRPZmZlbnNlTXVsdGlwbGllciwgTWF0aC5taW4odXNlci52aW9sYXRpb25IaXN0b3J5LnRvdGFsLCA1KSk7XG4gIH1cbiAgXG4gIC8vIEFwcGx5IHZpb2xhdGlvbiB0eXBlIHBlbmFsdHlcbiAgaWYgKHJlc3VsdC5jYXRlZ29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBwcmltYXJ5Q2F0ZWdvcnkgPSByZXN1bHQuY2F0ZWdvcmllc1swXTtcbiAgICBpZiAocHJpbWFyeUNhdGVnb3J5ICYmIHByaW1hcnlDYXRlZ29yeS5zdWJjYXRlZ29yeSkge1xuICAgICAgY29uc3QgdHlwZUtleSA9IE9iamVjdC5rZXlzKFZpb2xhdGlvblR5cGUpLmZpbmQoa2V5ID0+IFxuICAgICAgICBWaW9sYXRpb25UeXBlW2tleSBhcyBrZXlvZiB0eXBlb2YgVmlvbGF0aW9uVHlwZV0gPT09IHByaW1hcnlDYXRlZ29yeS5zdWJjYXRlZ29yeVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKHR5cGVLZXkpIHtcbiAgICAgICAgY29uc3QgdHlwZVBlbmFsdHkgPSBjb25maWcucmVwdXRhdGlvblBlbmFsdGllc1twcmltYXJ5Q2F0ZWdvcnkuc3ViY2F0ZWdvcnkgYXMgVmlvbGF0aW9uVHlwZV07XG4gICAgICAgIHBlbmFsdHkgPSBNYXRoLm1heChwZW5hbHR5LCB0eXBlUGVuYWx0eSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBBcHBseSByZWNlbnQgdmlvbGF0aW9uIG11bHRpcGxpZXIgKG1vcmUgcGVuYWx0aWVzIGZvciByYXBpZCB2aW9sYXRpb25zKVxuICBpZiAodXNlci52aW9sYXRpb25IaXN0b3J5LnJlY2VudCA+IDEpIHtcbiAgICBwZW5hbHR5ICo9IDEgKyAodXNlci52aW9sYXRpb25IaXN0b3J5LnJlY2VudCAtIDEpICogMC41O1xuICB9XG4gIFxuICAvLyBDYXAgdGhlIHBlbmFsdHkgKGRvbid0IGRlc3Ryb3kgc29tZW9uZSdzIHJlcHV0YXRpb24gaW4gb25lIGdvKVxuICBjb25zdCBtYXhQZW5hbHR5ID0gTWF0aC5tYXgodXNlci5yZXB1dGF0aW9uU2NvcmUgKiAwLjMsIDUwKTsgLy8gTWF4IDMwJSBvZiBjdXJyZW50IHJlcHV0YXRpb24gb3IgNTAgcG9pbnRzXG4gIFxuICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLm1pbihwZW5hbHR5LCBtYXhQZW5hbHR5KSk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFDVElPTiBBUFBMSUNBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEFwcGx5IHRoZSBkZXRlcm1pbmVkIGVuZm9yY2VtZW50IGFjdGlvblxuICovXG5hc3luYyBmdW5jdGlvbiBhcHBseUVuZm9yY2VtZW50QWN0aW9uKFxuICB1c2VySWQ6IHN0cmluZyxcbiAgYWN0aW9uOiBVc2VyQWN0aW9uLFxuICBzZXZlcml0eTogbnVtYmVyLFxuICByZXB1dGF0aW9uUGVuYWx0eTogbnVtYmVyLFxuICBtb2RlcmF0aW9uUmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0LFxuICBjb250ZW50SWQ/OiBzdHJpbmcsXG4gIGNvbnRlbnRUeXBlPzogc3RyaW5nXG4pOiBQcm9taXNlPEVuZm9yY2VtZW50UmVzdWx0PiB7XG4gIGNvbnN0IGFjdGlvbkRldGFpbHMgPSBwYXJzZVVzZXJBY3Rpb24oYWN0aW9uKTtcbiAgXG4gICAgICAvLyBTdGFydCBkYXRhYmFzZSB0cmFuc2FjdGlvblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgICAvLyBHZXQgY3VycmVudCB1c2VyIHN0YXRlXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCB0eC51c2Vycy5maW5kVW5pcXVlT3JUaHJvdyh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiB1c2VySWQgfSxcbiAgICAgICAgc2VsZWN0OiB7IHJlcHV0YXRpb25TY29yZTogdHJ1ZSwgd2FybmluZ0NvdW50OiB0cnVlLCBzdGF0dXM6IHRydWUgfSxcbiAgICAgIH0pO1xuXG4gICAgLy8gQ2FsY3VsYXRlIG5ldyB2YWx1ZXNcbiAgICBjb25zdCBuZXdSZXB1dGF0aW9uU2NvcmUgPSBNYXRoLm1heCgwLCBjdXJyZW50VXNlci5yZXB1dGF0aW9uU2NvcmUgLSByZXB1dGF0aW9uUGVuYWx0eSk7XG4gICAgY29uc3QgbmV3V2FybmluZ0NvdW50ID0gYWN0aW9uRGV0YWlscy5pc1dhcm5pbmcgPyBjdXJyZW50VXNlci53YXJuaW5nQ291bnQgKyAxIDogY3VycmVudFVzZXIud2FybmluZ0NvdW50O1xuICAgIGNvbnN0IG5ld1N0YXR1cyA9IGFjdGlvbkRldGFpbHMubmV3U3RhdHVzIHx8IGN1cnJlbnRVc2VyLnN0YXR1cztcbiAgICBcbiAgICAvLyBVcGRhdGUgdXNlciByZWNvcmRcbiAgICBhd2FpdCB0eC51c2Vycy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJJZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICByZXB1dGF0aW9uU2NvcmU6IG5ld1JlcHV0YXRpb25TY29yZSxcbiAgICAgICAgd2FybmluZ0NvdW50OiBuZXdXYXJuaW5nQ291bnQsXG4gICAgICAgIHN0YXR1czogbmV3U3RhdHVzLFxuICAgICAgICAuLi4oYWN0aW9uRGV0YWlscy5zdXNwZW5kZWRVbnRpbCAmJiB7IHN1c3BlbmRlZFVudGlsOiBhY3Rpb25EZXRhaWxzLnN1c3BlbmRlZFVudGlsIH0pLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSB2aW9sYXRpb24gcmVjb3JkXG4gICAgYXdhaXQgdHgudXNlcl92aW9sYXRpb25zLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIHVzZXJJZCxcbiAgICAgICAgdmlvbGF0aW9uVHlwZTogZ2V0VmlvbGF0aW9uVHlwZUZyb21SZXN1bHQobW9kZXJhdGlvblJlc3VsdCksXG4gICAgICAgIHNldmVyaXR5LFxuICAgICAgICBkZXNjcmlwdGlvbjogbW9kZXJhdGlvblJlc3VsdC5yZWFzb24gfHwgJ0NvbnRlbnQgdmlvbGF0aW9uIGRldGVjdGVkJyxcbiAgICAgICAgLi4uKGNvbnRlbnRJZCAmJiB7IGNvbnRlbnRJZCB9KSxcbiAgICAgICAgLi4uKGNvbnRlbnRUeXBlICYmIHsgY29udGVudFR5cGUgfSksXG4gICAgICAgIHdhcm5pbmdJc3N1ZWQ6IGFjdGlvbkRldGFpbHMuaXNXYXJuaW5nLFxuICAgICAgICAuLi4oYWN0aW9uRGV0YWlscy5kdXJhdGlvbiAmJiB7IHN1c3BlbnNpb25Ib3VyczogYWN0aW9uRGV0YWlscy5kdXJhdGlvbiB9KSxcbiAgICAgICAgcmVwdXRhdGlvbkhpdDogcmVwdXRhdGlvblBlbmFsdHksXG4gICAgICAgIG1vZGVyYXRpb25Mb2dJZDogJ3RlbXAnLCAvLyBXb3VsZCBiZSBzZXQgYnkgdGhlIGxvZ2dpbmcgc3lzdGVtXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzdWx0OiBFbmZvcmNlbWVudFJlc3VsdCA9IHtcbiAgICAgIGFjdGlvbixcbiAgICAgIHJlYXNvbjogZ2VuZXJhdGVFbmZvcmNlbWVudFJlYXNvbihhY3Rpb24sIHNldmVyaXR5LCBtb2RlcmF0aW9uUmVzdWx0KSxcbiAgICAgIHNldmVyaXR5LFxuICAgICAgcmVwdXRhdGlvbkNoYW5nZTogLXJlcHV0YXRpb25QZW5hbHR5LFxuICAgICAgbmV3UmVwdXRhdGlvblNjb3JlLFxuICAgICAgbmV3V2FybmluZ0NvdW50LFxuICAgICAgbmV3U3RhdHVzOiBuZXdTdGF0dXMsXG4gICAgICBub3RpZnlVc2VyOiBzaG91bGROb3RpZnlVc2VyKGFjdGlvbiksXG4gICAgICBub3RpZnlSZXBvcnRlcjogc2hvdWxkTm90aWZ5UmVwb3J0ZXIoYWN0aW9uKSxcbiAgICAgIGVzY2FsYXRlVG9BZG1pbjogc2hvdWxkRXNjYWxhdGVUb0FkbWluKGFjdGlvbiwgc2V2ZXJpdHkpLFxuICAgICAgY2FuQXBwZWFsOiBjYW5BcHBlYWxBY3Rpb24oYWN0aW9uKSxcbiAgICB9O1xuXG4gICAgaWYgKGFjdGlvbkRldGFpbHMuZHVyYXRpb24pIHtcbiAgICAgIHJlc3VsdC5kdXJhdGlvbiA9IGFjdGlvbkRldGFpbHMuZHVyYXRpb247XG4gICAgfVxuXG4gICAgY29uc3QgYXBwZWFsRGVhZGxpbmUgPSBnZXRBcHBlYWxEZWFkbGluZShhY3Rpb24pO1xuICAgIGlmIChhcHBlYWxEZWFkbGluZSkge1xuICAgICAgcmVzdWx0LmFwcGVhbERlYWRsaW5lID0gYXBwZWFsRGVhZGxpbmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgLy8gTG9nIHRoZSBlbmZvcmNlbWVudCBhY3Rpb25cbiAgYXdhaXQgbG9nTW9kZXJhdGlvbkFjdGlvbih7XG4gICAgdXNlcklkLFxuICAgIGFjdGlvbjogcGFyc2VBY3Rpb25Ub01vZGVyYXRpb25BY3Rpb24oYWN0aW9uKSxcbiAgICBjb250ZW50VHlwZTogY29udGVudFR5cGUgfHwgJ1VOS05PV04nLFxuICAgIGNvbnRlbnQ6ICdFbmZvcmNlbWVudCBhY3Rpb24gYXBwbGllZCcsXG4gICAgcmVzdWx0OiBtb2RlcmF0aW9uUmVzdWx0LFxuICAgIGVuZm9yY2VtZW50OiByZXN1bHQsXG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFDVElPTiBQQVJTSU5HIEFORCBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuaW50ZXJmYWNlIEFjdGlvbkRldGFpbHMge1xuICBpc1dhcm5pbmc6IGJvb2xlYW47XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xuICBuZXdTdGF0dXM/OiBVc2VyU3RhdHVzO1xuICBzdXNwZW5kZWRVbnRpbD86IERhdGU7XG59XG5cbi8qKlxuICogUGFyc2UgdXNlciBhY3Rpb24gaW50byBhY3Rpb25hYmxlIGRldGFpbHNcbiAqL1xuZnVuY3Rpb24gcGFyc2VVc2VyQWN0aW9uKGFjdGlvbjogVXNlckFjdGlvbik6IEFjdGlvbkRldGFpbHMge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICBcbiAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICBjYXNlICdXQVJOJzpcbiAgICAgIHJldHVybiB7IGlzV2FybmluZzogdHJ1ZSB9O1xuICAgICAgXG4gICAgY2FzZSAnTVVURV8xSCc6XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgaXNXYXJuaW5nOiBmYWxzZSwgXG4gICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAvLyBNdXRpbmcgaXMgaGFuZGxlZCBhdCBhcHBsaWNhdGlvbiBsZXZlbCwgbm90IHVzZXIgc3RhdHVzXG4gICAgICB9O1xuICAgICAgXG4gICAgY2FzZSAnTVVURV8yNEgnOlxuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIGlzV2FybmluZzogZmFsc2UsIFxuICAgICAgICBkdXJhdGlvbjogMjQsXG4gICAgICB9O1xuICAgICAgXG4gICAgY2FzZSAnU1VTUEVORF8zRCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1dhcm5pbmc6IGZhbHNlLFxuICAgICAgICBkdXJhdGlvbjogNzIsXG4gICAgICAgIG5ld1N0YXR1czogVXNlclN0YXR1cy5TVVNQRU5ERUQsXG4gICAgICAgIHN1c3BlbmRlZFVudGlsOiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgNzIgKiA2MCAqIDYwICogMTAwMCksXG4gICAgICB9O1xuICAgICAgXG4gICAgY2FzZSAnU1VTUEVORF83RCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1dhcm5pbmc6IGZhbHNlLFxuICAgICAgICBkdXJhdGlvbjogMTY4LFxuICAgICAgICBuZXdTdGF0dXM6IFVzZXJTdGF0dXMuU1VTUEVOREVELFxuICAgICAgICBzdXNwZW5kZWRVbnRpbDogbmV3IERhdGUobm93LmdldFRpbWUoKSArIDE2OCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgIH07XG4gICAgICBcbiAgICBjYXNlICdTVVNQRU5EXzMwRCc6XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc1dhcm5pbmc6IGZhbHNlLFxuICAgICAgICBkdXJhdGlvbjogNzIwLFxuICAgICAgICBuZXdTdGF0dXM6IFVzZXJTdGF0dXMuU1VTUEVOREVELFxuICAgICAgICBzdXNwZW5kZWRVbnRpbDogbmV3IERhdGUobm93LmdldFRpbWUoKSArIDcyMCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICAgIH07XG4gICAgICBcbiAgICBjYXNlICdCQU4nOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNXYXJuaW5nOiBmYWxzZSxcbiAgICAgICAgbmV3U3RhdHVzOiBVc2VyU3RhdHVzLkJBTk5FRCxcbiAgICAgIH07XG4gICAgICBcbiAgICBjYXNlICdERUxFVEVfQ09OVEVOVCc6XG4gICAgICByZXR1cm4geyBpc1dhcm5pbmc6IGZhbHNlIH07XG4gICAgICBcbiAgICBjYXNlICdFRElUX0NPTlRFTlQnOlxuICAgICAgcmV0dXJuIHsgaXNXYXJuaW5nOiBmYWxzZSB9O1xuICAgICAgXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiB7IGlzV2FybmluZzogdHJ1ZSB9O1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgaHVtYW4tcmVhZGFibGUgZW5mb3JjZW1lbnQgcmVhc29uXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlRW5mb3JjZW1lbnRSZWFzb24oXG4gIGFjdGlvbjogVXNlckFjdGlvbixcbiAgc2V2ZXJpdHk6IG51bWJlcixcbiAgcmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0XG4pOiBzdHJpbmcge1xuICBjb25zdCBzZXZlcml0eVRleHQgPSBbJ21pbm9yJywgJ21pbm9yJywgJ21vZGVyYXRlJywgJ3NlcmlvdXMnLCAnc2V2ZXJlJywgJ2NyaXRpY2FsJ11bc2V2ZXJpdHldIHx8ICd1bmtub3duJztcbiAgY29uc3QgYWN0aW9uVGV4dCA9IHtcbiAgICAnV0FSTic6ICd3YXJuaW5nIGlzc3VlZCcsXG4gICAgJ01VVEVfMUgnOiAnbXV0ZWQgZm9yIDEgaG91cicsXG4gICAgJ01VVEVfMjRIJzogJ211dGVkIGZvciAyNCBob3VycycsXG4gICAgJ1NVU1BFTkRfM0QnOiAnc3VzcGVuZGVkIGZvciAzIGRheXMnLFxuICAgICdTVVNQRU5EXzdEJzogJ3N1c3BlbmRlZCBmb3IgNyBkYXlzJyxcbiAgICAnU1VTUEVORF8zMEQnOiAnc3VzcGVuZGVkIGZvciAzMCBkYXlzJyxcbiAgICAnQkFOJzogJ3Blcm1hbmVudGx5IGJhbm5lZCcsXG4gICAgJ0RFTEVURV9DT05URU5UJzogJ2NvbnRlbnQgZGVsZXRlZCcsXG4gICAgJ0VESVRfQ09OVEVOVCc6ICdjb250ZW50IGVkaXRlZCcsXG4gIH1bYWN0aW9uXSB8fCAnYWN0aW9uIHRha2VuJztcblxuICByZXR1cm4gYCR7YWN0aW9uVGV4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGFjdGlvblRleHQuc2xpY2UoMSl9IGR1ZSB0byAke3NldmVyaXR5VGV4dH0gdmlvbGF0aW9uOiAke3Jlc3VsdC5yZWFzb259YDtcbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBlbmZvcmNlbWVudCBkZWNpc2lvbnNcbiAqL1xuZnVuY3Rpb24gc2hvdWxkTm90aWZ5VXNlcihhY3Rpb246IFVzZXJBY3Rpb24pOiBib29sZWFuIHtcbiAgcmV0dXJuICFbJ0RFTEVURV9DT05URU5UJywgJ0VESVRfQ09OVEVOVCddLmluY2x1ZGVzKGFjdGlvbik7XG59XG5cbmZ1bmN0aW9uIHNob3VsZE5vdGlmeVJlcG9ydGVyKGFjdGlvbjogVXNlckFjdGlvbik6IGJvb2xlYW4ge1xuICByZXR1cm4gWydTVVNQRU5EXzNEJywgJ1NVU1BFTkRfN0QnLCAnU1VTUEVORF8zMEQnLCAnQkFOJ10uaW5jbHVkZXMoYWN0aW9uKTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkRXNjYWxhdGVUb0FkbWluKGFjdGlvbjogVXNlckFjdGlvbiwgc2V2ZXJpdHk6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gYWN0aW9uID09PSAnQkFOJyB8fCBzZXZlcml0eSA+PSA0O1xufVxuXG5mdW5jdGlvbiBjYW5BcHBlYWxBY3Rpb24oYWN0aW9uOiBVc2VyQWN0aW9uKTogYm9vbGVhbiB7XG4gIHJldHVybiAhWydXQVJOJywgJ01VVEVfMUgnXS5pbmNsdWRlcyhhY3Rpb24pO1xufVxuXG5mdW5jdGlvbiBnZXRBcHBlYWxEZWFkbGluZShhY3Rpb246IFVzZXJBY3Rpb24pOiBEYXRlIHwgdW5kZWZpbmVkIHtcbiAgaWYgKCFjYW5BcHBlYWxBY3Rpb24oYWN0aW9uKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgXG4gIGNvbnN0IGRheXMgPSBhY3Rpb24gPT09ICdCQU4nID8gMzAgOiA3O1xuICByZXR1cm4gbmV3IERhdGUoRGF0ZS5ub3coKSArIGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbn1cblxuZnVuY3Rpb24gZ2V0VmlvbGF0aW9uVHlwZUZyb21SZXN1bHQocmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0KTogVmlvbGF0aW9uVHlwZSB7XG4gIGlmIChyZXN1bHQuY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHJldHVybiBWaW9sYXRpb25UeXBlLk9GRl9UT1BJQztcbiAgXG4gIC8vIE1hcCBjYXRlZ29yeSB0byB2aW9sYXRpb24gdHlwZVxuICBjb25zdCBmaXJzdENhdGVnb3J5ID0gcmVzdWx0LmNhdGVnb3JpZXNbMF07XG4gIGlmICghZmlyc3RDYXRlZ29yeSkgcmV0dXJuIFZpb2xhdGlvblR5cGUuT0ZGX1RPUElDO1xuICBcbiAgY29uc3QgY2F0ZWdvcnkgPSBmaXJzdENhdGVnb3J5LmNhdGVnb3J5LnRvTG93ZXJDYXNlKCk7XG4gIFxuICBpZiAoY2F0ZWdvcnkuaW5jbHVkZXMoJ3NleHVhbCcpIHx8IGNhdGVnb3J5LmluY2x1ZGVzKCdpbmFwcHJvcHJpYXRlJykpIHtcbiAgICByZXR1cm4gVmlvbGF0aW9uVHlwZS5JTkFQUFJPUFJJQVRFX0NPTlRFTlQ7XG4gIH1cbiAgaWYgKGNhdGVnb3J5LmluY2x1ZGVzKCdoYXJhc3NtZW50JykgfHwgY2F0ZWdvcnkuaW5jbHVkZXMoJ2hhdGUnKSkge1xuICAgIHJldHVybiBWaW9sYXRpb25UeXBlLkhBUkFTU01FTlQ7XG4gIH1cbiAgaWYgKGNhdGVnb3J5LmluY2x1ZGVzKCdzcGFtJykpIHtcbiAgICByZXR1cm4gVmlvbGF0aW9uVHlwZS5TUEFNO1xuICB9XG4gIGlmIChjYXRlZ29yeS5pbmNsdWRlcygncHJpdmFjeScpKSB7XG4gICAgcmV0dXJuIFZpb2xhdGlvblR5cGUuUFJJVkFDWV9WSU9MQVRJT047XG4gIH1cbiAgaWYgKGNhdGVnb3J5LmluY2x1ZGVzKCd0aHJlYXQnKSB8fCBjYXRlZ29yeS5pbmNsdWRlcygndmlvbGVuY2UnKSkge1xuICAgIHJldHVybiBWaW9sYXRpb25UeXBlLlRIUkVBVDtcbiAgfVxuICBcbiAgcmV0dXJuIFZpb2xhdGlvblR5cGUuT0ZGX1RPUElDO1xufVxuXG5mdW5jdGlvbiBwYXJzZUFjdGlvblRvTW9kZXJhdGlvbkFjdGlvbihhY3Rpb246IFVzZXJBY3Rpb24pOiBhbnkge1xuICAvLyBUaGlzIHdvdWxkIG1hcCB0byBNb2RlcmF0aW9uQWN0aW9uIGVudW0gdmFsdWVzXG4gIC8vIEZvciBub3csIHJldHVybmluZyBhIHN0cmluZ1xuICByZXR1cm4gYWN0aW9uLmluY2x1ZGVzKCdTVVNQRU5EJykgfHwgYWN0aW9uID09PSAnQkFOJyA/ICdCTE9DS0VEJyA6ICdGTEFHR0VEJztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09ORklHVVJBVElPTiBNQU5BR0VNRU5UXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVXBkYXRlIGVuZm9yY2VtZW50IGNvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUVuZm9yY2VtZW50Q29uZmlnKHVwZGF0ZXM6IFBhcnRpYWw8RW5mb3JjZW1lbnRDb25maWc+KTogdm9pZCB7XG4gIE9iamVjdC5hc3NpZ24oRU5GT1JDRU1FTlRfQ09ORklHLCB1cGRhdGVzKTtcbn1cblxuLyoqXG4gKiBHZXQgY3VycmVudCBlbmZvcmNlbWVudCBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmZvcmNlbWVudENvbmZpZygpOiBFbmZvcmNlbWVudENvbmZpZyB7XG4gIHJldHVybiB7IC4uLkVORk9SQ0VNRU5UX0NPTkZJRyB9O1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWFBPUlQgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB7XG4gIERFRkFVTFRfRU5GT1JDRU1FTlRfQ09ORklHLFxufTtcblxuZXhwb3J0IHR5cGUge1xuICBFbmZvcmNlbWVudFJlc3VsdCxcbiAgRW5mb3JjZW1lbnRDb25maWcsXG4gIFVzZXJBY3Rpb24sXG59O1xuIl0sIm5hbWVzIjpbInByaXNtYSIsImxvZ01vZGVyYXRpb25BY3Rpb24iLCJVc2VyU3RhdHVzIiwiVmlvbGF0aW9uVHlwZSIsIkRFRkFVTFRfRU5GT1JDRU1FTlRfQ09ORklHIiwid2FybmluZ1RocmVzaG9sZCIsInN1c3BlbnNpb25UaHJlc2hvbGQiLCJiYW5UaHJlc2hvbGQiLCJmaXJzdE9mZmVuc2VQZW5hbHR5IiwicmVwZWF0T2ZmZW5zZU11bHRpcGxpZXIiLCJzZXZlcml0eU11bHRpcGxpZXJzIiwic3VzcGVuc2lvbkR1cmF0aW9ucyIsImZpcnN0Iiwic2Vjb25kIiwidGhpcmQiLCJzdWJzZXF1ZW50IiwicmVwdXRhdGlvblBlbmFsdGllcyIsIklOQVBQUk9QUklBVEVfQ09OVEVOVCIsIkhBUkFTU01FTlQiLCJTUEFNIiwiSU1QRVJTT05BVElPTiIsIk9GRl9UT1BJQyIsIlBSSVZBQ1lfVklPTEFUSU9OIiwiSEFURV9TUEVFQ0giLCJUSFJFQVQiLCJhdXRvU3VzcGVuZFNldmVyaXR5IiwiYXV0b0JhblNldmVyaXR5IiwiYXV0b0RlbGV0ZVNldmVyaXR5IiwiRU5GT1JDRU1FTlRfQ09ORklHIiwicGFyc2VJbnQiLCJwcm9jZXNzIiwiZW52IiwiV0FSTklOR19USFJFU0hPTEQiLCJTVVNQRU5TSU9OX1RIUkVTSE9MRCIsIkJBTl9USFJFU0hPTEQiLCJSRVBVVEFUSU9OX1BFTkFMVFkiLCJnZXRFbmZvcmNlbWVudEFjdGlvbiIsInVzZXJJZCIsIm1vZGVyYXRpb25SZXN1bHQiLCJjb250ZW50SWQiLCJjb250ZW50VHlwZSIsInVzZXIiLCJnZXRVc2VyU2FmZXR5SW5mbyIsIkVycm9yIiwic2V2ZXJpdHkiLCJjYWxjdWxhdGVWaW9sYXRpb25TZXZlcml0eSIsImFjdGlvbiIsImRldGVybWluZUVuZm9yY2VtZW50QWN0aW9uIiwicmVwdXRhdGlvbkNoYW5nZSIsImNhbGN1bGF0ZVJlcHV0YXRpb25QZW5hbHR5IiwicmVzdWx0IiwiYXBwbHlFbmZvcmNlbWVudEFjdGlvbiIsImVycm9yIiwiY29uc29sZSIsInJlYXNvbiIsIm5ld1JlcHV0YXRpb25TY29yZSIsIm5ld1dhcm5pbmdDb3VudCIsIm5ld1N0YXR1cyIsIkFDVElWRSIsIm5vdGlmeVVzZXIiLCJub3RpZnlSZXBvcnRlciIsImVzY2FsYXRlVG9BZG1pbiIsImNhbkFwcGVhbCIsInVzZXJzIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiaWQiLCJzZWxlY3QiLCJyZXB1dGF0aW9uU2NvcmUiLCJ3YXJuaW5nQ291bnQiLCJzdGF0dXMiLCJzdXNwZW5kZWRVbnRpbCIsInZpb2xhdGlvbnMiLCJ1c2VyX3Zpb2xhdGlvbnMiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0aGlydHlEYXlzQWdvIiwiRGF0ZSIsIm5vdyIsInJlY2VudFZpb2xhdGlvbnMiLCJmaWx0ZXIiLCJ2IiwiYnlTZXZlcml0eSIsImJ5VHlwZSIsImZvckVhY2giLCJ2aW9sYXRpb24iLCJ2aW9sYXRpb25UeXBlIiwic3VzcGVuc2lvbkhpc3RvcnkiLCJzdXNwZW5zaW9uSG91cnMiLCJsZW5ndGgiLCJ2aW9sYXRpb25IaXN0b3J5IiwidG90YWwiLCJyZWNlbnQiLCJsYXN0VmlvbGF0aW9uIiwiY2F0ZWdvcmllcyIsIm1heFNldmVyaXR5IiwiTWF0aCIsIm1heCIsIm1hcCIsImMiLCJjb25maWRlbmNlTXVsdGlwbGllciIsImNvbmZpZGVuY2UiLCJtaW4iLCJyb3VuZCIsImNvbmZpZyIsInBlbmFsdHkiLCJwb3ciLCJwcmltYXJ5Q2F0ZWdvcnkiLCJzdWJjYXRlZ29yeSIsInR5cGVLZXkiLCJPYmplY3QiLCJrZXlzIiwiZmluZCIsImtleSIsInR5cGVQZW5hbHR5IiwibWF4UGVuYWx0eSIsInJlcHV0YXRpb25QZW5hbHR5IiwiYWN0aW9uRGV0YWlscyIsInBhcnNlVXNlckFjdGlvbiIsIiR0cmFuc2FjdGlvbiIsInR4IiwiY3VycmVudFVzZXIiLCJmaW5kVW5pcXVlT3JUaHJvdyIsImlzV2FybmluZyIsInVwZGF0ZSIsImRhdGEiLCJjcmVhdGUiLCJnZXRWaW9sYXRpb25UeXBlRnJvbVJlc3VsdCIsImRlc2NyaXB0aW9uIiwid2FybmluZ0lzc3VlZCIsImR1cmF0aW9uIiwicmVwdXRhdGlvbkhpdCIsIm1vZGVyYXRpb25Mb2dJZCIsImdlbmVyYXRlRW5mb3JjZW1lbnRSZWFzb24iLCJzaG91bGROb3RpZnlVc2VyIiwic2hvdWxkTm90aWZ5UmVwb3J0ZXIiLCJzaG91bGRFc2NhbGF0ZVRvQWRtaW4iLCJjYW5BcHBlYWxBY3Rpb24iLCJhcHBlYWxEZWFkbGluZSIsImdldEFwcGVhbERlYWRsaW5lIiwicGFyc2VBY3Rpb25Ub01vZGVyYXRpb25BY3Rpb24iLCJjb250ZW50IiwiZW5mb3JjZW1lbnQiLCJTVVNQRU5ERUQiLCJnZXRUaW1lIiwiQkFOTkVEIiwic2V2ZXJpdHlUZXh0IiwiYWN0aW9uVGV4dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJpbmNsdWRlcyIsInVuZGVmaW5lZCIsImRheXMiLCJmaXJzdENhdGVnb3J5IiwiY2F0ZWdvcnkiLCJ0b0xvd2VyQ2FzZSIsInVwZGF0ZUVuZm9yY2VtZW50Q29uZmlnIiwidXBkYXRlcyIsImFzc2lnbiIsImdldEVuZm9yY2VtZW50Q29uZmlnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/enforcement.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/index.ts":
/*!******************************************!*\
  !*** ./src/services/moderation/index.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CATEGORY_SEVERITY_MAP: () => (/* reexport safe */ _openai__WEBPACK_IMPORTED_MODULE_3__.CATEGORY_SEVERITY_MAP),\n/* harmony export */   ContentType: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_2__.ContentType),\n/* harmony export */   DEFAULT_ENFORCEMENT_CONFIG: () => (/* reexport safe */ _enforcement__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_ENFORCEMENT_CONFIG),\n/* harmony export */   FITNESS_VIOLATION_PATTERNS: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.FITNESS_VIOLATION_PATTERNS),\n/* harmony export */   LOGGING_CONFIG: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.LOGGING_CONFIG),\n/* harmony export */   MODERATION_CONFIG: () => (/* reexport safe */ _openai__WEBPACK_IMPORTED_MODULE_3__.MODERATION_CONFIG),\n/* harmony export */   ModerationAction: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_2__.ModerationAction),\n/* harmony export */   ModerationSource: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_2__.ModerationSource),\n/* harmony export */   applyCustomRules: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.applyCustomRules),\n/* harmony export */   cleanupOldLogs: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.cleanupOldLogs),\n/* harmony export */   detectPositiveFitnessContent: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.detectPositiveFitnessContent),\n/* harmony export */   getActiveRules: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.getActiveRules),\n/* harmony export */   getEnforcementAction: () => (/* reexport safe */ _enforcement__WEBPACK_IMPORTED_MODULE_0__.getEnforcementAction),\n/* harmony export */   getEnforcementConfig: () => (/* reexport safe */ _enforcement__WEBPACK_IMPORTED_MODULE_0__.getEnforcementConfig),\n/* harmony export */   getModerationStats: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.getModerationStats),\n/* harmony export */   getRealTimeMetrics: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.getRealTimeMetrics),\n/* harmony export */   getRecentModerationActivity: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.getRecentModerationActivity),\n/* harmony export */   getRuleStats: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.getRuleStats),\n/* harmony export */   getUserModerationLogs: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.getUserModerationLogs),\n/* harmony export */   logModerationAction: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.logModerationAction),\n/* harmony export */   moderateContent: () => (/* reexport safe */ _openai__WEBPACK_IMPORTED_MODULE_3__.moderateContent),\n/* harmony export */   moderateContentBatch: () => (/* reexport safe */ _openai__WEBPACK_IMPORTED_MODULE_3__.moderateContentBatch),\n/* harmony export */   moderationMiddleware: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_2__.moderationMiddleware),\n/* harmony export */   searchModerationLogs: () => (/* reexport safe */ _loggers__WEBPACK_IMPORTED_MODULE_1__.searchModerationLogs),\n/* harmony export */   updateEnforcementConfig: () => (/* reexport safe */ _enforcement__WEBPACK_IMPORTED_MODULE_0__.updateEnforcementConfig),\n/* harmony export */   updateRule: () => (/* reexport safe */ _rules__WEBPACK_IMPORTED_MODULE_4__.updateRule),\n/* harmony export */   validateContentClient: () => (/* reexport safe */ _middleware__WEBPACK_IMPORTED_MODULE_2__.validateContentClient)\n/* harmony export */ });\n/* harmony import */ var _enforcement__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./enforcement */ \"(rsc)/./src/services/moderation/enforcement.ts\");\n/* harmony import */ var _loggers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loggers */ \"(rsc)/./src/services/moderation/loggers.ts\");\n/* harmony import */ var _middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./middleware */ \"(rsc)/./src/services/moderation/middleware.ts\");\n/* harmony import */ var _openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openai */ \"(rsc)/./src/services/moderation/openai.ts\");\n/* harmony import */ var _rules__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rules */ \"(rsc)/./src/services/moderation/rules.ts\");\n/**\n * Moderation Services Exports\n * Centralized export point for all content moderation functionality\n */ // Moderation enforcement actions and policies\n\n// Moderation event logging utilities\n\n// Middleware for applying moderation rules\n\n// OpenAI-based content moderation\n\n// Moderation rules engine\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9pbmRleC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVELDhDQUE4QztBQUNoQjtBQUU5QixxQ0FBcUM7QUFDWDtBQUUxQiwyQ0FBMkM7QUFDZDtBQUU3QixrQ0FBa0M7QUFDVDtBQUV6QiwwQkFBMEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3ZpY3RvcnNvbGUvRG9jdW1lbnRzL0dpdEh1Yi9tYXNzaW1pbm8vbWFzc2ltaW5vL3NyYy9zZXJ2aWNlcy9tb2RlcmF0aW9uL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTW9kZXJhdGlvbiBTZXJ2aWNlcyBFeHBvcnRzXG4gKiBDZW50cmFsaXplZCBleHBvcnQgcG9pbnQgZm9yIGFsbCBjb250ZW50IG1vZGVyYXRpb24gZnVuY3Rpb25hbGl0eVxuICovXG5cbi8vIE1vZGVyYXRpb24gZW5mb3JjZW1lbnQgYWN0aW9ucyBhbmQgcG9saWNpZXNcbmV4cG9ydCAqIGZyb20gJy4vZW5mb3JjZW1lbnQnO1xuXG4vLyBNb2RlcmF0aW9uIGV2ZW50IGxvZ2dpbmcgdXRpbGl0aWVzXG5leHBvcnQgKiBmcm9tICcuL2xvZ2dlcnMnO1xuXG4vLyBNaWRkbGV3YXJlIGZvciBhcHBseWluZyBtb2RlcmF0aW9uIHJ1bGVzXG5leHBvcnQgKiBmcm9tICcuL21pZGRsZXdhcmUnO1xuXG4vLyBPcGVuQUktYmFzZWQgY29udGVudCBtb2RlcmF0aW9uXG5leHBvcnQgKiBmcm9tICcuL29wZW5haSc7XG5cbi8vIE1vZGVyYXRpb24gcnVsZXMgZW5naW5lXG5leHBvcnQgKiBmcm9tICcuL3J1bGVzJzsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/index.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/loggers.ts":
/*!********************************************!*\
  !*** ./src/services/moderation/loggers.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LOGGING_CONFIG: () => (/* binding */ LOGGING_CONFIG),\n/* harmony export */   cleanupOldLogs: () => (/* binding */ cleanupOldLogs),\n/* harmony export */   getModerationStats: () => (/* binding */ getModerationStats),\n/* harmony export */   getRealTimeMetrics: () => (/* binding */ getRealTimeMetrics),\n/* harmony export */   getRecentModerationActivity: () => (/* binding */ getRecentModerationActivity),\n/* harmony export */   getUserModerationLogs: () => (/* binding */ getUserModerationLogs),\n/* harmony export */   logModerationAction: () => (/* binding */ logModerationAction),\n/* harmony export */   searchModerationLogs: () => (/* binding */ searchModerationLogs)\n/* harmony export */ });\n/* harmony import */ var _core_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/core/database */ \"(rsc)/./src/core/database/index.ts\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * Comprehensive Moderation Action Logging for Massimino\n * Tracks all moderation activities for audit trails and analytics\n */ \n\n// ============================================================================\n// LOGGING CONFIGURATION\n// ============================================================================\nconst LOGGING_CONFIG = {\n    enabled: process.env.MODERATION_LOGGING !== 'false',\n    logLevel: process.env.LOG_LEVEL || 'info',\n    retentionDays: parseInt(process.env.LOG_RETENTION_DAYS || '90'),\n    batchSize: 100,\n    flushInterval: 5000\n};\n// ============================================================================\n// BATCH LOGGING SYSTEM\n// ============================================================================\nclass ModerationLogger {\n    logQueue = [];\n    metricsQueue = [];\n    flushTimer;\n    constructor(){\n        if (LOGGING_CONFIG.enabled) {\n            this.startBatchProcessor();\n        }\n    }\n    /**\n   * Log a moderation action\n   */ async logAction(entry) {\n        if (!LOGGING_CONFIG.enabled) return '';\n        const logId = this.generateLogId();\n        const timestamp = new Date();\n        // Add to queue for batch processing\n        this.logQueue.push({\n            entry,\n            timestamp,\n            id: logId\n        });\n        // Extract metrics\n        this.extractMetrics(entry, timestamp);\n        // Console logging for immediate visibility\n        this.logToConsole(entry, timestamp, logId);\n        // Force flush if queue is getting large\n        if (this.logQueue.length >= LOGGING_CONFIG.batchSize) {\n            await this.flushLogs();\n        }\n        return logId;\n    }\n    /**\n   * Start the batch processor\n   */ startBatchProcessor() {\n        this.flushTimer = setInterval(()=>{\n            this.flushLogs().catch((error)=>{\n                console.error('Failed to flush moderation logs:', error);\n            });\n        }, LOGGING_CONFIG.flushInterval);\n        // Cleanup on process exit\n        process.on('beforeExit', ()=>{\n            this.flushLogs().catch(console.error);\n            if (this.flushTimer) {\n                clearInterval(this.flushTimer);\n            }\n        });\n    }\n    /**\n   * Flush queued logs to database\n   */ async flushLogs() {\n        if (this.logQueue.length === 0) return;\n        const logsToFlush = this.logQueue.splice(0);\n        try {\n            // Batch insert to database\n            await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.createMany({\n                data: logsToFlush.map(({ entry, timestamp, id })=>{\n                    const contentId = this.extractContentId(entry.content);\n                    const data = {\n                        id,\n                        contentType: entry.contentType,\n                        content: this.truncateContent(entry.content),\n                        action: entry.action,\n                        source: entry.result.source,\n                        confidence: entry.result.confidence,\n                        openaiResponse: this.serializeOpenAIResponse(entry.result),\n                        processedAt: entry.result.moderatedAt,\n                        createdAt: timestamp,\n                        updatedAt: timestamp\n                    };\n                    if (entry.userId) {\n                        data.userId = entry.userId;\n                    }\n                    if (contentId) {\n                        data.contentId = contentId;\n                    }\n                    if (entry.result.reason) {\n                        data.flaggedReason = entry.result.reason;\n                    }\n                    return data;\n                }),\n                skipDuplicates: true\n            });\n            console.log(`Flushed ${logsToFlush.length} moderation logs to database`);\n        } catch (error) {\n            console.error('Failed to flush logs to database:', error);\n            // Put logs back in queue for retry\n            this.logQueue.unshift(...logsToFlush);\n        }\n    }\n    /**\n   * Extract metrics for analytics\n   */ extractMetrics(entry, timestamp) {\n        const maxSeverity = Math.max(...entry.result.categories.map((c)=>c.severity), 1);\n        const metrics = {\n            timestamp,\n            action: entry.action,\n            duration: this.calculateProcessingDuration(entry.result),\n            success: entry.result.action !== _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.BLOCKED,\n            contentLength: entry.content.length,\n            confidence: entry.result.confidence,\n            severity: maxSeverity\n        };\n        if (entry.userId) {\n            metrics.userId = entry.userId;\n        }\n        this.metricsQueue.push(metrics);\n        // Keep metrics queue manageable\n        if (this.metricsQueue.length > 1000) {\n            this.metricsQueue.splice(0, 500); // Remove oldest 500\n        }\n    }\n    /**\n   * Console logging with appropriate levels\n   */ logToConsole(entry, timestamp, logId) {\n        const logLevel = this.determineLogLevel(entry.result.action, entry.result.confidence);\n        if (!this.shouldLog(logLevel)) return;\n        const logData = {\n            id: logId,\n            timestamp: timestamp.toISOString(),\n            userId: entry.userId || 'anonymous',\n            action: entry.action,\n            contentType: entry.contentType,\n            confidence: entry.result.confidence,\n            flagged: entry.result.flagged,\n            blocked: entry.result.blocked,\n            categories: entry.result.categories.map((c)=>c.category),\n            reason: entry.result.reason,\n            enforcement: entry.enforcement?.action\n        };\n        switch(logLevel){\n            case 'debug':\n                console.debug('🔍 Moderation Debug:', logData);\n                break;\n            case 'info':\n                console.info('ℹ️ Moderation Info:', logData);\n                break;\n            case 'warn':\n                console.warn('⚠️ Moderation Warning:', logData);\n                break;\n            case 'error':\n                console.error('🚨 Moderation Error:', logData);\n                break;\n        }\n    }\n    /**\n   * Generate unique log ID\n   */ generateLogId() {\n        return `mod_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    /**\n   * Determine appropriate log level\n   */ determineLogLevel(action, confidence) {\n        if (action === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.BLOCKED) return 'error';\n        if (action === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.FLAGGED && confidence > 0.8) return 'warn';\n        if (action === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.FLAGGED) return 'info';\n        return 'debug';\n    }\n    /**\n   * Check if we should log at this level\n   */ shouldLog(level) {\n        const levels = [\n            'debug',\n            'info',\n            'warn',\n            'error'\n        ];\n        const currentLevelIndex = levels.indexOf(LOGGING_CONFIG.logLevel);\n        const messageLevelIndex = levels.indexOf(level);\n        return messageLevelIndex >= currentLevelIndex;\n    }\n    /**\n   * Calculate processing duration if available\n   */ calculateProcessingDuration(result) {\n        // This would be calculated from start time if tracked\n        // For now, estimate based on complexity\n        const baseTime = 100; // 100ms base\n        const categoryTime = result.categories.length * 50; // 50ms per category\n        return baseTime + categoryTime;\n    }\n    /**\n   * Extract content ID if available\n   */ extractContentId(_content) {\n        // Try to extract ID from content metadata\n        // This would depend on how content is structured\n        return null;\n    }\n    /**\n   * Truncate content for storage\n   */ truncateContent(content) {\n        const maxLength = 1000; // Store up to 1000 chars\n        if (content.length <= maxLength) return content;\n        return content.substring(0, maxLength - 3) + '...';\n    }\n    /**\n   * Serialize OpenAI response for storage\n   */ serializeOpenAIResponse(result) {\n        if (result.source !== _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationSource.OPENAI_API) return null;\n        return {\n            flagged: result.flagged,\n            categories: result.categories,\n            confidence: result.confidence,\n            timestamp: result.moderatedAt\n        };\n    }\n    /**\n   * Get recent metrics\n   */ getMetrics(timeWindow = 3600000) {\n        const cutoff = new Date(Date.now() - timeWindow);\n        return this.metricsQueue.filter((m)=>m.timestamp >= cutoff);\n    }\n}\n// ============================================================================\n// SINGLETON LOGGER INSTANCE\n// ============================================================================\nconst moderationLogger = new ModerationLogger();\n// ============================================================================\n// PUBLIC API FUNCTIONS\n// ============================================================================\n/**\n * Log a moderation action\n */ async function logModerationAction(entry) {\n    return moderationLogger.logAction(entry);\n}\n/**\n * Get moderation logs for a specific user\n */ async function getUserModerationLogs(userId, limit = 50, offset = 0) {\n    return _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n        where: {\n            userId\n        },\n        select: {\n            id: true,\n            action: true,\n            contentType: true,\n            flaggedReason: true,\n            confidence: true,\n            createdAt: true\n        },\n        orderBy: {\n            createdAt: 'desc'\n        },\n        take: limit,\n        skip: offset\n    }).then((logs)=>logs.map((log)=>({\n                id: log.id,\n                action: log.action,\n                contentType: log.contentType,\n                reason: log.flaggedReason,\n                confidence: log.confidence,\n                createdAt: log.createdAt\n            })));\n}\n/**\n * Get moderation statistics\n */ async function getModerationStats(timeWindow = 'day') {\n    const windowHours = {\n        day: 24,\n        week: 168,\n        month: 720\n    }[timeWindow];\n    const since = new Date(Date.now() - windowHours * 60 * 60 * 1000);\n    const logs = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n        where: {\n            createdAt: {\n                gte: since\n            }\n        },\n        select: {\n            action: true,\n            confidence: true,\n            flaggedReason: true\n        }\n    });\n    const actionsByType = {};\n    let totalConfidence = 0;\n    let confidenceCount = 0;\n    let flaggedContent = 0;\n    let blockedContent = 0;\n    const categoryCount = {};\n    logs.forEach((log)=>{\n        actionsByType[log.action] = (actionsByType[log.action] || 0) + 1;\n        if (log.confidence !== null) {\n            totalConfidence += log.confidence;\n            confidenceCount++;\n        }\n        if (log.action === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.FLAGGED) flaggedContent++;\n        if (log.action === _prisma_client__WEBPACK_IMPORTED_MODULE_1__.ModerationAction.BLOCKED) blockedContent++;\n        if (log.flaggedReason) {\n            categoryCount[log.flaggedReason] = (categoryCount[log.flaggedReason] || 0) + 1;\n        }\n    });\n    const topViolationCategories = Object.entries(categoryCount).map(([category, count])=>({\n            category,\n            count\n        })).sort((a, b)=>b.count - a.count).slice(0, 10);\n    return {\n        totalActions: logs.length,\n        actionsByType,\n        averageConfidence: confidenceCount > 0 ? totalConfidence / confidenceCount : 0,\n        flaggedContent,\n        blockedContent,\n        topViolationCategories\n    };\n}\n/**\n * Get recent moderation activity\n */ async function getRecentModerationActivity(limit = 20) {\n    const logs = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n        take: limit,\n        orderBy: {\n            createdAt: 'desc'\n        },\n        include: {\n            user: {\n                select: {\n                    name: true,\n                    role: true\n                }\n            }\n        }\n    });\n    return logs.map((log)=>({\n            id: log.id,\n            userId: log.userId,\n            action: log.action,\n            contentType: log.contentType,\n            confidence: log.confidence,\n            createdAt: log.createdAt,\n            ...log.user && {\n                user: {\n                    name: log.user.name,\n                    role: log.user.role\n                }\n            }\n        }));\n}\n/**\n * Search moderation logs\n */ async function searchModerationLogs(params) {\n    const where = {};\n    if (params.userId) where.userId = params.userId;\n    if (params.action) where.action = params.action;\n    if (params.contentType) where.contentType = params.contentType;\n    if (params.dateFrom || params.dateTo) {\n        where.createdAt = {};\n        if (params.dateFrom) where.createdAt.gte = params.dateFrom;\n        if (params.dateTo) where.createdAt.lte = params.dateTo;\n    }\n    return _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.findMany({\n        where,\n        select: {\n            id: true,\n            userId: true,\n            action: true,\n            contentType: true,\n            content: true,\n            flaggedReason: true,\n            confidence: true,\n            createdAt: true\n        },\n        orderBy: {\n            createdAt: 'desc'\n        },\n        take: params.limit || 50,\n        skip: params.offset || 0\n    });\n}\n/**\n * Clean up old logs based on retention policy\n */ async function cleanupOldLogs() {\n    const cutoffDate = new Date(Date.now() - LOGGING_CONFIG.retentionDays * 24 * 60 * 60 * 1000);\n    const result = await _core_database__WEBPACK_IMPORTED_MODULE_0__.prisma.moderation_logs.deleteMany({\n        where: {\n            createdAt: {\n                lt: cutoffDate\n            }\n        }\n    });\n    console.log(`Cleaned up ${result.count} old moderation logs`);\n    return result.count;\n}\n/**\n * Get real-time metrics\n */ function getRealTimeMetrics(timeWindow = 3600000) {\n    const metrics = moderationLogger.getMetrics(timeWindow);\n    const windowMinutes = timeWindow / 60000;\n    const actionsPerMinute = metrics.length / windowMinutes;\n    const totalDuration = metrics.reduce((sum, m)=>sum + m.duration, 0);\n    const averageProcessingTime = metrics.length > 0 ? totalDuration / metrics.length : 0;\n    const successCount = metrics.filter((m)=>m.success).length;\n    const successRate = metrics.length > 0 ? successCount / metrics.length : 0;\n    const userCounts = {};\n    metrics.forEach((m)=>{\n        if (m.userId) {\n            userCounts[m.userId] = (userCounts[m.userId] || 0) + 1;\n        }\n    });\n    const topUsers = Object.entries(userCounts).map(([userId, actionCount])=>({\n            userId,\n            actionCount\n        })).sort((a, b)=>b.actionCount - a.actionCount).slice(0, 10);\n    return {\n        actionsPerMinute,\n        averageProcessingTime,\n        successRate,\n        topUsers\n    };\n}\n// ============================================================================\n// EXPORT UTILITIES\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9sb2dnZXJzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBRXdDO0FBTTJCO0FBRXBFLCtFQUErRTtBQUMvRSx3QkFBd0I7QUFDeEIsK0VBQStFO0FBRS9FLE1BQU1HLGlCQUFpQjtJQUNyQkMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxrQkFBa0IsS0FBSztJQUM1Q0MsVUFBV0gsUUFBUUMsR0FBRyxDQUFDRyxTQUFTLElBQUk7SUFDcENDLGVBQWVDLFNBQVNOLFFBQVFDLEdBQUcsQ0FBQ00sa0JBQWtCLElBQUk7SUFDMURDLFdBQVc7SUFDWEMsZUFBZTtBQUNqQjtBQWtDQSwrRUFBK0U7QUFDL0UsdUJBQXVCO0FBQ3ZCLCtFQUErRTtBQUUvRSxNQUFNQztJQUNJQyxXQUlILEVBQUUsQ0FBQztJQUVBQyxlQUE2QixFQUFFLENBQUM7SUFDaENDLFdBQTRCO0lBRXBDLGFBQWM7UUFDWixJQUFJZixlQUFlQyxPQUFPLEVBQUU7WUFDMUIsSUFBSSxDQUFDZSxtQkFBbUI7UUFDMUI7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTUMsVUFBVUMsS0FBeUIsRUFBbUI7UUFDMUQsSUFBSSxDQUFDbEIsZUFBZUMsT0FBTyxFQUFFLE9BQU87UUFFcEMsTUFBTWtCLFFBQVEsSUFBSSxDQUFDQyxhQUFhO1FBQ2hDLE1BQU1DLFlBQVksSUFBSUM7UUFFdEIsb0NBQW9DO1FBQ3BDLElBQUksQ0FBQ1QsUUFBUSxDQUFDVSxJQUFJLENBQUM7WUFDakJMO1lBQ0FHO1lBQ0FHLElBQUlMO1FBQ047UUFFQSxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDTSxjQUFjLENBQUNQLE9BQU9HO1FBRTNCLDJDQUEyQztRQUMzQyxJQUFJLENBQUNLLFlBQVksQ0FBQ1IsT0FBT0csV0FBV0Y7UUFFcEMsd0NBQXdDO1FBQ3hDLElBQUksSUFBSSxDQUFDTixRQUFRLENBQUNjLE1BQU0sSUFBSTNCLGVBQWVVLFNBQVMsRUFB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QUFNOEYsd0JBQXdCL0YsUUFBUXpDLE1BQU0sR0FBRyxJQUFJcUksZ0JBQWdCNUYsUUFBUXpDLE1BQU0sR0FBRztJQUVwRixNQUFNeUksZUFBZWhHLFFBQVFvQyxNQUFNLENBQUNDLENBQUFBLElBQUtBLEVBQUVsQyxPQUFPLEVBQUU1QyxNQUFNO0lBQzFELE1BQU0wSSxjQUFjakcsUUFBUXpDLE1BQU0sR0FBRyxJQUFJeUksZUFBZWhHLFFBQVF6QyxNQUFNLEdBQUc7SUFFekUsTUFBTTJJLGFBQXFDLENBQUM7SUFDNUNsRyxRQUFRZ0UsT0FBTyxDQUFDM0IsQ0FBQUE7UUFDZCxJQUFJQSxFQUFFakQsTUFBTSxFQUFFO1lBQ1o4RyxVQUFVLENBQUM3RCxFQUFFakQsTUFBTSxDQUFDLEdBQUcsQ0FBQzhHLFVBQVUsQ0FBQzdELEVBQUVqRCxNQUFNLENBQUMsSUFBSSxLQUFLO1FBQ3ZEO0lBQ0Y7SUFFQSxNQUFNK0csV0FBV2pDLE9BQU9DLE9BQU8sQ0FBQytCLFlBQzdCOUgsR0FBRyxDQUFDLENBQUMsQ0FBQ2dCLFFBQVFnSCxZQUFZLEdBQU07WUFBRWhIO1lBQVFnSDtRQUFZLElBQ3REL0IsSUFBSSxDQUFDLENBQUNDLEdBQUdDLElBQU1BLEVBQUU2QixXQUFXLEdBQUc5QixFQUFFOEIsV0FBVyxFQUM1QzVCLEtBQUssQ0FBQyxHQUFHO0lBRVosT0FBTztRQUNMbUI7UUFDQUk7UUFDQUU7UUFDQUU7SUFDRjtBQUNGO0FBRUEsK0VBQStFO0FBQy9FLG1CQUFtQjtBQUNuQiwrRUFBK0U7QUFJN0UiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9sb2dnZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBNb2RlcmF0aW9uIEFjdGlvbiBMb2dnaW5nIGZvciBNYXNzaW1pbm9cbiAqIFRyYWNrcyBhbGwgbW9kZXJhdGlvbiBhY3Rpdml0aWVzIGZvciBhdWRpdCB0cmFpbHMgYW5kIGFuYWx5dGljc1xuICovXG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvY29yZS9kYXRhYmFzZSc7XG5pbXBvcnQgdHlwZSB7IFxuICBNb2RlcmF0aW9uUmVzdWx0LFxuICBFbmZvcmNlbWVudFJlc3VsdCxcbiAgQ29udGVudFR5cGUgXG59IGZyb20gJ0AvdHlwZXMvbW9kZXJhdGlvbic7XG5pbXBvcnQgeyBNb2RlcmF0aW9uQWN0aW9uLCBNb2RlcmF0aW9uU291cmNlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBMT0dHSU5HIENPTkZJR1VSQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgTE9HR0lOR19DT05GSUcgPSB7XG4gIGVuYWJsZWQ6IHByb2Nlc3MuZW52Lk1PREVSQVRJT05fTE9HR0lORyAhPT0gJ2ZhbHNlJyxcbiAgbG9nTGV2ZWw6IChwcm9jZXNzLmVudi5MT0dfTEVWRUwgfHwgJ2luZm8nKSBhcyAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyxcbiAgcmV0ZW50aW9uRGF5czogcGFyc2VJbnQocHJvY2Vzcy5lbnYuTE9HX1JFVEVOVElPTl9EQVlTIHx8ICc5MCcpLCAvLyBLZWVwIGxvZ3MgZm9yIDkwIGRheXNcbiAgYmF0Y2hTaXplOiAxMDAsIC8vIEJhdGNoIGRhdGFiYXNlIGluc2VydHMgZm9yIHBlcmZvcm1hbmNlXG4gIGZsdXNoSW50ZXJ2YWw6IDUwMDAsIC8vIEZsdXNoIGJhdGNoIGV2ZXJ5IDUgc2Vjb25kc1xufSBhcyBjb25zdDtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTE9HIEVOVFJZIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBNb2RlcmF0aW9uTG9nRW50cnkge1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbjtcbiAgY29udGVudFR5cGU6IENvbnRlbnRUeXBlIHwgc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHJlc3VsdDogTW9kZXJhdGlvblJlc3VsdDtcbiAgZW5mb3JjZW1lbnQ/OiBFbmZvcmNlbWVudFJlc3VsdDtcbiAgbWV0YWRhdGE/OiB7XG4gICAgdXNlckFnZW50Pzogc3RyaW5nO1xuICAgIGlwQWRkcmVzcz86IHN0cmluZztcbiAgICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG4gICAgdGltZXN0YW1wPzogRGF0ZTtcbiAgICByZXF1ZXN0SWQ/OiBzdHJpbmc7XG4gIH07XG59XG5cbmludGVyZmFjZSBMb2dNZXRyaWNzIHtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICBhY3Rpb246IHN0cmluZztcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG4gIHVzZXJJZD86IHN0cmluZztcbiAgY29udGVudExlbmd0aDogbnVtYmVyO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIHNldmVyaXR5OiBudW1iZXI7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEJBVENIIExPR0dJTkcgU1lTVEVNXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNsYXNzIE1vZGVyYXRpb25Mb2dnZXIge1xuICBwcml2YXRlIGxvZ1F1ZXVlOiBBcnJheTx7XG4gICAgZW50cnk6IE1vZGVyYXRpb25Mb2dFbnRyeTtcbiAgICB0aW1lc3RhbXA6IERhdGU7XG4gICAgaWQ6IHN0cmluZztcbiAgfT4gPSBbXTtcbiAgXG4gIHByaXZhdGUgbWV0cmljc1F1ZXVlOiBMb2dNZXRyaWNzW10gPSBbXTtcbiAgcHJpdmF0ZSBmbHVzaFRpbWVyPzogTm9kZUpTLlRpbWVvdXQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKExPR0dJTkdfQ09ORklHLmVuYWJsZWQpIHtcbiAgICAgIHRoaXMuc3RhcnRCYXRjaFByb2Nlc3NvcigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBMb2cgYSBtb2RlcmF0aW9uIGFjdGlvblxuICAgKi9cbiAgYXN5bmMgbG9nQWN0aW9uKGVudHJ5OiBNb2RlcmF0aW9uTG9nRW50cnkpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICghTE9HR0lOR19DT05GSUcuZW5hYmxlZCkgcmV0dXJuICcnO1xuXG4gICAgY29uc3QgbG9nSWQgPSB0aGlzLmdlbmVyYXRlTG9nSWQoKTtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpO1xuXG4gICAgLy8gQWRkIHRvIHF1ZXVlIGZvciBiYXRjaCBwcm9jZXNzaW5nXG4gICAgdGhpcy5sb2dRdWV1ZS5wdXNoKHtcbiAgICAgIGVudHJ5LFxuICAgICAgdGltZXN0YW1wLFxuICAgICAgaWQ6IGxvZ0lkLFxuICAgIH0pO1xuXG4gICAgLy8gRXh0cmFjdCBtZXRyaWNzXG4gICAgdGhpcy5leHRyYWN0TWV0cmljcyhlbnRyeSwgdGltZXN0YW1wKTtcblxuICAgIC8vIENvbnNvbGUgbG9nZ2luZyBmb3IgaW1tZWRpYXRlIHZpc2liaWxpdHlcbiAgICB0aGlzLmxvZ1RvQ29uc29sZShlbnRyeSwgdGltZXN0YW1wLCBsb2dJZCk7XG5cbiAgICAvLyBGb3JjZSBmbHVzaCBpZiBxdWV1ZSBpcyBnZXR0aW5nIGxhcmdlXG4gICAgaWYgKHRoaXMubG9nUXVldWUubGVuZ3RoID49IExPR0dJTkdfQ09ORklHLmJhdGNoU2l6ZSkge1xuICAgICAgYXdhaXQgdGhpcy5mbHVzaExvZ3MoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9nSWQ7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGJhdGNoIHByb2Nlc3NvclxuICAgKi9cbiAgcHJpdmF0ZSBzdGFydEJhdGNoUHJvY2Vzc29yKCk6IHZvaWQge1xuICAgIHRoaXMuZmx1c2hUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuZmx1c2hMb2dzKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmx1c2ggbW9kZXJhdGlvbiBsb2dzOicsIGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0sIExPR0dJTkdfQ09ORklHLmZsdXNoSW50ZXJ2YWwpO1xuXG4gICAgLy8gQ2xlYW51cCBvbiBwcm9jZXNzIGV4aXRcbiAgICBwcm9jZXNzLm9uKCdiZWZvcmVFeGl0JywgKCkgPT4ge1xuICAgICAgdGhpcy5mbHVzaExvZ3MoKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAgICAgIGlmICh0aGlzLmZsdXNoVGltZXIpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmZsdXNoVGltZXIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHF1ZXVlZCBsb2dzIHRvIGRhdGFiYXNlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGZsdXNoTG9ncygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5sb2dRdWV1ZS5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIGNvbnN0IGxvZ3NUb0ZsdXNoID0gdGhpcy5sb2dRdWV1ZS5zcGxpY2UoMCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEJhdGNoIGluc2VydCB0byBkYXRhYmFzZVxuICAgICAgYXdhaXQgcHJpc21hLm1vZGVyYXRpb25fbG9ncy5jcmVhdGVNYW55KHtcbiAgICAgICAgZGF0YTogbG9nc1RvRmx1c2gubWFwKCh7IGVudHJ5LCB0aW1lc3RhbXAsIGlkIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50SWQgPSB0aGlzLmV4dHJhY3RDb250ZW50SWQoZW50cnkuY29udGVudCk7XG4gICAgICAgICAgY29uc3QgZGF0YTogYW55ID0ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZW50cnkuY29udGVudFR5cGUsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLnRydW5jYXRlQ29udGVudChlbnRyeS5jb250ZW50KSxcbiAgICAgICAgICAgIGFjdGlvbjogZW50cnkuYWN0aW9uLFxuICAgICAgICAgICAgc291cmNlOiBlbnRyeS5yZXN1bHQuc291cmNlLFxuICAgICAgICAgICAgY29uZmlkZW5jZTogZW50cnkucmVzdWx0LmNvbmZpZGVuY2UsXG4gICAgICAgICAgICBvcGVuYWlSZXNwb25zZTogdGhpcy5zZXJpYWxpemVPcGVuQUlSZXNwb25zZShlbnRyeS5yZXN1bHQpLFxuICAgICAgICAgICAgcHJvY2Vzc2VkQXQ6IGVudHJ5LnJlc3VsdC5tb2RlcmF0ZWRBdCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGltZXN0YW1wLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiB0aW1lc3RhbXAsXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmIChlbnRyeS51c2VySWQpIHtcbiAgICAgICAgICAgIGRhdGEudXNlcklkID0gZW50cnkudXNlcklkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29udGVudElkKSB7XG4gICAgICAgICAgICBkYXRhLmNvbnRlbnRJZCA9IGNvbnRlbnRJZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVudHJ5LnJlc3VsdC5yZWFzb24pIHtcbiAgICAgICAgICAgIGRhdGEuZmxhZ2dlZFJlYXNvbiA9IGVudHJ5LnJlc3VsdC5yZWFzb247XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0pLFxuICAgICAgICBza2lwRHVwbGljYXRlczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zb2xlLmxvZyhgRmx1c2hlZCAke2xvZ3NUb0ZsdXNoLmxlbmd0aH0gbW9kZXJhdGlvbiBsb2dzIHRvIGRhdGFiYXNlYCk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZsdXNoIGxvZ3MgdG8gZGF0YWJhc2U6JywgZXJyb3IpO1xuICAgICAgLy8gUHV0IGxvZ3MgYmFjayBpbiBxdWV1ZSBmb3IgcmV0cnlcbiAgICAgIHRoaXMubG9nUXVldWUudW5zaGlmdCguLi5sb2dzVG9GbHVzaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgbWV0cmljcyBmb3IgYW5hbHl0aWNzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RNZXRyaWNzKFxuICAgIGVudHJ5OiBNb2RlcmF0aW9uTG9nRW50cnksXG4gICAgdGltZXN0YW1wOiBEYXRlXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG1heFNldmVyaXR5ID0gTWF0aC5tYXgoXG4gICAgICAuLi5lbnRyeS5yZXN1bHQuY2F0ZWdvcmllcy5tYXAoYyA9PiBjLnNldmVyaXR5KSxcbiAgICAgIDFcbiAgICApO1xuXG4gICAgY29uc3QgbWV0cmljczogTG9nTWV0cmljcyA9IHtcbiAgICAgIHRpbWVzdGFtcCxcbiAgICAgIGFjdGlvbjogZW50cnkuYWN0aW9uLFxuICAgICAgZHVyYXRpb246IHRoaXMuY2FsY3VsYXRlUHJvY2Vzc2luZ0R1cmF0aW9uKGVudHJ5LnJlc3VsdCksXG4gICAgICBzdWNjZXNzOiBlbnRyeS5yZXN1bHQuYWN0aW9uICE9PSBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgICBjb250ZW50TGVuZ3RoOiBlbnRyeS5jb250ZW50Lmxlbmd0aCxcbiAgICAgIGNvbmZpZGVuY2U6IGVudHJ5LnJlc3VsdC5jb25maWRlbmNlLFxuICAgICAgc2V2ZXJpdHk6IG1heFNldmVyaXR5LFxuICAgIH07XG5cbiAgICBpZiAoZW50cnkudXNlcklkKSB7XG4gICAgICBtZXRyaWNzLnVzZXJJZCA9IGVudHJ5LnVzZXJJZDtcbiAgICB9XG5cbiAgICB0aGlzLm1ldHJpY3NRdWV1ZS5wdXNoKG1ldHJpY3MpO1xuXG4gICAgLy8gS2VlcCBtZXRyaWNzIHF1ZXVlIG1hbmFnZWFibGVcbiAgICBpZiAodGhpcy5tZXRyaWNzUXVldWUubGVuZ3RoID4gMTAwMCkge1xuICAgICAgdGhpcy5tZXRyaWNzUXVldWUuc3BsaWNlKDAsIDUwMCk7IC8vIFJlbW92ZSBvbGRlc3QgNTAwXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnNvbGUgbG9nZ2luZyB3aXRoIGFwcHJvcHJpYXRlIGxldmVsc1xuICAgKi9cbiAgcHJpdmF0ZSBsb2dUb0NvbnNvbGUoXG4gICAgZW50cnk6IE1vZGVyYXRpb25Mb2dFbnRyeSxcbiAgICB0aW1lc3RhbXA6IERhdGUsXG4gICAgbG9nSWQ6IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBjb25zdCBsb2dMZXZlbCA9IHRoaXMuZGV0ZXJtaW5lTG9nTGV2ZWwoZW50cnkucmVzdWx0LmFjdGlvbiwgZW50cnkucmVzdWx0LmNvbmZpZGVuY2UpO1xuICAgIFxuICAgIGlmICghdGhpcy5zaG91bGRMb2cobG9nTGV2ZWwpKSByZXR1cm47XG5cbiAgICBjb25zdCBsb2dEYXRhID0ge1xuICAgICAgaWQ6IGxvZ0lkLFxuICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAudG9JU09TdHJpbmcoKSxcbiAgICAgIHVzZXJJZDogZW50cnkudXNlcklkIHx8ICdhbm9ueW1vdXMnLFxuICAgICAgYWN0aW9uOiBlbnRyeS5hY3Rpb24sXG4gICAgICBjb250ZW50VHlwZTogZW50cnkuY29udGVudFR5cGUsXG4gICAgICBjb25maWRlbmNlOiBlbnRyeS5yZXN1bHQuY29uZmlkZW5jZSxcbiAgICAgIGZsYWdnZWQ6IGVudHJ5LnJlc3VsdC5mbGFnZ2VkLFxuICAgICAgYmxvY2tlZDogZW50cnkucmVzdWx0LmJsb2NrZWQsXG4gICAgICBjYXRlZ29yaWVzOiBlbnRyeS5yZXN1bHQuY2F0ZWdvcmllcy5tYXAoYyA9PiBjLmNhdGVnb3J5KSxcbiAgICAgIHJlYXNvbjogZW50cnkucmVzdWx0LnJlYXNvbixcbiAgICAgIGVuZm9yY2VtZW50OiBlbnRyeS5lbmZvcmNlbWVudD8uYWN0aW9uLFxuICAgIH07XG5cbiAgICBzd2l0Y2ggKGxvZ0xldmVsKSB7XG4gICAgICBjYXNlICdkZWJ1Zyc6XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ/CflI0gTW9kZXJhdGlvbiBEZWJ1ZzonLCBsb2dEYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbmZvJzpcbiAgICAgICAgY29uc29sZS5pbmZvKCfihLnvuI8gTW9kZXJhdGlvbiBJbmZvOicsIGxvZ0RhdGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBNb2RlcmF0aW9uIFdhcm5pbmc6JywgbG9nRGF0YSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZXJyb3InOlxuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIE1vZGVyYXRpb24gRXJyb3I6JywgbG9nRGF0YSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSB1bmlxdWUgbG9nIElEXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlTG9nSWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYG1vZF8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGFwcHJvcHJpYXRlIGxvZyBsZXZlbFxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlcm1pbmVMb2dMZXZlbChcbiAgICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24sXG4gICAgY29uZmlkZW5jZTogbnVtYmVyXG4gICk6ICdkZWJ1ZycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIHtcbiAgICBpZiAoYWN0aW9uID09PSBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQpIHJldHVybiAnZXJyb3InO1xuICAgIGlmIChhY3Rpb24gPT09IE1vZGVyYXRpb25BY3Rpb24uRkxBR0dFRCAmJiBjb25maWRlbmNlID4gMC44KSByZXR1cm4gJ3dhcm4nO1xuICAgIGlmIChhY3Rpb24gPT09IE1vZGVyYXRpb25BY3Rpb24uRkxBR0dFRCkgcmV0dXJuICdpbmZvJztcbiAgICByZXR1cm4gJ2RlYnVnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB3ZSBzaG91bGQgbG9nIGF0IHRoaXMgbGV2ZWxcbiAgICovXG4gIHByaXZhdGUgc2hvdWxkTG9nKGxldmVsOiAnZGVidWcnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGxldmVscyA9IFsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ107XG4gICAgY29uc3QgY3VycmVudExldmVsSW5kZXggPSBsZXZlbHMuaW5kZXhPZihMT0dHSU5HX0NPTkZJRy5sb2dMZXZlbCk7XG4gICAgY29uc3QgbWVzc2FnZUxldmVsSW5kZXggPSBsZXZlbHMuaW5kZXhPZihsZXZlbCk7XG4gICAgXG4gICAgcmV0dXJuIG1lc3NhZ2VMZXZlbEluZGV4ID49IGN1cnJlbnRMZXZlbEluZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBwcm9jZXNzaW5nIGR1cmF0aW9uIGlmIGF2YWlsYWJsZVxuICAgKi9cbiAgcHJpdmF0ZSBjYWxjdWxhdGVQcm9jZXNzaW5nRHVyYXRpb24ocmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0KTogbnVtYmVyIHtcbiAgICAvLyBUaGlzIHdvdWxkIGJlIGNhbGN1bGF0ZWQgZnJvbSBzdGFydCB0aW1lIGlmIHRyYWNrZWRcbiAgICAvLyBGb3Igbm93LCBlc3RpbWF0ZSBiYXNlZCBvbiBjb21wbGV4aXR5XG4gICAgY29uc3QgYmFzZVRpbWUgPSAxMDA7IC8vIDEwMG1zIGJhc2VcbiAgICBjb25zdCBjYXRlZ29yeVRpbWUgPSByZXN1bHQuY2F0ZWdvcmllcy5sZW5ndGggKiA1MDsgLy8gNTBtcyBwZXIgY2F0ZWdvcnlcbiAgICByZXR1cm4gYmFzZVRpbWUgKyBjYXRlZ29yeVRpbWU7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBjb250ZW50IElEIGlmIGF2YWlsYWJsZVxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0Q29udGVudElkKF9jb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvLyBUcnkgdG8gZXh0cmFjdCBJRCBmcm9tIGNvbnRlbnQgbWV0YWRhdGFcbiAgICAvLyBUaGlzIHdvdWxkIGRlcGVuZCBvbiBob3cgY29udGVudCBpcyBzdHJ1Y3R1cmVkXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVHJ1bmNhdGUgY29udGVudCBmb3Igc3RvcmFnZVxuICAgKi9cbiAgcHJpdmF0ZSB0cnVuY2F0ZUNvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXhMZW5ndGggPSAxMDAwOyAvLyBTdG9yZSB1cCB0byAxMDAwIGNoYXJzXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoIDw9IG1heExlbmd0aCkgcmV0dXJuIGNvbnRlbnQ7XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbnQuc3Vic3RyaW5nKDAsIG1heExlbmd0aCAtIDMpICsgJy4uLic7XG4gIH1cblxuICAvKipcbiAgICogU2VyaWFsaXplIE9wZW5BSSByZXNwb25zZSBmb3Igc3RvcmFnZVxuICAgKi9cbiAgcHJpdmF0ZSBzZXJpYWxpemVPcGVuQUlSZXNwb25zZShyZXN1bHQ6IE1vZGVyYXRpb25SZXN1bHQpOiBhbnkge1xuICAgIGlmIChyZXN1bHQuc291cmNlICE9PSBNb2RlcmF0aW9uU291cmNlLk9QRU5BSV9BUEkpIHJldHVybiBudWxsO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBmbGFnZ2VkOiByZXN1bHQuZmxhZ2dlZCxcbiAgICAgIGNhdGVnb3JpZXM6IHJlc3VsdC5jYXRlZ29yaWVzLFxuICAgICAgY29uZmlkZW5jZTogcmVzdWx0LmNvbmZpZGVuY2UsXG4gICAgICB0aW1lc3RhbXA6IHJlc3VsdC5tb2RlcmF0ZWRBdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCByZWNlbnQgbWV0cmljc1xuICAgKi9cbiAgZ2V0TWV0cmljcyh0aW1lV2luZG93OiBudW1iZXIgPSAzNjAwMDAwKTogTG9nTWV0cmljc1tdIHtcbiAgICBjb25zdCBjdXRvZmYgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGltZVdpbmRvdyk7XG4gICAgcmV0dXJuIHRoaXMubWV0cmljc1F1ZXVlLmZpbHRlcihtID0+IG0udGltZXN0YW1wID49IGN1dG9mZik7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gU0lOR0xFVE9OIExPR0dFUiBJTlNUQU5DRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBtb2RlcmF0aW9uTG9nZ2VyID0gbmV3IE1vZGVyYXRpb25Mb2dnZXIoKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUFVCTElDIEFQSSBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBMb2cgYSBtb2RlcmF0aW9uIGFjdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nTW9kZXJhdGlvbkFjdGlvbihlbnRyeTogTW9kZXJhdGlvbkxvZ0VudHJ5KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG1vZGVyYXRpb25Mb2dnZXIubG9nQWN0aW9uKGVudHJ5KTtcbn1cblxuLyoqXG4gKiBHZXQgbW9kZXJhdGlvbiBsb2dzIGZvciBhIHNwZWNpZmljIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJNb2RlcmF0aW9uTG9ncyhcbiAgdXNlcklkOiBzdHJpbmcsXG4gIGxpbWl0OiBudW1iZXIgPSA1MCxcbiAgb2Zmc2V0OiBudW1iZXIgPSAwXG4pOiBQcm9taXNlPEFycmF5PHtcbiAgaWQ6IHN0cmluZztcbiAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICByZWFzb246IHN0cmluZyB8IG51bGw7XG4gIGNvbmZpZGVuY2U6IG51bWJlciB8IG51bGw7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbn0+PiB7XG4gIHJldHVybiBwcmlzbWEubW9kZXJhdGlvbl9sb2dzLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyB1c2VySWQgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgYWN0aW9uOiB0cnVlLFxuICAgICAgY29udGVudFR5cGU6IHRydWUsXG4gICAgICBmbGFnZ2VkUmVhc29uOiB0cnVlLFxuICAgICAgY29uZmlkZW5jZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICB0YWtlOiBsaW1pdCxcbiAgICBza2lwOiBvZmZzZXQsXG4gIH0pLnRoZW4oKGxvZ3M6IEFycmF5PHsgaWQ6IHN0cmluZzsgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uOyBjb250ZW50VHlwZTogc3RyaW5nOyBmbGFnZ2VkUmVhc29uOiBzdHJpbmcgfCBudWxsOyBjb25maWRlbmNlOiBudW1iZXIgfCBudWxsOyBjcmVhdGVkQXQ6IERhdGUgfT4pID0+IGxvZ3MubWFwKChsb2cpID0+ICh7XG4gICAgaWQ6IGxvZy5pZCxcbiAgICBhY3Rpb246IGxvZy5hY3Rpb24sXG4gICAgY29udGVudFR5cGU6IGxvZy5jb250ZW50VHlwZSxcbiAgICByZWFzb246IGxvZy5mbGFnZ2VkUmVhc29uLFxuICAgIGNvbmZpZGVuY2U6IGxvZy5jb25maWRlbmNlLFxuICAgIGNyZWF0ZWRBdDogbG9nLmNyZWF0ZWRBdCxcbiAgfSkpKTtcbn1cblxuLyoqXG4gKiBHZXQgbW9kZXJhdGlvbiBzdGF0aXN0aWNzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRNb2RlcmF0aW9uU3RhdHMoXG4gIHRpbWVXaW5kb3c6ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyA9ICdkYXknXG4pOiBQcm9taXNlPHtcbiAgdG90YWxBY3Rpb25zOiBudW1iZXI7XG4gIGFjdGlvbnNCeVR5cGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gIGF2ZXJhZ2VDb25maWRlbmNlOiBudW1iZXI7XG4gIGZsYWdnZWRDb250ZW50OiBudW1iZXI7XG4gIGJsb2NrZWRDb250ZW50OiBudW1iZXI7XG4gIHRvcFZpb2xhdGlvbkNhdGVnb3JpZXM6IEFycmF5PHsgY2F0ZWdvcnk6IHN0cmluZzsgY291bnQ6IG51bWJlciB9Pjtcbn0+IHtcbiAgY29uc3Qgd2luZG93SG91cnMgPSB7IGRheTogMjQsIHdlZWs6IDE2OCwgbW9udGg6IDcyMCB9W3RpbWVXaW5kb3ddO1xuICBjb25zdCBzaW5jZSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSB3aW5kb3dIb3VycyAqIDYwICogNjAgKiAxMDAwKTtcblxuICBjb25zdCBsb2dzID0gYXdhaXQgcHJpc21hLm1vZGVyYXRpb25fbG9ncy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGNyZWF0ZWRBdDogeyBndGU6IHNpbmNlIH0sXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGFjdGlvbjogdHJ1ZSxcbiAgICAgIGNvbmZpZGVuY2U6IHRydWUsXG4gICAgICBmbGFnZ2VkUmVhc29uOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGFjdGlvbnNCeVR5cGU6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgbGV0IHRvdGFsQ29uZmlkZW5jZSA9IDA7XG4gIGxldCBjb25maWRlbmNlQ291bnQgPSAwO1xuICBsZXQgZmxhZ2dlZENvbnRlbnQgPSAwO1xuICBsZXQgYmxvY2tlZENvbnRlbnQgPSAwO1xuICBjb25zdCBjYXRlZ29yeUNvdW50OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG5cbiAgbG9ncy5mb3JFYWNoKChsb2c6IHsgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uOyBjb25maWRlbmNlOiBudW1iZXIgfCBudWxsOyBmbGFnZ2VkUmVhc29uOiBzdHJpbmcgfCBudWxsIH0pID0+IHtcbiAgICBhY3Rpb25zQnlUeXBlW2xvZy5hY3Rpb25dID0gKGFjdGlvbnNCeVR5cGVbbG9nLmFjdGlvbl0gfHwgMCkgKyAxO1xuICAgIFxuICAgIGlmIChsb2cuY29uZmlkZW5jZSAhPT0gbnVsbCkge1xuICAgICAgdG90YWxDb25maWRlbmNlICs9IGxvZy5jb25maWRlbmNlO1xuICAgICAgY29uZmlkZW5jZUNvdW50Kys7XG4gICAgfVxuICAgIFxuICAgIGlmIChsb2cuYWN0aW9uID09PSBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQpIGZsYWdnZWRDb250ZW50Kys7XG4gICAgaWYgKGxvZy5hY3Rpb24gPT09IE1vZGVyYXRpb25BY3Rpb24uQkxPQ0tFRCkgYmxvY2tlZENvbnRlbnQrKztcbiAgICBcbiAgICBpZiAobG9nLmZsYWdnZWRSZWFzb24pIHtcbiAgICAgIGNhdGVnb3J5Q291bnRbbG9nLmZsYWdnZWRSZWFzb25dID0gKGNhdGVnb3J5Q291bnRbbG9nLmZsYWdnZWRSZWFzb25dIHx8IDApICsgMTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHRvcFZpb2xhdGlvbkNhdGVnb3JpZXMgPSBPYmplY3QuZW50cmllcyhjYXRlZ29yeUNvdW50KVxuICAgIC5tYXAoKFtjYXRlZ29yeSwgY291bnRdKSA9PiAoeyBjYXRlZ29yeSwgY291bnQgfSkpXG4gICAgLnNvcnQoKGEsIGIpID0+IGIuY291bnQgLSBhLmNvdW50KVxuICAgIC5zbGljZSgwLCAxMCk7XG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbEFjdGlvbnM6IGxvZ3MubGVuZ3RoLFxuICAgIGFjdGlvbnNCeVR5cGUsXG4gICAgYXZlcmFnZUNvbmZpZGVuY2U6IGNvbmZpZGVuY2VDb3VudCA+IDAgPyB0b3RhbENvbmZpZGVuY2UgLyBjb25maWRlbmNlQ291bnQgOiAwLFxuICAgIGZsYWdnZWRDb250ZW50LFxuICAgIGJsb2NrZWRDb250ZW50LFxuICAgIHRvcFZpb2xhdGlvbkNhdGVnb3JpZXMsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IHJlY2VudCBtb2RlcmF0aW9uIGFjdGl2aXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRNb2RlcmF0aW9uQWN0aXZpdHkobGltaXQ6IG51bWJlciA9IDIwKTogUHJvbWlzZTxBcnJheTx7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcbiAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICBjb25maWRlbmNlOiBudW1iZXIgfCBudWxsO1xuICBjcmVhdGVkQXQ6IERhdGU7XG4gIHVzZXI/OiB7XG4gICAgbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgICByb2xlOiBzdHJpbmc7XG4gIH07XG59Pj4ge1xuICBjb25zdCBsb2dzID0gYXdhaXQgcHJpc21hLm1vZGVyYXRpb25fbG9ncy5maW5kTWFueSh7XG4gICAgdGFrZTogbGltaXQsXG4gICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6ICdkZXNjJyB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICByb2xlOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gbG9ncy5tYXAoKGxvZzogYW55KSA9PiAoe1xuICAgIGlkOiBsb2cuaWQsXG4gICAgdXNlcklkOiBsb2cudXNlcklkLFxuICAgIGFjdGlvbjogbG9nLmFjdGlvbixcbiAgICBjb250ZW50VHlwZTogbG9nLmNvbnRlbnRUeXBlLFxuICAgIGNvbmZpZGVuY2U6IGxvZy5jb25maWRlbmNlLFxuICAgIGNyZWF0ZWRBdDogbG9nLmNyZWF0ZWRBdCxcbiAgICAuLi4obG9nLnVzZXIgJiYgeyB1c2VyOiB7IG5hbWU6IGxvZy51c2VyLm5hbWUsIHJvbGU6IGxvZy51c2VyLnJvbGUgfSB9KSxcbiAgfSkpO1xufVxuXG4vKipcbiAqIFNlYXJjaCBtb2RlcmF0aW9uIGxvZ3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaE1vZGVyYXRpb25Mb2dzKHBhcmFtczoge1xuICB1c2VySWQ/OiBzdHJpbmc7XG4gIGFjdGlvbj86IE1vZGVyYXRpb25BY3Rpb247XG4gIGNvbnRlbnRUeXBlPzogc3RyaW5nO1xuICBkYXRlRnJvbT86IERhdGU7XG4gIGRhdGVUbz86IERhdGU7XG4gIGxpbWl0PzogbnVtYmVyO1xuICBvZmZzZXQ/OiBudW1iZXI7XG59KTogUHJvbWlzZTxBcnJheTx7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nIHwgbnVsbDtcbiAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uO1xuICBjb250ZW50VHlwZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGZsYWdnZWRSZWFzb246IHN0cmluZyB8IG51bGw7XG4gIGNvbmZpZGVuY2U6IG51bWJlciB8IG51bGw7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbn0+PiB7XG4gIGNvbnN0IHdoZXJlOiBhbnkgPSB7fTtcbiAgXG4gIGlmIChwYXJhbXMudXNlcklkKSB3aGVyZS51c2VySWQgPSBwYXJhbXMudXNlcklkO1xuICBpZiAocGFyYW1zLmFjdGlvbikgd2hlcmUuYWN0aW9uID0gcGFyYW1zLmFjdGlvbjtcbiAgaWYgKHBhcmFtcy5jb250ZW50VHlwZSkgd2hlcmUuY29udGVudFR5cGUgPSBwYXJhbXMuY29udGVudFR5cGU7XG4gIGlmIChwYXJhbXMuZGF0ZUZyb20gfHwgcGFyYW1zLmRhdGVUbykge1xuICAgIHdoZXJlLmNyZWF0ZWRBdCA9IHt9O1xuICAgIGlmIChwYXJhbXMuZGF0ZUZyb20pIHdoZXJlLmNyZWF0ZWRBdC5ndGUgPSBwYXJhbXMuZGF0ZUZyb207XG4gICAgaWYgKHBhcmFtcy5kYXRlVG8pIHdoZXJlLmNyZWF0ZWRBdC5sdGUgPSBwYXJhbXMuZGF0ZVRvO1xuICB9XG5cbiAgcmV0dXJuIHByaXNtYS5tb2RlcmF0aW9uX2xvZ3MuZmluZE1hbnkoe1xuICAgIHdoZXJlLFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICB1c2VySWQ6IHRydWUsXG4gICAgICBhY3Rpb246IHRydWUsXG4gICAgICBjb250ZW50VHlwZTogdHJ1ZSxcbiAgICAgIGNvbnRlbnQ6IHRydWUsXG4gICAgICBmbGFnZ2VkUmVhc29uOiB0cnVlLFxuICAgICAgY29uZmlkZW5jZTogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgICB9LFxuICAgIG9yZGVyQnk6IHsgY3JlYXRlZEF0OiAnZGVzYycgfSxcbiAgICB0YWtlOiBwYXJhbXMubGltaXQgfHwgNTAsXG4gICAgc2tpcDogcGFyYW1zLm9mZnNldCB8fCAwLFxuICB9KTtcbn1cblxuLyoqXG4gKiBDbGVhbiB1cCBvbGQgbG9ncyBiYXNlZCBvbiByZXRlbnRpb24gcG9saWN5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGVhbnVwT2xkTG9ncygpOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBjdXRvZmZEYXRlID0gbmV3IERhdGUoRGF0ZS5ub3coKSAtIExPR0dJTkdfQ09ORklHLnJldGVudGlvbkRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByaXNtYS5tb2RlcmF0aW9uX2xvZ3MuZGVsZXRlTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGNyZWF0ZWRBdDogeyBsdDogY3V0b2ZmRGF0ZSB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnNvbGUubG9nKGBDbGVhbmVkIHVwICR7cmVzdWx0LmNvdW50fSBvbGQgbW9kZXJhdGlvbiBsb2dzYCk7XG4gIHJldHVybiByZXN1bHQuY291bnQ7XG59XG5cbi8qKlxuICogR2V0IHJlYWwtdGltZSBtZXRyaWNzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsVGltZU1ldHJpY3ModGltZVdpbmRvdzogbnVtYmVyID0gMzYwMDAwMCk6IHtcbiAgYWN0aW9uc1Blck1pbnV0ZTogbnVtYmVyO1xuICBhdmVyYWdlUHJvY2Vzc2luZ1RpbWU6IG51bWJlcjtcbiAgc3VjY2Vzc1JhdGU6IG51bWJlcjtcbiAgdG9wVXNlcnM6IEFycmF5PHsgdXNlcklkOiBzdHJpbmc7IGFjdGlvbkNvdW50OiBudW1iZXIgfT47XG59IHtcbiAgY29uc3QgbWV0cmljcyA9IG1vZGVyYXRpb25Mb2dnZXIuZ2V0TWV0cmljcyh0aW1lV2luZG93KTtcbiAgXG4gIGNvbnN0IHdpbmRvd01pbnV0ZXMgPSB0aW1lV2luZG93IC8gNjAwMDA7XG4gIGNvbnN0IGFjdGlvbnNQZXJNaW51dGUgPSBtZXRyaWNzLmxlbmd0aCAvIHdpbmRvd01pbnV0ZXM7XG4gIFxuICBjb25zdCB0b3RhbER1cmF0aW9uID0gbWV0cmljcy5yZWR1Y2UoKHN1bSwgbSkgPT4gc3VtICsgbS5kdXJhdGlvbiwgMCk7XG4gIGNvbnN0IGF2ZXJhZ2VQcm9jZXNzaW5nVGltZSA9IG1ldHJpY3MubGVuZ3RoID4gMCA/IHRvdGFsRHVyYXRpb24gLyBtZXRyaWNzLmxlbmd0aCA6IDA7XG4gIFxuICBjb25zdCBzdWNjZXNzQ291bnQgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0uc3VjY2VzcykubGVuZ3RoO1xuICBjb25zdCBzdWNjZXNzUmF0ZSA9IG1ldHJpY3MubGVuZ3RoID4gMCA/IHN1Y2Nlc3NDb3VudCAvIG1ldHJpY3MubGVuZ3RoIDogMDtcbiAgXG4gIGNvbnN0IHVzZXJDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgbWV0cmljcy5mb3JFYWNoKG0gPT4ge1xuICAgIGlmIChtLnVzZXJJZCkge1xuICAgICAgdXNlckNvdW50c1ttLnVzZXJJZF0gPSAodXNlckNvdW50c1ttLnVzZXJJZF0gfHwgMCkgKyAxO1xuICAgIH1cbiAgfSk7XG4gIFxuICBjb25zdCB0b3BVc2VycyA9IE9iamVjdC5lbnRyaWVzKHVzZXJDb3VudHMpXG4gICAgLm1hcCgoW3VzZXJJZCwgYWN0aW9uQ291bnRdKSA9PiAoeyB1c2VySWQsIGFjdGlvbkNvdW50IH0pKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLmFjdGlvbkNvdW50IC0gYS5hY3Rpb25Db3VudClcbiAgICAuc2xpY2UoMCwgMTApO1xuXG4gIHJldHVybiB7XG4gICAgYWN0aW9uc1Blck1pbnV0ZSxcbiAgICBhdmVyYWdlUHJvY2Vzc2luZ1RpbWUsXG4gICAgc3VjY2Vzc1JhdGUsXG4gICAgdG9wVXNlcnMsXG4gIH07XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVYUE9SVCBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IHtcbiAgTE9HR0lOR19DT05GSUcsXG59O1xuXG5leHBvcnQgdHlwZSB7IE1vZGVyYXRpb25Mb2dFbnRyeSwgTG9nTWV0cmljcyB9O1xuIl0sIm5hbWVzIjpbInByaXNtYSIsIk1vZGVyYXRpb25BY3Rpb24iLCJNb2RlcmF0aW9uU291cmNlIiwiTE9HR0lOR19DT05GSUciLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIk1PREVSQVRJT05fTE9HR0lORyIsImxvZ0xldmVsIiwiTE9HX0xFVkVMIiwicmV0ZW50aW9uRGF5cyIsInBhcnNlSW50IiwiTE9HX1JFVEVOVElPTl9EQVlTIiwiYmF0Y2hTaXplIiwiZmx1c2hJbnRlcnZhbCIsIk1vZGVyYXRpb25Mb2dnZXIiLCJsb2dRdWV1ZSIsIm1ldHJpY3NRdWV1ZSIsImZsdXNoVGltZXIiLCJzdGFydEJhdGNoUHJvY2Vzc29yIiwibG9nQWN0aW9uIiwiZW50cnkiLCJsb2dJZCIsImdlbmVyYXRlTG9nSWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwicHVzaCIsImlkIiwiZXh0cmFjdE1ldHJpY3MiLCJsb2dUb0NvbnNvbGUiLCJsZW5ndGgiLCJmbHVzaExvZ3MiLCJzZXRJbnRlcnZhbCIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwib24iLCJjbGVhckludGVydmFsIiwibG9nc1RvRmx1c2giLCJzcGxpY2UiLCJtb2RlcmF0aW9uX2xvZ3MiLCJjcmVhdGVNYW55IiwiZGF0YSIsIm1hcCIsImNvbnRlbnRJZCIsImV4dHJhY3RDb250ZW50SWQiLCJjb250ZW50IiwiY29udGVudFR5cGUiLCJ0cnVuY2F0ZUNvbnRlbnQiLCJhY3Rpb24iLCJzb3VyY2UiLCJyZXN1bHQiLCJjb25maWRlbmNlIiwib3BlbmFpUmVzcG9uc2UiLCJzZXJpYWxpemVPcGVuQUlSZXNwb25zZSIsInByb2Nlc3NlZEF0IiwibW9kZXJhdGVkQXQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJ1c2VySWQiLCJyZWFzb24iLCJmbGFnZ2VkUmVhc29uIiwic2tpcER1cGxpY2F0ZXMiLCJsb2ciLCJ1bnNoaWZ0IiwibWF4U2V2ZXJpdHkiLCJNYXRoIiwibWF4IiwiY2F0ZWdvcmllcyIsImMiLCJzZXZlcml0eSIsIm1ldHJpY3MiLCJkdXJhdGlvbiIsImNhbGN1bGF0ZVByb2Nlc3NpbmdEdXJhdGlvbiIsInN1Y2Nlc3MiLCJCTE9DS0VEIiwiY29udGVudExlbmd0aCIsImRldGVybWluZUxvZ0xldmVsIiwic2hvdWxkTG9nIiwibG9nRGF0YSIsInRvSVNPU3RyaW5nIiwiZmxhZ2dlZCIsImJsb2NrZWQiLCJjYXRlZ29yeSIsImVuZm9yY2VtZW50IiwiZGVidWciLCJpbmZvIiwid2FybiIsIm5vdyIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiRkxBR0dFRCIsImxldmVsIiwibGV2ZWxzIiwiY3VycmVudExldmVsSW5kZXgiLCJpbmRleE9mIiwibWVzc2FnZUxldmVsSW5kZXgiLCJiYXNlVGltZSIsImNhdGVnb3J5VGltZSIsIl9jb250ZW50IiwibWF4TGVuZ3RoIiwic3Vic3RyaW5nIiwiT1BFTkFJX0FQSSIsImdldE1ldHJpY3MiLCJ0aW1lV2luZG93IiwiY3V0b2ZmIiwiZmlsdGVyIiwibSIsIm1vZGVyYXRpb25Mb2dnZXIiLCJsb2dNb2RlcmF0aW9uQWN0aW9uIiwiZ2V0VXNlck1vZGVyYXRpb25Mb2dzIiwibGltaXQiLCJvZmZzZXQiLCJmaW5kTWFueSIsIndoZXJlIiwic2VsZWN0Iiwib3JkZXJCeSIsInRha2UiLCJza2lwIiwidGhlbiIsImxvZ3MiLCJnZXRNb2RlcmF0aW9uU3RhdHMiLCJ3aW5kb3dIb3VycyIsImRheSIsIndlZWsiLCJtb250aCIsInNpbmNlIiwiZ3RlIiwiYWN0aW9uc0J5VHlwZSIsInRvdGFsQ29uZmlkZW5jZSIsImNvbmZpZGVuY2VDb3VudCIsImZsYWdnZWRDb250ZW50IiwiYmxvY2tlZENvbnRlbnQiLCJjYXRlZ29yeUNvdW50IiwiZm9yRWFjaCIsInRvcFZpb2xhdGlvbkNhdGVnb3JpZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiY291bnQiLCJzb3J0IiwiYSIsImIiLCJzbGljZSIsInRvdGFsQWN0aW9ucyIsImF2ZXJhZ2VDb25maWRlbmNlIiwiZ2V0UmVjZW50TW9kZXJhdGlvbkFjdGl2aXR5IiwiaW5jbHVkZSIsInVzZXIiLCJuYW1lIiwicm9sZSIsInNlYXJjaE1vZGVyYXRpb25Mb2dzIiwicGFyYW1zIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJsdGUiLCJjbGVhbnVwT2xkTG9ncyIsImN1dG9mZkRhdGUiLCJkZWxldGVNYW55IiwibHQiLCJnZXRSZWFsVGltZU1ldHJpY3MiLCJ3aW5kb3dNaW51dGVzIiwiYWN0aW9uc1Blck1pbnV0ZSIsInRvdGFsRHVyYXRpb24iLCJyZWR1Y2UiLCJzdW0iLCJhdmVyYWdlUHJvY2Vzc2luZ1RpbWUiLCJzdWNjZXNzQ291bnQiLCJzdWNjZXNzUmF0ZSIsInVzZXJDb3VudHMiLCJ0b3BVc2VycyIsImFjdGlvbkNvdW50Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/loggers.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/middleware.ts":
/*!***********************************************!*\
  !*** ./src/services/moderation/middleware.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContentType: () => (/* binding */ ContentType),\n/* harmony export */   ModerationAction: () => (/* binding */ ModerationAction),\n/* harmony export */   ModerationSource: () => (/* binding */ ModerationSource),\n/* harmony export */   moderationMiddleware: () => (/* binding */ moderationMiddleware),\n/* harmony export */   validateContentClient: () => (/* binding */ validateContentClient)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n// src/lib/moderation/middleware.ts\n/**\n * Moderation Middleware for Massimino\n * Real-time content filtering for all text inputs with fitness-specific rules\n */ \n// Define types locally since Prisma client may not be available\nconst ModerationAction = {\n    APPROVED: 'APPROVED',\n    FLAGGED: 'FLAGGED',\n    BLOCKED: 'BLOCKED',\n    DELETED: 'DELETED'\n};\nconst ModerationSource = {\n    OPENAI: 'OPENAI',\n    CUSTOM_RULES: 'CUSTOM_RULES',\n    MANUAL: 'MANUAL'\n};\nconst ContentType = {\n    POST: 'POST',\n    COMMENT: 'COMMENT',\n    MESSAGE: 'MESSAGE',\n    COMMUNITY: 'COMMUNITY',\n    PROFILE: 'PROFILE'\n};\n// Placeholder functions - would be implemented in actual files\nasync function moderateContent(_content, _context) {\n    // Placeholder implementation\n    return {\n        action: 'APPROVED',\n        blocked: false,\n        flagged: false,\n        categories: [],\n        confidence: 0,\n        moderatedAt: new Date(),\n        appealable: false,\n        source: 'CUSTOM_RULES',\n        requiresHumanReview: false,\n        reviewPriority: 'LOW'\n    };\n}\nasync function applyCustomRules(_content, _context) {\n    // Placeholder implementation\n    return {\n        action: 'APPROVED',\n        blocked: false,\n        flagged: false,\n        categories: [],\n        confidence: 0,\n        moderatedAt: new Date(),\n        appealable: false,\n        source: 'CUSTOM_RULES',\n        requiresHumanReview: false,\n        reviewPriority: 'LOW'\n    };\n}\nasync function logModerationAction(logEntry) {\n    // Placeholder implementation\n    console.log('Moderation action logged:', logEntry);\n}\nasync function getEnforcementAction(userId, result) {\n    // Placeholder implementation\n    console.log('Enforcement action for user:', userId, result);\n}\n// ============================================================================\n// MIDDLEWARE CONFIGURATION\n// ============================================================================\nconst MIDDLEWARE_CONFIG = {\n    enabled: process.env.MODERATION_ENABLED !== 'false',\n    realTime: process.env.REAL_TIME_MODERATION !== 'false',\n    skipForAdmins: true,\n    skipForTrustedUsers: true,\n    cacheResults: true,\n    cacheTTL: 300000\n};\n// Content type mappings for different endpoints\nconst ENDPOINT_CONTENT_MAP = {\n    '/api/posts': 'POST',\n    '/api/comments': 'COMMENT',\n    '/api/messages': 'MESSAGE',\n    '/api/communities': 'COMMUNITY',\n    '/api/profiles': 'PROFILE'\n};\n// Results cache for avoiding duplicate API calls\nconst moderationCache = new Map();\n// ============================================================================\n// MAIN MIDDLEWARE FUNCTION\n// ============================================================================\n/**\n * Main moderation middleware for API routes\n */ async function moderationMiddleware(request, _context) {\n    // Skip if moderation is disabled\n    if (!MIDDLEWARE_CONFIG.enabled) {\n        return;\n    }\n    // Only process POST, PUT, PATCH requests with content\n    if (![\n        'POST',\n        'PUT',\n        'PATCH'\n    ].includes(request.method)) {\n        return;\n    }\n    try {\n        const body = await request.json().catch(()=>({}));\n        const contentFields = extractContentFields(body);\n        if (contentFields.length === 0) {\n            return; // No content to moderate\n        }\n        // Get user context for moderation\n        const userContext = await getUserContext(request);\n        // Skip moderation for exempt users\n        if (shouldSkipModeration(userContext)) {\n            return;\n        }\n        // Moderate all content fields\n        const moderationResults = await moderateAllContent(contentFields, request, userContext);\n        // Check if any content was blocked\n        const blockedContent = moderationResults.filter((r)=>r.result.blocked);\n        if (blockedContent.length > 0) {\n            // Log the blocked attempt\n            if (blockedContent[0]) {\n                const logEntry = {\n                    action: ModerationAction.BLOCKED,\n                    contentType: getContentType(request.url),\n                    content: blockedContent[0].content,\n                    result: blockedContent[0].result,\n                    metadata: {\n                        ipAddress: getClientIP(request)\n                    }\n                };\n                if (userContext?.userId) {\n                    logEntry.userId = userContext.userId;\n                }\n                if (request.headers.get('user-agent')) {\n                    logEntry.metadata.userAgent = request.headers.get('user-agent');\n                }\n                await logModerationAction(logEntry);\n            }\n            // Apply enforcement action\n            if (userContext?.userId && blockedContent[0]) {\n                await getEnforcementAction(userContext.userId, blockedContent[0].result);\n            }\n            return createBlockedResponse(blockedContent[0]?.result || {\n                action: ModerationAction.BLOCKED,\n                blocked: true,\n                flagged: false,\n                categories: [],\n                confidence: 0,\n                reason: 'Content blocked',\n                moderatedAt: new Date(),\n                appealable: false,\n                source: ModerationSource.CUSTOM_RULES,\n                requiresHumanReview: false,\n                reviewPriority: 'LOW'\n            });\n        }\n        // Log flagged content for review\n        const flaggedContent = moderationResults.filter((r)=>r.result.flagged);\n        for (const flagged of flaggedContent){\n            const logEntry = {\n                action: ModerationAction.FLAGGED,\n                contentType: getContentType(request.url),\n                content: flagged.content,\n                result: flagged.result,\n                metadata: {\n                    ipAddress: getClientIP(request)\n                }\n            };\n            if (userContext?.userId) {\n                logEntry.userId = userContext.userId;\n            }\n            if (request.headers.get('user-agent')) {\n                logEntry.metadata.userAgent = request.headers.get('user-agent');\n            }\n            await logModerationAction(logEntry);\n        }\n        // Continue processing if content is approved or just flagged\n        return;\n    } catch (error) {\n        console.error('Moderation middleware error:', error);\n        // In strict mode, block content on moderation errors\n        if (MIDDLEWARE_CONFIG.realTime) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Content moderation failed',\n                code: 'MODERATION_ERROR',\n                message: 'Unable to process content due to safety checks. Please try again later.'\n            }, {\n                status: 500\n            });\n        }\n        // Otherwise, allow content through but log the error\n        return;\n    }\n}\n// ============================================================================\n// CONTENT EXTRACTION AND PROCESSING\n// ============================================================================\n/**\n * Extract text content fields from request body\n */ function extractContentFields(body) {\n    const contentFields = [];\n    // Common content field names\n    const fieldNames = [\n        'content',\n        'text',\n        'message',\n        'description',\n        'title',\n        'bio',\n        'comment',\n        'reply',\n        'post',\n        'caption'\n    ];\n    fieldNames.forEach((fieldName)=>{\n        if (body[fieldName] && typeof body[fieldName] === 'string') {\n            const content = body[fieldName].trim();\n            if (content.length > 0) {\n                contentFields.push({\n                    field: fieldName,\n                    content\n                });\n            }\n        }\n    });\n    // Check nested objects for content\n    if (body.data && typeof body.data === 'object') {\n        const nestedFields = extractContentFields(body.data);\n        contentFields.push(...nestedFields.map((f)=>({\n                field: `data.${f.field}`,\n                content: f.content\n            })));\n    }\n    return contentFields;\n}\n/**\n * Moderate all extracted content fields\n */ async function moderateAllContent(contentFields, request, userContext) {\n    const results = [];\n    for (const { field, content } of contentFields){\n        // Check cache first\n        const cacheKey = generateCacheKey(content, userContext?.userId);\n        const cached = getCachedResult(cacheKey);\n        let result;\n        if (cached) {\n            result = cached;\n        } else {\n            // Build moderation context\n            const context = {\n                isTrainerToClient: userContext?.isTrainer || false,\n                isInPrivateMessage: getContentType(request.url) === 'MESSAGE',\n                communityType: 'PUBLIC',\n                authorReputation: userContext?.reputation || 0,\n                authorWarnings: userContext?.warnings || 0,\n                isFirstOffense: userContext?.violations === 0,\n                isReply: field.includes('reply'),\n                hasImages: false,\n                mentionsUsers: extractMentions(content),\n                timeOfDay: new Date().getHours().toString(),\n                dayOfWeek: new Date().getDay().toString()\n            };\n            // Apply custom fitness-specific rules first\n            result = await applyCustomRules(content, context);\n            // If custom rules don't block, use OpenAI\n            if (result.action === ModerationAction.APPROVED) {\n                result = await moderateContent(content, context);\n            }\n            // Cache the result\n            setCachedResult(cacheKey, result);\n        }\n        results.push({\n            field,\n            content,\n            result\n        });\n    }\n    return results;\n}\n/**\n * Get user context from request\n */ async function getUserContext(_request) {\n    // This would typically extract user info from session/JWT\n    // For now, return undefined - would be implemented with actual auth\n    // Example implementation:\n    // const session = await getSessionFromRequest(request);\n    // if (!session?.user) return undefined;\n    // \n    // return {\n    //   userId: session.user.id,\n    //   role: session.user.role,\n    //   reputation: session.user.reputationScore,\n    //   warnings: session.user.warningCount,\n    //   violations: session.user.violations || 0,\n    //   isTrainer: session.user.role === 'TRAINER',\n    //   isAdmin: session.user.role === 'ADMIN',\n    //   isTrusted: session.user.reputationScore > 95,\n    // };\n    return undefined;\n}\n/**\n * Determine if moderation should be skipped for this user\n */ function shouldSkipModeration(userContext) {\n    if (!userContext) return false;\n    // Skip for admins if configured\n    if (MIDDLEWARE_CONFIG.skipForAdmins && userContext.isAdmin) {\n        return true;\n    }\n    // Skip for highly trusted users\n    if (MIDDLEWARE_CONFIG.skipForTrustedUsers && userContext.isTrusted) {\n        return true;\n    }\n    return false;\n}\n// ============================================================================\n// RESPONSE CREATION\n// ============================================================================\n/**\n * Create response for blocked content\n */ function createBlockedResponse(result) {\n    const response = {\n        error: 'Content blocked',\n        code: 'CONTENT_MODERATION_VIOLATION',\n        message: result.reason || 'Your content violates our community guidelines',\n        details: {\n            categories: result.categories,\n            confidence: result.confidence,\n            appealable: result.appealable,\n            timestamp: result.moderatedAt\n        },\n        // Safety reminder for fitness platform\n        reminder: 'Massimino is a fitness-focused platform. Please keep conversations respectful and related to health, training, and wellness.'\n    };\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n        status: 400,\n        headers: {\n            'X-Content-Blocked': 'true',\n            'X-Block-Reason': result.categories[0]?.category || 'unknown'\n        }\n    });\n}\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Get content type from request URL\n */ function getContentType(url) {\n    if (!url) return 'POST';\n    for (const [endpoint, type] of Object.entries(ENDPOINT_CONTENT_MAP)){\n        if (url.includes(endpoint)) {\n            return type;\n        }\n    }\n    return 'POST';\n}\n/**\n * Extract mentions from content\n */ function extractMentions(content) {\n    const mentionRegex = /@(\\w+)/g;\n    const mentions = [];\n    let match;\n    while((match = mentionRegex.exec(content)) !== null){\n        if (match[1]) {\n            mentions.push(match[1]);\n        }\n    }\n    return mentions;\n}\n/**\n * Get client IP address\n */ function getClientIP(request) {\n    const forwarded = request.headers.get('x-forwarded-for');\n    const realIP = request.headers.get('x-real-ip');\n    if (forwarded) {\n        return forwarded.split(',')[0]?.trim() || 'unknown';\n    }\n    if (realIP) {\n        return realIP;\n    }\n    return 'unknown';\n}\n/**\n * Generate cache key for moderation result\n */ function generateCacheKey(content, userId) {\n    const contentHash = hashString(content);\n    return `mod:${contentHash}:${userId || 'anon'}`;\n}\n/**\n * Simple string hash function\n */ function hashString(str) {\n    let hash = 0;\n    for(let i = 0; i < str.length; i++){\n        const char = str.charCodeAt(i);\n        hash = (hash << 5) - hash + char;\n        hash = hash & hash; // Convert to 32-bit integer\n    }\n    return Math.abs(hash).toString(36);\n}\n/**\n * Get cached moderation result\n */ function getCachedResult(key) {\n    if (!MIDDLEWARE_CONFIG.cacheResults) return null;\n    const cached = moderationCache.get(key);\n    if (!cached) return null;\n    // Check if cache entry has expired\n    if (Date.now() - cached.timestamp > MIDDLEWARE_CONFIG.cacheTTL) {\n        moderationCache.delete(key);\n        return null;\n    }\n    return cached.result;\n}\n/**\n * Set cached moderation result\n */ function setCachedResult(key, result) {\n    if (!MIDDLEWARE_CONFIG.cacheResults) return;\n    moderationCache.set(key, {\n        result,\n        timestamp: Date.now()\n    });\n    // Clean up old cache entries periodically\n    if (moderationCache.size > 1000) {\n        const cutoff = Date.now() - MIDDLEWARE_CONFIG.cacheTTL;\n        Array.from(moderationCache.entries()).forEach(([k, v])=>{\n            if (v.timestamp < cutoff) {\n                moderationCache.delete(k);\n            }\n        });\n    }\n}\n// ============================================================================\n// CLIENT-SIDE MODERATION HELPER\n// ============================================================================\n/**\n * Client-side content validation before submission\n * Returns validation result with user-friendly feedback\n */ function validateContentClient(content) {\n    const warnings = [];\n    const suggestions = [];\n    // Basic content validation\n    if (content.length === 0) {\n        warnings.push('Content cannot be empty');\n        return {\n            valid: false,\n            warnings,\n            suggestions\n        };\n    }\n    if (content.length > 5000) {\n        warnings.push('Content is too long (maximum 5000 characters)');\n        suggestions.push('Try breaking your content into smaller posts');\n    }\n    // Simple client-side checks for obvious violations\n    const suspiciousPatterns = [\n        /\\b(meet me|hook up|sexy|hot pics)\\b/i,\n        /\\b(scam|fake|free money|click here)\\b/i,\n        /\\b(stupid|idiot|loser|hate you)\\b/i\n    ];\n    for (const pattern of suspiciousPatterns){\n        if (pattern.test(content)) {\n            warnings.push('Content may violate community guidelines');\n            suggestions.push('Please keep discussions respectful and fitness-focused');\n            break;\n        }\n    }\n    // Positive suggestions for fitness content\n    if (content.length > 100 && !content.match(/\\b(workout|exercise|fitness|training|health|nutrition)\\b/i)) {\n        suggestions.push('Consider relating your post to fitness, health, or training topics');\n    }\n    return {\n        valid: warnings.length === 0,\n        warnings,\n        suggestions\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9taWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLG1DQUFtQztBQUVuQzs7O0NBR0MsR0FFdUQ7QUFFeEQsZ0VBQWdFO0FBQ3pELE1BQU1DLG1CQUFtQjtJQUM5QkMsVUFBVTtJQUNWQyxTQUFTO0lBQ1RDLFNBQVM7SUFDVEMsU0FBUztBQUNYLEVBQVc7QUFFSixNQUFNQyxtQkFBbUI7SUFDOUJDLFFBQVE7SUFDUkMsY0FBYztJQUNkQyxRQUFRO0FBQ1YsRUFBVztBQUVKLE1BQU1DLGNBQWM7SUFDekJDLE1BQU07SUFDTkMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLFdBQVc7SUFDWEMsU0FBUztBQUNYLEVBQVc7QUFtQ1gsK0RBQStEO0FBQy9ELGVBQWVDLGdCQUFnQkMsUUFBZ0IsRUFBRUMsUUFBMkI7SUFDMUUsNkJBQTZCO0lBQzdCLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxTQUFTO1FBQ1RDLFNBQVM7UUFDVEMsWUFBWSxFQUFFO1FBQ2RDLFlBQVk7UUFDWkMsYUFBYSxJQUFJQztRQUNqQkMsWUFBWTtRQUNaQyxRQUFRO1FBQ1JDLHFCQUFxQjtRQUNyQkMsZ0JBQWdCO0lBQ2xCO0FBQ0Y7QUFFQSxlQUFlQyxpQkFBaUJiLFFBQWdCLEVBQUVDLFFBQTJCO0lBQzNFLDZCQUE2QjtJQUM3QixPQUFPO1FBQ0xDLFFBQVE7UUFDUkMsU0FBUztRQUNUQyxTQUFTO1FBQ1RDLFlBQVksRUFBRTtRQUNkQyxZQUFZO1FBQ1pDLGFBQWEsSUFBSUM7UUFDakJDLFlBQVk7UUFDWkMsUUFBUTtRQUNSQyxxQkFBcUI7UUFDckJDLGdCQUFnQjtJQUNsQjtBQUNGO0FBRUEsZUFBZUUsb0JBQW9CQyxRQUFhO0lBQzlDLDZCQUE2QjtJQUM3QkMsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QkY7QUFDM0M7QUFFQSxlQUFlRyxxQkFBcUJDLE1BQWMsRUFBRUMsTUFBd0I7SUFDMUUsNkJBQTZCO0lBQzdCSixRQUFRQyxH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LEtBQUssR0FBRztRQUN4QmlELFNBQVNuQixJQUFJLENBQUM7UUFDZCxPQUFPO1lBQUV5RSxPQUFPO1lBQU90RDtZQUFVcUQ7UUFBWTtJQUMvQztJQUVBLElBQUkxRixRQUFRWixNQUFNLEdBQUcsTUFBTTtRQUN6QmlELFNBQVNuQixJQUFJLENBQUM7UUFDZHdFLFlBQVl4RSxJQUFJLENBQUM7SUFDbkI7SUFFQSxtREFBbUQ7SUFDbkQsTUFBTTBFLHFCQUFxQjtRQUN6QjtRQUNBO1FBQ0E7S0FDRDtJQUVELEtBQUssTUFBTUMsV0FBV0QsbUJBQW9CO1FBQ3hDLElBQUlDLFFBQVFDLElBQUksQ0FBQzlGLFVBQVU7WUFDekJxQyxTQUFTbkIsSUFBSSxDQUFDO1lBQ2R3RSxZQUFZeEUsSUFBSSxDQUFDO1lBQ2pCO1FBQ0Y7SUFDRjtJQUVBLDJDQUEyQztJQUMzQyxJQUFJbEIsUUFBUVosTUFBTSxHQUFHLE9BQU8sQ0FBQ1ksUUFBUWlFLEtBQUssQ0FBQyw4REFBOEQ7UUFDdkd5QixZQUFZeEUsSUFBSSxDQUFDO0lBQ25CO0lBRUEsT0FBTztRQUNMeUUsT0FBT3RELFNBQVNqRCxNQUFNLEtBQUs7UUFDM0JpRDtRQUNBcUQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL3NlcnZpY2VzL21vZGVyYXRpb24vbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvbGliL21vZGVyYXRpb24vbWlkZGxld2FyZS50c1xuXG4vKipcbiAqIE1vZGVyYXRpb24gTWlkZGxld2FyZSBmb3IgTWFzc2ltaW5vXG4gKiBSZWFsLXRpbWUgY29udGVudCBmaWx0ZXJpbmcgZm9yIGFsbCB0ZXh0IGlucHV0cyB3aXRoIGZpdG5lc3Mtc3BlY2lmaWMgcnVsZXNcbiAqL1xuXG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG4vLyBEZWZpbmUgdHlwZXMgbG9jYWxseSBzaW5jZSBQcmlzbWEgY2xpZW50IG1heSBub3QgYmUgYXZhaWxhYmxlXG5leHBvcnQgY29uc3QgTW9kZXJhdGlvbkFjdGlvbiA9IHtcbiAgQVBQUk9WRUQ6ICdBUFBST1ZFRCcsXG4gIEZMQUdHRUQ6ICdGTEFHR0VEJyxcbiAgQkxPQ0tFRDogJ0JMT0NLRUQnLFxuICBERUxFVEVEOiAnREVMRVRFRCcsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgY29uc3QgTW9kZXJhdGlvblNvdXJjZSA9IHtcbiAgT1BFTkFJOiAnT1BFTkFJJyxcbiAgQ1VTVE9NX1JVTEVTOiAnQ1VTVE9NX1JVTEVTJyxcbiAgTUFOVUFMOiAnTUFOVUFMJyxcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCBjb25zdCBDb250ZW50VHlwZSA9IHtcbiAgUE9TVDogJ1BPU1QnLFxuICBDT01NRU5UOiAnQ09NTUVOVCcsXG4gIE1FU1NBR0U6ICdNRVNTQUdFJyxcbiAgQ09NTVVOSVRZOiAnQ09NTVVOSVRZJyxcbiAgUFJPRklMRTogJ1BST0ZJTEUnLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgTW9kZXJhdGlvbkFjdGlvblR5cGUgPSB0eXBlb2YgTW9kZXJhdGlvbkFjdGlvbltrZXlvZiB0eXBlb2YgTW9kZXJhdGlvbkFjdGlvbl07XG5leHBvcnQgdHlwZSBNb2RlcmF0aW9uU291cmNlVHlwZSA9IHR5cGVvZiBNb2RlcmF0aW9uU291cmNlW2tleW9mIHR5cGVvZiBNb2RlcmF0aW9uU291cmNlXTtcbmV4cG9ydCB0eXBlIENvbnRlbnRUeXBlVHlwZSA9IHR5cGVvZiBDb250ZW50VHlwZVtrZXlvZiB0eXBlb2YgQ29udGVudFR5cGVdO1xuXG4vLyBEZWZpbmUgaW50ZXJmYWNlcyBsb2NhbGx5XG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25SZXN1bHQge1xuICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb25UeXBlO1xuICBibG9ja2VkOiBib29sZWFuO1xuICBmbGFnZ2VkOiBib29sZWFuO1xuICBjYXRlZ29yaWVzOiBBcnJheTx7IGNhdGVnb3J5OiBzdHJpbmc7IGNvbmZpZGVuY2U6IG51bWJlciB9PjtcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xuICByZWFzb24/OiBzdHJpbmc7XG4gIG1vZGVyYXRlZEF0OiBEYXRlO1xuICBhcHBlYWxhYmxlOiBib29sZWFuO1xuICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2VUeXBlO1xuICByZXF1aXJlc0h1bWFuUmV2aWV3OiBib29sZWFuO1xuICByZXZpZXdQcmlvcml0eTogJ0xPVycgfCAnTUVESVVNJyB8ICdISUdIJyB8ICdVUkdFTlQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25Db250ZXh0IHtcbiAgaXNUcmFpbmVyVG9DbGllbnQ6IGJvb2xlYW47XG4gIGlzSW5Qcml2YXRlTWVzc2FnZTogYm9vbGVhbjtcbiAgY29tbXVuaXR5VHlwZTogc3RyaW5nO1xuICBhdXRob3JSZXB1dGF0aW9uOiBudW1iZXI7XG4gIGF1dGhvcldhcm5pbmdzOiBudW1iZXI7XG4gIGlzRmlyc3RPZmZlbnNlOiBib29sZWFuO1xuICBpc1JlcGx5OiBib29sZWFuO1xuICBoYXNJbWFnZXM6IGJvb2xlYW47XG4gIG1lbnRpb25zVXNlcnM6IHN0cmluZ1tdO1xuICB0aW1lT2ZEYXk6IHN0cmluZztcbiAgZGF5T2ZXZWVrOiBzdHJpbmc7XG59XG5cbi8vIFBsYWNlaG9sZGVyIGZ1bmN0aW9ucyAtIHdvdWxkIGJlIGltcGxlbWVudGVkIGluIGFjdHVhbCBmaWxlc1xuYXN5bmMgZnVuY3Rpb24gbW9kZXJhdGVDb250ZW50KF9jb250ZW50OiBzdHJpbmcsIF9jb250ZXh0OiBNb2RlcmF0aW9uQ29udGV4dCk6IFByb21pc2U8TW9kZXJhdGlvblJlc3VsdD4ge1xuICAvLyBQbGFjZWhvbGRlciBpbXBsZW1lbnRhdGlvblxuICByZXR1cm4ge1xuICAgIGFjdGlvbjogJ0FQUFJPVkVEJyxcbiAgICBibG9ja2VkOiBmYWxzZSxcbiAgICBmbGFnZ2VkOiBmYWxzZSxcbiAgICBjYXRlZ29yaWVzOiBbXSxcbiAgICBjb25maWRlbmNlOiAwLFxuICAgIG1vZGVyYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIGFwcGVhbGFibGU6IGZhbHNlLFxuICAgIHNvdXJjZTogJ0NVU1RPTV9SVUxFUycsXG4gICAgcmVxdWlyZXNIdW1hblJldmlldzogZmFsc2UsXG4gICAgcmV2aWV3UHJpb3JpdHk6ICdMT1cnLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBhcHBseUN1c3RvbVJ1bGVzKF9jb250ZW50OiBzdHJpbmcsIF9jb250ZXh0OiBNb2RlcmF0aW9uQ29udGV4dCk6IFByb21pc2U8TW9kZXJhdGlvblJlc3VsdD4ge1xuICAvLyBQbGFjZWhvbGRlciBpbXBsZW1lbnRhdGlvblxuICByZXR1cm4ge1xuICAgIGFjdGlvbjogJ0FQUFJPVkVEJyxcbiAgICBibG9ja2VkOiBmYWxzZSxcbiAgICBmbGFnZ2VkOiBmYWxzZSxcbiAgICBjYXRlZ29yaWVzOiBbXSxcbiAgICBjb25maWRlbmNlOiAwLFxuICAgIG1vZGVyYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIGFwcGVhbGFibGU6IGZhbHNlLFxuICAgIHNvdXJjZTogJ0NVU1RPTV9SVUxFUycsXG4gICAgcmVxdWlyZXNIdW1hblJldmlldzogZmFsc2UsXG4gICAgcmV2aWV3UHJpb3JpdHk6ICdMT1cnLFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBsb2dNb2RlcmF0aW9uQWN0aW9uKGxvZ0VudHJ5OiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gUGxhY2Vob2xkZXIgaW1wbGVtZW50YXRpb25cbiAgY29uc29sZS5sb2coJ01vZGVyYXRpb24gYWN0aW9uIGxvZ2dlZDonLCBsb2dFbnRyeSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEVuZm9yY2VtZW50QWN0aW9uKHVzZXJJZDogc3RyaW5nLCByZXN1bHQ6IE1vZGVyYXRpb25SZXN1bHQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgLy8gUGxhY2Vob2xkZXIgaW1wbGVtZW50YXRpb25cbiAgY29uc29sZS5sb2coJ0VuZm9yY2VtZW50IGFjdGlvbiBmb3IgdXNlcjonLCB1c2VySWQsIHJlc3VsdCk7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1JRERMRVdBUkUgQ09ORklHVVJBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jb25zdCBNSURETEVXQVJFX0NPTkZJRyA9IHtcbiAgZW5hYmxlZDogcHJvY2Vzcy5lbnYuTU9ERVJBVElPTl9FTkFCTEVEICE9PSAnZmFsc2UnLFxuICByZWFsVGltZTogcHJvY2Vzcy5lbnYuUkVBTF9USU1FX01PREVSQVRJT04gIT09ICdmYWxzZScsXG4gIHNraXBGb3JBZG1pbnM6IHRydWUsXG4gIHNraXBGb3JUcnVzdGVkVXNlcnM6IHRydWUsIC8vIFVzZXJzIHdpdGggcmVwdXRhdGlvbiA+IDk1XG4gIGNhY2hlUmVzdWx0czogdHJ1ZSxcbiAgY2FjaGVUVEw6IDMwMDAwMCwgLy8gNSBtaW51dGVzXG59IGFzIGNvbnN0O1xuXG4vLyBDb250ZW50IHR5cGUgbWFwcGluZ3MgZm9yIGRpZmZlcmVudCBlbmRwb2ludHNcbmNvbnN0IEVORFBPSU5UX0NPTlRFTlRfTUFQOiBSZWNvcmQ8c3RyaW5nLCBDb250ZW50VHlwZVR5cGU+ID0ge1xuICAnL2FwaS9wb3N0cyc6ICdQT1NUJyxcbiAgJy9hcGkvY29tbWVudHMnOiAnQ09NTUVOVCcsXG4gICcvYXBpL21lc3NhZ2VzJzogJ01FU1NBR0UnLFxuICAnL2FwaS9jb21tdW5pdGllcyc6ICdDT01NVU5JVFknLFxuICAnL2FwaS9wcm9maWxlcyc6ICdQUk9GSUxFJyxcbn0gYXMgY29uc3Q7XG5cbi8vIFJlc3VsdHMgY2FjaGUgZm9yIGF2b2lkaW5nIGR1cGxpY2F0ZSBBUEkgY2FsbHNcbmNvbnN0IG1vZGVyYXRpb25DYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCB7IHJlc3VsdDogTW9kZXJhdGlvblJlc3VsdDsgdGltZXN0YW1wOiBudW1iZXIgfT4oKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTUFJTiBNSURETEVXQVJFIEZVTkNUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogTWFpbiBtb2RlcmF0aW9uIG1pZGRsZXdhcmUgZm9yIEFQSSByb3V0ZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vZGVyYXRpb25NaWRkbGV3YXJlKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgX2NvbnRleHQ6IHsgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgYW55PiB9XG4pOiBQcm9taXNlPE5leHRSZXNwb25zZSB8IHZvaWQ+IHtcbiAgLy8gU2tpcCBpZiBtb2RlcmF0aW9uIGlzIGRpc2FibGVkXG4gIGlmICghTUlERExFV0FSRV9DT05GSUcuZW5hYmxlZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIE9ubHkgcHJvY2VzcyBQT1NULCBQVVQsIFBBVENIIHJlcXVlc3RzIHdpdGggY29udGVudFxuICBpZiAoIVsnUE9TVCcsICdQVVQnLCAnUEFUQ0gnXS5pbmNsdWRlcyhyZXF1ZXN0Lm1ldGhvZCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICBjb25zdCBjb250ZW50RmllbGRzID0gZXh0cmFjdENvbnRlbnRGaWVsZHMoYm9keSk7XG4gICAgXG4gICAgaWYgKGNvbnRlbnRGaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47IC8vIE5vIGNvbnRlbnQgdG8gbW9kZXJhdGVcbiAgICB9XG5cbiAgICAvLyBHZXQgdXNlciBjb250ZXh0IGZvciBtb2RlcmF0aW9uXG4gICAgY29uc3QgdXNlckNvbnRleHQgPSBhd2FpdCBnZXRVc2VyQ29udGV4dChyZXF1ZXN0KTtcbiAgICBcbiAgICAvLyBTa2lwIG1vZGVyYXRpb24gZm9yIGV4ZW1wdCB1c2Vyc1xuICAgIGlmIChzaG91bGRTa2lwTW9kZXJhdGlvbih1c2VyQ29udGV4dCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBNb2RlcmF0ZSBhbGwgY29udGVudCBmaWVsZHNcbiAgICBjb25zdCBtb2RlcmF0aW9uUmVzdWx0cyA9IGF3YWl0IG1vZGVyYXRlQWxsQ29udGVudChjb250ZW50RmllbGRzLCByZXF1ZXN0LCB1c2VyQ29udGV4dCk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgYW55IGNvbnRlbnQgd2FzIGJsb2NrZWRcbiAgICBjb25zdCBibG9ja2VkQ29udGVudCA9IG1vZGVyYXRpb25SZXN1bHRzLmZpbHRlcihyID0+IHIucmVzdWx0LmJsb2NrZWQpO1xuICAgIFxuICAgIGlmIChibG9ja2VkQ29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBMb2cgdGhlIGJsb2NrZWQgYXR0ZW1wdFxuICAgICAgaWYgKGJsb2NrZWRDb250ZW50WzBdKSB7XG4gICAgICAgIGNvbnN0IGxvZ0VudHJ5OiBhbnkgPSB7XG4gICAgICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgICAgICAgY29udGVudFR5cGU6IGdldENvbnRlbnRUeXBlKHJlcXVlc3QudXJsKSxcbiAgICAgICAgICBjb250ZW50OiBibG9ja2VkQ29udGVudFswXS5jb250ZW50LFxuICAgICAgICAgIHJlc3VsdDogYmxvY2tlZENvbnRlbnRbMF0ucmVzdWx0LFxuICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICBpcEFkZHJlc3M6IGdldENsaWVudElQKHJlcXVlc3QpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGlmICh1c2VyQ29udGV4dD8udXNlcklkKSB7XG4gICAgICAgICAgbG9nRW50cnkudXNlcklkID0gdXNlckNvbnRleHQudXNlcklkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50JykpIHtcbiAgICAgICAgICBsb2dFbnRyeS5tZXRhZGF0YS51c2VyQWdlbnQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgbG9nTW9kZXJhdGlvbkFjdGlvbihsb2dFbnRyeSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IGVuZm9yY2VtZW50IGFjdGlvblxuICAgICAgaWYgKHVzZXJDb250ZXh0Py51c2VySWQgJiYgYmxvY2tlZENvbnRlbnRbMF0pIHtcbiAgICAgICAgYXdhaXQgZ2V0RW5mb3JjZW1lbnRBY3Rpb24odXNlckNvbnRleHQudXNlcklkLCBibG9ja2VkQ29udGVudFswXS5yZXN1bHQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY3JlYXRlQmxvY2tlZFJlc3BvbnNlKGJsb2NrZWRDb250ZW50WzBdPy5yZXN1bHQgfHwgeyBcbiAgICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgICAgIGJsb2NrZWQ6IHRydWUsIFxuICAgICAgICBmbGFnZ2VkOiBmYWxzZSwgXG4gICAgICAgIGNhdGVnb3JpZXM6IFtdLCBcbiAgICAgICAgY29uZmlkZW5jZTogMCwgXG4gICAgICAgIHJlYXNvbjogJ0NvbnRlbnQgYmxvY2tlZCcsIFxuICAgICAgICBtb2RlcmF0ZWRBdDogbmV3IERhdGUoKSwgXG4gICAgICAgIGFwcGVhbGFibGU6IGZhbHNlLFxuICAgICAgICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2UuQ1VTVE9NX1JVTEVTLFxuICAgICAgICByZXF1aXJlc0h1bWFuUmV2aWV3OiBmYWxzZSxcbiAgICAgICAgcmV2aWV3UHJpb3JpdHk6ICdMT1cnXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBMb2cgZmxhZ2dlZCBjb250ZW50IGZvciByZXZpZXdcbiAgICBjb25zdCBmbGFnZ2VkQ29udGVudCA9IG1vZGVyYXRpb25SZXN1bHRzLmZpbHRlcihyID0+IHIucmVzdWx0LmZsYWdnZWQpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZmxhZ2dlZCBvZiBmbGFnZ2VkQ29udGVudCkge1xuICAgICAgY29uc3QgbG9nRW50cnk6IGFueSA9IHtcbiAgICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQsXG4gICAgICAgIGNvbnRlbnRUeXBlOiBnZXRDb250ZW50VHlwZShyZXF1ZXN0LnVybCksXG4gICAgICAgIGNvbnRlbnQ6IGZsYWdnZWQuY29udGVudCxcbiAgICAgICAgcmVzdWx0OiBmbGFnZ2VkLnJlc3VsdCxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBpcEFkZHJlc3M6IGdldENsaWVudElQKHJlcXVlc3QpLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICAgIGlmICh1c2VyQ29udGV4dD8udXNlcklkKSB7XG4gICAgICAgIGxvZ0VudHJ5LnVzZXJJZCA9IHVzZXJDb250ZXh0LnVzZXJJZDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0LmhlYWRlcnMuZ2V0KCd1c2VyLWFnZW50JykpIHtcbiAgICAgICAgbG9nRW50cnkubWV0YWRhdGEudXNlckFnZW50ID0gcmVxdWVzdC5oZWFkZXJzLmdldCgndXNlci1hZ2VudCcpO1xuICAgICAgfVxuICAgICAgYXdhaXQgbG9nTW9kZXJhdGlvbkFjdGlvbihsb2dFbnRyeSk7XG4gICAgfVxuXG4gICAgLy8gQ29udGludWUgcHJvY2Vzc2luZyBpZiBjb250ZW50IGlzIGFwcHJvdmVkIG9yIGp1c3QgZmxhZ2dlZFxuICAgIHJldHVybjtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vZGVyYXRpb24gbWlkZGxld2FyZSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gSW4gc3RyaWN0IG1vZGUsIGJsb2NrIGNvbnRlbnQgb24gbW9kZXJhdGlvbiBlcnJvcnNcbiAgICBpZiAoTUlERExFV0FSRV9DT05GSUcucmVhbFRpbWUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBlcnJvcjogJ0NvbnRlbnQgbW9kZXJhdGlvbiBmYWlsZWQnLFxuICAgICAgICAgIGNvZGU6ICdNT0RFUkFUSU9OX0VSUk9SJyxcbiAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHByb2Nlc3MgY29udGVudCBkdWUgdG8gc2FmZXR5IGNoZWNrcy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLy8gT3RoZXJ3aXNlLCBhbGxvdyBjb250ZW50IHRocm91Z2ggYnV0IGxvZyB0aGUgZXJyb3JcbiAgICByZXR1cm47XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09OVEVOVCBFWFRSQUNUSU9OIEFORCBQUk9DRVNTSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRXh0cmFjdCB0ZXh0IGNvbnRlbnQgZmllbGRzIGZyb20gcmVxdWVzdCBib2R5XG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb250ZW50RmllbGRzKGJvZHk6IGFueSk6IEFycmF5PHsgZmllbGQ6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0+IHtcbiAgY29uc3QgY29udGVudEZpZWxkczogQXJyYXk8eyBmaWVsZDogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfT4gPSBbXTtcbiAgXG4gIC8vIENvbW1vbiBjb250ZW50IGZpZWxkIG5hbWVzXG4gIGNvbnN0IGZpZWxkTmFtZXMgPSBbXG4gICAgJ2NvbnRlbnQnLCAndGV4dCcsICdtZXNzYWdlJywgJ2Rlc2NyaXB0aW9uJywgJ3RpdGxlJywgXG4gICAgJ2JpbycsICdjb21tZW50JywgJ3JlcGx5JywgJ3Bvc3QnLCAnY2FwdGlvbidcbiAgXTtcbiAgXG4gIGZpZWxkTmFtZXMuZm9yRWFjaChmaWVsZE5hbWUgPT4ge1xuICAgIGlmIChib2R5W2ZpZWxkTmFtZV0gJiYgdHlwZW9mIGJvZHlbZmllbGROYW1lXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBib2R5W2ZpZWxkTmFtZV0udHJpbSgpO1xuICAgICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW50RmllbGRzLnB1c2goeyBmaWVsZDogZmllbGROYW1lLCBjb250ZW50IH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBDaGVjayBuZXN0ZWQgb2JqZWN0cyBmb3IgY29udGVudFxuICBpZiAoYm9keS5kYXRhICYmIHR5cGVvZiBib2R5LmRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgY29uc3QgbmVzdGVkRmllbGRzID0gZXh0cmFjdENvbnRlbnRGaWVsZHMoYm9keS5kYXRhKTtcbiAgICBjb250ZW50RmllbGRzLnB1c2goLi4ubmVzdGVkRmllbGRzLm1hcChmID0+ICh7IFxuICAgICAgZmllbGQ6IGBkYXRhLiR7Zi5maWVsZH1gLCBcbiAgICAgIGNvbnRlbnQ6IGYuY29udGVudCBcbiAgICB9KSkpO1xuICB9XG4gIFxuICByZXR1cm4gY29udGVudEZpZWxkcztcbn1cblxuLyoqXG4gKiBNb2RlcmF0ZSBhbGwgZXh0cmFjdGVkIGNvbnRlbnQgZmllbGRzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG1vZGVyYXRlQWxsQ29udGVudChcbiAgY29udGVudEZpZWxkczogQXJyYXk8eyBmaWVsZDogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfT4sXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB1c2VyQ29udGV4dD86IFVzZXJDb250ZXh0XG4pOiBQcm9taXNlPEFycmF5PHsgZmllbGQ6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyByZXN1bHQ6IE1vZGVyYXRpb25SZXN1bHQgfT4+IHtcbiAgY29uc3QgcmVzdWx0czogQXJyYXk8eyBmaWVsZDogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IHJlc3VsdDogTW9kZXJhdGlvblJlc3VsdCB9PiA9IFtdO1xuICBcbiAgZm9yIChjb25zdCB7IGZpZWxkLCBjb250ZW50IH0gb2YgY29udGVudEZpZWxkcykge1xuICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gICAgY29uc3QgY2FjaGVLZXkgPSBnZW5lcmF0ZUNhY2hlS2V5KGNvbnRlbnQsIHVzZXJDb250ZXh0Py51c2VySWQpO1xuICAgIGNvbnN0IGNhY2hlZCA9IGdldENhY2hlZFJlc3VsdChjYWNoZUtleSk7XG4gICAgXG4gICAgbGV0IHJlc3VsdDogTW9kZXJhdGlvblJlc3VsdDtcbiAgICBcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICByZXN1bHQgPSBjYWNoZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEJ1aWxkIG1vZGVyYXRpb24gY29udGV4dFxuICAgICAgY29uc3QgY29udGV4dDogTW9kZXJhdGlvbkNvbnRleHQgPSB7XG4gICAgICAgIGlzVHJhaW5lclRvQ2xpZW50OiB1c2VyQ29udGV4dD8uaXNUcmFpbmVyIHx8IGZhbHNlLFxuICAgICAgICBpc0luUHJpdmF0ZU1lc3NhZ2U6IGdldENvbnRlbnRUeXBlKHJlcXVlc3QudXJsKSA9PT0gJ01FU1NBR0UnLFxuICAgICAgICBjb21tdW5pdHlUeXBlOiAnUFVCTElDJywgLy8gRGVmYXVsdCwgY291bGQgYmUgZW5oYW5jZWRcbiAgICAgICAgYXV0aG9yUmVwdXRhdGlvbjogdXNlckNvbnRleHQ/LnJlcHV0YXRpb24gfHwgMCxcbiAgICAgICAgYXV0aG9yV2FybmluZ3M6IHVzZXJDb250ZXh0Py53YXJuaW5ncyB8fCAwLFxuICAgICAgICBpc0ZpcnN0T2ZmZW5zZTogdXNlckNvbnRleHQ/LnZpb2xhdGlvbnMgPT09IDAsXG4gICAgICAgIGlzUmVwbHk6IGZpZWxkLmluY2x1ZGVzKCdyZXBseScpLFxuICAgICAgICBoYXNJbWFnZXM6IGZhbHNlLCAvLyBDb3VsZCBiZSBlbmhhbmNlZCB0byBjaGVjayBmb3IgaW1hZ2UgVVJMc1xuICAgICAgICBtZW50aW9uc1VzZXJzOiBleHRyYWN0TWVudGlvbnMoY29udGVudCksXG4gICAgICAgIHRpbWVPZkRheTogbmV3IERhdGUoKS5nZXRIb3VycygpLnRvU3RyaW5nKCksXG4gICAgICAgIGRheU9mV2VlazogbmV3IERhdGUoKS5nZXREYXkoKS50b1N0cmluZygpLFxuICAgICAgfTtcblxuICAgICAgLy8gQXBwbHkgY3VzdG9tIGZpdG5lc3Mtc3BlY2lmaWMgcnVsZXMgZmlyc3RcbiAgICAgIHJlc3VsdCA9IGF3YWl0IGFwcGx5Q3VzdG9tUnVsZXMoY29udGVudCwgY29udGV4dCk7XG4gICAgICBcbiAgICAgIC8vIElmIGN1c3RvbSBydWxlcyBkb24ndCBibG9jaywgdXNlIE9wZW5BSVxuICAgICAgaWYgKHJlc3VsdC5hY3Rpb24gPT09IE1vZGVyYXRpb25BY3Rpb24uQVBQUk9WRUQpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgbW9kZXJhdGVDb250ZW50KGNvbnRlbnQsIGNvbnRleHQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDYWNoZSB0aGUgcmVzdWx0XG4gICAgICBzZXRDYWNoZWRSZXN1bHQoY2FjaGVLZXksIHJlc3VsdCk7XG4gICAgfVxuICAgIFxuICAgIHJlc3VsdHMucHVzaCh7IGZpZWxkLCBjb250ZW50LCByZXN1bHQgfSk7XG4gIH1cbiAgXG4gIHJldHVybiByZXN1bHRzO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVU0VSIENPTlRFWFQgQU5EIFBFUk1JU1NJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmludGVyZmFjZSBVc2VyQ29udGV4dCB7XG4gIHVzZXJJZDogc3RyaW5nO1xuICByb2xlOiBzdHJpbmc7XG4gIHJlcHV0YXRpb246IG51bWJlcjtcbiAgd2FybmluZ3M6IG51bWJlcjtcbiAgdmlvbGF0aW9uczogbnVtYmVyO1xuICBpc1RyYWluZXI6IGJvb2xlYW47XG4gIGlzQWRtaW46IGJvb2xlYW47XG4gIGlzVHJ1c3RlZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBHZXQgdXNlciBjb250ZXh0IGZyb20gcmVxdWVzdFxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyQ29udGV4dChfcmVxdWVzdDogTmV4dFJlcXVlc3QpOiBQcm9taXNlPFVzZXJDb250ZXh0IHwgdW5kZWZpbmVkPiB7XG4gIC8vIFRoaXMgd291bGQgdHlwaWNhbGx5IGV4dHJhY3QgdXNlciBpbmZvIGZyb20gc2Vzc2lvbi9KV1RcbiAgLy8gRm9yIG5vdywgcmV0dXJuIHVuZGVmaW5lZCAtIHdvdWxkIGJlIGltcGxlbWVudGVkIHdpdGggYWN0dWFsIGF1dGhcbiAgXG4gIC8vIEV4YW1wbGUgaW1wbGVtZW50YXRpb246XG4gIC8vIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uRnJvbVJlcXVlc3QocmVxdWVzdCk7XG4gIC8vIGlmICghc2Vzc2lvbj8udXNlcikgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gXG4gIC8vIHJldHVybiB7XG4gIC8vICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaWQsXG4gIC8vICAgcm9sZTogc2Vzc2lvbi51c2VyLnJvbGUsXG4gIC8vICAgcmVwdXRhdGlvbjogc2Vzc2lvbi51c2VyLnJlcHV0YXRpb25TY29yZSxcbiAgLy8gICB3YXJuaW5nczogc2Vzc2lvbi51c2VyLndhcm5pbmdDb3VudCxcbiAgLy8gICB2aW9sYXRpb25zOiBzZXNzaW9uLnVzZXIudmlvbGF0aW9ucyB8fCAwLFxuICAvLyAgIGlzVHJhaW5lcjogc2Vzc2lvbi51c2VyLnJvbGUgPT09ICdUUkFJTkVSJyxcbiAgLy8gICBpc0FkbWluOiBzZXNzaW9uLnVzZXIucm9sZSA9PT0gJ0FETUlOJyxcbiAgLy8gICBpc1RydXN0ZWQ6IHNlc3Npb24udXNlci5yZXB1dGF0aW9uU2NvcmUgPiA5NSxcbiAgLy8gfTtcbiAgXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIG1vZGVyYXRpb24gc2hvdWxkIGJlIHNraXBwZWQgZm9yIHRoaXMgdXNlclxuICovXG5mdW5jdGlvbiBzaG91bGRTa2lwTW9kZXJhdGlvbih1c2VyQ29udGV4dD86IFVzZXJDb250ZXh0KTogYm9vbGVhbiB7XG4gIGlmICghdXNlckNvbnRleHQpIHJldHVybiBmYWxzZTtcbiAgXG4gIC8vIFNraXAgZm9yIGFkbWlucyBpZiBjb25maWd1cmVkXG4gIGlmIChNSURETEVXQVJFX0NPTkZJRy5za2lwRm9yQWRtaW5zICYmIHVzZXJDb250ZXh0LmlzQWRtaW4pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLy8gU2tpcCBmb3IgaGlnaGx5IHRydXN0ZWQgdXNlcnNcbiAgaWYgKE1JRERMRVdBUkVfQ09ORklHLnNraXBGb3JUcnVzdGVkVXNlcnMgJiYgdXNlckNvbnRleHQuaXNUcnVzdGVkKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkVTUE9OU0UgQ1JFQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDcmVhdGUgcmVzcG9uc2UgZm9yIGJsb2NrZWQgY29udGVudFxuICovXG5mdW5jdGlvbiBjcmVhdGVCbG9ja2VkUmVzcG9uc2UocmVzdWx0OiBNb2RlcmF0aW9uUmVzdWx0KTogTmV4dFJlc3BvbnNlIHtcbiAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgZXJyb3I6ICdDb250ZW50IGJsb2NrZWQnLFxuICAgIGNvZGU6ICdDT05URU5UX01PREVSQVRJT05fVklPTEFUSU9OJyxcbiAgICBtZXNzYWdlOiByZXN1bHQucmVhc29uIHx8ICdZb3VyIGNvbnRlbnQgdmlvbGF0ZXMgb3VyIGNvbW11bml0eSBndWlkZWxpbmVzJyxcbiAgICBkZXRhaWxzOiB7XG4gICAgICBjYXRlZ29yaWVzOiByZXN1bHQuY2F0ZWdvcmllcyxcbiAgICAgIGNvbmZpZGVuY2U6IHJlc3VsdC5jb25maWRlbmNlLFxuICAgICAgYXBwZWFsYWJsZTogcmVzdWx0LmFwcGVhbGFibGUsXG4gICAgICB0aW1lc3RhbXA6IHJlc3VsdC5tb2RlcmF0ZWRBdCxcbiAgICB9LFxuICAgIC8vIFNhZmV0eSByZW1pbmRlciBmb3IgZml0bmVzcyBwbGF0Zm9ybVxuICAgIHJlbWluZGVyOiAnTWFzc2ltaW5vIGlzIGEgZml0bmVzcy1mb2N1c2VkIHBsYXRmb3JtLiBQbGVhc2Uga2VlcCBjb252ZXJzYXRpb25zIHJlc3BlY3RmdWwgYW5kIHJlbGF0ZWQgdG8gaGVhbHRoLCB0cmFpbmluZywgYW5kIHdlbGxuZXNzLicsXG4gIH07XG4gIFxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgXG4gICAgc3RhdHVzOiA0MDAsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ1gtQ29udGVudC1CbG9ja2VkJzogJ3RydWUnLFxuICAgICAgJ1gtQmxvY2stUmVhc29uJzogcmVzdWx0LmNhdGVnb3JpZXNbMF0/LmNhdGVnb3J5IHx8ICd1bmtub3duJyxcbiAgICB9XG4gIH0pO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVVElMSVRZIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldCBjb250ZW50IHR5cGUgZnJvbSByZXF1ZXN0IFVSTFxuICovXG5mdW5jdGlvbiBnZXRDb250ZW50VHlwZSh1cmw/OiBzdHJpbmcpOiBDb250ZW50VHlwZVR5cGUge1xuICBpZiAoIXVybCkgcmV0dXJuICdQT1NUJztcbiAgXG4gIGZvciAoY29uc3QgW2VuZHBvaW50LCB0eXBlXSBvZiBPYmplY3QuZW50cmllcyhFTkRQT0lOVF9DT05URU5UX01BUCkpIHtcbiAgICBpZiAodXJsLmluY2x1ZGVzKGVuZHBvaW50KSkge1xuICAgICAgcmV0dXJuIHR5cGU7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gJ1BPU1QnO1xufVxuXG4vKipcbiAqIEV4dHJhY3QgbWVudGlvbnMgZnJvbSBjb250ZW50XG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RNZW50aW9ucyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gIGNvbnN0IG1lbnRpb25SZWdleCA9IC9AKFxcdyspL2c7XG4gIGNvbnN0IG1lbnRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICBsZXQgbWF0Y2g7XG4gIFxuICB3aGlsZSAoKG1hdGNoID0gbWVudGlvblJlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XG4gICAgaWYgKG1hdGNoWzFdKSB7XG4gICAgICBtZW50aW9ucy5wdXNoKG1hdGNoWzFdKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBtZW50aW9ucztcbn1cblxuLyoqXG4gKiBHZXQgY2xpZW50IElQIGFkZHJlc3NcbiAqL1xuZnVuY3Rpb24gZ2V0Q2xpZW50SVAocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKTtcbiAgY29uc3QgcmVhbElQID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1yZWFsLWlwJyk7XG4gIFxuICBpZiAoZm9yd2FyZGVkKSB7XG4gICAgcmV0dXJuIGZvcndhcmRlZC5zcGxpdCgnLCcpWzBdPy50cmltKCkgfHwgJ3Vua25vd24nO1xuICB9XG4gIFxuICBpZiAocmVhbElQKSB7XG4gICAgcmV0dXJuIHJlYWxJUDtcbiAgfVxuICBcbiAgcmV0dXJuICd1bmtub3duJztcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBjYWNoZSBrZXkgZm9yIG1vZGVyYXRpb24gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlQ2FjaGVLZXkoY29udGVudDogc3RyaW5nLCB1c2VySWQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBjb250ZW50SGFzaCA9IGhhc2hTdHJpbmcoY29udGVudCk7XG4gIHJldHVybiBgbW9kOiR7Y29udGVudEhhc2h9OiR7dXNlcklkIHx8ICdhbm9uJ31gO1xufVxuXG4vKipcbiAqIFNpbXBsZSBzdHJpbmcgaGFzaCBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBoYXNoU3RyaW5nKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IGhhc2ggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNoYXIgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBjaGFyO1xuICAgIGhhc2ggPSBoYXNoICYgaGFzaDsgLy8gQ29udmVydCB0byAzMi1iaXQgaW50ZWdlclxuICB9XG4gIHJldHVybiBNYXRoLmFicyhoYXNoKS50b1N0cmluZygzNik7XG59XG5cbi8qKlxuICogR2V0IGNhY2hlZCBtb2RlcmF0aW9uIHJlc3VsdFxuICovXG5mdW5jdGlvbiBnZXRDYWNoZWRSZXN1bHQoa2V5OiBzdHJpbmcpOiBNb2RlcmF0aW9uUmVzdWx0IHwgbnVsbCB7XG4gIGlmICghTUlERExFV0FSRV9DT05GSUcuY2FjaGVSZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgXG4gIGNvbnN0IGNhY2hlZCA9IG1vZGVyYXRpb25DYWNoZS5nZXQoa2V5KTtcbiAgaWYgKCFjYWNoZWQpIHJldHVybiBudWxsO1xuICBcbiAgLy8gQ2hlY2sgaWYgY2FjaGUgZW50cnkgaGFzIGV4cGlyZWRcbiAgaWYgKERhdGUubm93KCkgLSBjYWNoZWQudGltZXN0YW1wID4gTUlERExFV0FSRV9DT05GSUcuY2FjaGVUVEwpIHtcbiAgICBtb2RlcmF0aW9uQ2FjaGUuZGVsZXRlKGtleSk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIHJldHVybiBjYWNoZWQucmVzdWx0O1xufVxuXG4vKipcbiAqIFNldCBjYWNoZWQgbW9kZXJhdGlvbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVkUmVzdWx0KGtleTogc3RyaW5nLCByZXN1bHQ6IE1vZGVyYXRpb25SZXN1bHQpOiB2b2lkIHtcbiAgaWYgKCFNSURETEVXQVJFX0NPTkZJRy5jYWNoZVJlc3VsdHMpIHJldHVybjtcbiAgXG4gIG1vZGVyYXRpb25DYWNoZS5zZXQoa2V5LCB7XG4gICAgcmVzdWx0LFxuICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgfSk7XG4gIFxuICAvLyBDbGVhbiB1cCBvbGQgY2FjaGUgZW50cmllcyBwZXJpb2RpY2FsbHlcbiAgaWYgKG1vZGVyYXRpb25DYWNoZS5zaXplID4gMTAwMCkge1xuICAgIGNvbnN0IGN1dG9mZiA9IERhdGUubm93KCkgLSBNSURETEVXQVJFX0NPTkZJRy5jYWNoZVRUTDtcbiAgICBBcnJheS5mcm9tKG1vZGVyYXRpb25DYWNoZS5lbnRyaWVzKCkpLmZvckVhY2goKFtrLCB2XSkgPT4ge1xuICAgICAgaWYgKHYudGltZXN0YW1wIDwgY3V0b2ZmKSB7XG4gICAgICAgIG1vZGVyYXRpb25DYWNoZS5kZWxldGUoayk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ0xJRU5ULVNJREUgTU9ERVJBVElPTiBIRUxQRVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDbGllbnQtc2lkZSBjb250ZW50IHZhbGlkYXRpb24gYmVmb3JlIHN1Ym1pc3Npb25cbiAqIFJldHVybnMgdmFsaWRhdGlvbiByZXN1bHQgd2l0aCB1c2VyLWZyaWVuZGx5IGZlZWRiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNvbnRlbnRDbGllbnQoY29udGVudDogc3RyaW5nKToge1xuICB2YWxpZDogYm9vbGVhbjtcbiAgd2FybmluZ3M6IHN0cmluZ1tdO1xuICBzdWdnZXN0aW9uczogc3RyaW5nW107XG59IHtcbiAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8gQmFzaWMgY29udGVudCB2YWxpZGF0aW9uXG4gIGlmIChjb250ZW50Lmxlbmd0aCA9PT0gMCkge1xuICAgIHdhcm5pbmdzLnB1c2goJ0NvbnRlbnQgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCB3YXJuaW5ncywgc3VnZ2VzdGlvbnMgfTtcbiAgfVxuICBcbiAgaWYgKGNvbnRlbnQubGVuZ3RoID4gNTAwMCkge1xuICAgIHdhcm5pbmdzLnB1c2goJ0NvbnRlbnQgaXMgdG9vIGxvbmcgKG1heGltdW0gNTAwMCBjaGFyYWN0ZXJzKScpO1xuICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1RyeSBicmVha2luZyB5b3VyIGNvbnRlbnQgaW50byBzbWFsbGVyIHBvc3RzJyk7XG4gIH1cbiAgXG4gIC8vIFNpbXBsZSBjbGllbnQtc2lkZSBjaGVja3MgZm9yIG9idmlvdXMgdmlvbGF0aW9uc1xuICBjb25zdCBzdXNwaWNpb3VzUGF0dGVybnMgPSBbXG4gICAgL1xcYihtZWV0IG1lfGhvb2sgdXB8c2V4eXxob3QgcGljcylcXGIvaSxcbiAgICAvXFxiKHNjYW18ZmFrZXxmcmVlIG1vbmV5fGNsaWNrIGhlcmUpXFxiL2ksXG4gICAgL1xcYihzdHVwaWR8aWRpb3R8bG9zZXJ8aGF0ZSB5b3UpXFxiL2ksXG4gIF07XG4gIFxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2Ygc3VzcGljaW91c1BhdHRlcm5zKSB7XG4gICAgaWYgKHBhdHRlcm4udGVzdChjb250ZW50KSkge1xuICAgICAgd2FybmluZ3MucHVzaCgnQ29udGVudCBtYXkgdmlvbGF0ZSBjb21tdW5pdHkgZ3VpZGVsaW5lcycpO1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnUGxlYXNlIGtlZXAgZGlzY3Vzc2lvbnMgcmVzcGVjdGZ1bCBhbmQgZml0bmVzcy1mb2N1c2VkJyk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFBvc2l0aXZlIHN1Z2dlc3Rpb25zIGZvciBmaXRuZXNzIGNvbnRlbnRcbiAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMTAwICYmICFjb250ZW50Lm1hdGNoKC9cXGIod29ya291dHxleGVyY2lzZXxmaXRuZXNzfHRyYWluaW5nfGhlYWx0aHxudXRyaXRpb24pXFxiL2kpKSB7XG4gICAgc3VnZ2VzdGlvbnMucHVzaCgnQ29uc2lkZXIgcmVsYXRpbmcgeW91ciBwb3N0IHRvIGZpdG5lc3MsIGhlYWx0aCwgb3IgdHJhaW5pbmcgdG9waWNzJyk7XG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHdhcm5pbmdzLmxlbmd0aCA9PT0gMCxcbiAgICB3YXJuaW5ncyxcbiAgICBzdWdnZXN0aW9ucyxcbiAgfTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhQT1JUIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSB7IFVzZXJDb250ZXh0IH07Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIk1vZGVyYXRpb25BY3Rpb24iLCJBUFBST1ZFRCIsIkZMQUdHRUQiLCJCTE9DS0VEIiwiREVMRVRFRCIsIk1vZGVyYXRpb25Tb3VyY2UiLCJPUEVOQUkiLCJDVVNUT01fUlVMRVMiLCJNQU5VQUwiLCJDb250ZW50VHlwZSIsIlBPU1QiLCJDT01NRU5UIiwiTUVTU0FHRSIsIkNPTU1VTklUWSIsIlBST0ZJTEUiLCJtb2RlcmF0ZUNvbnRlbnQiLCJfY29udGVudCIsIl9jb250ZXh0IiwiYWN0aW9uIiwiYmxvY2tlZCIsImZsYWdnZWQiLCJjYXRlZ29yaWVzIiwiY29uZmlkZW5jZSIsIm1vZGVyYXRlZEF0IiwiRGF0ZSIsImFwcGVhbGFibGUiLCJzb3VyY2UiLCJyZXF1aXJlc0h1bWFuUmV2aWV3IiwicmV2aWV3UHJpb3JpdHkiLCJhcHBseUN1c3RvbVJ1bGVzIiwibG9nTW9kZXJhdGlvbkFjdGlvbiIsImxvZ0VudHJ5IiwiY29uc29sZSIsImxvZyIsImdldEVuZm9yY2VtZW50QWN0aW9uIiwidXNlcklkIiwicmVzdWx0IiwiTUlERExFV0FSRV9DT05GSUciLCJlbmFibGVkIiwicHJvY2VzcyIsImVudiIsIk1PREVSQVRJT05fRU5BQkxFRCIsInJlYWxUaW1lIiwiUkVBTF9USU1FX01PREVSQVRJT04iLCJza2lwRm9yQWRtaW5zIiwic2tpcEZvclRydXN0ZWRVc2VycyIsImNhY2hlUmVzdWx0cyIsImNhY2hlVFRMIiwiRU5EUE9JTlRfQ09OVEVOVF9NQVAiLCJtb2RlcmF0aW9uQ2FjaGUiLCJNYXAiLCJtb2RlcmF0aW9uTWlkZGxld2FyZSIsInJlcXVlc3QiLCJpbmNsdWRlcyIsIm1ldGhvZCIsImJvZHkiLCJqc29uIiwiY2F0Y2giLCJjb250ZW50RmllbGRzIiwiZXh0cmFjdENvbnRlbnRGaWVsZHMiLCJsZW5ndGgiLCJ1c2VyQ29udGV4dCIsImdldFVzZXJDb250ZXh0Iiwic2hvdWxkU2tpcE1vZGVyYXRpb24iLCJtb2RlcmF0aW9uUmVzdWx0cyIsIm1vZGVyYXRlQWxsQ29udGVudCIsImJsb2NrZWRDb250ZW50IiwiZmlsdGVyIiwiciIsImNvbnRlbnRUeXBlIiwiZ2V0Q29udGVudFR5cGUiLCJ1cmwiLCJjb250ZW50IiwibWV0YWRhdGEiLCJpcEFkZHJlc3MiLCJnZXRDbGllbnRJUCIsImhlYWRlcnMiLCJnZXQiLCJ1c2VyQWdlbnQiLCJjcmVhdGVCbG9ja2VkUmVzcG9uc2UiLCJyZWFzb24iLCJmbGFnZ2VkQ29udGVudCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJmaWVsZE5hbWVzIiwiZm9yRWFjaCIsImZpZWxkTmFtZSIsInRyaW0iLCJwdXNoIiwiZmllbGQiLCJkYXRhIiwibmVzdGVkRmllbGRzIiwibWFwIiwiZiIsInJlc3VsdHMiLCJjYWNoZUtleSIsImdlbmVyYXRlQ2FjaGVLZXkiLCJjYWNoZWQiLCJnZXRDYWNoZWRSZXN1bHQiLCJjb250ZXh0IiwiaXNUcmFpbmVyVG9DbGllbnQiLCJpc1RyYWluZXIiLCJpc0luUHJpdmF0ZU1lc3NhZ2UiLCJjb21tdW5pdHlUeXBlIiwiYXV0aG9yUmVwdXRhdGlvbiIsInJlcHV0YXRpb24iLCJhdXRob3JXYXJuaW5ncyIsIndhcm5pbmdzIiwiaXNGaXJzdE9mZmVuc2UiLCJ2aW9sYXRpb25zIiwiaXNSZXBseSIsImhhc0ltYWdlcyIsIm1lbnRpb25zVXNlcnMiLCJleHRyYWN0TWVudGlvbnMiLCJ0aW1lT2ZEYXkiLCJnZXRIb3VycyIsInRvU3RyaW5nIiwiZGF5T2ZXZWVrIiwiZ2V0RGF5Iiwic2V0Q2FjaGVkUmVzdWx0IiwiX3JlcXVlc3QiLCJ1bmRlZmluZWQiLCJpc0FkbWluIiwiaXNUcnVzdGVkIiwicmVzcG9uc2UiLCJkZXRhaWxzIiwidGltZXN0YW1wIiwicmVtaW5kZXIiLCJjYXRlZ29yeSIsImVuZHBvaW50IiwidHlwZSIsIk9iamVjdCIsImVudHJpZXMiLCJtZW50aW9uUmVnZXgiLCJtZW50aW9ucyIsIm1hdGNoIiwiZXhlYyIsImZvcndhcmRlZCIsInJlYWxJUCIsInNwbGl0IiwiY29udGVudEhhc2giLCJoYXNoU3RyaW5nIiwic3RyIiwiaGFzaCIsImkiLCJjaGFyIiwiY2hhckNvZGVBdCIsIk1hdGgiLCJhYnMiLCJrZXkiLCJub3ciLCJkZWxldGUiLCJzZXQiLCJzaXplIiwiY3V0b2ZmIiwiQXJyYXkiLCJmcm9tIiwiayIsInYiLCJ2YWxpZGF0ZUNvbnRlbnRDbGllbnQiLCJzdWdnZXN0aW9ucyIsInZhbGlkIiwic3VzcGljaW91c1BhdHRlcm5zIiwicGF0dGVybiIsInRlc3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/openai.ts":
/*!*******************************************!*\
  !*** ./src/services/moderation/openai.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CATEGORY_SEVERITY_MAP: () => (/* binding */ CATEGORY_SEVERITY_MAP),\n/* harmony export */   MODERATION_CONFIG: () => (/* binding */ MODERATION_CONFIG),\n/* harmony export */   moderateContent: () => (/* binding */ moderateContent),\n/* harmony export */   moderateContentBatch: () => (/* binding */ moderateContentBatch)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * OpenAI Moderation API Integration for Massimino\n * Core content moderation using OpenAI's moderation API with fitness-specific enhancements\n */ \n\n// ============================================================================\n// OPENAI CLIENT SETUP\n// ============================================================================\n// Validate environment variables\nif (!process.env.OPENAI_API_KEY) {\n    throw new Error('OPENAI_API_KEY environment variable is required');\n}\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY,\n    organization: process.env.OPENAI_ORG_ID\n});\n// Configuration\nconst MODERATION_CONFIG = {\n    model: 'text-moderation-latest',\n    timeout: 10000,\n    retries: 3,\n    threshold: parseFloat(process.env.MODERATION_THRESHOLD || '0.7'),\n    strictMode: process.env.MODERATION_STRICT_MODE === 'true',\n    autoBlock: process.env.MODERATION_AUTO_BLOCK === 'true'\n};\n// Category severity mapping (OpenAI categories to our severity scale 1-5)\nconst CATEGORY_SEVERITY_MAP = {\n    'sexual': 4,\n    'sexual/minors': 5,\n    'hate': 4,\n    'hate/threatening': 5,\n    'harassment': 3,\n    'harassment/threatening': 4,\n    'self-harm': 3,\n    'self-harm/intent': 4,\n    'self-harm/instructions': 5,\n    'violence': 3,\n    'violence/graphic': 4\n};\n// ============================================================================\n// CORE MODERATION FUNCTIONS\n// ============================================================================\n/**\n * Moderate content using OpenAI API\n */ async function moderateContent(content, context) {\n    try {\n        // Pre-processing checks\n        if (!content || content.trim().length === 0) {\n            return createSafeResult('Empty content provided');\n        }\n        if (content.length > 10000) {\n            return createBlockedResult('Content too long for moderation', 'CONTENT_TOO_LONG');\n        }\n        // Call OpenAI Moderation API\n        const startTime = Date.now();\n        const response = await callOpenAIModerationAPI(content);\n        const responseTime = Date.now() - startTime;\n        // Process the response\n        const result = await processOpenAIResponse(response, content, context);\n        // Log performance metrics\n        console.log(`Moderation completed in ${responseTime}ms`, {\n            contentLength: content.length,\n            flagged: result.flagged,\n            confidence: result.confidence\n        });\n        return result;\n    } catch (error) {\n        console.error('Moderation error:', error);\n        // Fallback to blocking content on API errors for safety\n        return createBlockedResult('Moderation service error - content blocked for safety', 'API_ERROR');\n    }\n}\n/**\n * Batch moderate multiple content items\n */ async function moderateContentBatch(items) {\n    const results = new Map();\n    // Process in chunks to avoid rate limits\n    const CHUNK_SIZE = 10;\n    const chunks = chunkArray(items, CHUNK_SIZE);\n    for (const chunk of chunks){\n        const promises = chunk.map(async (item)=>{\n            const result = await moderateContent(item.content, item.context);\n            return {\n                id: item.id,\n                result\n            };\n        });\n        const chunkResults = await Promise.allSettled(promises);\n        chunkResults.forEach((promiseResult, index)=>{\n            const itemId = chunk[index]?.id;\n            if (itemId) {\n                if (promiseResult.status === 'fulfilled') {\n                    results.set(itemId, promiseResult.value.result);\n                } else {\n                    console.error(`Batch moderation failed for item ${itemId}:`, promiseResult.reason);\n                    results.set(itemId, createBlockedResult('Batch moderation failed', 'BATCH_ERROR'));\n                }\n            }\n        });\n        // Rate limiting - wait between chunks\n        if (chunks.length > 1) {\n            await new Promise((resolve)=>setTimeout(resolve, 100));\n        }\n    }\n    return results;\n}\n// ============================================================================\n// OPENAI API INTERACTION\n// ============================================================================\n/**\n * Call OpenAI Moderation API with retry logic\n */ async function callOpenAIModerationAPI(content) {\n    const request = {\n        input: content,\n        model: MODERATION_CONFIG.model\n    };\n    let lastError;\n    for(let attempt = 1; attempt <= MODERATION_CONFIG.retries; attempt++){\n        try {\n            const response = await Promise.race([\n                openai.moderations.create(request),\n                new Promise((_, reject)=>setTimeout(()=>reject(new Error('Moderation timeout')), MODERATION_CONFIG.timeout))\n            ]);\n            return response;\n        } catch (error) {\n            lastError = error;\n            console.warn(`Moderation attempt ${attempt} failed:`, error);\n            // Wait before retry (exponential backoff)\n            if (attempt < MODERATION_CONFIG.retries) {\n                const delay = Math.min(1000 * Math.pow(2, attempt - 1), 5000);\n                await new Promise((resolve)=>setTimeout(resolve, delay));\n            }\n        }\n    }\n    throw lastError;\n}\n/**\n * Process OpenAI response into our ModerationResult format\n */ async function processOpenAIResponse(response, _originalContent, context) {\n    const result = response.results[0];\n    if (!result) {\n        return createSafeResult('No moderation result received');\n    }\n    const categories = extractModerationCategories(result);\n    // Calculate overall confidence and severity\n    const confidence = calculateConfidence(result);\n    const maxSeverity = Math.max(...categories.map((c)=>c.severity), 1);\n    // Determine action based on OpenAI flagging and our rules\n    const action = determineAction(result, confidence, maxSeverity, context);\n    // Create result object\n    const moderationResult = {\n        action,\n        flagged: result.flagged || action === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        blocked: action === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        confidence,\n        reason: generateReason(categories, action),\n        categories,\n        source: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationSource.OPENAI_API,\n        moderatedAt: new Date(),\n        requiresHumanReview: shouldRequireHumanReview(result, confidence, maxSeverity),\n        reviewPriority: determineReviewPriority(categories, confidence),\n        suggestedAction: suggestUserAction(categories, maxSeverity),\n        appealable: action !== _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED\n    };\n    return moderationResult;\n}\n// ============================================================================\n// RESULT PROCESSING UTILITIES\n// ============================================================================\n/**\n * Extract and categorize violations from OpenAI response\n */ function extractModerationCategories(result) {\n    const categories = [];\n    Object.entries(result.categories).forEach(([category, flagged])=>{\n        if (flagged) {\n            const score = result.category_scores[category] || 0;\n            const severity = CATEGORY_SEVERITY_MAP[category] || 2;\n            categories.push({\n                category: category.replace(/[/_]/g, ' ').toUpperCase(),\n                severity,\n                confidence: score,\n                description: getCategoryDescription(category)\n            });\n        }\n    });\n    return categories;\n}\n/**\n * Calculate overall confidence score\n */ function calculateConfidence(result) {\n    if (!result.flagged) return 0;\n    const scores = Object.values(result.category_scores);\n    const maxScore = Math.max(...scores);\n    const avgScore = scores.reduce((sum, score)=>sum + score, 0) / scores.length;\n    // Weight max score more heavily but consider average\n    return Math.min(maxScore * 0.7 + avgScore * 0.3, 1);\n}\n/**\n * Determine the appropriate action based on moderation results\n */ function determineAction(result, confidence, maxSeverity, context) {\n    // Always block high-severity violations\n    if (maxSeverity >= 5) {\n        return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED;\n    }\n    // Block if flagged by OpenAI and above threshold\n    if (result.flagged && confidence >= MODERATION_CONFIG.threshold) {\n        if (MODERATION_CONFIG.autoBlock) {\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED;\n        } else {\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED;\n        }\n    }\n    // Consider context for borderline cases\n    if (result.flagged && context) {\n        // More strict in public contexts\n        if (!context.isInPrivateMessage && confidence >= 0.5) {\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED;\n        }\n        // More strict for low-reputation users\n        if (context.authorReputation < 50 && confidence >= 0.4) {\n            return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED;\n        }\n    }\n    return _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED;\n}\n/**\n * Determine if human review is required\n */ function shouldRequireHumanReview(result, confidence, maxSeverity) {\n    // Always require review for high severity\n    if (maxSeverity >= 4) return true;\n    // Require review for borderline cases\n    if (result.flagged && confidence < MODERATION_CONFIG.threshold) return true;\n    // Require review for complex cases\n    const flaggedCategories = Object.values(result.categories).filter(Boolean).length;\n    if (flaggedCategories > 2) return true;\n    return false;\n}\n/**\n * Determine review priority\n */ function determineReviewPriority(categories, confidence) {\n    const maxSeverity = Math.max(...categories.map((c)=>c.severity), 1);\n    if (maxSeverity >= 5 || confidence >= 0.95) return 'URGENT';\n    if (maxSeverity >= 4 || confidence >= 0.85) return 'HIGH';\n    if (maxSeverity >= 3 || confidence >= 0.7) return 'MEDIUM';\n    return 'LOW';\n}\n/**\n * Suggest appropriate user action\n */ function suggestUserAction(_categories, maxSeverity) {\n    if (maxSeverity >= 5) return 'BAN';\n    if (maxSeverity >= 4) return 'SUSPEND_7D';\n    if (maxSeverity >= 3) return 'SUSPEND_3D';\n    if (maxSeverity >= 2) return 'WARN';\n    return 'DELETE_CONTENT';\n}\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n/**\n * Create a safe (approved) moderation result\n */ function createSafeResult(reason) {\n    return {\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED,\n        flagged: false,\n        blocked: false,\n        confidence: 0,\n        reason,\n        categories: [],\n        source: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationSource.OPENAI_API,\n        moderatedAt: new Date(),\n        requiresHumanReview: false,\n        reviewPriority: 'LOW',\n        appealable: false\n    };\n}\n/**\n * Create a blocked moderation result\n */ function createBlockedResult(reason, category) {\n    return {\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        flagged: true,\n        blocked: true,\n        confidence: 1,\n        reason,\n        categories: [\n            {\n                category,\n                severity: 3,\n                confidence: 1,\n                description: reason\n            }\n        ],\n        source: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationSource.OPENAI_API,\n        moderatedAt: new Date(),\n        requiresHumanReview: false,\n        reviewPriority: 'HIGH',\n        appealable: true\n    };\n}\n/**\n * Get human-readable description for violation category\n */ function getCategoryDescription(category) {\n    const descriptions = {\n        'sexual': 'Sexual content or suggestive material',\n        'sexual/minors': 'Sexual content involving minors',\n        'hate': 'Hateful or discriminatory language',\n        'hate/threatening': 'Threatening hate speech',\n        'harassment': 'Harassment or bullying behavior',\n        'harassment/threatening': 'Threatening harassment',\n        'self-harm': 'Self-harm related content',\n        'self-harm/intent': 'Intent to self-harm',\n        'self-harm/instructions': 'Instructions for self-harm',\n        'violence': 'Violent content or language',\n        'violence/graphic': 'Graphic violent content'\n    };\n    return descriptions[category] || `Violation: ${category}`;\n}\n/**\n * Generate human-readable reason for moderation action\n */ function generateReason(categories, action) {\n    if (categories.length === 0) {\n        return action === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED ? 'Content approved' : 'Content flagged';\n    }\n    const primaryCategory = categories.reduce((max, cat)=>cat.severity > max.severity ? cat : max);\n    const actionText = {\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED]: 'approved',\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED]: 'flagged for review',\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED]: 'blocked',\n        [_prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.EDITED]: 'edited'\n    }[action];\n    return `Content ${actionText} due to: ${primaryCategory.description}`;\n}\n/**\n * Chunk array into smaller arrays\n */ function chunkArray(array, size) {\n    const chunks = [];\n    for(let i = 0; i < array.length; i += size){\n        chunks.push(array.slice(i, i + size));\n    }\n    return chunks;\n}\n// ============================================================================\n// EXPORT API\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9vcGVuYWkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUUyQjtBQVF3QztBQUVwRSwrRUFBK0U7QUFDL0Usc0JBQXNCO0FBQ3RCLCtFQUErRTtBQUUvRSxpQ0FBaUM7QUFDakMsSUFBSSxDQUFDRyxRQUFRQyxHQUFHLENBQUNDLGNBQWMsRUFBRTtJQUMvQixNQUFNLElBQUlDLE1BQU07QUFDbEI7QUFFQSxNQUFNQyxTQUFTLElBQUlQLDhDQUFNQSxDQUFDO0lBQ3hCUSxRQUFRTCxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDbENJLGNBQWNOLFFBQVFDLEdBQUcsQ0FBQ00sYUFBYTtBQUN6QztBQUVBLGdCQUFnQjtBQUNoQixNQUFNQyxvQkFBb0I7SUFDeEJDLE9BQU87SUFDUEMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLFdBQVdDLFdBQVdiLFFBQVFDLEdBQUcsQ0FBQ2Esb0JBQW9CLElBQUk7SUFDMURDLFlBQVlmLFFBQVFDLEdBQUcsQ0FBQ2Usc0JBQXNCLEtBQUs7SUFDbkRDLFdBQVdqQixRQUFRQyxHQUFHLENBQUNpQixxQkFBcUIsS0FBSztBQUNuRDtBQUVBLDBFQUEwRTtBQUMxRSxNQUFNQyx3QkFBd0I7SUFDNUIsVUFBVTtJQUNWLGlCQUFpQjtJQUNqQixRQUFRO0lBQ1Isb0JBQW9CO0lBQ3BCLGNBQWM7SUFDZCwwQkFBMEI7SUFDMUIsYUFBYTtJQUNiLG9CQUFvQjtJQUNwQiwwQkFBMEI7SUFDMUIsWUFBWTtJQUNaLG9CQUFvQjtBQUN0QjtBQUVBLCtFQUErRTtBQUMvRSw0QkFBNEI7QUFDNUIsK0VBQStFO0FBRS9FOztDQUVDLEdBQ00sZUFBZUMsZ0JBQ3BCQyxPQUFlLEVBQ2ZDLE9BQTJCO0lBRTNCLElBQUk7UUFDRix3QkFBd0I7UUFDeEIsSUFBSSxDQUFDRCxXQUFXQSxRQUFRRSxJQUFJLEdBQUdDLE1BQU0sS0FBSyxHQUFHO1lBQzNDLE9BQU9DLGlCQUFpQjtRQUMxQjtRQUVBLElBQUlKLFFBQVFHLE1BQU0sR0FBRyxPQUFPO1lBQzFCLE9BQU9FLG9CQUFvQixtQ0FBbUM7UUFDaEU7UUFFQSw2QkFBNkI7UUFDN0IsTUFBTUMsWUFBWUMsS0FBS0MsR0FBRztRQUMxQixNQUFNQyxXQUFXLE1BQU1DLHdCQUF3QlY7UUFDL0MsTUFBTVcsZUFBZUosS0FBS0MsR0FBRyxLQUFLRjtRQUVsQyx1QkFBdUI7UUFDdkIsTUFBTU0sU0FBUyxNQUFNQyxzQkFBc0JKLFVBQVVULFNBQVNDO1FBRTlELDBCQUEwQjtRQUMxQmEsUUFBUUMsR0FBRyxDQUFDLENBQUMsd0JBQXdCLEVBQUVKLGFBQWEsRUFBRSxDQUFDLEVBQUU7WUFDdkRLLGVBQWVoQixRQUFRRyxNQUFNO1lBQzdCYyxTQUFTTCxPQUFPSyxPQUFPO1lBQ3ZCQyxZQUFZTixPQUFPTSxVQUFVO1FBQy9CO1FBRUEsT0FBT047SUFFVCxFQUFFLE9BQU9PLE9BQU87UUFDZEwsUUFBUUssS0FBSyxDQUFDLHFCQUFxQkE7UUFFbkMsd0RBQXdEO1FBQ3hELE9BQU9kLG9CQUNMLHlEQUNBO0lBRUo7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZWUscUJBQ3BCQyxLQUEwRTtJQUUxRSxNQUFNQyxVQUFVLElBQUlDO0lBRXBCLHlDQUF5QztJQUN6QyxNQUFNQyxhQUFhO0lBQ25CLE1BQU1DLFNBQVNDLFdBQVdMLE9BQU9HO0lBRWpDLEtBQUssTUFBTUcsU0FBU0YsT0FBUTtRQUMxQixNQUFNRyxXQUFXRCxNQUFNRSxHQUFHLENBQUMsT0FBT0M7WUFDaEMsTUFBTWxCLFNBQVMsTUFBTWIsZ0JBQWdCK0IsS0FBSzlCLE9BQU8sRUFBRThCLEtBQUs3QixPQUFPO1lBQy9ELE9BQU87Z0JBQUU4QixJQUFJRCxLQUFLQyxFQUFFO2dCQUFFbkI7WUFBTztRQUMvQjtRQUVBLE1BQU1vQixlQUFlLE1BQU1DLFFBQVFDLFVBQVUsQ0FBQ047UUFFOUNJLGFBQWFHLE9BQU8sQ0FBQyxDQUFDQyxlQUFlQztZQUNuQyxNQUFNQyxTQUFTWCxLQUFLLENBQUNVLE1BQU0sRUFBRU47WUFFN0IsSUFBSU8sUUFBUTtnQkFDVixJQUFJRixjQUFjRyxNQUFNLEtBQUssYUFBYTtvQkFDeENqQixRQUFRa0IsR0FBRyxDQUFDRixRQUFRRixjQUFjSyxLQUFLLENBQUM3QixNQUFNO2dCQUNoRCxPQUFPO29CQUNMRSxRQUFRSyxLQUFLLENBQUMsQ0FBQyxpQ0FBaUMsRUFBRW1CLE9BQU8sQ0FBQyxDQUFDLEVBQUVGLGNBQWNNLE1BQU07b0JBQ2pGcEIsUUFBUWtCLEdBQUcsQ0FBQ0YsUUFBUWpDLG9CQUFvQiwyQkFBMkI7Z0JBQ3JFO1lBQ0Y7UUFDRjtRQUVBLHNDQUFzQztRQUN0QyxJQUFJb0IsT0FBT3RCLE1BQU0sR0FBRyxHQUFHO1lBQ3JCLE1BQU0sSUFBSThCLFFBQVFVLENBQUFBLFVBQVdDLFdBQVdELFNBQVM7UUFDbkQ7SUFDRjtJQUVBLE9BQU9yQjtBQUNUO0FBRUEsK0VBQStFO0FBQy9FLHlCQUF5QjtBQUN6QiwrRUFBK0U7QUFFL0U7O0NBRUMsR0FDRCxlQUFlWix3QkFBd0JWLE9BQWU7SUFDcEQsTUFBTTZDLFVBQW1DO1FBQ3ZDQyxPQUFPOUM7UUFDUFosT0FBT0Qsa0JBQWtCQyxLQUFLO0lBQ2hDO0lBRUEsSUFBSTJEO0lBRUosSUFBSyxJQUFJQyxVQUFVLEdBQUdBLFdBQVc3RCxrQkFBa0JHLE9BQU8sRUFBRTBELFVBQVc7UUFDckUsSUFBSTtZQUNGLE1BQU12QyxXQUFXLE1BQU13QixRQUFRZ0IsSUFBSSxDQUFDO2dCQUNsQ2xFLE9BQU9tRSxXQUFXLENBQUNDLE1BQU0sQ0FBQ047Z0JBQzFCLElBQUlaLFFBQWUsQ0FBQ21CLEdBQUdDLFNBQ3JCVCxXQUFXLElBQU1TLE9BQU8sSUFBSXZFLE1BQU0sd0JBQXdCSyxrQkFBa0JFLE9BQU87YUFFdEY7WUFFRCxPQUFPb0I7UUFFVCxFQUFFLE9BQU9VLE9BQU87WUFDZDRCLFlBQVk1QjtZQUVaTCxRQUFRd0MsSUFBSSxDQUFDLENBQUMsbUJBQW1CLEVBQUVOLFFBQVEsUUFBUSxDQUFDLEVBQUU3QjtZQUV0RCwwQ0FBMEM7WUFDMUMsSUFBSTZCLFVBQVU3RCxrQkFBa0JHLE9BQU8sRUFBRTtnQkFDdkMsTUFBTWlFLFFBQVFDLEtBQUtDLEdBQUcsQ0FBQyxPQUFPRCxLQUFLRSxHQUFHLENBQUMsR0FBR1YsVUFBVSxJQUFJO2dCQUN4RCxNQUFNLElBQUlmLFFBQVFVLENBQUFBLFVBQVdDLFdBQVdELFNBQVNZO1lBQ25EO1FBQ0Y7SUFDRjtJQUVBLE1BQU1SO0FBQ1I7QUFFQTs7Q0FFQyxHQUNELGVBQWVsQyxzQkFDYkosUUFBa0MsRUFDbENrRCxnQkFBd0IsRUFDeEIxRCxPQUEyQjtJQUUzQixNQUFNVyxTQUFTSCxTQUFTYSxPQUFPLENBQUMsRUFBRTtJQUVsQyxJQUFJLENBQUNWLFFBQVE7UUFDWCxPQUFPUixpQkFBaUI7SUFDMUI7SUFDQSxNQUFNd0QsYUFBYUMsNEJBQTRCakQ7SUFFL0MsNENBQTRDO0lBQzVDLE1BQU1NLGFBQWE0QyxvQkFBb0JsRDtJQUN2QyxNQUFNbUQsY0FBY1AsS0FBS1EsR0FBRyxJQUFJSixXQUFXL0IsR0FBRyxDQUFDb0MsQ0FBQUEsSUFBS0EsRUFBRUMsUUFBUSxHQUFHO0lBRWpFLDBEQUEwRDtJQUMxRCxNQUFNQyxTQUFTQyxnQkFBZ0J4RCxRQUFRTSxZQUFZNkMsYUFBYTlEO0lBRWhFLHVCQUF1QjtJQUN2QixNQUFNb0UsbUJBQXFDO1FBQ3pDRjtRQUNBbEQsU0FBU0wsT0FBT0ssT0FBTyxJQUFJa0QsV0FBVzFGLDREQUFnQkEsQ0FBQzZGLE9BQU87UUFDOURDLFNBQVNKLFdBQVcxRiw0REFBZ0JBLENBQUM2RixPQUFPO1FBQzVDcEQ7UUFDQXdCLFFBQVE4QixlQUFlWixZQUFZTztRQUNuQ1A7UUFDQWEsUUFBUS9GLDREQUFnQkEsQ0FBQ2dHLFVBQVU7UUFDbkNDLGFBQWEsSUFBSXBFO1FBQ2pCcUUscUJBQXFCQyx5QkFBeUJqRSxRQUFRTSxZQUFZNkM7UUFDbEVlLGdCQUFnQkMsd0JBQXdCbkIsWUFBWTFDO1FBQ3BEOEQsaUJBQWlCQyxrQkFBa0JyQixZQUFZRztRQUMvQ21CLFlBQVlmLFdBQVcxRiw0REFBZ0JBLENBQUMwRyxRQUFRO0lBQ2xEO0lBRUEsT0FBT2Q7QUFDVDtBQUVBLCtFQUErRTtBQUMvRSw4QkFBOEI7QUFDOUIsK0VBQStFO0FBRS9FOztDQUVDLEdBQ0QsU0FBU1IsNEJBQTRCakQsTUFBVztJQUM5QyxNQUFNZ0QsYUFBbUMsRUFBRTtJQUUzQ3dCLE9BQU9DLE9BQU8sQ0FBQ3pFLE9BQU9nRCxVQUFVLEVBQUV6QixPQUFPLENBQUMsQ0FBQyxDQUFDbUQsVUFBVXJFLFFBQVE7UUFDNUQsSUFBSUEsU0FBUztZQUNYLE1BQU1zRSxRQUFRM0UsT0FBTzRFLGVBQWUsQ0FBQ0YsU0FBUyxJQUFJO1lBQ2xELE1BQU1wQixXQUFXcEUscUJBQXFCLENBQUN3RixTQUErQyxJQUFJO1lBRTFGMUIsV0FBVzZCLElBQUksQ0FBQztnQkFDZEgsVUFBVUEsU0FBU0ksT0FBTyxDQUFDLFNBQVMsS0FBS0MsV0FBVztnQkFDcER6QjtnQkFDQWhELFlBQVlxRTtnQkFDWkssYUFBYUMsdUJBQXVCUDtZQUN0QztRQUNGO0lBQ0Y7SUFFQSxPQUFPMUI7QUFDVDtBQUVBOztDQUVDLEdBQ0QsU0FBU0Usb0JBQW9CbEQsTUFBVztJQUN0QyxJQUFJLENBQUNBLE9BQU9LLE9BQU8sRUFBRSxPQUFPO0lBRTVCLE1BQU02RSxTQUFTVixPQUFPVyxNQUFNLENBQUNuRixPQUFPNEUsZUFBZTtJQUNuRCxNQUFNUSxXQUFXeEMsS0FBS1EsR0FBRyxJQUFJOEI7SUFDN0IsTUFBTUcsV0FBV0gsT0FBT0ksTUFBTSxDQUFDLENBQUNDLEtBQUtaLFFBQVVZLE1BQU1aLE9BQU8sS0FBS08sT0FBTzNGLE1BQU07SUFFOUUscURBQXFEO0lBQ3JELE9BQU9xRCxLQUFLQyxHQUFHLENBQUV1QyxXQUFXLE1BQU1DLFdBQVcsS0FBTTtBQUNyRDtBQUVBOztDQUVDLEdBQ0QsU0FBUzdCLGdCQUNQeEQsTUFBVyxFQUNYTSxVQUFrQixFQUNsQjZDLFdBQW1CLEVBQ25COUQsT0FBMkI7SUFFM0Isd0NBQXdDO0lBQ3hDLElBQUk4RCxlQUFlLEdBQUc7UUFDcEIsT0FBT3RGLDREQUFnQkEsQ0FBQzZGLE9BQU87SUFDakM7SUFFQSxpREFBaUQ7SUFDakQsSUFBSTFELE9BQU9LLE9BQU8sSUFBSUMsY0FBYy9CLGtCQUFrQkksU0FBUyxFQUFFO1FBQy9ELElBQUlKLGtCQUFrQlMsU0FBUyxFQUFFO1lBQy9CLE9BQU9uQiw0REFBZ0JBLENBQUM2RixPQUFPO1FBQ2pDLE9BQU87WUFDTCxPQUFPN0YsNERBQWdCQSxDQUFDMkgsT0FBTztRQUNqQztJQUNGO0lBRUEsd0NBQXdDO0lBQ3hDLElBQUl4RixPQUFPSyxPQUFPLElBQUloQixTQUFTO1FBQzdCLGlDQUFpQztRQUNqQyxJQUFJLENBQUNBLFFBQVFvRyxrQkFBa0IsSUFBSW5GLGNBQWMsS0FBSztZQUNwRCxPQUFPekMsNERBQWdCQSxDQUFDMkgsT0FBTztRQUNqQztRQUVBLHVDQUF1QztRQUN2QyxJQUFJbkcsUUFBUXFHLGdCQUFnQixHQUFHLE1BQU1wRixjQUFjLEtBQUs7WUFDdEQsT0FBT3pDLDREQUFnQkEsQ0FBQzJILE9BQU87UUFDakM7SUFDRjtJQUVBLE9BQU8zSCw0REFBZ0JBLENBQUMwRyxRQUFRO0FBQ2xDO0FBRUE7O0NBRUMsR0FDRCxTQUFTTix5QkFDUGpFLE1BQVcsRUFDWE0sVUFBa0IsRUFDbEI2QyxXQUFtQjtJQUVuQiwwQ0FBMEM7SUFDMUMsSUFBSUEsZUFBZSxHQUFHLE9BQU87SUFFN0Isc0NBQXNDO0lBQ3RDLElBQUluRCxPQUFPSyxPQUFPLElBQUlDLGFBQWEvQixrQkFBa0JJLFNBQVMsRUFBRSxPQUFPO0lBRXZFLG1DQUFtQztJQUNuQyxNQUFNZ0gsb0JBQW9CbkIsT0FBT1csTUFBTSxDQUFDbkYsT0FBT2dELFVBQVUsRUFBRTRDLE1BQU0sQ0FBQ0MsU0FBU3RHLE1BQU07SUFDakYsSUFBSW9HLG9CQUFvQixHQUFHLE9BQU87SUFFbEMsT0FBTztBQUNUO0FBRUE7O0NBRUMsR0FDRCxTQUFTeEIsd0JBQ1BuQixVQUFnQyxFQUNoQzFDLFVBQWtCO0lBRWxCLE1BQU02QyxjQUFjUCxLQUFLUSxHQUFHLElBQUlKLFdBQVcvQixHQUFHLENBQUNvQyxDQUFBQSxJQUFLQSxFQUFFQyxRQUFRLEdBQUc7SUFFakUsSUFBSUgsZUFBZSxLQUFLN0MsY0FBYyxNQUFNLE9BQU87SUFDbkQsSUFBSTZDLGVBQWUsS0FBSzdDLGNBQWMsTUFBTSxPQUFPO0lBQ25ELElBQUk2QyxlQUFlLEtBQUs3QyxjQUFjLEtBQUssT0FBTztJQUNsRCxPQUFPO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNELFNBQVMrRCxrQkFBa0J5QixXQUFpQyxFQUFFM0MsV0FBbUI7SUFDL0UsSUFBSUEsZUFBZSxHQUFHLE9BQU87SUFDN0IsSUFBSUEsZUFBZSxHQUFHLE9BQU87SUFDN0IsSUFBSUEsZUFBZSxHQUFHLE9BQU87SUFDN0IsSUFBSUEsZUFBZSxHQUFHLE9BQU87SUFDN0IsT0FBTztBQUNUO0FBRUEsK0VBQStFO0FBQy9FLG1CQUFtQjtBQUNuQiwrRUFBK0U7QUFFL0U7O0NBRUMsR0FDRCxTQUFTM0QsaUJBQWlCc0MsTUFBYztJQUN0QyxPQUFPO1FBQ0x5QixRQUFRMUYsNERBQWdCQSxDQUFDMEcsUUFBUTtRQUNqQ2xFLFNBQVM7UUFDVHNELFNBQVM7UUFDVHJELFlBQVk7UUFDWndCO1FBQ0FrQixZQUFZLEVBQUU7UUFDZGEsUUFBUS9GLDREQUFnQkEsQ0FBQ2dHLFVBQVU7UUFDbkNDLGFBQWEsSUFBSXBFO1FBQ2pCcUUscUJBQXFCO1FBQ3JCRSxnQkFBZ0I7UUFDaEJJLFlBQVk7SUFDZDtBQUNGO0FBRUE7O0NBRUMsR0FDRCxTQUFTN0Usb0JBQW9CcUMsTUFBYyxFQUFFNEMsUUFBZ0I7SUFDM0QsT0FBTztRQUNMbkIsUUFBUTFGLDREQUFnQkEsQ0FBQzZGLE9BQU87UUFDaENyRCxTQUFTO1FBQ1RzRCxTQUFTO1FBQ1RyRCxZQUFZO1FBQ1p3QjtRQUNBa0IsWUFBWTtZQUFDO2dCQUNYMEI7Z0JBQ0FwQixVQUFVO2dCQUNWaEQsWUFBWTtnQkFDWjBFLGFBQWFsRDtZQUNmO1NBQUU7UUFDRitCLFFBQVEvRiw0REFBZ0JBLENBQUNnRyxVQUFVO1FBQ25DQyxhQUFhLElBQUlwRTtRQUNqQnFFLHFCQUFxQjtRQUNyQkUsZ0JBQWdCO1FBQ2hCSSxZQUFZO0lBQ2Q7QUFDRjtBQUVBOztDQUVDLEdBQ0QsU0FBU1csdUJBQXVCUCxRQUFnQjtJQUM5QyxNQUFNcUIsZUFBdUM7UUFDM0MsVUFBVTtRQUNWLGlCQUFpQjtRQUNqQixRQUFRO1FBQ1Isb0JBQW9CO1FBQ3BCLGNBQWM7UUFDZCwwQkFBMEI7UUFDMUIsYUFBYTtRQUNiLG9CQUFvQjtRQUNwQiwwQkFBMEI7UUFDMUIsWUFBWTtRQUNaLG9CQUFvQjtJQUN0QjtJQUVBLE9BQU9BLFlBQVksQ0FBQ3JCLFNBQVMsSUFBSSxDQUFDLFdBQVcsRUFBRUEsVUFBVTtBQUMzRDtBQUVBOztDQUVDLEdBQ0QsU0FBU2QsZUFBZVosVUFBZ0MsRUFBRU8sTUFBd0I7SUFDaEYsSUFBSVAsV0FBV3pELE1BQU0sS0FBSyxHQUFHO1FBQzNCLE9BQU9nRSxXQUFXMUYsNERBQWdCQSxDQUFDMEcsUUFBUSxHQUFHLHFCQUFxQjtJQUNyRTtJQUVBLE1BQU15QixrQkFBa0JoRCxXQUFXc0MsTUFBTSxDQUFDLENBQUNsQyxLQUFLNkMsTUFDOUNBLElBQUkzQyxRQUFRLEdBQUdGLElBQUlFLFFBQVEsR0FBRzJDLE1BQU03QztJQUd0QyxNQUFNOEMsYUFBYTtRQUNqQixDQUFDckksNERBQWdCQSxDQUFDMEcsUUFBUSxDQUFDLEVBQUU7UUFDN0IsQ0FBQzFHLDREQUFnQkEsQ0FBQzJILE9BQU8sQ0FBQyxFQUFFO1FBQzVCLENBQUMzSCw0REFBZ0JBLENBQUM2RixPQUFPLENBQUMsRUFBRTtRQUM1QixDQUFDN0YsNERBQWdCQSxDQUFDc0ksTUFBTSxDQUFDLEVBQUU7SUFDN0IsQ0FBQyxDQUFDNUMsT0FBTztJQUVULE9BQU8sQ0FBQyxRQUFRLEVBQUUyQyxXQUFXLFNBQVMsRUFBRUYsZ0JBQWdCaEIsV0FBVyxFQUFFO0FBQ3ZFO0FBRUE7O0NBRUMsR0FDRCxTQUFTbEUsV0FBY3NGLEtBQVUsRUFBRUMsSUFBWTtJQUM3QyxNQUFNeEYsU0FBZ0IsRUFBRTtJQUN4QixJQUFLLElBQUl5RixJQUFJLEdBQUdBLElBQUlGLE1BQU03RyxNQUFNLEVBQUUrRyxLQUFLRCxLQUFNO1FBQzNDeEYsT0FBT2dFLElBQUksQ0FBQ3VCLE1BQU1HLEtBQUssQ0FBQ0QsR0FBR0EsSUFBSUQ7SUFDakM7SUFDQSxPQUFPeEY7QUFDVDtBQUVBLCtFQUErRTtBQUMvRSxhQUFhO0FBQ2IsK0VBQStFO0FBSzdFIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL3NlcnZpY2VzL21vZGVyYXRpb24vb3BlbmFpLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogT3BlbkFJIE1vZGVyYXRpb24gQVBJIEludGVncmF0aW9uIGZvciBNYXNzaW1pbm9cbiAqIENvcmUgY29udGVudCBtb2RlcmF0aW9uIHVzaW5nIE9wZW5BSSdzIG1vZGVyYXRpb24gQVBJIHdpdGggZml0bmVzcy1zcGVjaWZpYyBlbmhhbmNlbWVudHNcbiAqL1xuXG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5pbXBvcnQgdHlwZSB7IFxuICBNb2RlcmF0aW9uUmVzdWx0LCBcbiAgTW9kZXJhdGlvbkNvbnRleHQsXG4gIE9wZW5BSU1vZGVyYXRpb25SZXF1ZXN0LFxuICBPcGVuQUlNb2RlcmF0aW9uUmVzcG9uc2UsXG4gIE1vZGVyYXRpb25DYXRlZ29yeSBcbn0gZnJvbSAnQC90eXBlcy9tb2RlcmF0aW9uJztcbmltcG9ydCB7IE1vZGVyYXRpb25BY3Rpb24sIE1vZGVyYXRpb25Tb3VyY2UgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE9QRU5BSSBDTElFTlQgU0VUVVBcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gVmFsaWRhdGUgZW52aXJvbm1lbnQgdmFyaWFibGVzXG5pZiAoIXByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZKSB7XG4gIHRocm93IG5ldyBFcnJvcignT1BFTkFJX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgcmVxdWlyZWQnKTtcbn1cblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG4gIG9yZ2FuaXphdGlvbjogcHJvY2Vzcy5lbnYuT1BFTkFJX09SR19JRCwgLy8gT3B0aW9uYWxcbn0pO1xuXG4vLyBDb25maWd1cmF0aW9uXG5jb25zdCBNT0RFUkFUSU9OX0NPTkZJRyA9IHtcbiAgbW9kZWw6ICd0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0JyBhcyBjb25zdCxcbiAgdGltZW91dDogMTAwMDAsIC8vIDEwIHNlY29uZCB0aW1lb3V0XG4gIHJldHJpZXM6IDMsXG4gIHRocmVzaG9sZDogcGFyc2VGbG9hdChwcm9jZXNzLmVudi5NT0RFUkFUSU9OX1RIUkVTSE9MRCB8fCAnMC43JyksXG4gIHN0cmljdE1vZGU6IHByb2Nlc3MuZW52Lk1PREVSQVRJT05fU1RSSUNUX01PREUgPT09ICd0cnVlJyxcbiAgYXV0b0Jsb2NrOiBwcm9jZXNzLmVudi5NT0RFUkFUSU9OX0FVVE9fQkxPQ0sgPT09ICd0cnVlJyxcbn0gYXMgY29uc3Q7XG5cbi8vIENhdGVnb3J5IHNldmVyaXR5IG1hcHBpbmcgKE9wZW5BSSBjYXRlZ29yaWVzIHRvIG91ciBzZXZlcml0eSBzY2FsZSAxLTUpXG5jb25zdCBDQVRFR09SWV9TRVZFUklUWV9NQVAgPSB7XG4gICdzZXh1YWwnOiA0LFxuICAnc2V4dWFsL21pbm9ycyc6IDUsIC8vIEhpZ2hlc3Qgc2V2ZXJpdHlcbiAgJ2hhdGUnOiA0LFxuICAnaGF0ZS90aHJlYXRlbmluZyc6IDUsXG4gICdoYXJhc3NtZW50JzogMyxcbiAgJ2hhcmFzc21lbnQvdGhyZWF0ZW5pbmcnOiA0LFxuICAnc2VsZi1oYXJtJzogMyxcbiAgJ3NlbGYtaGFybS9pbnRlbnQnOiA0LFxuICAnc2VsZi1oYXJtL2luc3RydWN0aW9ucyc6IDUsXG4gICd2aW9sZW5jZSc6IDMsXG4gICd2aW9sZW5jZS9ncmFwaGljJzogNCxcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPUkUgTU9ERVJBVElPTiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBNb2RlcmF0ZSBjb250ZW50IHVzaW5nIE9wZW5BSSBBUElcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vZGVyYXRlQ29udGVudChcbiAgY29udGVudDogc3RyaW5nLFxuICBjb250ZXh0PzogTW9kZXJhdGlvbkNvbnRleHRcbik6IFByb21pc2U8TW9kZXJhdGlvblJlc3VsdD4ge1xuICB0cnkge1xuICAgIC8vIFByZS1wcm9jZXNzaW5nIGNoZWNrc1xuICAgIGlmICghY29udGVudCB8fCBjb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBjcmVhdGVTYWZlUmVzdWx0KCdFbXB0eSBjb250ZW50IHByb3ZpZGVkJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoID4gMTAwMDApIHtcbiAgICAgIHJldHVybiBjcmVhdGVCbG9ja2VkUmVzdWx0KCdDb250ZW50IHRvbyBsb25nIGZvciBtb2RlcmF0aW9uJywgJ0NPTlRFTlRfVE9PX0xPTkcnKTtcbiAgICB9XG5cbiAgICAvLyBDYWxsIE9wZW5BSSBNb2RlcmF0aW9uIEFQSVxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjYWxsT3BlbkFJTW9kZXJhdGlvbkFQSShjb250ZW50KTtcbiAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgLy8gUHJvY2VzcyB0aGUgcmVzcG9uc2VcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9jZXNzT3BlbkFJUmVzcG9uc2UocmVzcG9uc2UsIGNvbnRlbnQsIGNvbnRleHQpO1xuICAgIFxuICAgIC8vIExvZyBwZXJmb3JtYW5jZSBtZXRyaWNzXG4gICAgY29uc29sZS5sb2coYE1vZGVyYXRpb24gY29tcGxldGVkIGluICR7cmVzcG9uc2VUaW1lfW1zYCwge1xuICAgICAgY29udGVudExlbmd0aDogY29udGVudC5sZW5ndGgsXG4gICAgICBmbGFnZ2VkOiByZXN1bHQuZmxhZ2dlZCxcbiAgICAgIGNvbmZpZGVuY2U6IHJlc3VsdC5jb25maWRlbmNlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ01vZGVyYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIFxuICAgIC8vIEZhbGxiYWNrIHRvIGJsb2NraW5nIGNvbnRlbnQgb24gQVBJIGVycm9ycyBmb3Igc2FmZXR5XG4gICAgcmV0dXJuIGNyZWF0ZUJsb2NrZWRSZXN1bHQoXG4gICAgICAnTW9kZXJhdGlvbiBzZXJ2aWNlIGVycm9yIC0gY29udGVudCBibG9ja2VkIGZvciBzYWZldHknLFxuICAgICAgJ0FQSV9FUlJPUidcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQmF0Y2ggbW9kZXJhdGUgbXVsdGlwbGUgY29udGVudCBpdGVtc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW9kZXJhdGVDb250ZW50QmF0Y2goXG4gIGl0ZW1zOiBBcnJheTx7IGlkOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgY29udGV4dD86IE1vZGVyYXRpb25Db250ZXh0IH0+XG4pOiBQcm9taXNlPE1hcDxzdHJpbmcsIE1vZGVyYXRpb25SZXN1bHQ+PiB7XG4gIGNvbnN0IHJlc3VsdHMgPSBuZXcgTWFwPHN0cmluZywgTW9kZXJhdGlvblJlc3VsdD4oKTtcbiAgXG4gIC8vIFByb2Nlc3MgaW4gY2h1bmtzIHRvIGF2b2lkIHJhdGUgbGltaXRzXG4gIGNvbnN0IENIVU5LX1NJWkUgPSAxMDtcbiAgY29uc3QgY2h1bmtzID0gY2h1bmtBcnJheShpdGVtcywgQ0hVTktfU0laRSk7XG4gIFxuICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgIGNvbnN0IHByb21pc2VzID0gY2h1bmsubWFwKGFzeW5jIChpdGVtKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlcmF0ZUNvbnRlbnQoaXRlbS5jb250ZW50LCBpdGVtLmNvbnRleHQpO1xuICAgICAgcmV0dXJuIHsgaWQ6IGl0ZW0uaWQsIHJlc3VsdCB9O1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGNodW5rUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcyk7XG4gICAgXG4gICAgY2h1bmtSZXN1bHRzLmZvckVhY2goKHByb21pc2VSZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpdGVtSWQgPSBjaHVua1tpbmRleF0/LmlkO1xuICAgICAgXG4gICAgICBpZiAoaXRlbUlkKSB7XG4gICAgICAgIGlmIChwcm9taXNlUmVzdWx0LnN0YXR1cyA9PT0gJ2Z1bGZpbGxlZCcpIHtcbiAgICAgICAgICByZXN1bHRzLnNldChpdGVtSWQsIHByb21pc2VSZXN1bHQudmFsdWUucmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBCYXRjaCBtb2RlcmF0aW9uIGZhaWxlZCBmb3IgaXRlbSAke2l0ZW1JZH06YCwgcHJvbWlzZVJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgIHJlc3VsdHMuc2V0KGl0ZW1JZCwgY3JlYXRlQmxvY2tlZFJlc3VsdCgnQmF0Y2ggbW9kZXJhdGlvbiBmYWlsZWQnLCAnQkFUQ0hfRVJST1InKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBSYXRlIGxpbWl0aW5nIC0gd2FpdCBiZXR3ZWVuIGNodW5rc1xuICAgIGlmIChjaHVua3MubGVuZ3RoID4gMSkge1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE9QRU5BSSBBUEkgSU5URVJBQ1RJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBDYWxsIE9wZW5BSSBNb2RlcmF0aW9uIEFQSSB3aXRoIHJldHJ5IGxvZ2ljXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNhbGxPcGVuQUlNb2RlcmF0aW9uQVBJKGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8T3BlbkFJTW9kZXJhdGlvblJlc3BvbnNlPiB7XG4gIGNvbnN0IHJlcXVlc3Q6IE9wZW5BSU1vZGVyYXRpb25SZXF1ZXN0ID0ge1xuICAgIGlucHV0OiBjb250ZW50LFxuICAgIG1vZGVsOiBNT0RFUkFUSU9OX0NPTkZJRy5tb2RlbCxcbiAgfTtcblxuICBsZXQgbGFzdEVycm9yOiBFcnJvcjtcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IE1PREVSQVRJT05fQ09ORklHLnJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICAgIG9wZW5haS5tb2RlcmF0aW9ucy5jcmVhdGUocmVxdWVzdCksXG4gICAgICAgIG5ldyBQcm9taXNlPG5ldmVyPigoXywgcmVqZWN0KSA9PiBcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ01vZGVyYXRpb24gdGltZW91dCcpKSwgTU9ERVJBVElPTl9DT05GSUcudGltZW91dClcbiAgICAgICAgKSxcbiAgICAgIF0pO1xuXG4gICAgICByZXR1cm4gcmVzcG9uc2UgYXMgT3BlbkFJTW9kZXJhdGlvblJlc3BvbnNlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yIGFzIEVycm9yO1xuICAgICAgXG4gICAgICBjb25zb2xlLndhcm4oYE1vZGVyYXRpb24gYXR0ZW1wdCAke2F0dGVtcHR9IGZhaWxlZDpgLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5IChleHBvbmVudGlhbCBiYWNrb2ZmKVxuICAgICAgaWYgKGF0dGVtcHQgPCBNT0RFUkFUSU9OX0NPTkZJRy5yZXRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5taW4oMTAwMCAqIE1hdGgucG93KDIsIGF0dGVtcHQgLSAxKSwgNTAwMCk7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgdGhyb3cgbGFzdEVycm9yITtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIE9wZW5BSSByZXNwb25zZSBpbnRvIG91ciBNb2RlcmF0aW9uUmVzdWx0IGZvcm1hdFxuICovXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzT3BlbkFJUmVzcG9uc2UoXG4gIHJlc3BvbnNlOiBPcGVuQUlNb2RlcmF0aW9uUmVzcG9uc2UsXG4gIF9vcmlnaW5hbENvbnRlbnQ6IHN0cmluZyxcbiAgY29udGV4dD86IE1vZGVyYXRpb25Db250ZXh0XG4pOiBQcm9taXNlPE1vZGVyYXRpb25SZXN1bHQ+IHtcbiAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgXG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVNhZmVSZXN1bHQoJ05vIG1vZGVyYXRpb24gcmVzdWx0IHJlY2VpdmVkJyk7XG4gIH1cbiAgY29uc3QgY2F0ZWdvcmllcyA9IGV4dHJhY3RNb2RlcmF0aW9uQ2F0ZWdvcmllcyhyZXN1bHQpO1xuICBcbiAgLy8gQ2FsY3VsYXRlIG92ZXJhbGwgY29uZmlkZW5jZSBhbmQgc2V2ZXJpdHlcbiAgY29uc3QgY29uZmlkZW5jZSA9IGNhbGN1bGF0ZUNvbmZpZGVuY2UocmVzdWx0KTtcbiAgY29uc3QgbWF4U2V2ZXJpdHkgPSBNYXRoLm1heCguLi5jYXRlZ29yaWVzLm1hcChjID0+IGMuc2V2ZXJpdHkpLCAxKTtcbiAgXG4gIC8vIERldGVybWluZSBhY3Rpb24gYmFzZWQgb24gT3BlbkFJIGZsYWdnaW5nIGFuZCBvdXIgcnVsZXNcbiAgY29uc3QgYWN0aW9uID0gZGV0ZXJtaW5lQWN0aW9uKHJlc3VsdCwgY29uZmlkZW5jZSwgbWF4U2V2ZXJpdHksIGNvbnRleHQpO1xuICBcbiAgLy8gQ3JlYXRlIHJlc3VsdCBvYmplY3RcbiAgY29uc3QgbW9kZXJhdGlvblJlc3VsdDogTW9kZXJhdGlvblJlc3VsdCA9IHtcbiAgICBhY3Rpb24sXG4gICAgZmxhZ2dlZDogcmVzdWx0LmZsYWdnZWQgfHwgYWN0aW9uID09PSBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgYmxvY2tlZDogYWN0aW9uID09PSBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgY29uZmlkZW5jZSxcbiAgICByZWFzb246IGdlbmVyYXRlUmVhc29uKGNhdGVnb3JpZXMsIGFjdGlvbiksXG4gICAgY2F0ZWdvcmllcyxcbiAgICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2UuT1BFTkFJX0FQSSxcbiAgICBtb2RlcmF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICByZXF1aXJlc0h1bWFuUmV2aWV3OiBzaG91bGRSZXF1aXJlSHVtYW5SZXZpZXcocmVzdWx0LCBjb25maWRlbmNlLCBtYXhTZXZlcml0eSksXG4gICAgcmV2aWV3UHJpb3JpdHk6IGRldGVybWluZVJldmlld1ByaW9yaXR5KGNhdGVnb3JpZXMsIGNvbmZpZGVuY2UpLFxuICAgIHN1Z2dlc3RlZEFjdGlvbjogc3VnZ2VzdFVzZXJBY3Rpb24oY2F0ZWdvcmllcywgbWF4U2V2ZXJpdHkpLFxuICAgIGFwcGVhbGFibGU6IGFjdGlvbiAhPT0gTW9kZXJhdGlvbkFjdGlvbi5BUFBST1ZFRCxcbiAgfTtcblxuICByZXR1cm4gbW9kZXJhdGlvblJlc3VsdDtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUkVTVUxUIFBST0NFU1NJTkcgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogRXh0cmFjdCBhbmQgY2F0ZWdvcml6ZSB2aW9sYXRpb25zIGZyb20gT3BlbkFJIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RNb2RlcmF0aW9uQ2F0ZWdvcmllcyhyZXN1bHQ6IGFueSk6IE1vZGVyYXRpb25DYXRlZ29yeVtdIHtcbiAgY29uc3QgY2F0ZWdvcmllczogTW9kZXJhdGlvbkNhdGVnb3J5W10gPSBbXTtcbiAgXG4gIE9iamVjdC5lbnRyaWVzKHJlc3VsdC5jYXRlZ29yaWVzKS5mb3JFYWNoKChbY2F0ZWdvcnksIGZsYWdnZWRdKSA9PiB7XG4gICAgaWYgKGZsYWdnZWQpIHtcbiAgICAgIGNvbnN0IHNjb3JlID0gcmVzdWx0LmNhdGVnb3J5X3Njb3Jlc1tjYXRlZ29yeV0gfHwgMDtcbiAgICAgIGNvbnN0IHNldmVyaXR5ID0gQ0FURUdPUllfU0VWRVJJVFlfTUFQW2NhdGVnb3J5IGFzIGtleW9mIHR5cGVvZiBDQVRFR09SWV9TRVZFUklUWV9NQVBdIHx8IDI7XG4gICAgICBcbiAgICAgIGNhdGVnb3JpZXMucHVzaCh7XG4gICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeS5yZXBsYWNlKC9bL19dL2csICcgJykudG9VcHBlckNhc2UoKSxcbiAgICAgICAgc2V2ZXJpdHksXG4gICAgICAgIGNvbmZpZGVuY2U6IHNjb3JlLFxuICAgICAgICBkZXNjcmlwdGlvbjogZ2V0Q2F0ZWdvcnlEZXNjcmlwdGlvbihjYXRlZ29yeSksXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgcmV0dXJuIGNhdGVnb3JpZXM7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIG92ZXJhbGwgY29uZmlkZW5jZSBzY29yZVxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVDb25maWRlbmNlKHJlc3VsdDogYW55KTogbnVtYmVyIHtcbiAgaWYgKCFyZXN1bHQuZmxhZ2dlZCkgcmV0dXJuIDA7XG4gIFxuICBjb25zdCBzY29yZXMgPSBPYmplY3QudmFsdWVzKHJlc3VsdC5jYXRlZ29yeV9zY29yZXMpIGFzIG51bWJlcltdO1xuICBjb25zdCBtYXhTY29yZSA9IE1hdGgubWF4KC4uLnNjb3Jlcyk7XG4gIGNvbnN0IGF2Z1Njb3JlID0gc2NvcmVzLnJlZHVjZSgoc3VtLCBzY29yZSkgPT4gc3VtICsgc2NvcmUsIDApIC8gc2NvcmVzLmxlbmd0aDtcbiAgXG4gIC8vIFdlaWdodCBtYXggc2NvcmUgbW9yZSBoZWF2aWx5IGJ1dCBjb25zaWRlciBhdmVyYWdlXG4gIHJldHVybiBNYXRoLm1pbigobWF4U2NvcmUgKiAwLjcgKyBhdmdTY29yZSAqIDAuMyksIDEpO1xufVxuXG4vKipcbiAqIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgYWN0aW9uIGJhc2VkIG9uIG1vZGVyYXRpb24gcmVzdWx0c1xuICovXG5mdW5jdGlvbiBkZXRlcm1pbmVBY3Rpb24oXG4gIHJlc3VsdDogYW55LCBcbiAgY29uZmlkZW5jZTogbnVtYmVyLCBcbiAgbWF4U2V2ZXJpdHk6IG51bWJlcixcbiAgY29udGV4dD86IE1vZGVyYXRpb25Db250ZXh0XG4pOiBNb2RlcmF0aW9uQWN0aW9uIHtcbiAgLy8gQWx3YXlzIGJsb2NrIGhpZ2gtc2V2ZXJpdHkgdmlvbGF0aW9uc1xuICBpZiAobWF4U2V2ZXJpdHkgPj0gNSkge1xuICAgIHJldHVybiBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQ7XG4gIH1cbiAgXG4gIC8vIEJsb2NrIGlmIGZsYWdnZWQgYnkgT3BlbkFJIGFuZCBhYm92ZSB0aHJlc2hvbGRcbiAgaWYgKHJlc3VsdC5mbGFnZ2VkICYmIGNvbmZpZGVuY2UgPj0gTU9ERVJBVElPTl9DT05GSUcudGhyZXNob2xkKSB7XG4gICAgaWYgKE1PREVSQVRJT05fQ09ORklHLmF1dG9CbG9jaykge1xuICAgICAgcmV0dXJuIE1vZGVyYXRpb25BY3Rpb24uQkxPQ0tFRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE1vZGVyYXRpb25BY3Rpb24uRkxBR0dFRDtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENvbnNpZGVyIGNvbnRleHQgZm9yIGJvcmRlcmxpbmUgY2FzZXNcbiAgaWYgKHJlc3VsdC5mbGFnZ2VkICYmIGNvbnRleHQpIHtcbiAgICAvLyBNb3JlIHN0cmljdCBpbiBwdWJsaWMgY29udGV4dHNcbiAgICBpZiAoIWNvbnRleHQuaXNJblByaXZhdGVNZXNzYWdlICYmIGNvbmZpZGVuY2UgPj0gMC41KSB7XG4gICAgICByZXR1cm4gTW9kZXJhdGlvbkFjdGlvbi5GTEFHR0VEO1xuICAgIH1cbiAgICBcbiAgICAvLyBNb3JlIHN0cmljdCBmb3IgbG93LXJlcHV0YXRpb24gdXNlcnNcbiAgICBpZiAoY29udGV4dC5hdXRob3JSZXB1dGF0aW9uIDwgNTAgJiYgY29uZmlkZW5jZSA+PSAwLjQpIHtcbiAgICAgIHJldHVybiBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQ7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gTW9kZXJhdGlvbkFjdGlvbi5BUFBST1ZFRDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgaHVtYW4gcmV2aWV3IGlzIHJlcXVpcmVkXG4gKi9cbmZ1bmN0aW9uIHNob3VsZFJlcXVpcmVIdW1hblJldmlldyhcbiAgcmVzdWx0OiBhbnksXG4gIGNvbmZpZGVuY2U6IG51bWJlcixcbiAgbWF4U2V2ZXJpdHk6IG51bWJlclxuKTogYm9vbGVhbiB7XG4gIC8vIEFsd2F5cyByZXF1aXJlIHJldmlldyBmb3IgaGlnaCBzZXZlcml0eVxuICBpZiAobWF4U2V2ZXJpdHkgPj0gNCkgcmV0dXJuIHRydWU7XG4gIFxuICAvLyBSZXF1aXJlIHJldmlldyBmb3IgYm9yZGVybGluZSBjYXNlc1xuICBpZiAocmVzdWx0LmZsYWdnZWQgJiYgY29uZmlkZW5jZSA8IE1PREVSQVRJT05fQ09ORklHLnRocmVzaG9sZCkgcmV0dXJuIHRydWU7XG4gIFxuICAvLyBSZXF1aXJlIHJldmlldyBmb3IgY29tcGxleCBjYXNlc1xuICBjb25zdCBmbGFnZ2VkQ2F0ZWdvcmllcyA9IE9iamVjdC52YWx1ZXMocmVzdWx0LmNhdGVnb3JpZXMpLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG4gIGlmIChmbGFnZ2VkQ2F0ZWdvcmllcyA+IDIpIHJldHVybiB0cnVlO1xuICBcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIERldGVybWluZSByZXZpZXcgcHJpb3JpdHlcbiAqL1xuZnVuY3Rpb24gZGV0ZXJtaW5lUmV2aWV3UHJpb3JpdHkoXG4gIGNhdGVnb3JpZXM6IE1vZGVyYXRpb25DYXRlZ29yeVtdLFxuICBjb25maWRlbmNlOiBudW1iZXJcbik6ICdMT1cnIHwgJ01FRElVTScgfCAnSElHSCcgfCAnVVJHRU5UJyB7XG4gIGNvbnN0IG1heFNldmVyaXR5ID0gTWF0aC5tYXgoLi4uY2F0ZWdvcmllcy5tYXAoYyA9PiBjLnNldmVyaXR5KSwgMSk7XG4gIFxuICBpZiAobWF4U2V2ZXJpdHkgPj0gNSB8fCBjb25maWRlbmNlID49IDAuOTUpIHJldHVybiAnVVJHRU5UJztcbiAgaWYgKG1heFNldmVyaXR5ID49IDQgfHwgY29uZmlkZW5jZSA+PSAwLjg1KSByZXR1cm4gJ0hJR0gnO1xuICBpZiAobWF4U2V2ZXJpdHkgPj0gMyB8fCBjb25maWRlbmNlID49IDAuNykgcmV0dXJuICdNRURJVU0nO1xuICByZXR1cm4gJ0xPVyc7XG59XG5cbi8qKlxuICogU3VnZ2VzdCBhcHByb3ByaWF0ZSB1c2VyIGFjdGlvblxuICovXG5mdW5jdGlvbiBzdWdnZXN0VXNlckFjdGlvbihfY2F0ZWdvcmllczogTW9kZXJhdGlvbkNhdGVnb3J5W10sIG1heFNldmVyaXR5OiBudW1iZXIpOiBhbnkge1xuICBpZiAobWF4U2V2ZXJpdHkgPj0gNSkgcmV0dXJuICdCQU4nO1xuICBpZiAobWF4U2V2ZXJpdHkgPj0gNCkgcmV0dXJuICdTVVNQRU5EXzdEJztcbiAgaWYgKG1heFNldmVyaXR5ID49IDMpIHJldHVybiAnU1VTUEVORF8zRCc7XG4gIGlmIChtYXhTZXZlcml0eSA+PSAyKSByZXR1cm4gJ1dBUk4nO1xuICByZXR1cm4gJ0RFTEVURV9DT05URU5UJztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENyZWF0ZSBhIHNhZmUgKGFwcHJvdmVkKSBtb2RlcmF0aW9uIHJlc3VsdFxuICovXG5mdW5jdGlvbiBjcmVhdGVTYWZlUmVzdWx0KHJlYXNvbjogc3RyaW5nKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gIHJldHVybiB7XG4gICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkFQUFJPVkVELFxuICAgIGZsYWdnZWQ6IGZhbHNlLFxuICAgIGJsb2NrZWQ6IGZhbHNlLFxuICAgIGNvbmZpZGVuY2U6IDAsXG4gICAgcmVhc29uLFxuICAgIGNhdGVnb3JpZXM6IFtdLFxuICAgIHNvdXJjZTogTW9kZXJhdGlvblNvdXJjZS5PUEVOQUlfQVBJLFxuICAgIG1vZGVyYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIHJlcXVpcmVzSHVtYW5SZXZpZXc6IGZhbHNlLFxuICAgIHJldmlld1ByaW9yaXR5OiAnTE9XJyxcbiAgICBhcHBlYWxhYmxlOiBmYWxzZSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBibG9ja2VkIG1vZGVyYXRpb24gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrZWRSZXN1bHQocmVhc29uOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcpOiBNb2RlcmF0aW9uUmVzdWx0IHtcbiAgcmV0dXJuIHtcbiAgICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24uQkxPQ0tFRCxcbiAgICBmbGFnZ2VkOiB0cnVlLFxuICAgIGJsb2NrZWQ6IHRydWUsXG4gICAgY29uZmlkZW5jZTogMSxcbiAgICByZWFzb24sXG4gICAgY2F0ZWdvcmllczogW3tcbiAgICAgIGNhdGVnb3J5LFxuICAgICAgc2V2ZXJpdHk6IDMsXG4gICAgICBjb25maWRlbmNlOiAxLFxuICAgICAgZGVzY3JpcHRpb246IHJlYXNvbixcbiAgICB9XSxcbiAgICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2UuT1BFTkFJX0FQSSxcbiAgICBtb2RlcmF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICByZXF1aXJlc0h1bWFuUmV2aWV3OiBmYWxzZSxcbiAgICByZXZpZXdQcmlvcml0eTogJ0hJR0gnLFxuICAgIGFwcGVhbGFibGU6IHRydWUsXG4gIH07XG59XG5cbi8qKlxuICogR2V0IGh1bWFuLXJlYWRhYmxlIGRlc2NyaXB0aW9uIGZvciB2aW9sYXRpb24gY2F0ZWdvcnlcbiAqL1xuZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlEZXNjcmlwdGlvbihjYXRlZ29yeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZGVzY3JpcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdzZXh1YWwnOiAnU2V4dWFsIGNvbnRlbnQgb3Igc3VnZ2VzdGl2ZSBtYXRlcmlhbCcsXG4gICAgJ3NleHVhbC9taW5vcnMnOiAnU2V4dWFsIGNvbnRlbnQgaW52b2x2aW5nIG1pbm9ycycsXG4gICAgJ2hhdGUnOiAnSGF0ZWZ1bCBvciBkaXNjcmltaW5hdG9yeSBsYW5ndWFnZScsXG4gICAgJ2hhdGUvdGhyZWF0ZW5pbmcnOiAnVGhyZWF0ZW5pbmcgaGF0ZSBzcGVlY2gnLFxuICAgICdoYXJhc3NtZW50JzogJ0hhcmFzc21lbnQgb3IgYnVsbHlpbmcgYmVoYXZpb3InLFxuICAgICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJzogJ1RocmVhdGVuaW5nIGhhcmFzc21lbnQnLFxuICAgICdzZWxmLWhhcm0nOiAnU2VsZi1oYXJtIHJlbGF0ZWQgY29udGVudCcsXG4gICAgJ3NlbGYtaGFybS9pbnRlbnQnOiAnSW50ZW50IHRvIHNlbGYtaGFybScsXG4gICAgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnOiAnSW5zdHJ1Y3Rpb25zIGZvciBzZWxmLWhhcm0nLFxuICAgICd2aW9sZW5jZSc6ICdWaW9sZW50IGNvbnRlbnQgb3IgbGFuZ3VhZ2UnLFxuICAgICd2aW9sZW5jZS9ncmFwaGljJzogJ0dyYXBoaWMgdmlvbGVudCBjb250ZW50JyxcbiAgfTtcbiAgXG4gIHJldHVybiBkZXNjcmlwdGlvbnNbY2F0ZWdvcnldIHx8IGBWaW9sYXRpb246ICR7Y2F0ZWdvcnl9YDtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBodW1hbi1yZWFkYWJsZSByZWFzb24gZm9yIG1vZGVyYXRpb24gYWN0aW9uXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlUmVhc29uKGNhdGVnb3JpZXM6IE1vZGVyYXRpb25DYXRlZ29yeVtdLCBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24pOiBzdHJpbmcge1xuICBpZiAoY2F0ZWdvcmllcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gYWN0aW9uID09PSBNb2RlcmF0aW9uQWN0aW9uLkFQUFJPVkVEID8gJ0NvbnRlbnQgYXBwcm92ZWQnIDogJ0NvbnRlbnQgZmxhZ2dlZCc7XG4gIH1cbiAgXG4gIGNvbnN0IHByaW1hcnlDYXRlZ29yeSA9IGNhdGVnb3JpZXMucmVkdWNlKChtYXgsIGNhdCkgPT4gXG4gICAgY2F0LnNldmVyaXR5ID4gbWF4LnNldmVyaXR5ID8gY2F0IDogbWF4XG4gICk7XG4gIFxuICBjb25zdCBhY3Rpb25UZXh0ID0ge1xuICAgIFtNb2RlcmF0aW9uQWN0aW9uLkFQUFJPVkVEXTogJ2FwcHJvdmVkJyxcbiAgICBbTW9kZXJhdGlvbkFjdGlvbi5GTEFHR0VEXTogJ2ZsYWdnZWQgZm9yIHJldmlldycsXG4gICAgW01vZGVyYXRpb25BY3Rpb24uQkxPQ0tFRF06ICdibG9ja2VkJyxcbiAgICBbTW9kZXJhdGlvbkFjdGlvbi5FRElURURdOiAnZWRpdGVkJyxcbiAgfVthY3Rpb25dO1xuICBcbiAgcmV0dXJuIGBDb250ZW50ICR7YWN0aW9uVGV4dH0gZHVlIHRvOiAke3ByaW1hcnlDYXRlZ29yeS5kZXNjcmlwdGlvbn1gO1xufVxuXG4vKipcbiAqIENodW5rIGFycmF5IGludG8gc21hbGxlciBhcnJheXNcbiAqL1xuZnVuY3Rpb24gY2h1bmtBcnJheTxUPihhcnJheTogVFtdLCBzaXplOiBudW1iZXIpOiBUW11bXSB7XG4gIGNvbnN0IGNodW5rczogVFtdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkgKz0gc2l6ZSkge1xuICAgIGNodW5rcy5wdXNoKGFycmF5LnNsaWNlKGksIGkgKyBzaXplKSk7XG4gIH1cbiAgcmV0dXJuIGNodW5rcztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVhQT1JUIEFQSVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQge1xuICBNT0RFUkFUSU9OX0NPTkZJRyxcbiAgQ0FURUdPUllfU0VWRVJJVFlfTUFQLFxufTsiXSwibmFtZXMiOlsiT3BlbkFJIiwiTW9kZXJhdGlvbkFjdGlvbiIsIk1vZGVyYXRpb25Tb3VyY2UiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJFcnJvciIsIm9wZW5haSIsImFwaUtleSIsIm9yZ2FuaXphdGlvbiIsIk9QRU5BSV9PUkdfSUQiLCJNT0RFUkFUSU9OX0NPTkZJRyIsIm1vZGVsIiwidGltZW91dCIsInJldHJpZXMiLCJ0aHJlc2hvbGQiLCJwYXJzZUZsb2F0IiwiTU9ERVJBVElPTl9USFJFU0hPTEQiLCJzdHJpY3RNb2RlIiwiTU9ERVJBVElPTl9TVFJJQ1RfTU9ERSIsImF1dG9CbG9jayIsIk1PREVSQVRJT05fQVVUT19CTE9DSyIsIkNBVEVHT1JZX1NFVkVSSVRZX01BUCIsIm1vZGVyYXRlQ29udGVudCIsImNvbnRlbnQiLCJjb250ZXh0IiwidHJpbSIsImxlbmd0aCIsImNyZWF0ZVNhZmVSZXN1bHQiLCJjcmVhdGVCbG9ja2VkUmVzdWx0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInJlc3BvbnNlIiwiY2FsbE9wZW5BSU1vZGVyYXRpb25BUEkiLCJyZXNwb25zZVRpbWUiLCJyZXN1bHQiLCJwcm9jZXNzT3BlbkFJUmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwiY29udGVudExlbmd0aCIsImZsYWdnZWQiLCJjb25maWRlbmNlIiwiZXJyb3IiLCJtb2RlcmF0ZUNvbnRlbnRCYXRjaCIsIml0ZW1zIiwicmVzdWx0cyIsIk1hcCIsIkNIVU5LX1NJWkUiLCJjaHVua3MiLCJjaHVua0FycmF5IiwiY2h1bmsiLCJwcm9taXNlcyIsIm1hcCIsIml0ZW0iLCJpZCIsImNodW5rUmVzdWx0cyIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiZm9yRWFjaCIsInByb21pc2VSZXN1bHQiLCJpbmRleCIsIml0ZW1JZCIsInN0YXR1cyIsInNldCIsInZhbHVlIiwicmVhc29uIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJyZXF1ZXN0IiwiaW5wdXQiLCJsYXN0RXJyb3IiLCJhdHRlbXB0IiwicmFjZSIsIm1vZGVyYXRpb25zIiwiY3JlYXRlIiwiXyIsInJlamVjdCIsIndhcm4iLCJkZWxheSIsIk1hdGgiLCJtaW4iLCJwb3ciLCJfb3JpZ2luYWxDb250ZW50IiwiY2F0ZWdvcmllcyIsImV4dHJhY3RNb2RlcmF0aW9uQ2F0ZWdvcmllcyIsImNhbGN1bGF0ZUNvbmZpZGVuY2UiLCJtYXhTZXZlcml0eSIsIm1heCIsImMiLCJzZXZlcml0eSIsImFjdGlvbiIsImRldGVybWluZUFjdGlvbiIsIm1vZGVyYXRpb25SZXN1bHQiLCJCTE9DS0VEIiwiYmxvY2tlZCIsImdlbmVyYXRlUmVhc29uIiwic291cmNlIiwiT1BFTkFJX0FQSSIsIm1vZGVyYXRlZEF0IiwicmVxdWlyZXNIdW1hblJldmlldyIsInNob3VsZFJlcXVpcmVIdW1hblJldmlldyIsInJldmlld1ByaW9yaXR5IiwiZGV0ZXJtaW5lUmV2aWV3UHJpb3JpdHkiLCJzdWdnZXN0ZWRBY3Rpb24iLCJzdWdnZXN0VXNlckFjdGlvbiIsImFwcGVhbGFibGUiLCJBUFBST1ZFRCIsIk9iamVjdCIsImVudHJpZXMiLCJjYXRlZ29yeSIsInNjb3JlIiwiY2F0ZWdvcnlfc2NvcmVzIiwicHVzaCIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsImRlc2NyaXB0aW9uIiwiZ2V0Q2F0ZWdvcnlEZXNjcmlwdGlvbiIsInNjb3JlcyIsInZhbHVlcyIsIm1heFNjb3JlIiwiYXZnU2NvcmUiLCJyZWR1Y2UiLCJzdW0iLCJGTEFHR0VEIiwiaXNJblByaXZhdGVNZXNzYWdlIiwiYXV0aG9yUmVwdXRhdGlvbiIsImZsYWdnZWRDYXRlZ29yaWVzIiwiZmlsdGVyIiwiQm9vbGVhbiIsIl9jYXRlZ29yaWVzIiwiZGVzY3JpcHRpb25zIiwicHJpbWFyeUNhdGVnb3J5IiwiY2F0IiwiYWN0aW9uVGV4dCIsIkVESVRFRCIsImFycmF5Iiwic2l6ZSIsImkiLCJzbGljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/openai.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/moderation/rules.ts":
/*!******************************************!*\
  !*** ./src/services/moderation/rules.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FITNESS_VIOLATION_PATTERNS: () => (/* binding */ FITNESS_VIOLATION_PATTERNS),\n/* harmony export */   applyCustomRules: () => (/* binding */ applyCustomRules),\n/* harmony export */   detectPositiveFitnessContent: () => (/* binding */ detectPositiveFitnessContent),\n/* harmony export */   getActiveRules: () => (/* binding */ getActiveRules),\n/* harmony export */   getRuleStats: () => (/* binding */ getRuleStats),\n/* harmony export */   updateRule: () => (/* binding */ updateRule)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * Custom Moderation Rules for Massimino\n * Fitness-specific content moderation rules and pattern matching\n */ \n// ============================================================================\n// FITNESS-SPECIFIC VIOLATION PATTERNS\n// ============================================================================\n/**\n   * Patterns that are specifically problematic in fitness contexts\n   * These go beyond general content moderation to catch fitness-specific issues\n   */ const FITNESS_VIOLATION_PATTERNS = {\n    INAPPROPRIATE_PERSONAL_COMMENTS: {\n        id: 'inappropriate-personal',\n        name: 'Inappropriate Personal Comments',\n        description: 'Comments focusing on appearance rather than fitness performance',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.INAPPROPRIATE_CONTENT,\n        enabled: true,\n        severity: 4,\n        confidence: 0.8,\n        patterns: [\n            'nice body',\n            'sexy',\n            'hot',\n            'beautiful body',\n            'gorgeous',\n            'stunning',\n            'attractive',\n            'cute butt',\n            'nice curves'\n        ],\n        keywords: [\n            'body',\n            'sexy',\n            'hot',\n            'beautiful',\n            'gorgeous',\n            'stunning',\n            'attractive',\n            'cute',\n            'curves',\n            'butt',\n            'chest',\n            'legs'\n        ],\n        regexPatterns: [\n            '\\\\b(nice|great|amazing|sexy|hot)\\\\s+(body|figure|physique|curves|butt|chest|legs)\\\\b',\n            '\\\\b(you\\\\s+look|looking)\\\\s+(sexy|hot|amazing|gorgeous|stunning)\\\\b',\n            '\\\\b(beautiful|gorgeous|stunning)\\\\s+(woman|girl|lady|man|guy)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT',\n            'MESSAGE'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    UNSOLICITED_PERSONAL_ATTENTION: {\n        id: 'unsolicited-attention',\n        name: 'Unsolicited Personal Attention',\n        description: 'Unwanted personal attention or creepy behavior',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.HARASSMENT,\n        enabled: true,\n        severity: 5,\n        confidence: 0.9,\n        patterns: [\n            'want to meet',\n            'hook up',\n            'private session',\n            'one on one',\n            'dm me',\n            'text me',\n            'my number is',\n            'call me',\n            'date',\n            'dinner',\n            'drinks'\n        ],\n        keywords: [\n            'meet',\n            'hook',\n            'private',\n            'personal',\n            'dm',\n            'text',\n            'call',\n            'number',\n            'date',\n            'dinner',\n            'drinks',\n            'relationship'\n        ],\n        regexPatterns: [\n            '\\\\b(want\\\\s+to|let\\'s)\\\\s+(meet|hook\\\\s+up|get\\\\s+together)\\\\b',\n            '\\\\b(private|personal)\\\\s+(session|training|meeting)\\\\b',\n            '\\\\b(dm|text|call)\\\\s+me\\\\b',\n            '\\\\b\\\\d{3}[-.]?\\\\d{3}[-.]?\\\\d{4}\\\\b',\n            '\\\\b[\\\\w._%+-]+@[\\\\w.-]+\\\\.[A-Z]{2,}\\\\b'\n        ],\n        contexts: [\n            'COMMENT',\n            'MESSAGE',\n            'POST'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        autoBlock: true,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    FAKE_TRAINER_CREDENTIALS: {\n        id: 'fake-credentials',\n        name: 'Fake Trainer Credentials',\n        description: 'False claims about certifications or credentials',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.IMPERSONATION,\n        enabled: true,\n        severity: 4,\n        confidence: 0.7,\n        patterns: [\n            'certified trainer',\n            'NASM certified',\n            'ACE certified',\n            'ACSM certified',\n            'personal trainer license',\n            'nutrition specialist',\n            'registered dietitian'\n        ],\n        keywords: [\n            'certified',\n            'certification',\n            'license',\n            'credential',\n            'specialist',\n            'NASM',\n            'ACE',\n            'ACSM',\n            'NSCA',\n            'RD',\n            'registered',\n            'dietitian'\n        ],\n        regexPatterns: [\n            '\\\\b(certified|licensed)\\\\s+(trainer|nutritionist|dietitian)\\\\b',\n            '\\\\b(NASM|ACE|ACSM|NSCA)\\\\s+certified\\\\b',\n            '\\\\bregistered\\\\s+dietitian\\\\b'\n        ],\n        contexts: [\n            'PROFILE',\n            'POST',\n            'COMMENT'\n        ],\n        userRoles: [\n            'CLIENT'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    UNSAFE_EXERCISE_ADVICE: {\n        id: 'unsafe-advice',\n        name: 'Unsafe Exercise Advice',\n        description: 'Potentially dangerous exercise recommendations',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.OFF_TOPIC,\n        enabled: true,\n        severity: 4,\n        confidence: 0.6,\n        patterns: [\n            'no pain no gain',\n            'push through the pain',\n            'pain is weakness leaving',\n            'ignore the pain',\n            'max out every day',\n            'train every day',\n            'no rest days',\n            'more is always better'\n        ],\n        keywords: [\n            'pain',\n            'ignore',\n            'push',\n            'through',\n            'max',\n            'every',\n            'day',\n            'no',\n            'rest',\n            'dangerous',\n            'extreme',\n            'hardcore'\n        ],\n        regexPatterns: [\n            '\\\\b(no\\\\s+pain\\\\s+no\\\\s+gain|push\\\\s+through\\\\s+the\\\\s+pain)\\\\b',\n            '\\\\b(ignore\\\\s+the\\\\s+pain|pain\\\\s+is\\\\s+weakness)\\\\b',\n            '\\\\b(train|workout)\\\\s+every\\\\s+day\\\\b',\n            '\\\\bno\\\\s+rest\\\\s+days?\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT',\n            'MESSAGE'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    SUPPLEMENT_SPAM: {\n        id: 'supplement-spam',\n        name: 'Supplement Spam',\n        description: 'Unauthorized supplement promotions or MLM content',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.SPAM,\n        enabled: true,\n        severity: 3,\n        confidence: 0.8,\n        patterns: [\n            'buy now',\n            'limited time',\n            'special offer',\n            'discount code',\n            'affiliate link',\n            'earn money',\n            'join my team',\n            'business opportunity',\n            'work from home',\n            'supplement deal'\n        ],\n        keywords: [\n            'buy',\n            'sale',\n            'discount',\n            'offer',\n            'deal',\n            'affiliate',\n            'earn',\n            'money',\n            'team',\n            'business',\n            'opportunity',\n            'MLM'\n        ],\n        regexPatterns: [\n            '\\\\b(buy\\\\s+now|limited\\\\s+time|special\\\\s+offer)\\\\b',\n            '\\\\b(discount\\\\s+code|promo\\\\s+code)\\\\b',\n            '\\\\b(join\\\\s+my\\\\s+team|business\\\\s+opportunity)\\\\b',\n            '\\\\b(work\\\\s+from\\\\s+home|earn\\\\s+money)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT',\n            'MESSAGE'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        autoBlock: true,\n        requireHumanReview: false,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    BODY_SHAMING: {\n        id: 'body-shaming',\n        name: 'Body Shaming',\n        description: 'Negative comments about body size, shape, or appearance',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.HARASSMENT,\n        enabled: true,\n        severity: 4,\n        confidence: 0.9,\n        patterns: [\n            'too fat',\n            'too skinny',\n            'gross',\n            'disgusting',\n            'ugly',\n            'pathetic',\n            'weak',\n            'lazy',\n            'no excuse',\n            'just eat less',\n            'try harder'\n        ],\n        keywords: [\n            'fat',\n            'skinny',\n            'gross',\n            'disgusting',\n            'ugly',\n            'pathetic',\n            'weak',\n            'lazy',\n            'excuse',\n            'eat',\n            'less',\n            'harder'\n        ],\n        regexPatterns: [\n            '\\\\b(too\\\\s+(fat|skinny|weak)|gross|disgusting|ugly)\\\\b',\n            '\\\\b(just\\\\s+(eat\\\\s+less|try\\\\s+harder)|no\\\\s+excuse)\\\\b',\n            '\\\\b(lazy|pathetic|weak)\\\\s+(person|people)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT',\n            'MESSAGE'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        autoBlock: true,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    NUTRITION_MISINFORMATION: {\n        id: 'nutrition-misinfo',\n        name: 'Nutrition Misinformation',\n        description: 'False or dangerous nutritional advice',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.OFF_TOPIC,\n        enabled: true,\n        severity: 3,\n        confidence: 0.6,\n        patterns: [\n            'detox tea',\n            'cleanse',\n            'magic pill',\n            'lose weight fast',\n            'burn fat instantly',\n            'no exercise needed',\n            'eat whatever you want',\n            'miracle cure'\n        ],\n        keywords: [\n            'detox',\n            'cleanse',\n            'magic',\n            'pill',\n            'fast',\n            'instant',\n            'miracle',\n            'cure',\n            'secret',\n            'trick'\n        ],\n        regexPatterns: [\n            '\\\\b(detox|cleanse|magic\\\\s+pill)\\\\b',\n            '\\\\b(lose\\\\s+weight\\\\s+fast|burn\\\\s+fat\\\\s+instantly)\\\\b',\n            '\\\\b(no\\\\s+exercise\\\\s+needed|eat\\\\s+whatever)\\\\b',\n            '\\\\b(miracle\\\\s+cure|secret\\\\s+trick)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    PREDATORY_TRAINING_OFFERS: {\n        id: 'predatory-offers',\n        name: 'Predatory Training Offers',\n        description: 'Exploitative or manipulative business practices',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.HARASSMENT,\n        enabled: true,\n        severity: 4,\n        confidence: 0.8,\n        patterns: [\n            'pay upfront',\n            'no refunds',\n            'must decide now',\n            'pressure',\n            'guilt',\n            'shame',\n            'failure',\n            'only way',\n            'guaranteed results'\n        ],\n        keywords: [\n            'upfront',\n            'refunds',\n            'decide',\n            'now',\n            'pressure',\n            'guilt',\n            'shame',\n            'failure',\n            'only',\n            'way',\n            'guaranteed'\n        ],\n        regexPatterns: [\n            '\\\\b(pay\\\\s+upfront|no\\\\s+refunds)\\\\b',\n            '\\\\b(must\\\\s+decide\\\\s+now|limited\\\\s+spots)\\\\b',\n            '\\\\b(guaranteed\\\\s+results|only\\\\s+way)\\\\b'\n        ],\n        contexts: [\n            'MESSAGE',\n            'POST'\n        ],\n        userRoles: [\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PRIVATE',\n            'PUBLIC'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    OFF_TOPIC_CONTENT: {\n        id: 'off-topic',\n        name: 'Off-Topic Content',\n        description: 'Content not related to fitness, health, or wellness',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.OFF_TOPIC,\n        enabled: true,\n        severity: 2,\n        confidence: 0.5,\n        patterns: [\n            'politics',\n            'religion',\n            'cryptocurrency',\n            'stock market',\n            'real estate',\n            'dating',\n            'relationship',\n            'celebrity gossip'\n        ],\n        keywords: [\n            'politics',\n            'political',\n            'religion',\n            'religious',\n            'crypto',\n            'bitcoin',\n            'stocks',\n            'investment',\n            'real',\n            'estate',\n            'dating',\n            'relationship',\n            'celebrity',\n            'gossip'\n        ],\n        regexPatterns: [\n            '\\\\b(politics|political|religion|religious)\\\\b',\n            '\\\\b(crypto|bitcoin|stock\\\\s+market)\\\\b',\n            '\\\\b(real\\\\s+estate|dating|relationship)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.FLAGGED,\n        autoBlock: false,\n        requireHumanReview: false,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    },\n    PRIVACY_INVASION: {\n        id: 'privacy-invasion',\n        name: 'Privacy Invasion',\n        description: 'Sharing personal information without consent',\n        category: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ViolationType.PRIVACY_VIOLATION,\n        enabled: true,\n        severity: 5,\n        confidence: 0.9,\n        patterns: [\n            'real name is',\n            'address is',\n            'phone number',\n            'works at',\n            'lives in',\n            'goes to gym'\n        ],\n        keywords: [\n            'name',\n            'address',\n            'phone',\n            'number',\n            'works',\n            'lives',\n            'gym',\n            'location',\n            'personal',\n            'private'\n        ],\n        regexPatterns: [\n            '\\\\b(real\\\\s+name|full\\\\s+name)\\\\s+is\\\\b',\n            '\\\\b(address|phone\\\\s+number)\\\\s+is\\\\b',\n            '\\\\b(works\\\\s+at|lives\\\\s+in|goes\\\\s+to)\\\\b'\n        ],\n        contexts: [\n            'POST',\n            'COMMENT',\n            'MESSAGE'\n        ],\n        userRoles: [\n            'CLIENT',\n            'TRAINER'\n        ],\n        communityTypes: [\n            'PUBLIC',\n            'PRIVATE'\n        ],\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        autoBlock: true,\n        requireHumanReview: true,\n        createdBy: 'system',\n        createdAt: new Date(),\n        lastModified: new Date(),\n        usageCount: 0\n    }\n};\n// ============================================================================\n// RULE APPLICATION ENGINE\n// ============================================================================\n/**\n   * Apply custom fitness-specific moderation rules\n   */ async function applyCustomRules(content, context) {\n    const violations = [];\n    // Check each rule against the content\n    for (const rule of Object.values(FITNESS_VIOLATION_PATTERNS)){\n        if (!rule.enabled) continue;\n        // Check if rule applies to this context\n        if (!isRuleApplicable(rule, context)) continue;\n        const matches = findRuleMatches(content, rule);\n        if (matches.length > 0) {\n            violations.push({\n                rule,\n                matches,\n                confidence: calculateRuleConfidence(rule, matches, content)\n            });\n        }\n    }\n    // If no violations found, approve the content\n    if (violations.length === 0) {\n        return createApprovedResult();\n    }\n    // Find the most severe violation\n    const primaryViolation = violations.reduce((max, current)=>current.rule.severity > max.rule.severity ? current : max);\n    // Create moderation result based on the primary violation\n    return createCustomRuleResult(primaryViolation, violations, content);\n}\n/**\n   * Check if a rule applies to the current context\n   */ function isRuleApplicable(rule, context) {\n    // Check content type context\n    const contentType = context.isInPrivateMessage ? 'MESSAGE' : 'POST';\n    if (!rule.contexts.includes(contentType)) {\n        return false;\n    }\n    // Check community type\n    if (!rule.communityTypes.includes(context.communityType)) {\n        return false;\n    }\n    // For trainer-specific rules, check if author is trainer\n    if (rule.userRoles.includes('TRAINER') && !rule.userRoles.includes('CLIENT')) {\n        return context.isTrainerToClient;\n    }\n    return true;\n}\n/**\n   * Find matches for a rule in content\n   */ function findRuleMatches(content, rule) {\n    const matches = [];\n    const lowerContent = content.toLowerCase();\n    // Check simple patterns\n    for (const pattern of rule.patterns){\n        if (lowerContent.includes(pattern.toLowerCase())) {\n            matches.push(pattern);\n        }\n    }\n    // Check keyword combinations\n    const contentWords = lowerContent.split(/\\s+/);\n    for (const keyword of rule.keywords){\n        if (contentWords.some((word)=>word.includes(keyword.toLowerCase()))) {\n            matches.push(keyword);\n        }\n    }\n    // Check regex patterns\n    if (rule.regexPatterns) {\n        for (const regex of rule.regexPatterns){\n            const regexMatches = content.match(regex);\n            if (regexMatches) {\n                matches.push(...regexMatches);\n            }\n        }\n    }\n    return [\n        ...new Set(matches)\n    ]; // Remove duplicates\n}\n/**\n   * Calculate confidence score for rule match\n   */ function calculateRuleConfidence(rule, _matches, _content) {\n    let confidence = rule.confidence;\n    // Increase confidence based on number of matches\n    const matchBonus = Math.min(_matches.length * 0.1, 0.3);\n    confidence += matchBonus;\n    // Decrease confidence for longer content (might be false positive)\n    if (_content.length > 500) {\n        confidence *= 0.9;\n    }\n    // Increase confidence for exact pattern matches\n    const exactMatches = _matches.filter((match)=>rule.patterns.some((pattern)=>match.toLowerCase() === pattern.toLowerCase()));\n    if (exactMatches.length > 0) {\n        confidence += 0.1;\n    }\n    return Math.min(confidence, 1.0);\n}\n/**\n   * Create moderation result for custom rule violation\n   */ function createCustomRuleResult(primaryViolation, allViolations, _content) {\n    const { rule, confidence } = primaryViolation;\n    const categories = allViolations.map((v)=>({\n            category: v.rule.name,\n            subcategory: v.rule.category,\n            severity: v.rule.severity,\n            confidence: v.confidence,\n            description: v.rule.description\n        }));\n    return {\n        action: rule.action,\n        flagged: rule.action !== _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED,\n        blocked: rule.action === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.BLOCKED,\n        confidence,\n        reason: `Content flagged for: ${rule.description}`,\n        categories,\n        source: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationSource.CUSTOM_RULES,\n        moderatedAt: new Date(),\n        requiresHumanReview: rule.requireHumanReview,\n        reviewPriority: rule.severity >= 4 ? 'HIGH' : rule.severity >= 3 ? 'MEDIUM' : 'LOW',\n        suggestedAction: rule.severity >= 4 ? 'SUSPEND_3D' : 'WARN',\n        appealable: rule.action !== _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED\n    };\n}\n/**\n   * Create approved result for content that passes all rules\n   */ function createApprovedResult() {\n    return {\n        action: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationAction.APPROVED,\n        flagged: false,\n        blocked: false,\n        confidence: 0,\n        reason: 'Content approved by custom rules',\n        categories: [],\n        source: _prisma_client__WEBPACK_IMPORTED_MODULE_0__.ModerationSource.CUSTOM_RULES,\n        moderatedAt: new Date(),\n        requiresHumanReview: false,\n        reviewPriority: 'LOW',\n        appealable: false\n    };\n}\n// ============================================================================\n// POSITIVE CONTENT DETECTION\n// ============================================================================\n/**\n   * Detect positive fitness content to boost confidence in approval\n   */ function detectPositiveFitnessContent(content) {\n    const positiveKeywords = [\n        'workout',\n        'exercise',\n        'fitness',\n        'training',\n        'health',\n        'wellness',\n        'nutrition',\n        'diet',\n        'protein',\n        'cardio',\n        'strength',\n        'muscle',\n        'motivation',\n        'progress',\n        'goals',\n        'achievement',\n        'improvement',\n        'coach',\n        'trainer',\n        'guidance',\n        'support',\n        'community',\n        'journey'\n    ];\n    const encouragingPhrases = [\n        'great job',\n        'well done',\n        'keep going',\n        'you can do it',\n        'proud of you',\n        'amazing progress',\n        'inspiring',\n        'motivated',\n        'helpful',\n        'supportive'\n    ];\n    const foundKeywords = positiveKeywords.filter((keyword)=>content.toLowerCase().includes(keyword));\n    const foundPhrases = encouragingPhrases.filter((phrase)=>content.toLowerCase().includes(phrase));\n    const isFitnessRelated = foundKeywords.length >= 1;\n    const positiveIndicators = [\n        ...foundKeywords,\n        ...foundPhrases\n    ];\n    // Calculate confidence bonus (0-0.3)\n    const confidenceBonus = Math.min(foundKeywords.length * 0.1 + foundPhrases.length * 0.15, 0.3);\n    return {\n        isFitnessRelated,\n        positiveIndicators,\n        confidenceBonus\n    };\n}\n// ============================================================================\n// RULE MANAGEMENT\n// ============================================================================\n/**\n   * Get all active custom rules\n   */ function getActiveRules() {\n    return Object.values(FITNESS_VIOLATION_PATTERNS).filter((rule)=>rule.enabled);\n}\n/**\n   * Update rule configuration\n   */ function updateRule(ruleId, updates) {\n    const rule = Object.values(FITNESS_VIOLATION_PATTERNS).find((r)=>r.id === ruleId);\n    if (!rule) return false;\n    Object.assign(rule, updates, {\n        lastModified: new Date()\n    });\n    return true;\n}\n/**\n   * Get rule statistics\n   */ function getRuleStats() {\n    const stats = {};\n    Object.entries(FITNESS_VIOLATION_PATTERNS).forEach(([key, rule])=>{\n        stats[key] = {\n            usageCount: rule.usageCount,\n            severity: rule.severity,\n            enabled: rule.enabled\n        };\n    });\n    return stats;\n}\n// ============================================================================\n// EXPORT UTILITIES\n// ============================================================================\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9ydWxlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQVFvRjtBQUVuRiwrRUFBK0U7QUFDL0Usc0NBQXNDO0FBQ3RDLCtFQUErRTtBQUUvRTs7O0dBR0MsR0FDRCxNQUFNRyw2QkFBaUY7SUFDckZDLGlDQUFpQztRQUMvQkMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVU4seURBQWFBLENBQUNPLHFCQUFxQjtRQUM3Q0MsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtZQUNSO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFVBQVU7WUFDUjtZQUFRO1lBQVE7WUFBTztZQUFhO1lBQVk7WUFDaEQ7WUFBYztZQUFRO1lBQVU7WUFBUTtZQUFTO1NBQ2xEO1FBQ0RDLGVBQWU7WUFDYjtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQUM7WUFBUTtZQUFXO1NBQVU7UUFDeENDLFdBQVc7WUFBQztZQUFVO1NBQVU7UUFDaENDLGdCQUFnQjtZQUFDO1lBQVU7U0FBVTtRQUNyQ0MsUUFBUW5CLDREQUFnQkEsQ0FBQ29CLE9BQU87UUFDaENDLFdBQVc7UUFDWEMsb0JBQW9CO1FBQ3BCQyxXQUFXO1FBQ1hDLFdBQVcsSUFBSUM7UUFDZkMsY0FBYyxJQUFJRDtRQUNsQkUsWUFBWTtJQUNkO0lBRUFDLGdDQUFnQztRQUM5QnZCLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVVOLHlEQUFhQSxDQUFDMkIsVUFBVTtRQUNsQ25CLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUNSO1lBQVE7WUFBUTtZQUFXO1lBQVk7WUFBTTtZQUFRO1lBQ3JEO1lBQVU7WUFBUTtZQUFVO1lBQVU7U0FDdkM7UUFDREMsZUFBZTtZQUNiO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQUM7WUFBVztZQUFXO1NBQU87UUFDeENDLFdBQVc7WUFBQztZQUFVO1NBQVU7UUFDaENDLGdCQUFnQjtZQUFDO1lBQVU7U0FBVTtRQUNyQ0MsUUFBUW5CLDREQUFnQkEsQ0FBQzhCLE9BQU87UUFDaENULFdBQVc7UUFDWEMsb0JBQW9CO1FBQ3BCQyxXQUFXO1FBQ1hDLFdBQVcsSUFBSUM7UUFDZkMsY0FBYyxJQUFJRDtRQUNsQkUsWUFBWTtJQUNkO0lBRUFJLDBCQUEwQjtRQUN4QjFCLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVVOLHlEQUFhQSxDQUFDOEIsYUFBYTtRQUNyQ3RCLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFVBQVU7WUFDUjtZQUFhO1lBQWlCO1lBQVc7WUFBYztZQUN2RDtZQUFRO1lBQU87WUFBUTtZQUFRO1lBQU07WUFBYztTQUNwRDtRQUNEQyxlQUFlO1lBQ2I7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUFDO1lBQVc7WUFBUTtTQUFVO1FBQ3hDQyxXQUFXO1lBQUM7U0FBUztRQUNyQkMsZ0JBQWdCO1lBQUM7WUFBVTtTQUFVO1FBQ3JDQyxRQUFRbkIsNERBQWdCQSxDQUFDb0IsT0FBTztRQUNoQ0MsV0FBVztRQUNYQyxvQkFBb0I7UUFDcEJDLFdBQVc7UUFDWEMsV0FBVyxJQUFJQztRQUNmQyxjQUFjLElBQUlEO1FBQ2xCRSxZQUFZO0lBQ2Q7SUFFQU0sd0JBQXdCO1FBQ3RCNUIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVU4seURBQWFBLENBQUNnQyxTQUFTO1FBQ2pDeEIsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtZQUNSO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQ1I7WUFBUTtZQUFVO1lBQVE7WUFBVztZQUFPO1lBQVM7WUFDckQ7WUFBTTtZQUFRO1lBQWE7WUFBVztTQUN2QztRQUNEQyxlQUFlO1lBQ2I7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQUM7WUFBUTtZQUFXO1NBQVU7UUFDeENDLFdBQVc7WUFBQztZQUFVO1NBQVU7UUFDaENDLGdCQUFnQjtZQUFDO1lBQVU7U0FBVTtRQUNyQ0MsUUFBUW5CLDREQUFnQkEsQ0FBQ29CLE9BQU87UUFDaENDLFdBQVc7UUFDWEMsb0JBQW9CO1FBQ3BCQyxXQUFXO1FBQ1hDLFdBQVcsSUFBSUM7UUFDZkMsY0FBYyxJQUFJRDtRQUNsQkUsWUFBWTtJQUNkO0lBRUFRLGlCQUFpQjtRQUNmOUIsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVU4seURBQWFBLENBQUNrQyxJQUFJO1FBQzVCMUIsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtZQUNSO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUNSO1lBQU87WUFBUTtZQUFZO1lBQVM7WUFBUTtZQUM1QztZQUFRO1lBQVM7WUFBUTtZQUFZO1lBQWU7U0FDckQ7UUFDREMsZUFBZTtZQUNiO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUFDO1lBQVE7WUFBVztTQUFVO1FBQ3hDQyxXQUFXO1lBQUM7WUFBVTtTQUFVO1FBQ2hDQyxnQkFBZ0I7WUFBQztTQUFTO1FBQzFCQyxRQUFRbkIsNERBQWdCQSxDQUFDOEIsT0FBTztRQUNoQ1QsV0FBVztRQUNYQyxvQkFBb0I7UUFDcEJDLFdBQVc7UUFDWEMsV0FBVyxJQUFJQztRQUNmQyxjQUFjLElBQUlEO1FBQ2xCRSxZQUFZO0lBQ2Q7SUFFQVUsY0FBYztRQUNaaEMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVU4seURBQWFBLENBQUMyQixVQUFVO1FBQ2xDbkIsU0FBUztRQUNUQyxVQUFVO1FBQ1ZDLFlBQVk7UUFDWkMsVUFBVTtZQUNSO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQ1I7WUFBTztZQUFVO1lBQVM7WUFBYztZQUFRO1lBQ2hEO1lBQVE7WUFBUTtZQUFVO1lBQU87WUFBUTtTQUMxQztRQUNEQyxlQUFlO1lBQ2I7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUFDO1lBQVE7WUFBVztTQUFVO1FBQ3hDQyxXQUFXO1lBQUM7WUFBVTtTQUFVO1FBQ2hDQyxnQkFBZ0I7WUFBQztZQUFVO1NBQVU7UUFDckNDLFFBQVFuQiw0REFBZ0JBLENBQUM4QixPQUFPO1FBQ2hDVCxXQUFXO1FBQ1hDLG9CQUFvQjtRQUNwQkMsV0FBVztRQUNYQyxXQUFXLElBQUlDO1FBQ2ZDLGNBQWMsSUFBSUQ7UUFDbEJFLFlBQVk7SUFDZDtJQUVBVywwQkFBMEI7UUFDeEJqQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxVQUFVTix5REFBYUEsQ0FBQ2dDLFNBQVM7UUFDakN4QixTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsWUFBWTtRQUNaQyxVQUFVO1lBQ1I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFVBQVU7WUFDUjtZQUFTO1lBQVc7WUFBUztZQUFRO1lBQVE7WUFDN0M7WUFBVztZQUFRO1lBQVU7U0FDOUI7UUFDREMsZUFBZTtZQUNiO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUFDO1lBQVE7U0FBVTtRQUM3QkMsV0FBVztZQUFDO1lBQVU7U0FBVTtRQUNoQ0MsZ0JBQWdCO1lBQUM7U0FBUztRQUMxQkMsUUFBUW5CLDREQUFnQkEsQ0FBQ29CLE9BQU87UUFDaENDLFdBQVc7UUFDWEMsb0JBQW9CO1FBQ3BCQyxXQUFXO1FBQ1hDLFdBQVcsSUFBSUM7UUFDZkMsY0FBYyxJQUFJRDtRQUNsQkUsWUFBWTtJQUNkO0lBRUFZLDJCQUEyQjtRQUN6QmxDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxhQUFhO1FBQ2JDLFVBQVVOLHlEQUFhQSxDQUFDMkIsVUFBVTtRQUNsQ25CLFNBQVM7UUFDVEMsVUFBVTtRQUNWQyxZQUFZO1FBQ1pDLFVBQVU7WUFDUjtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQ1I7WUFBVztZQUFXO1lBQVU7WUFBTztZQUFZO1lBQ25EO1lBQVM7WUFBVztZQUFRO1lBQU87U0FDcEM7UUFDREMsZUFBZTtZQUNiO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFVBQVU7WUFBQztZQUFXO1NBQU87UUFDN0JDLFdBQVc7WUFBQztTQUFVO1FBQ3RCQyxnQkFBZ0I7WUFBQztZQUFXO1NBQVM7UUFDckNDLFFBQVFuQiw0REFBZ0JBLENBQUNvQixPQUFPO1FBQ2hDQyxXQUFXO1FBQ1hDLG9CQUFvQjtRQUNwQkMsV0FBVztRQUNYQyxXQUFXLElBQUlDO1FBQ2ZDLGNBQWMsSUFBSUQ7UUFDbEJFLFlBQVk7SUFDZDtJQUVBYSxtQkFBbUI7UUFDakJuQyxJQUFJO1FBQ0pDLE1BQU07UUFDTkMsYUFBYTtRQUNiQyxVQUFVTix5REFBYUEsQ0FBQ2dDLFNBQVM7UUFDakN4QixTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsWUFBWTtRQUNaQyxVQUFVO1lBQ1I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7WUFDQTtTQUNEO1FBQ0RDLFVBQVU7WUFDUjtZQUFZO1lBQWE7WUFBWTtZQUFhO1lBQ2xEO1lBQVc7WUFBVTtZQUFjO1lBQVE7WUFBVTtZQUNyRDtZQUFnQjtZQUFhO1NBQzlCO1FBQ0RDLGVBQWU7WUFDYjtZQUNBO1lBQ0E7U0FDRDtRQUNEQyxVQUFVO1lBQUM7WUFBUTtTQUFVO1FBQzdCQyxXQUFXO1lBQUM7WUFBVTtTQUFVO1FBQ2hDQyxnQkFBZ0I7WUFBQztTQUFTO1FBQzFCQyxRQUFRbkIsNERBQWdCQSxDQUFDb0IsT0FBTztRQUNoQ0MsV0FBVztRQUNYQyxvQkFBb0I7UUFDcEJDLFdBQVc7UUFDWEMsV0FBVyxJQUFJQztRQUNmQyxjQUFjLElBQUlEO1FBQ2xCRSxZQUFZO0lBQ2Q7SUFFQWMsa0JBQWtCO1FBQ2hCcEMsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLGFBQWE7UUFDYkMsVUFBVU4seURBQWFBLENBQUN3QyxpQkFBaUI7UUFDekNoQyxTQUFTO1FBQ1RDLFVBQVU7UUFDVkMsWUFBWTtRQUNaQyxVQUFVO1lBQ1I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUNSO1lBQVE7WUFBVztZQUFTO1lBQVU7WUFBUztZQUMvQztZQUFPO1lBQVk7WUFBWTtTQUNoQztRQUNEQyxlQUFlO1lBQ2I7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsVUFBVTtZQUFDO1lBQVE7WUFBVztTQUFVO1FBQ3hDQyxXQUFXO1lBQUM7WUFBVTtTQUFVO1FBQ2hDQyxnQkFBZ0I7WUFBQztZQUFVO1NBQVU7UUFDckNDLFFBQVFuQiw0REFBZ0JBLENBQUM4QixPQUFPO1FBQ2hDVCxXQUFXO1FBQ1hDLG9CQUFvQjtRQUNwQkMsV0FBVztRQUNYQyxXQUFXLElBQUlDO1FBQ2ZDLGNBQWMsSUFBSUQ7UUFDbEJFLFlBQVk7SUFDZDtBQUNGO0FBRUEsK0VBQStFO0FBQy9FLDBCQUEwQjtBQUMxQiwrRUFBK0U7QUFFL0U7O0dBRUMsR0FDTSxlQUFlZ0IsaUJBQ3BCQyxPQUFlLEVBQ2ZDLE9BQTBCO0lBRTFCLE1BQU1DLGFBSUQsRUFBRTtJQUVQLHNDQUFzQztJQUN0QyxLQUFLLE1BQU1DLFFBQVFDLE9BQU9DLE1BQU0sQ0FBQzlDLDRCQUE2QjtRQUM1RCxJQUFJLENBQUM0QyxLQUFLckMsT0FBTyxFQUFFO1FBRW5CLHdDQUF3QztRQUN4QyxJQUFJLENBQUN3QyxpQkFBaUJILE1BQU1GLFVBQVU7UUFFdEMsTUFBTU0sVUFBVUMsZ0JBQWdCUixTQUFTRztRQUV6QyxJQUFJSSxRQUFRRSxNQUFNLEdBQUcsR0FBRztZQUN0QlAsV0FBV1EsSUFBSSxDQUFDO2dCQUNkUDtnQkFDQUk7Z0JBQ0F2QyxZQUFZMkMsd0JBQXdCUixNQUFNSSxTQUFTUDtZQUNyRDtRQUNGO0lBQ0Y7SUFFQSw4Q0FBOEM7SUFDOUMsSUFBSUUsV0FBV08sTUFBTSxLQUFLLEdBQUc7UUFDM0IsT0FBT0c7SUFDVDtJQUVBLGlDQUFpQztJQUNqQyxNQUFNQyxtQkFBbUJYLFdBQVdZLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxVQUMvQ0EsUUFBUWIsSUFBSSxDQUFDcEMsUUFBUSxHQUFHZ0QsSUFBSVosSUFBSSxDQUFDcEMsUUFBUSxHQUFHaUQsVUFBVUQ7SUFHeEQsMERBQTBEO0lBQzFELE9BQU9FLHVCQUF1Qkosa0JBQWtCWCxZQUFZRjtBQUM5RDtBQUVBOztHQUVDLEdBQ0QsU0FBU00saUJBQWlCSCxJQUEwQixFQUFFRixPQUEwQjtJQUM5RSw2QkFBNkI7SUFDN0IsTUFBTWlCLGNBQWNqQixRQUFRa0Isa0JBQWtCLEdBQUcsWUFBWTtJQUM3RCxJQUFJLENBQUNoQixLQUFLL0IsUUFBUSxDQUFDZ0QsUUFBUSxDQUFDRixjQUFxQjtRQUMvQyxPQUFPO0lBQ1Q7SUFFQSx1QkFBdUI7SUFDdkIsSUFBSSxDQUFDZixLQUFLN0IsY0FBYyxDQUFDOEMsUUFBUSxDQUFDbkIsUUFBUW9CLGFBQWEsR0FBRztRQUN4RCxPQUFPO0lBQ1Q7SUFFQSx5REFBeUQ7SUFDekQsSUFBSWxCLEtBQUs5QixTQUFTLENBQUMrQyxRQUFRLENBQUMsY0FBYyxDQUFDakIsS0FBSzlCLFNBQVMsQ0FBQytDLFFBQVEsQ0FBQyxXQUFXO1FBQzVFLE9BQU9uQixRQUFRcUIsaUJBQWlCO0lBQ2xDO0lBRUEsT0FBTztBQUNUO0FBRUE7O0dBRUMsR0FDRCxTQUFTZCxnQkFBZ0JSLE9BQWUsRUFBRUcsSUFBMEI7SUFDbEUsTUFBTUksVUFBb0IsRUFBRTtJQUM1QixNQUFNZ0IsZUFBZXZCLFFBQVF3QixXQUFXO0lBRXhDLHdCQUF3QjtJQUN4QixLQUFLLE1BQU1DLFdBQVd0QixLQUFLbEMsUUFBUSxDQUFFO1FBQ25DLElBQUlzRCxhQUFhSCxRQUFRLENBQUNLLFFBQVFELFdBQVcsS0FBSztZQUNoRGpCLFFBQVFHLElBQUksQ0FBQ2U7UUFDZjtJQUNGO0lBRUEsNkJBQTZCO0lBQzdCLE1BQU1DLGVBQWVILGFBQWFJLEtBQUssQ0FBQztJQUN4QyxLQUFLLE1BQU1DLFdBQVd6QixLQUFLakMsUUFBUSxDQUFFO1FBQ25DLElBQUl3RCxhQUFhRyxJQUFJLENBQUNDLENBQUFBLE9BQVFBLEtBQUtWLFFBQVEsQ0FBQ1EsUUFBUUosV0FBVyxNQUFNO1lBQ25FakIsUUFBUUcsSUFBSSxDQUFDa0I7UUFDZjtJQUNGO0lBRUEsdUJBQXVCO0lBQ3ZCLElBQUl6QixLQUFLaEMsYUFBYSxFQUFFO1FBQ3RCLEtBQUssTUFBTTRELFNBQVM1QixLQUFLaEMsYUFBYSxDQUFFO1lBQ3RDLE1BQU02RCxlQUFlaEMsUUFBUWlDLEtBQUssQ0FBQ0Y7WUFDbkMsSUFBSUMsY0FBYztnQkFDaEJ6QixRQUFRRyxJQUFJLElBQUlzQjtZQUNsQjtRQUNGO0lBQ0Y7SUFFQSxPQUFPO1dBQUksSUFBSUUsSUFBSTNCO0tBQVMsRUFBRSxvQkFBb0I7QUFDcEQ7QUFFQTs7R0FFQyxHQUNELFNBQVNJLHdCQUNQUixJQUEwQixFQUMxQmdDLFFBQWtCLEVBQ2xCQyxRQUFnQjtJQUVoQixJQUFJcEUsYUFBYW1DLEtBQUtuQyxVQUFVO0lBRWhDLGlEQUFpRDtJQUNqRCxNQUFNcUUsYUFBYUMsS0FBS0MsR0FBRyxDQUFDSixTQUFTMUIsTUFBTSxHQUFHLEtBQUs7SUFDbkR6QyxjQUFjcUU7SUFFZCxtRUFBbUU7SUFDbkUsSUFBSUQsU0FBUzNCLE1BQU0sR0FBRyxLQUFLO1FBQ3pCekMsY0FBYztJQUNoQjtJQUVBLGdEQUFnRDtJQUNoRCxNQUFNd0UsZUFBZUwsU0FBU00sTUFBTSxDQUFDUixDQUFBQSxRQUNuQzlCLEtBQUtsQyxRQUFRLENBQUM0RCxJQUFJLENBQUNKLENBQUFBLFVBQ2pCUSxNQUFNVCxXQUFXLE9BQU9DLFFBQVFELFdBQVc7SUFJL0MsSUFBSWdCLGFBQWEvQixNQUFNLEdBQUcsR0FBRztRQUMzQnpDLGNBQWM7SUFDaEI7SUFFQSxPQUFPc0UsS0FBS0MsR0FBRyxDQUFDdkUsWUFBWTtBQUM5QjtBQUVBOztHQUVDLEdBQ0QsU0FBU2lELHVCQUNQSixnQkFBdUYsRUFDdkY2QixhQUEyRixFQUMzRk4sUUFBZ0I7SUFFaEIsTUFBTSxFQUFFakMsSUFBSSxFQUFFbkMsVUFBVSxFQUFFLEdBQUc2QztJQUU3QixNQUFNOEIsYUFBYUQsY0FBY0UsR0FBRyxDQUFDQyxDQUFBQSxJQUFNO1lBQ3pDakYsVUFBVWlGLEVBQUUxQyxJQUFJLENBQUN6QyxJQUFJO1lBQ3JCb0YsYUFBYUQsRUFBRTFDLElBQUksQ0FBQ3ZDLFFBQVE7WUFDNUJHLFVBQVU4RSxFQUFFMUMsSUFBSSxDQUFDcEMsUUFBUTtZQUN6QkMsWUFBWTZFLEVBQUU3RSxVQUFVO1lBQ3hCTCxhQUFha0YsRUFBRTFDLElBQUksQ0FBQ3hDLFdBQVc7UUFDakM7SUFFQSxPQUFPO1FBQ0xZLFFBQVE0QixLQUFLNUIsTUFBTTtRQUNuQndFLFNBQVM1QyxLQUFLNUIsTUFBTSxLQUFLbkIsNERBQWdCQSxDQUFDNEYsUUFBUTtRQUNsREMsU0FBUzlDLEtBQUs1QixNQUFNLEtBQUtuQiw0REFBZ0JBLENBQUM4QixPQUFPO1FBQ2pEbEI7UUFDQWtGLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRS9DLEtBQUt4QyxXQUFXLEVBQUU7UUFDbERnRjtRQUNBUSxRQUFROUYsNERBQWdCQSxDQUFDK0YsWUFBWTtRQUNyQ0MsYUFBYSxJQUFJeEU7UUFDakJ5RSxxQkFBcUJuRCxLQUFLekIsa0JBQWtCO1FBQzVDNkUsZ0JBQWdCcEQsS0FBS3BDLFFBQVEsSUFBSSxJQUFJLFNBQVNvQyxLQUFLcEMsUUFBUSxJQUFJLElBQUksV0FBVztRQUM5RXlGLGlCQUFpQnJELEtBQUtwQyxRQUFRLElBQUksSUFBSSxlQUFlO1FBQ3JEMEYsWUFBWXRELEtBQUs1QixNQUFNLEtBQUtuQiw0REFBZ0JBLENBQUM0RixRQUFRO0lBQ3ZEO0FBQ0Y7QUFFQTs7R0FFQyxHQUNELFNBQVNwQztJQUNQLE9BQU87UUFDTHJDLFFBQVFuQiw0REFBZ0JBLENBQUM0RixRQUFRO1FBQ2pDRCxTQUFTO1FBQ1RFLFNBQVM7UUFDVGpGLFlBQVk7UUFDWmtGLFFBQVE7UUFDUlAsWUFBWSxFQUFFO1FBQ2RRLFFBQVE5Riw0REFBZ0JBLENBQUMrRixZQUFZO1FBQ3JDQyxhQUFhLElBQUl4RTtRQUNqQnlFLHFCQUFxQjtRQUNyQkMsZ0JBQWdCO1FBQ2hCRSxZQUFZO0lBQ2Q7QUFDRjtBQUVBLCtFQUErRTtBQUMvRSw2QkFBNkI7QUFDN0IsK0VBQStFO0FBRS9FOztHQUVDLEdBQ00sU0FBU0MsNkJBQTZCMUQsT0FBZTtJQUsxRCxNQUFNMkQsbUJBQW1CO1FBQ3ZCO1FBQVc7UUFBWTtRQUFXO1FBQVk7UUFBVTtRQUN4RDtRQUFhO1FBQVE7UUFBVztRQUFVO1FBQVk7UUFDdEQ7UUFBYztRQUFZO1FBQVM7UUFBZTtRQUNsRDtRQUFTO1FBQVc7UUFBWTtRQUFXO1FBQWE7S0FDekQ7SUFFRCxNQUFNQyxxQkFBcUI7UUFDekI7UUFBYTtRQUFhO1FBQWM7UUFBaUI7UUFDekQ7UUFBb0I7UUFBYTtRQUFhO1FBQVc7S0FDMUQ7SUFFRCxNQUFNQyxnQkFBZ0JGLGlCQUFpQmxCLE1BQU0sQ0FBQ2IsQ0FBQUEsVUFDNUM1QixRQUFRd0IsV0FBVyxHQUFHSixRQUFRLENBQUNRO0lBR2pDLE1BQU1rQyxlQUFlRixtQkFBbUJuQixNQUFNLENBQUNzQixDQUFBQSxTQUM3Qy9ELFFBQVF3QixXQUFXLEdBQUdKLFFBQVEsQ0FBQzJDO0lBR2pDLE1BQU1DLG1CQUFtQkgsY0FBY3BELE1BQU0sSUFBSTtJQUNqRCxNQUFNd0QscUJBQXFCO1dBQUlKO1dBQWtCQztLQUFhO0lBRTlELHFDQUFxQztJQUNyQyxNQUFNSSxrQkFBa0I1QixLQUFLQyxHQUFHLENBQzlCLGNBQWU5QixNQUFNLEdBQUcsTUFBUXFELGFBQWFyRCxNQUFNLEdBQUcsTUFDdEQ7SUFHRixPQUFPO1FBQ0x1RDtRQUNBQztRQUNBQztJQUNGO0FBQ0Y7QUFFQSwrRUFBK0U7QUFDL0Usa0JBQWtCO0FBQ2xCLCtFQUErRTtBQUUvRTs7R0FFQyxHQUNNLFNBQVNDO0lBQ2QsT0FBTy9ELE9BQU9DLE1BQU0sQ0FBQzlDLDRCQUE0QmtGLE1BQU0sQ0FBQ3RDLENBQUFBLE9BQVFBLEtBQUtyQyxPQUFPO0FBQzlFO0FBRUE7O0dBRUMsR0FDTSxTQUFTc0csV0FDZEMsTUFBYyxFQUNkQyxPQUFzQztJQUV0QyxNQUFNbkUsT0FBT0MsT0FBT0MsTUFBTSxDQUFDOUMsNEJBQ3hCZ0gsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFL0csRUFBRSxLQUFLNEc7SUFFdEIsSUFBSSxDQUFDbEUsTUFBTSxPQUFPO0lBRWxCQyxPQUFPcUUsTUFBTSxDQUFDdEUsTUFBTW1FLFNBQVM7UUFBRXhGLGNBQWMsSUFBSUQ7SUFBTztJQUN4RCxPQUFPO0FBQ1Q7QUFFQTs7R0FFQyxHQUNNLFNBQVM2RjtJQUtkLE1BQU1DLFFBQTZCLENBQUM7SUFFcEN2RSxPQUFPd0UsT0FBTyxDQUFDckgsNEJBQTRCc0gsT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBSzNFLEtBQUs7UUFDN0R3RSxLQUFLLENBQUNHLElBQUksR0FBRztZQUNYL0YsWUFBWW9CLEtBQUtwQixVQUFVO1lBQzNCaEIsVUFBVW9DLEtBQUtwQyxRQUFRO1lBQ3ZCRCxTQUFTcUMsS0FBS3JDLE9BQU87UUFDdkI7SUFDRjtJQUVBLE9BQU82RztBQUNUO0FBRUEsK0VBQStFO0FBQ2pGLG1CQUFtQjtBQUNuQiwrRUFBK0U7QUFJN0UiLCJzb3VyY2VzIjpbIi9Vc2Vycy92aWN0b3Jzb2xlL0RvY3VtZW50cy9HaXRIdWIvbWFzc2ltaW5vL21hc3NpbWluby9zcmMvc2VydmljZXMvbW9kZXJhdGlvbi9ydWxlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEN1c3RvbSBNb2RlcmF0aW9uIFJ1bGVzIGZvciBNYXNzaW1pbm9cbiAqIEZpdG5lc3Mtc3BlY2lmaWMgY29udGVudCBtb2RlcmF0aW9uIHJ1bGVzIGFuZCBwYXR0ZXJuIG1hdGNoaW5nXG4gKi9cblxuaW1wb3J0IHR5cGUgeyBcbiAgICBNb2RlcmF0aW9uUmVzdWx0LCBcbiAgICBNb2RlcmF0aW9uQ29udGV4dCxcbiAgICBDdXN0b21Nb2RlcmF0aW9uUnVsZSxcbiAgICBGaXRuZXNzVmlvbGF0aW9uVHlwZSBcbiAgfSBmcm9tICdAL3R5cGVzL21vZGVyYXRpb24nO1xuICBpbXBvcnQgeyBNb2RlcmF0aW9uQWN0aW9uLCBNb2RlcmF0aW9uU291cmNlLCBWaW9sYXRpb25UeXBlIH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuICBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBGSVRORVNTLVNQRUNJRklDIFZJT0xBVElPTiBQQVRURVJOU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAvKipcbiAgICogUGF0dGVybnMgdGhhdCBhcmUgc3BlY2lmaWNhbGx5IHByb2JsZW1hdGljIGluIGZpdG5lc3MgY29udGV4dHNcbiAgICogVGhlc2UgZ28gYmV5b25kIGdlbmVyYWwgY29udGVudCBtb2RlcmF0aW9uIHRvIGNhdGNoIGZpdG5lc3Mtc3BlY2lmaWMgaXNzdWVzXG4gICAqL1xuICBjb25zdCBGSVRORVNTX1ZJT0xBVElPTl9QQVRURVJOUzogUmVjb3JkPEZpdG5lc3NWaW9sYXRpb25UeXBlLCBDdXN0b21Nb2RlcmF0aW9uUnVsZT4gPSB7XG4gICAgSU5BUFBST1BSSUFURV9QRVJTT05BTF9DT01NRU5UUzoge1xuICAgICAgaWQ6ICdpbmFwcHJvcHJpYXRlLXBlcnNvbmFsJyxcbiAgICAgIG5hbWU6ICdJbmFwcHJvcHJpYXRlIFBlcnNvbmFsIENvbW1lbnRzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29tbWVudHMgZm9jdXNpbmcgb24gYXBwZWFyYW5jZSByYXRoZXIgdGhhbiBmaXRuZXNzIHBlcmZvcm1hbmNlJyxcbiAgICAgIGNhdGVnb3J5OiBWaW9sYXRpb25UeXBlLklOQVBQUk9QUklBVEVfQ09OVEVOVCxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzZXZlcml0eTogNCxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgICduaWNlIGJvZHknLFxuICAgICAgICAnc2V4eScsXG4gICAgICAgICdob3QnLFxuICAgICAgICAnYmVhdXRpZnVsIGJvZHknLFxuICAgICAgICAnZ29yZ2VvdXMnLFxuICAgICAgICAnc3R1bm5pbmcnLFxuICAgICAgICAnYXR0cmFjdGl2ZScsXG4gICAgICAgICdjdXRlIGJ1dHQnLFxuICAgICAgICAnbmljZSBjdXJ2ZXMnLFxuICAgICAgXSxcbiAgICAgIGtleXdvcmRzOiBbXG4gICAgICAgICdib2R5JywgJ3NleHknLCAnaG90JywgJ2JlYXV0aWZ1bCcsICdnb3JnZW91cycsICdzdHVubmluZycsIFxuICAgICAgICAnYXR0cmFjdGl2ZScsICdjdXRlJywgJ2N1cnZlcycsICdidXR0JywgJ2NoZXN0JywgJ2xlZ3MnXG4gICAgICBdLFxuICAgICAgcmVnZXhQYXR0ZXJuczogW1xuICAgICAgICAnXFxcXGIobmljZXxncmVhdHxhbWF6aW5nfHNleHl8aG90KVxcXFxzKyhib2R5fGZpZ3VyZXxwaHlzaXF1ZXxjdXJ2ZXN8YnV0dHxjaGVzdHxsZWdzKVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiKHlvdVxcXFxzK2xvb2t8bG9va2luZylcXFxccysoc2V4eXxob3R8YW1hemluZ3xnb3JnZW91c3xzdHVubmluZylcXFxcYicsXG4gICAgICAgICdcXFxcYihiZWF1dGlmdWx8Z29yZ2VvdXN8c3R1bm5pbmcpXFxcXHMrKHdvbWFufGdpcmx8bGFkeXxtYW58Z3V5KVxcXFxiJyxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0czogWydQT1NUJywgJ0NPTU1FTlQnLCAnTUVTU0FHRSddLFxuICAgICAgdXNlclJvbGVzOiBbJ0NMSUVOVCcsICdUUkFJTkVSJ10sXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQVUJMSUMnLCAnUFJJVkFURSddLFxuICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQsXG4gICAgICBhdXRvQmxvY2s6IGZhbHNlLFxuICAgICAgcmVxdWlyZUh1bWFuUmV2aWV3OiB0cnVlLFxuICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgfSxcbiAgXG4gICAgVU5TT0xJQ0lURURfUEVSU09OQUxfQVRURU5USU9OOiB7XG4gICAgICBpZDogJ3Vuc29saWNpdGVkLWF0dGVudGlvbicsXG4gICAgICBuYW1lOiAnVW5zb2xpY2l0ZWQgUGVyc29uYWwgQXR0ZW50aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnVW53YW50ZWQgcGVyc29uYWwgYXR0ZW50aW9uIG9yIGNyZWVweSBiZWhhdmlvcicsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5IQVJBU1NNRU5ULFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHNldmVyaXR5OiA1LFxuICAgICAgY29uZmlkZW5jZTogMC45LFxuICAgICAgcGF0dGVybnM6IFtcbiAgICAgICAgJ3dhbnQgdG8gbWVldCcsXG4gICAgICAgICdob29rIHVwJyxcbiAgICAgICAgJ3ByaXZhdGUgc2Vzc2lvbicsXG4gICAgICAgICdvbmUgb24gb25lJyxcbiAgICAgICAgJ2RtIG1lJyxcbiAgICAgICAgJ3RleHQgbWUnLFxuICAgICAgICAnbXkgbnVtYmVyIGlzJyxcbiAgICAgICAgJ2NhbGwgbWUnLFxuICAgICAgICAnZGF0ZScsXG4gICAgICAgICdkaW5uZXInLFxuICAgICAgICAnZHJpbmtzJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAnbWVldCcsICdob29rJywgJ3ByaXZhdGUnLCAncGVyc29uYWwnLCAnZG0nLCAndGV4dCcsICdjYWxsJywgXG4gICAgICAgICdudW1iZXInLCAnZGF0ZScsICdkaW5uZXInLCAnZHJpbmtzJywgJ3JlbGF0aW9uc2hpcCdcbiAgICAgIF0sXG4gICAgICByZWdleFBhdHRlcm5zOiBbXG4gICAgICAgICdcXFxcYih3YW50XFxcXHMrdG98bGV0XFwncylcXFxccysobWVldHxob29rXFxcXHMrdXB8Z2V0XFxcXHMrdG9nZXRoZXIpXFxcXGInLFxuICAgICAgICAnXFxcXGIocHJpdmF0ZXxwZXJzb25hbClcXFxccysoc2Vzc2lvbnx0cmFpbmluZ3xtZWV0aW5nKVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiKGRtfHRleHR8Y2FsbClcXFxccyttZVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiXFxcXGR7M31bLS5dP1xcXFxkezN9Wy0uXT9cXFxcZHs0fVxcXFxiJywgLy8gUGhvbmUgbnVtYmVyc1xuICAgICAgICAnXFxcXGJbXFxcXHcuXyUrLV0rQFtcXFxcdy4tXStcXFxcLltBLVpdezIsfVxcXFxiJywgLy8gRW1haWwgYWRkcmVzc2VzXG4gICAgICBdLFxuICAgICAgY29udGV4dHM6IFsnQ09NTUVOVCcsICdNRVNTQUdFJywgJ1BPU1QnXSxcbiAgICAgIHVzZXJSb2xlczogWydDTElFTlQnLCAnVFJBSU5FUiddLFxuICAgICAgY29tbXVuaXR5VHlwZXM6IFsnUFVCTElDJywgJ1BSSVZBVEUnXSxcbiAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5CTE9DS0VELFxuICAgICAgYXV0b0Jsb2NrOiB0cnVlLFxuICAgICAgcmVxdWlyZUh1bWFuUmV2aWV3OiB0cnVlLFxuICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgfSxcbiAgXG4gICAgRkFLRV9UUkFJTkVSX0NSRURFTlRJQUxTOiB7XG4gICAgICBpZDogJ2Zha2UtY3JlZGVudGlhbHMnLFxuICAgICAgbmFtZTogJ0Zha2UgVHJhaW5lciBDcmVkZW50aWFscycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0ZhbHNlIGNsYWltcyBhYm91dCBjZXJ0aWZpY2F0aW9ucyBvciBjcmVkZW50aWFscycsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5JTVBFUlNPTkFUSU9OLFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHNldmVyaXR5OiA0LFxuICAgICAgY29uZmlkZW5jZTogMC43LFxuICAgICAgcGF0dGVybnM6IFtcbiAgICAgICAgJ2NlcnRpZmllZCB0cmFpbmVyJyxcbiAgICAgICAgJ05BU00gY2VydGlmaWVkJyxcbiAgICAgICAgJ0FDRSBjZXJ0aWZpZWQnLFxuICAgICAgICAnQUNTTSBjZXJ0aWZpZWQnLFxuICAgICAgICAncGVyc29uYWwgdHJhaW5lciBsaWNlbnNlJyxcbiAgICAgICAgJ251dHJpdGlvbiBzcGVjaWFsaXN0JyxcbiAgICAgICAgJ3JlZ2lzdGVyZWQgZGlldGl0aWFuJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAnY2VydGlmaWVkJywgJ2NlcnRpZmljYXRpb24nLCAnbGljZW5zZScsICdjcmVkZW50aWFsJywgJ3NwZWNpYWxpc3QnLCBcbiAgICAgICAgJ05BU00nLCAnQUNFJywgJ0FDU00nLCAnTlNDQScsICdSRCcsICdyZWdpc3RlcmVkJywgJ2RpZXRpdGlhbidcbiAgICAgIF0sXG4gICAgICByZWdleFBhdHRlcm5zOiBbXG4gICAgICAgICdcXFxcYihjZXJ0aWZpZWR8bGljZW5zZWQpXFxcXHMrKHRyYWluZXJ8bnV0cml0aW9uaXN0fGRpZXRpdGlhbilcXFxcYicsXG4gICAgICAgICdcXFxcYihOQVNNfEFDRXxBQ1NNfE5TQ0EpXFxcXHMrY2VydGlmaWVkXFxcXGInLFxuICAgICAgICAnXFxcXGJyZWdpc3RlcmVkXFxcXHMrZGlldGl0aWFuXFxcXGInLFxuICAgICAgXSxcbiAgICAgIGNvbnRleHRzOiBbJ1BST0ZJTEUnLCAnUE9TVCcsICdDT01NRU5UJ10sXG4gICAgICB1c2VyUm9sZXM6IFsnQ0xJRU5UJ10sIC8vIE9ubHkgZmxhZyBjbGllbnRzIGNsYWltaW5nIGNyZWRlbnRpYWxzXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQVUJMSUMnLCAnUFJJVkFURSddLFxuICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQsXG4gICAgICBhdXRvQmxvY2s6IGZhbHNlLFxuICAgICAgcmVxdWlyZUh1bWFuUmV2aWV3OiB0cnVlLFxuICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgfSxcbiAgXG4gICAgVU5TQUZFX0VYRVJDSVNFX0FEVklDRToge1xuICAgICAgaWQ6ICd1bnNhZmUtYWR2aWNlJyxcbiAgICAgIG5hbWU6ICdVbnNhZmUgRXhlcmNpc2UgQWR2aWNlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGV4ZXJjaXNlIHJlY29tbWVuZGF0aW9ucycsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5PRkZfVE9QSUMsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgc2V2ZXJpdHk6IDQsXG4gICAgICBjb25maWRlbmNlOiAwLjYsXG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAnbm8gcGFpbiBubyBnYWluJyxcbiAgICAgICAgJ3B1c2ggdGhyb3VnaCB0aGUgcGFpbicsXG4gICAgICAgICdwYWluIGlzIHdlYWtuZXNzIGxlYXZpbmcnLFxuICAgICAgICAnaWdub3JlIHRoZSBwYWluJyxcbiAgICAgICAgJ21heCBvdXQgZXZlcnkgZGF5JyxcbiAgICAgICAgJ3RyYWluIGV2ZXJ5IGRheScsXG4gICAgICAgICdubyByZXN0IGRheXMnLFxuICAgICAgICAnbW9yZSBpcyBhbHdheXMgYmV0dGVyJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAncGFpbicsICdpZ25vcmUnLCAncHVzaCcsICd0aHJvdWdoJywgJ21heCcsICdldmVyeScsICdkYXknLFxuICAgICAgICAnbm8nLCAncmVzdCcsICdkYW5nZXJvdXMnLCAnZXh0cmVtZScsICdoYXJkY29yZSdcbiAgICAgIF0sXG4gICAgICByZWdleFBhdHRlcm5zOiBbXG4gICAgICAgICdcXFxcYihub1xcXFxzK3BhaW5cXFxccytub1xcXFxzK2dhaW58cHVzaFxcXFxzK3Rocm91Z2hcXFxccyt0aGVcXFxccytwYWluKVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiKGlnbm9yZVxcXFxzK3RoZVxcXFxzK3BhaW58cGFpblxcXFxzK2lzXFxcXHMrd2Vha25lc3MpXFxcXGInLFxuICAgICAgICAnXFxcXGIodHJhaW58d29ya291dClcXFxccytldmVyeVxcXFxzK2RheVxcXFxiJyxcbiAgICAgICAgJ1xcXFxibm9cXFxccytyZXN0XFxcXHMrZGF5cz9cXFxcYicsXG4gICAgICBdLFxuICAgICAgY29udGV4dHM6IFsnUE9TVCcsICdDT01NRU5UJywgJ01FU1NBR0UnXSxcbiAgICAgIHVzZXJSb2xlczogWydDTElFTlQnLCAnVFJBSU5FUiddLFxuICAgICAgY29tbXVuaXR5VHlwZXM6IFsnUFVCTElDJywgJ1BSSVZBVEUnXSxcbiAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5GTEFHR0VELFxuICAgICAgYXV0b0Jsb2NrOiBmYWxzZSxcbiAgICAgIHJlcXVpcmVIdW1hblJldmlldzogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgIH0sXG4gIFxuICAgIFNVUFBMRU1FTlRfU1BBTToge1xuICAgICAgaWQ6ICdzdXBwbGVtZW50LXNwYW0nLFxuICAgICAgbmFtZTogJ1N1cHBsZW1lbnQgU3BhbScsXG4gICAgICBkZXNjcmlwdGlvbjogJ1VuYXV0aG9yaXplZCBzdXBwbGVtZW50IHByb21vdGlvbnMgb3IgTUxNIGNvbnRlbnQnLFxuICAgICAgY2F0ZWdvcnk6IFZpb2xhdGlvblR5cGUuU1BBTSxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzZXZlcml0eTogMyxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOCxcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgICdidXkgbm93JyxcbiAgICAgICAgJ2xpbWl0ZWQgdGltZScsXG4gICAgICAgICdzcGVjaWFsIG9mZmVyJyxcbiAgICAgICAgJ2Rpc2NvdW50IGNvZGUnLFxuICAgICAgICAnYWZmaWxpYXRlIGxpbmsnLFxuICAgICAgICAnZWFybiBtb25leScsXG4gICAgICAgICdqb2luIG15IHRlYW0nLFxuICAgICAgICAnYnVzaW5lc3Mgb3Bwb3J0dW5pdHknLFxuICAgICAgICAnd29yayBmcm9tIGhvbWUnLFxuICAgICAgICAnc3VwcGxlbWVudCBkZWFsJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAnYnV5JywgJ3NhbGUnLCAnZGlzY291bnQnLCAnb2ZmZXInLCAnZGVhbCcsICdhZmZpbGlhdGUnLCBcbiAgICAgICAgJ2Vhcm4nLCAnbW9uZXknLCAndGVhbScsICdidXNpbmVzcycsICdvcHBvcnR1bml0eScsICdNTE0nXG4gICAgICBdLFxuICAgICAgcmVnZXhQYXR0ZXJuczogW1xuICAgICAgICAnXFxcXGIoYnV5XFxcXHMrbm93fGxpbWl0ZWRcXFxccyt0aW1lfHNwZWNpYWxcXFxccytvZmZlcilcXFxcYicsXG4gICAgICAgICdcXFxcYihkaXNjb3VudFxcXFxzK2NvZGV8cHJvbW9cXFxccytjb2RlKVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiKGpvaW5cXFxccytteVxcXFxzK3RlYW18YnVzaW5lc3NcXFxccytvcHBvcnR1bml0eSlcXFxcYicsXG4gICAgICAgICdcXFxcYih3b3JrXFxcXHMrZnJvbVxcXFxzK2hvbWV8ZWFyblxcXFxzK21vbmV5KVxcXFxiJyxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0czogWydQT1NUJywgJ0NPTU1FTlQnLCAnTUVTU0FHRSddLFxuICAgICAgdXNlclJvbGVzOiBbJ0NMSUVOVCcsICdUUkFJTkVSJ10sXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQVUJMSUMnXSxcbiAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5CTE9DS0VELFxuICAgICAgYXV0b0Jsb2NrOiB0cnVlLFxuICAgICAgcmVxdWlyZUh1bWFuUmV2aWV3OiBmYWxzZSxcbiAgICAgIGNyZWF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgIH0sXG4gIFxuICAgIEJPRFlfU0hBTUlORzoge1xuICAgICAgaWQ6ICdib2R5LXNoYW1pbmcnLFxuICAgICAgbmFtZTogJ0JvZHkgU2hhbWluZycsXG4gICAgICBkZXNjcmlwdGlvbjogJ05lZ2F0aXZlIGNvbW1lbnRzIGFib3V0IGJvZHkgc2l6ZSwgc2hhcGUsIG9yIGFwcGVhcmFuY2UnLFxuICAgICAgY2F0ZWdvcnk6IFZpb2xhdGlvblR5cGUuSEFSQVNTTUVOVCxcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzZXZlcml0eTogNCxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgICd0b28gZmF0JyxcbiAgICAgICAgJ3RvbyBza2lubnknLFxuICAgICAgICAnZ3Jvc3MnLFxuICAgICAgICAnZGlzZ3VzdGluZycsXG4gICAgICAgICd1Z2x5JyxcbiAgICAgICAgJ3BhdGhldGljJyxcbiAgICAgICAgJ3dlYWsnLFxuICAgICAgICAnbGF6eScsXG4gICAgICAgICdubyBleGN1c2UnLFxuICAgICAgICAnanVzdCBlYXQgbGVzcycsXG4gICAgICAgICd0cnkgaGFyZGVyJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAnZmF0JywgJ3NraW5ueScsICdncm9zcycsICdkaXNndXN0aW5nJywgJ3VnbHknLCAncGF0aGV0aWMnLCBcbiAgICAgICAgJ3dlYWsnLCAnbGF6eScsICdleGN1c2UnLCAnZWF0JywgJ2xlc3MnLCAnaGFyZGVyJ1xuICAgICAgXSxcbiAgICAgIHJlZ2V4UGF0dGVybnM6IFtcbiAgICAgICAgJ1xcXFxiKHRvb1xcXFxzKyhmYXR8c2tpbm55fHdlYWspfGdyb3NzfGRpc2d1c3Rpbmd8dWdseSlcXFxcYicsXG4gICAgICAgICdcXFxcYihqdXN0XFxcXHMrKGVhdFxcXFxzK2xlc3N8dHJ5XFxcXHMraGFyZGVyKXxub1xcXFxzK2V4Y3VzZSlcXFxcYicsXG4gICAgICAgICdcXFxcYihsYXp5fHBhdGhldGljfHdlYWspXFxcXHMrKHBlcnNvbnxwZW9wbGUpXFxcXGInLFxuICAgICAgXSxcbiAgICAgIGNvbnRleHRzOiBbJ1BPU1QnLCAnQ09NTUVOVCcsICdNRVNTQUdFJ10sXG4gICAgICB1c2VyUm9sZXM6IFsnQ0xJRU5UJywgJ1RSQUlORVInXSxcbiAgICAgIGNvbW11bml0eVR5cGVzOiBbJ1BVQkxJQycsICdQUklWQVRFJ10sXG4gICAgICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24uQkxPQ0tFRCxcbiAgICAgIGF1dG9CbG9jazogdHJ1ZSxcbiAgICAgIHJlcXVpcmVIdW1hblJldmlldzogdHJ1ZSxcbiAgICAgIGNyZWF0ZWRCeTogJ3N5c3RlbScsXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBsYXN0TW9kaWZpZWQ6IG5ldyBEYXRlKCksXG4gICAgICB1c2FnZUNvdW50OiAwLFxuICAgIH0sXG4gIFxuICAgIE5VVFJJVElPTl9NSVNJTkZPUk1BVElPTjoge1xuICAgICAgaWQ6ICdudXRyaXRpb24tbWlzaW5mbycsXG4gICAgICBuYW1lOiAnTnV0cml0aW9uIE1pc2luZm9ybWF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRmFsc2Ugb3IgZGFuZ2Vyb3VzIG51dHJpdGlvbmFsIGFkdmljZScsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5PRkZfVE9QSUMsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgc2V2ZXJpdHk6IDMsXG4gICAgICBjb25maWRlbmNlOiAwLjYsXG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAnZGV0b3ggdGVhJyxcbiAgICAgICAgJ2NsZWFuc2UnLFxuICAgICAgICAnbWFnaWMgcGlsbCcsXG4gICAgICAgICdsb3NlIHdlaWdodCBmYXN0JyxcbiAgICAgICAgJ2J1cm4gZmF0IGluc3RhbnRseScsXG4gICAgICAgICdubyBleGVyY2lzZSBuZWVkZWQnLFxuICAgICAgICAnZWF0IHdoYXRldmVyIHlvdSB3YW50JyxcbiAgICAgICAgJ21pcmFjbGUgY3VyZScsXG4gICAgICBdLFxuICAgICAga2V5d29yZHM6IFtcbiAgICAgICAgJ2RldG94JywgJ2NsZWFuc2UnLCAnbWFnaWMnLCAncGlsbCcsICdmYXN0JywgJ2luc3RhbnQnLCBcbiAgICAgICAgJ21pcmFjbGUnLCAnY3VyZScsICdzZWNyZXQnLCAndHJpY2snXG4gICAgICBdLFxuICAgICAgcmVnZXhQYXR0ZXJuczogW1xuICAgICAgICAnXFxcXGIoZGV0b3h8Y2xlYW5zZXxtYWdpY1xcXFxzK3BpbGwpXFxcXGInLFxuICAgICAgICAnXFxcXGIobG9zZVxcXFxzK3dlaWdodFxcXFxzK2Zhc3R8YnVyblxcXFxzK2ZhdFxcXFxzK2luc3RhbnRseSlcXFxcYicsXG4gICAgICAgICdcXFxcYihub1xcXFxzK2V4ZXJjaXNlXFxcXHMrbmVlZGVkfGVhdFxcXFxzK3doYXRldmVyKVxcXFxiJyxcbiAgICAgICAgJ1xcXFxiKG1pcmFjbGVcXFxccytjdXJlfHNlY3JldFxcXFxzK3RyaWNrKVxcXFxiJyxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0czogWydQT1NUJywgJ0NPTU1FTlQnXSxcbiAgICAgIHVzZXJSb2xlczogWydDTElFTlQnLCAnVFJBSU5FUiddLFxuICAgICAgY29tbXVuaXR5VHlwZXM6IFsnUFVCTElDJ10sXG4gICAgICBhY3Rpb246IE1vZGVyYXRpb25BY3Rpb24uRkxBR0dFRCxcbiAgICAgIGF1dG9CbG9jazogZmFsc2UsXG4gICAgICByZXF1aXJlSHVtYW5SZXZpZXc6IHRydWUsXG4gICAgICBjcmVhdGVkQnk6ICdzeXN0ZW0nLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICB9LFxuICBcbiAgICBQUkVEQVRPUllfVFJBSU5JTkdfT0ZGRVJTOiB7XG4gICAgICBpZDogJ3ByZWRhdG9yeS1vZmZlcnMnLFxuICAgICAgbmFtZTogJ1ByZWRhdG9yeSBUcmFpbmluZyBPZmZlcnMnLFxuICAgICAgZGVzY3JpcHRpb246ICdFeHBsb2l0YXRpdmUgb3IgbWFuaXB1bGF0aXZlIGJ1c2luZXNzIHByYWN0aWNlcycsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5IQVJBU1NNRU5ULFxuICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgIHNldmVyaXR5OiA0LFxuICAgICAgY29uZmlkZW5jZTogMC44LFxuICAgICAgcGF0dGVybnM6IFtcbiAgICAgICAgJ3BheSB1cGZyb250JyxcbiAgICAgICAgJ25vIHJlZnVuZHMnLFxuICAgICAgICAnbXVzdCBkZWNpZGUgbm93JyxcbiAgICAgICAgJ3ByZXNzdXJlJyxcbiAgICAgICAgJ2d1aWx0JyxcbiAgICAgICAgJ3NoYW1lJyxcbiAgICAgICAgJ2ZhaWx1cmUnLFxuICAgICAgICAnb25seSB3YXknLFxuICAgICAgICAnZ3VhcmFudGVlZCByZXN1bHRzJyxcbiAgICAgIF0sXG4gICAgICBrZXl3b3JkczogW1xuICAgICAgICAndXBmcm9udCcsICdyZWZ1bmRzJywgJ2RlY2lkZScsICdub3cnLCAncHJlc3N1cmUnLCAnZ3VpbHQnLCBcbiAgICAgICAgJ3NoYW1lJywgJ2ZhaWx1cmUnLCAnb25seScsICd3YXknLCAnZ3VhcmFudGVlZCdcbiAgICAgIF0sXG4gICAgICByZWdleFBhdHRlcm5zOiBbXG4gICAgICAgICdcXFxcYihwYXlcXFxccyt1cGZyb250fG5vXFxcXHMrcmVmdW5kcylcXFxcYicsXG4gICAgICAgICdcXFxcYihtdXN0XFxcXHMrZGVjaWRlXFxcXHMrbm93fGxpbWl0ZWRcXFxccytzcG90cylcXFxcYicsXG4gICAgICAgICdcXFxcYihndWFyYW50ZWVkXFxcXHMrcmVzdWx0c3xvbmx5XFxcXHMrd2F5KVxcXFxiJyxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0czogWydNRVNTQUdFJywgJ1BPU1QnXSxcbiAgICAgIHVzZXJSb2xlczogWydUUkFJTkVSJ10sXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQUklWQVRFJywgJ1BVQkxJQyddLFxuICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkZMQUdHRUQsXG4gICAgICBhdXRvQmxvY2s6IGZhbHNlLFxuICAgICAgcmVxdWlyZUh1bWFuUmV2aWV3OiB0cnVlLFxuICAgICAgY3JlYXRlZEJ5OiAnc3lzdGVtJyxcbiAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSxcbiAgICAgIHVzYWdlQ291bnQ6IDAsXG4gICAgfSxcbiAgXG4gICAgT0ZGX1RPUElDX0NPTlRFTlQ6IHtcbiAgICAgIGlkOiAnb2ZmLXRvcGljJyxcbiAgICAgIG5hbWU6ICdPZmYtVG9waWMgQ29udGVudCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvbnRlbnQgbm90IHJlbGF0ZWQgdG8gZml0bmVzcywgaGVhbHRoLCBvciB3ZWxsbmVzcycsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5PRkZfVE9QSUMsXG4gICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgc2V2ZXJpdHk6IDIsXG4gICAgICBjb25maWRlbmNlOiAwLjUsXG4gICAgICBwYXR0ZXJuczogW1xuICAgICAgICAncG9saXRpY3MnLFxuICAgICAgICAncmVsaWdpb24nLFxuICAgICAgICAnY3J5cHRvY3VycmVuY3knLFxuICAgICAgICAnc3RvY2sgbWFya2V0JyxcbiAgICAgICAgJ3JlYWwgZXN0YXRlJyxcbiAgICAgICAgJ2RhdGluZycsXG4gICAgICAgICdyZWxhdGlvbnNoaXAnLFxuICAgICAgICAnY2VsZWJyaXR5IGdvc3NpcCcsXG4gICAgICBdLFxuICAgICAga2V5d29yZHM6IFtcbiAgICAgICAgJ3BvbGl0aWNzJywgJ3BvbGl0aWNhbCcsICdyZWxpZ2lvbicsICdyZWxpZ2lvdXMnLCAnY3J5cHRvJywgXG4gICAgICAgICdiaXRjb2luJywgJ3N0b2NrcycsICdpbnZlc3RtZW50JywgJ3JlYWwnLCAnZXN0YXRlJywgJ2RhdGluZycsIFxuICAgICAgICAncmVsYXRpb25zaGlwJywgJ2NlbGVicml0eScsICdnb3NzaXAnXG4gICAgICBdLFxuICAgICAgcmVnZXhQYXR0ZXJuczogW1xuICAgICAgICAnXFxcXGIocG9saXRpY3N8cG9saXRpY2FsfHJlbGlnaW9ufHJlbGlnaW91cylcXFxcYicsXG4gICAgICAgICdcXFxcYihjcnlwdG98Yml0Y29pbnxzdG9ja1xcXFxzK21hcmtldClcXFxcYicsXG4gICAgICAgICdcXFxcYihyZWFsXFxcXHMrZXN0YXRlfGRhdGluZ3xyZWxhdGlvbnNoaXApXFxcXGInLFxuICAgICAgXSxcbiAgICAgIGNvbnRleHRzOiBbJ1BPU1QnLCAnQ09NTUVOVCddLFxuICAgICAgdXNlclJvbGVzOiBbJ0NMSUVOVCcsICdUUkFJTkVSJ10sXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQVUJMSUMnXSxcbiAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5GTEFHR0VELFxuICAgICAgYXV0b0Jsb2NrOiBmYWxzZSxcbiAgICAgIHJlcXVpcmVIdW1hblJldmlldzogZmFsc2UsXG4gICAgICBjcmVhdGVkQnk6ICdzeXN0ZW0nLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICB9LFxuICBcbiAgICBQUklWQUNZX0lOVkFTSU9OOiB7XG4gICAgICBpZDogJ3ByaXZhY3ktaW52YXNpb24nLFxuICAgICAgbmFtZTogJ1ByaXZhY3kgSW52YXNpb24nLFxuICAgICAgZGVzY3JpcHRpb246ICdTaGFyaW5nIHBlcnNvbmFsIGluZm9ybWF0aW9uIHdpdGhvdXQgY29uc2VudCcsXG4gICAgICBjYXRlZ29yeTogVmlvbGF0aW9uVHlwZS5QUklWQUNZX1ZJT0xBVElPTixcbiAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICBzZXZlcml0eTogNSxcbiAgICAgIGNvbmZpZGVuY2U6IDAuOSxcbiAgICAgIHBhdHRlcm5zOiBbXG4gICAgICAgICdyZWFsIG5hbWUgaXMnLFxuICAgICAgICAnYWRkcmVzcyBpcycsXG4gICAgICAgICdwaG9uZSBudW1iZXInLFxuICAgICAgICAnd29ya3MgYXQnLFxuICAgICAgICAnbGl2ZXMgaW4nLFxuICAgICAgICAnZ29lcyB0byBneW0nLFxuICAgICAgXSxcbiAgICAgIGtleXdvcmRzOiBbXG4gICAgICAgICduYW1lJywgJ2FkZHJlc3MnLCAncGhvbmUnLCAnbnVtYmVyJywgJ3dvcmtzJywgJ2xpdmVzJywgXG4gICAgICAgICdneW0nLCAnbG9jYXRpb24nLCAncGVyc29uYWwnLCAncHJpdmF0ZSdcbiAgICAgIF0sXG4gICAgICByZWdleFBhdHRlcm5zOiBbXG4gICAgICAgICdcXFxcYihyZWFsXFxcXHMrbmFtZXxmdWxsXFxcXHMrbmFtZSlcXFxccytpc1xcXFxiJyxcbiAgICAgICAgJ1xcXFxiKGFkZHJlc3N8cGhvbmVcXFxccytudW1iZXIpXFxcXHMraXNcXFxcYicsXG4gICAgICAgICdcXFxcYih3b3Jrc1xcXFxzK2F0fGxpdmVzXFxcXHMraW58Z29lc1xcXFxzK3RvKVxcXFxiJyxcbiAgICAgIF0sXG4gICAgICBjb250ZXh0czogWydQT1NUJywgJ0NPTU1FTlQnLCAnTUVTU0FHRSddLFxuICAgICAgdXNlclJvbGVzOiBbJ0NMSUVOVCcsICdUUkFJTkVSJ10sXG4gICAgICBjb21tdW5pdHlUeXBlczogWydQVUJMSUMnLCAnUFJJVkFURSddLFxuICAgICAgYWN0aW9uOiBNb2RlcmF0aW9uQWN0aW9uLkJMT0NLRUQsXG4gICAgICBhdXRvQmxvY2s6IHRydWUsXG4gICAgICByZXF1aXJlSHVtYW5SZXZpZXc6IHRydWUsXG4gICAgICBjcmVhdGVkQnk6ICdzeXN0ZW0nLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgbGFzdE1vZGlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgdXNhZ2VDb3VudDogMCxcbiAgICB9LFxuICB9O1xuICBcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBSVUxFIEFQUExJQ0FUSU9OIEVOR0lORVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAvKipcbiAgICogQXBwbHkgY3VzdG9tIGZpdG5lc3Mtc3BlY2lmaWMgbW9kZXJhdGlvbiBydWxlc1xuICAgKi9cbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFwcGx5Q3VzdG9tUnVsZXMoXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIGNvbnRleHQ6IE1vZGVyYXRpb25Db250ZXh0XG4gICk6IFByb21pc2U8TW9kZXJhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IHZpb2xhdGlvbnM6IEFycmF5PHtcbiAgICAgIHJ1bGU6IEN1c3RvbU1vZGVyYXRpb25SdWxlO1xuICAgICAgbWF0Y2hlczogc3RyaW5nW107XG4gICAgICBjb25maWRlbmNlOiBudW1iZXI7XG4gICAgfT4gPSBbXTtcbiAgXG4gICAgLy8gQ2hlY2sgZWFjaCBydWxlIGFnYWluc3QgdGhlIGNvbnRlbnRcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgT2JqZWN0LnZhbHVlcyhGSVRORVNTX1ZJT0xBVElPTl9QQVRURVJOUykpIHtcbiAgICAgIGlmICghcnVsZS5lbmFibGVkKSBjb250aW51ZTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgcnVsZSBhcHBsaWVzIHRvIHRoaXMgY29udGV4dFxuICAgICAgaWYgKCFpc1J1bGVBcHBsaWNhYmxlKHJ1bGUsIGNvbnRleHQpKSBjb250aW51ZTtcbiAgICAgIFxuICAgICAgY29uc3QgbWF0Y2hlcyA9IGZpbmRSdWxlTWF0Y2hlcyhjb250ZW50LCBydWxlKTtcbiAgICAgIFxuICAgICAgaWYgKG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB2aW9sYXRpb25zLnB1c2goe1xuICAgICAgICAgIHJ1bGUsXG4gICAgICAgICAgbWF0Y2hlcyxcbiAgICAgICAgICBjb25maWRlbmNlOiBjYWxjdWxhdGVSdWxlQ29uZmlkZW5jZShydWxlLCBtYXRjaGVzLCBjb250ZW50KSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBJZiBubyB2aW9sYXRpb25zIGZvdW5kLCBhcHByb3ZlIHRoZSBjb250ZW50XG4gICAgaWYgKHZpb2xhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gY3JlYXRlQXBwcm92ZWRSZXN1bHQoKTtcbiAgICB9XG4gIFxuICAgIC8vIEZpbmQgdGhlIG1vc3Qgc2V2ZXJlIHZpb2xhdGlvblxuICAgIGNvbnN0IHByaW1hcnlWaW9sYXRpb24gPSB2aW9sYXRpb25zLnJlZHVjZSgobWF4LCBjdXJyZW50KSA9PiBcbiAgICAgIGN1cnJlbnQucnVsZS5zZXZlcml0eSA+IG1heC5ydWxlLnNldmVyaXR5ID8gY3VycmVudCA6IG1heFxuICAgICk7XG4gIFxuICAgIC8vIENyZWF0ZSBtb2RlcmF0aW9uIHJlc3VsdCBiYXNlZCBvbiB0aGUgcHJpbWFyeSB2aW9sYXRpb25cbiAgICByZXR1cm4gY3JlYXRlQ3VzdG9tUnVsZVJlc3VsdChwcmltYXJ5VmlvbGF0aW9uLCB2aW9sYXRpb25zLCBjb250ZW50KTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcnVsZSBhcHBsaWVzIHRvIHRoZSBjdXJyZW50IGNvbnRleHRcbiAgICovXG4gIGZ1bmN0aW9uIGlzUnVsZUFwcGxpY2FibGUocnVsZTogQ3VzdG9tTW9kZXJhdGlvblJ1bGUsIGNvbnRleHQ6IE1vZGVyYXRpb25Db250ZXh0KTogYm9vbGVhbiB7XG4gICAgLy8gQ2hlY2sgY29udGVudCB0eXBlIGNvbnRleHRcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IGNvbnRleHQuaXNJblByaXZhdGVNZXNzYWdlID8gJ01FU1NBR0UnIDogJ1BPU1QnO1xuICAgIGlmICghcnVsZS5jb250ZXh0cy5pbmNsdWRlcyhjb250ZW50VHlwZSBhcyBhbnkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICBcbiAgICAvLyBDaGVjayBjb21tdW5pdHkgdHlwZVxuICAgIGlmICghcnVsZS5jb21tdW5pdHlUeXBlcy5pbmNsdWRlcyhjb250ZXh0LmNvbW11bml0eVR5cGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICBcbiAgICAvLyBGb3IgdHJhaW5lci1zcGVjaWZpYyBydWxlcywgY2hlY2sgaWYgYXV0aG9yIGlzIHRyYWluZXJcbiAgICBpZiAocnVsZS51c2VyUm9sZXMuaW5jbHVkZXMoJ1RSQUlORVInKSAmJiAhcnVsZS51c2VyUm9sZXMuaW5jbHVkZXMoJ0NMSUVOVCcpKSB7XG4gICAgICByZXR1cm4gY29udGV4dC5pc1RyYWluZXJUb0NsaWVudDtcbiAgICB9XG4gIFxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIFxuICAvKipcbiAgICogRmluZCBtYXRjaGVzIGZvciBhIHJ1bGUgaW4gY29udGVudFxuICAgKi9cbiAgZnVuY3Rpb24gZmluZFJ1bGVNYXRjaGVzKGNvbnRlbnQ6IHN0cmluZywgcnVsZTogQ3VzdG9tTW9kZXJhdGlvblJ1bGUpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF0Y2hlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBsb3dlckNvbnRlbnQgPSBjb250ZW50LnRvTG93ZXJDYXNlKCk7XG4gIFxuICAgIC8vIENoZWNrIHNpbXBsZSBwYXR0ZXJuc1xuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBydWxlLnBhdHRlcm5zKSB7XG4gICAgICBpZiAobG93ZXJDb250ZW50LmluY2x1ZGVzKHBhdHRlcm4udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgbWF0Y2hlcy5wdXNoKHBhdHRlcm4pO1xuICAgICAgfVxuICAgIH1cbiAgXG4gICAgLy8gQ2hlY2sga2V5d29yZCBjb21iaW5hdGlvbnNcbiAgICBjb25zdCBjb250ZW50V29yZHMgPSBsb3dlckNvbnRlbnQuc3BsaXQoL1xccysvKTtcbiAgICBmb3IgKGNvbnN0IGtleXdvcmQgb2YgcnVsZS5rZXl3b3Jkcykge1xuICAgICAgaWYgKGNvbnRlbnRXb3Jkcy5zb21lKHdvcmQgPT4gd29yZC5pbmNsdWRlcyhrZXl3b3JkLnRvTG93ZXJDYXNlKCkpKSkge1xuICAgICAgICBtYXRjaGVzLnB1c2goa2V5d29yZCk7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBDaGVjayByZWdleCBwYXR0ZXJuc1xuICAgIGlmIChydWxlLnJlZ2V4UGF0dGVybnMpIHtcbiAgICAgIGZvciAoY29uc3QgcmVnZXggb2YgcnVsZS5yZWdleFBhdHRlcm5zKSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4TWF0Y2hlcyA9IGNvbnRlbnQubWF0Y2gocmVnZXgpO1xuICAgICAgICBpZiAocmVnZXhNYXRjaGVzKSB7XG4gICAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLnJlZ2V4TWF0Y2hlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIHJldHVybiBbLi4ubmV3IFNldChtYXRjaGVzKV07IC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgY29uZmlkZW5jZSBzY29yZSBmb3IgcnVsZSBtYXRjaFxuICAgKi9cbiAgZnVuY3Rpb24gY2FsY3VsYXRlUnVsZUNvbmZpZGVuY2UoXG4gICAgcnVsZTogQ3VzdG9tTW9kZXJhdGlvblJ1bGUsXG4gICAgX21hdGNoZXM6IHN0cmluZ1tdLFxuICAgIF9jb250ZW50OiBzdHJpbmdcbiAgKTogbnVtYmVyIHtcbiAgICBsZXQgY29uZmlkZW5jZSA9IHJ1bGUuY29uZmlkZW5jZTtcbiAgXG4gICAgLy8gSW5jcmVhc2UgY29uZmlkZW5jZSBiYXNlZCBvbiBudW1iZXIgb2YgbWF0Y2hlc1xuICAgIGNvbnN0IG1hdGNoQm9udXMgPSBNYXRoLm1pbihfbWF0Y2hlcy5sZW5ndGggKiAwLjEsIDAuMyk7XG4gICAgY29uZmlkZW5jZSArPSBtYXRjaEJvbnVzO1xuICBcbiAgICAvLyBEZWNyZWFzZSBjb25maWRlbmNlIGZvciBsb25nZXIgY29udGVudCAobWlnaHQgYmUgZmFsc2UgcG9zaXRpdmUpXG4gICAgaWYgKF9jb250ZW50Lmxlbmd0aCA+IDUwMCkge1xuICAgICAgY29uZmlkZW5jZSAqPSAwLjk7XG4gICAgfVxuICBcbiAgICAvLyBJbmNyZWFzZSBjb25maWRlbmNlIGZvciBleGFjdCBwYXR0ZXJuIG1hdGNoZXNcbiAgICBjb25zdCBleGFjdE1hdGNoZXMgPSBfbWF0Y2hlcy5maWx0ZXIobWF0Y2ggPT4gXG4gICAgICBydWxlLnBhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBcbiAgICAgICAgbWF0Y2gudG9Mb3dlckNhc2UoKSA9PT0gcGF0dGVybi50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgKTtcbiAgICBcbiAgICBpZiAoZXhhY3RNYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbmZpZGVuY2UgKz0gMC4xO1xuICAgIH1cbiAgXG4gICAgcmV0dXJuIE1hdGgubWluKGNvbmZpZGVuY2UsIDEuMCk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDcmVhdGUgbW9kZXJhdGlvbiByZXN1bHQgZm9yIGN1c3RvbSBydWxlIHZpb2xhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tUnVsZVJlc3VsdChcbiAgICBwcmltYXJ5VmlvbGF0aW9uOiB7IHJ1bGU6IEN1c3RvbU1vZGVyYXRpb25SdWxlOyBtYXRjaGVzOiBzdHJpbmdbXTsgY29uZmlkZW5jZTogbnVtYmVyIH0sXG4gICAgYWxsVmlvbGF0aW9uczogQXJyYXk8eyBydWxlOiBDdXN0b21Nb2RlcmF0aW9uUnVsZTsgbWF0Y2hlczogc3RyaW5nW107IGNvbmZpZGVuY2U6IG51bWJlciB9PixcbiAgICBfY29udGVudDogc3RyaW5nXG4gICk6IE1vZGVyYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHsgcnVsZSwgY29uZmlkZW5jZSB9ID0gcHJpbWFyeVZpb2xhdGlvbjtcbiAgXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IGFsbFZpb2xhdGlvbnMubWFwKHYgPT4gKHtcbiAgICAgIGNhdGVnb3J5OiB2LnJ1bGUubmFtZSxcbiAgICAgIHN1YmNhdGVnb3J5OiB2LnJ1bGUuY2F0ZWdvcnksXG4gICAgICBzZXZlcml0eTogdi5ydWxlLnNldmVyaXR5LFxuICAgICAgY29uZmlkZW5jZTogdi5jb25maWRlbmNlLFxuICAgICAgZGVzY3JpcHRpb246IHYucnVsZS5kZXNjcmlwdGlvbixcbiAgICB9KSk7XG4gIFxuICAgIHJldHVybiB7XG4gICAgICBhY3Rpb246IHJ1bGUuYWN0aW9uLFxuICAgICAgZmxhZ2dlZDogcnVsZS5hY3Rpb24gIT09IE1vZGVyYXRpb25BY3Rpb24uQVBQUk9WRUQsXG4gICAgICBibG9ja2VkOiBydWxlLmFjdGlvbiA9PT0gTW9kZXJhdGlvbkFjdGlvbi5CTE9DS0VELFxuICAgICAgY29uZmlkZW5jZSxcbiAgICAgIHJlYXNvbjogYENvbnRlbnQgZmxhZ2dlZCBmb3I6ICR7cnVsZS5kZXNjcmlwdGlvbn1gLFxuICAgICAgY2F0ZWdvcmllcyxcbiAgICAgIHNvdXJjZTogTW9kZXJhdGlvblNvdXJjZS5DVVNUT01fUlVMRVMsXG4gICAgICBtb2RlcmF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHJlcXVpcmVzSHVtYW5SZXZpZXc6IHJ1bGUucmVxdWlyZUh1bWFuUmV2aWV3LFxuICAgICAgcmV2aWV3UHJpb3JpdHk6IHJ1bGUuc2V2ZXJpdHkgPj0gNCA/ICdISUdIJyA6IHJ1bGUuc2V2ZXJpdHkgPj0gMyA/ICdNRURJVU0nIDogJ0xPVycsXG4gICAgICBzdWdnZXN0ZWRBY3Rpb246IHJ1bGUuc2V2ZXJpdHkgPj0gNCA/ICdTVVNQRU5EXzNEJyA6ICdXQVJOJyxcbiAgICAgIGFwcGVhbGFibGU6IHJ1bGUuYWN0aW9uICE9PSBNb2RlcmF0aW9uQWN0aW9uLkFQUFJPVkVELFxuICAgIH07XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDcmVhdGUgYXBwcm92ZWQgcmVzdWx0IGZvciBjb250ZW50IHRoYXQgcGFzc2VzIGFsbCBydWxlc1xuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlQXBwcm92ZWRSZXN1bHQoKTogTW9kZXJhdGlvblJlc3VsdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGlvbjogTW9kZXJhdGlvbkFjdGlvbi5BUFBST1ZFRCxcbiAgICAgIGZsYWdnZWQ6IGZhbHNlLFxuICAgICAgYmxvY2tlZDogZmFsc2UsXG4gICAgICBjb25maWRlbmNlOiAwLFxuICAgICAgcmVhc29uOiAnQ29udGVudCBhcHByb3ZlZCBieSBjdXN0b20gcnVsZXMnLFxuICAgICAgY2F0ZWdvcmllczogW10sXG4gICAgICBzb3VyY2U6IE1vZGVyYXRpb25Tb3VyY2UuQ1VTVE9NX1JVTEVTLFxuICAgICAgbW9kZXJhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICByZXF1aXJlc0h1bWFuUmV2aWV3OiBmYWxzZSxcbiAgICAgIHJldmlld1ByaW9yaXR5OiAnTE9XJyxcbiAgICAgIGFwcGVhbGFibGU6IGZhbHNlLFxuICAgIH07XG4gIH1cbiAgXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gUE9TSVRJVkUgQ09OVEVOVCBERVRFQ1RJT05cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBcbiAgLyoqXG4gICAqIERldGVjdCBwb3NpdGl2ZSBmaXRuZXNzIGNvbnRlbnQgdG8gYm9vc3QgY29uZmlkZW5jZSBpbiBhcHByb3ZhbFxuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIGRldGVjdFBvc2l0aXZlRml0bmVzc0NvbnRlbnQoY29udGVudDogc3RyaW5nKToge1xuICAgIGlzRml0bmVzc1JlbGF0ZWQ6IGJvb2xlYW47XG4gICAgcG9zaXRpdmVJbmRpY2F0b3JzOiBzdHJpbmdbXTtcbiAgICBjb25maWRlbmNlQm9udXM6IG51bWJlcjtcbiAgfSB7XG4gICAgY29uc3QgcG9zaXRpdmVLZXl3b3JkcyA9IFtcbiAgICAgICd3b3Jrb3V0JywgJ2V4ZXJjaXNlJywgJ2ZpdG5lc3MnLCAndHJhaW5pbmcnLCAnaGVhbHRoJywgJ3dlbGxuZXNzJyxcbiAgICAgICdudXRyaXRpb24nLCAnZGlldCcsICdwcm90ZWluJywgJ2NhcmRpbycsICdzdHJlbmd0aCcsICdtdXNjbGUnLFxuICAgICAgJ21vdGl2YXRpb24nLCAncHJvZ3Jlc3MnLCAnZ29hbHMnLCAnYWNoaWV2ZW1lbnQnLCAnaW1wcm92ZW1lbnQnLFxuICAgICAgJ2NvYWNoJywgJ3RyYWluZXInLCAnZ3VpZGFuY2UnLCAnc3VwcG9ydCcsICdjb21tdW5pdHknLCAnam91cm5leScsXG4gICAgXTtcbiAgXG4gICAgY29uc3QgZW5jb3VyYWdpbmdQaHJhc2VzID0gW1xuICAgICAgJ2dyZWF0IGpvYicsICd3ZWxsIGRvbmUnLCAna2VlcCBnb2luZycsICd5b3UgY2FuIGRvIGl0JywgJ3Byb3VkIG9mIHlvdScsXG4gICAgICAnYW1hemluZyBwcm9ncmVzcycsICdpbnNwaXJpbmcnLCAnbW90aXZhdGVkJywgJ2hlbHBmdWwnLCAnc3VwcG9ydGl2ZScsXG4gICAgXTtcbiAgXG4gICAgY29uc3QgZm91bmRLZXl3b3JkcyA9IHBvc2l0aXZlS2V5d29yZHMuZmlsdGVyKGtleXdvcmQgPT4gXG4gICAgICBjb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZClcbiAgICApO1xuICBcbiAgICBjb25zdCBmb3VuZFBocmFzZXMgPSBlbmNvdXJhZ2luZ1BocmFzZXMuZmlsdGVyKHBocmFzZSA9PiBcbiAgICAgIGNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhwaHJhc2UpXG4gICAgKTtcbiAgXG4gICAgY29uc3QgaXNGaXRuZXNzUmVsYXRlZCA9IGZvdW5kS2V5d29yZHMubGVuZ3RoID49IDE7XG4gICAgY29uc3QgcG9zaXRpdmVJbmRpY2F0b3JzID0gWy4uLmZvdW5kS2V5d29yZHMsIC4uLmZvdW5kUGhyYXNlc107XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGNvbmZpZGVuY2UgYm9udXMgKDAtMC4zKVxuICAgIGNvbnN0IGNvbmZpZGVuY2VCb251cyA9IE1hdGgubWluKFxuICAgICAgKGZvdW5kS2V5d29yZHMubGVuZ3RoICogMC4xKSArIChmb3VuZFBocmFzZXMubGVuZ3RoICogMC4xNSksXG4gICAgICAwLjNcbiAgICApO1xuICBcbiAgICByZXR1cm4ge1xuICAgICAgaXNGaXRuZXNzUmVsYXRlZCxcbiAgICAgIHBvc2l0aXZlSW5kaWNhdG9ycyxcbiAgICAgIGNvbmZpZGVuY2VCb251cyxcbiAgICB9O1xuICB9XG4gIFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFJVTEUgTUFOQUdFTUVOVFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIFxuICAvKipcbiAgICogR2V0IGFsbCBhY3RpdmUgY3VzdG9tIHJ1bGVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlUnVsZXMoKTogQ3VzdG9tTW9kZXJhdGlvblJ1bGVbXSB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoRklUTkVTU19WSU9MQVRJT05fUEFUVEVSTlMpLmZpbHRlcihydWxlID0+IHJ1bGUuZW5hYmxlZCk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBVcGRhdGUgcnVsZSBjb25maWd1cmF0aW9uXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gdXBkYXRlUnVsZShcbiAgICBydWxlSWQ6IHN0cmluZywgXG4gICAgdXBkYXRlczogUGFydGlhbDxDdXN0b21Nb2RlcmF0aW9uUnVsZT5cbiAgKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcnVsZSA9IE9iamVjdC52YWx1ZXMoRklUTkVTU19WSU9MQVRJT05fUEFUVEVSTlMpXG4gICAgICAuZmluZChyID0+IHIuaWQgPT09IHJ1bGVJZCk7XG4gICAgXG4gICAgaWYgKCFydWxlKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgT2JqZWN0LmFzc2lnbihydWxlLCB1cGRhdGVzLCB7IGxhc3RNb2RpZmllZDogbmV3IERhdGUoKSB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdldCBydWxlIHN0YXRpc3RpY3NcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBnZXRSdWxlU3RhdHMoKTogUmVjb3JkPHN0cmluZywgeyBcbiAgICB1c2FnZUNvdW50OiBudW1iZXI7IFxuICAgIHNldmVyaXR5OiBudW1iZXI7IFxuICAgIGVuYWJsZWQ6IGJvb2xlYW47IFxuICB9PiB7XG4gICAgY29uc3Qgc3RhdHM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBcbiAgICBPYmplY3QuZW50cmllcyhGSVRORVNTX1ZJT0xBVElPTl9QQVRURVJOUykuZm9yRWFjaCgoW2tleSwgcnVsZV0pID0+IHtcbiAgICAgIHN0YXRzW2tleV0gPSB7XG4gICAgICAgIHVzYWdlQ291bnQ6IHJ1bGUudXNhZ2VDb3VudCxcbiAgICAgICAgc2V2ZXJpdHk6IHJ1bGUuc2V2ZXJpdHksXG4gICAgICAgIGVuYWJsZWQ6IHJ1bGUuZW5hYmxlZCxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9XG4gIFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFWFBPUlQgVVRJTElUSUVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB7XG4gIEZJVE5FU1NfVklPTEFUSU9OX1BBVFRFUk5TLFxufTtcblxuZXhwb3J0IHR5cGUgeyBGaXRuZXNzVmlvbGF0aW9uVHlwZSwgQ3VzdG9tTW9kZXJhdGlvblJ1bGUgfTsiXSwibmFtZXMiOlsiTW9kZXJhdGlvbkFjdGlvbiIsIk1vZGVyYXRpb25Tb3VyY2UiLCJWaW9sYXRpb25UeXBlIiwiRklUTkVTU19WSU9MQVRJT05fUEFUVEVSTlMiLCJJTkFQUFJPUFJJQVRFX1BFUlNPTkFMX0NPTU1FTlRTIiwiaWQiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsIklOQVBQUk9QUklBVEVfQ09OVEVOVCIsImVuYWJsZWQiLCJzZXZlcml0eSIsImNvbmZpZGVuY2UiLCJwYXR0ZXJucyIsImtleXdvcmRzIiwicmVnZXhQYXR0ZXJucyIsImNvbnRleHRzIiwidXNlclJvbGVzIiwiY29tbXVuaXR5VHlwZXMiLCJhY3Rpb24iLCJGTEFHR0VEIiwiYXV0b0Jsb2NrIiwicmVxdWlyZUh1bWFuUmV2aWV3IiwiY3JlYXRlZEJ5IiwiY3JlYXRlZEF0IiwiRGF0ZSIsImxhc3RNb2RpZmllZCIsInVzYWdlQ291bnQiLCJVTlNPTElDSVRFRF9QRVJTT05BTF9BVFRFTlRJT04iLCJIQVJBU1NNRU5UIiwiQkxPQ0tFRCIsIkZBS0VfVFJBSU5FUl9DUkVERU5USUFMUyIsIklNUEVSU09OQVRJT04iLCJVTlNBRkVfRVhFUkNJU0VfQURWSUNFIiwiT0ZGX1RPUElDIiwiU1VQUExFTUVOVF9TUEFNIiwiU1BBTSIsIkJPRFlfU0hBTUlORyIsIk5VVFJJVElPTl9NSVNJTkZPUk1BVElPTiIsIlBSRURBVE9SWV9UUkFJTklOR19PRkZFUlMiLCJPRkZfVE9QSUNfQ09OVEVOVCIsIlBSSVZBQ1lfSU5WQVNJT04iLCJQUklWQUNZX1ZJT0xBVElPTiIsImFwcGx5Q3VzdG9tUnVsZXMiLCJjb250ZW50IiwiY29udGV4dCIsInZpb2xhdGlvbnMiLCJydWxlIiwiT2JqZWN0IiwidmFsdWVzIiwiaXNSdWxlQXBwbGljYWJsZSIsIm1hdGNoZXMiLCJmaW5kUnVsZU1hdGNoZXMiLCJsZW5ndGgiLCJwdXNoIiwiY2FsY3VsYXRlUnVsZUNvbmZpZGVuY2UiLCJjcmVhdGVBcHByb3ZlZFJlc3VsdCIsInByaW1hcnlWaW9sYXRpb24iLCJyZWR1Y2UiLCJtYXgiLCJjdXJyZW50IiwiY3JlYXRlQ3VzdG9tUnVsZVJlc3VsdCIsImNvbnRlbnRUeXBlIiwiaXNJblByaXZhdGVNZXNzYWdlIiwiaW5jbHVkZXMiLCJjb21tdW5pdHlUeXBlIiwiaXNUcmFpbmVyVG9DbGllbnQiLCJsb3dlckNvbnRlbnQiLCJ0b0xvd2VyQ2FzZSIsInBhdHRlcm4iLCJjb250ZW50V29yZHMiLCJzcGxpdCIsImtleXdvcmQiLCJzb21lIiwid29yZCIsInJlZ2V4IiwicmVnZXhNYXRjaGVzIiwibWF0Y2giLCJTZXQiLCJfbWF0Y2hlcyIsIl9jb250ZW50IiwibWF0Y2hCb251cyIsIk1hdGgiLCJtaW4iLCJleGFjdE1hdGNoZXMiLCJmaWx0ZXIiLCJhbGxWaW9sYXRpb25zIiwiY2F0ZWdvcmllcyIsIm1hcCIsInYiLCJzdWJjYXRlZ29yeSIsImZsYWdnZWQiLCJBUFBST1ZFRCIsImJsb2NrZWQiLCJyZWFzb24iLCJzb3VyY2UiLCJDVVNUT01fUlVMRVMiLCJtb2RlcmF0ZWRBdCIsInJlcXVpcmVzSHVtYW5SZXZpZXciLCJyZXZpZXdQcmlvcml0eSIsInN1Z2dlc3RlZEFjdGlvbiIsImFwcGVhbGFibGUiLCJkZXRlY3RQb3NpdGl2ZUZpdG5lc3NDb250ZW50IiwicG9zaXRpdmVLZXl3b3JkcyIsImVuY291cmFnaW5nUGhyYXNlcyIsImZvdW5kS2V5d29yZHMiLCJmb3VuZFBocmFzZXMiLCJwaHJhc2UiLCJpc0ZpdG5lc3NSZWxhdGVkIiwicG9zaXRpdmVJbmRpY2F0b3JzIiwiY29uZmlkZW5jZUJvbnVzIiwiZ2V0QWN0aXZlUnVsZXMiLCJ1cGRhdGVSdWxlIiwicnVsZUlkIiwidXBkYXRlcyIsImZpbmQiLCJyIiwiYXNzaWduIiwiZ2V0UnVsZVN0YXRzIiwic3RhdHMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/moderation/rules.ts\n");

/***/ }),

/***/ "(rsc)/./src/types/workout.ts":
/*!******************************!*\
  !*** ./src/types/workout.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EXERCISE_CATEGORIES: () => (/* binding */ EXERCISE_CATEGORIES),\n/* harmony export */   MUSCLE_GROUPS: () => (/* binding */ MUSCLE_GROUPS),\n/* harmony export */   SET_TYPE_CONFIGS: () => (/* binding */ SET_TYPE_CONFIGS),\n/* harmony export */   calculateAverageWeight: () => (/* binding */ calculateAverageWeight),\n/* harmony export */   calculateTrainingVolume: () => (/* binding */ calculateTrainingVolume),\n/* harmony export */   convertKgToLb: () => (/* binding */ convertKgToLb),\n/* harmony export */   convertLbToKg: () => (/* binding */ convertLbToKg),\n/* harmony export */   formatDuration: () => (/* binding */ formatDuration),\n/* harmony export */   generateOrder: () => (/* binding */ generateOrder),\n/* harmony export */   isExercise: () => (/* binding */ isExercise),\n/* harmony export */   isWorkoutLogEntry: () => (/* binding */ isWorkoutLogEntry),\n/* harmony export */   isWorkoutSession: () => (/* binding */ isWorkoutSession),\n/* harmony export */   parseDuration: () => (/* binding */ parseDuration),\n/* harmony export */   parseWeightString: () => (/* binding */ parseWeightString)\n/* harmony export */ });\n/**\n * Workout Log Type Definitions for Massimino\n * Comprehensive type system for workout tracking and management\n */ // ============================================================================\n// ENUMS\n// ============================================================================\n// ============================================================================\n// CONSTANTS\n// ============================================================================\n/**\n * Set type configurations\n */ const SET_TYPE_CONFIGS = {\n    STRAIGHT: {\n        type: 'STRAIGHT',\n        label: 'Straight Sets',\n        description: 'Regular sets with consistent weight',\n        orderPattern: 'numeric',\n        weightHandling: 'single'\n    },\n    SUPERSET: {\n        type: 'SUPERSET',\n        label: 'Superset',\n        description: 'Two exercises performed back-to-back',\n        orderPattern: 'grouped',\n        maxGroupSize: 2,\n        weightHandling: 'single'\n    },\n    TRISET: {\n        type: 'TRISET',\n        label: 'Triset',\n        description: 'Three exercises performed back-to-back',\n        orderPattern: 'grouped',\n        maxGroupSize: 3,\n        weightHandling: 'single'\n    },\n    GIANT_SET: {\n        type: 'GIANT_SET',\n        label: 'Giant Set',\n        description: 'Four or more exercises performed back-to-back',\n        orderPattern: 'grouped',\n        maxGroupSize: 4,\n        weightHandling: 'single'\n    },\n    PYRAMID: {\n        type: 'PYRAMID',\n        label: 'Pyramid',\n        description: 'Increasing weight with each set',\n        orderPattern: 'numeric',\n        weightHandling: 'progressive'\n    },\n    REVERSE_PYRAMID: {\n        type: 'REVERSE_PYRAMID',\n        label: 'Reverse Pyramid',\n        description: 'Decreasing weight with each set',\n        orderPattern: 'numeric',\n        weightHandling: 'progressive'\n    },\n    DROP_SET: {\n        type: 'DROP_SET',\n        label: 'Drop Set',\n        description: 'Decreasing weight within the same set',\n        orderPattern: 'numeric',\n        weightHandling: 'multiple'\n    },\n    REST_PAUSE: {\n        type: 'REST_PAUSE',\n        label: 'Rest-Pause',\n        description: 'Short rest periods within a set',\n        orderPattern: 'numeric',\n        weightHandling: 'single'\n    },\n    CLUSTER: {\n        type: 'CLUSTER',\n        label: 'Cluster',\n        description: 'Short rest periods between reps',\n        orderPattern: 'numeric',\n        weightHandling: 'single'\n    },\n    EMOM: {\n        type: 'EMOM',\n        label: 'EMOM',\n        description: 'Every Minute on the Minute',\n        orderPattern: 'numeric',\n        weightHandling: 'single'\n    },\n    AMRAP: {\n        type: 'AMRAP',\n        label: 'AMRAP',\n        description: 'As Many Rounds As Possible',\n        orderPattern: 'numeric',\n        weightHandling: 'single'\n    }\n};\n/**\n * Exercise categories\n */ const EXERCISE_CATEGORIES = [\n    {\n        name: 'Compound',\n        description: 'Multi-joint movements that work multiple muscle groups',\n        muscleGroups: [\n            'chest',\n            'back',\n            'shoulders',\n            'legs'\n        ],\n        equipment: [\n            'barbell',\n            'dumbbell',\n            'kettlebell'\n        ],\n        difficulty: 'INTERMEDIATE'\n    },\n    {\n        name: 'Isolation',\n        description: 'Single-joint movements that target specific muscles',\n        muscleGroups: [\n            'biceps',\n            'triceps',\n            'calves',\n            'abs'\n        ],\n        equipment: [\n            'dumbbell',\n            'cable',\n            'machine'\n        ],\n        difficulty: 'BEGINNER'\n    },\n    {\n        name: 'Cardio',\n        description: 'Cardiovascular exercises for endurance and conditioning',\n        muscleGroups: [\n            'heart',\n            'lungs'\n        ],\n        equipment: [\n            'treadmill',\n            'bike',\n            'rower',\n            'elliptical'\n        ],\n        difficulty: 'BEGINNER'\n    },\n    {\n        name: 'Mobility',\n        description: 'Flexibility and mobility exercises',\n        muscleGroups: [\n            'joints',\n            'connective tissue'\n        ],\n        equipment: [\n            'bodyweight',\n            'foam_roller',\n            'band'\n        ],\n        difficulty: 'BEGINNER'\n    }\n];\n/**\n * Muscle groups\n */ const MUSCLE_GROUPS = [\n    {\n        name: 'Chest',\n        description: 'Pectoralis major and minor',\n        primaryExercises: [\n            'bench_press',\n            'push_ups',\n            'dumbbell_press'\n        ],\n        secondaryExercises: [\n            'dips',\n            'flyes',\n            'cable_crossovers'\n        ]\n    },\n    {\n        name: 'Back',\n        description: 'Latissimus dorsi, rhomboids, trapezius',\n        primaryExercises: [\n            'pull_ups',\n            'rows',\n            'deadlift'\n        ],\n        secondaryExercises: [\n            'lat_pulldowns',\n            'face_pulls',\n            'shrugs'\n        ]\n    },\n    {\n        name: 'Shoulders',\n        description: 'Deltoids (anterior, lateral, posterior)',\n        primaryExercises: [\n            'overhead_press',\n            'lateral_raises',\n            'rear_delt_flyes'\n        ],\n        secondaryExercises: [\n            'arnold_press',\n            'upright_rows',\n            'face_pulls'\n        ]\n    },\n    {\n        name: 'Arms',\n        description: 'Biceps and triceps',\n        primaryExercises: [\n            'bicep_curls',\n            'tricep_dips',\n            'hammer_curls'\n        ],\n        secondaryExercises: [\n            'preacher_curls',\n            'skull_crushers',\n            'concentration_curls'\n        ]\n    },\n    {\n        name: 'Legs',\n        description: 'Quadriceps, hamstrings, glutes, calves',\n        primaryExercises: [\n            'squats',\n            'deadlifts',\n            'lunges'\n        ],\n        secondaryExercises: [\n            'leg_press',\n            'leg_curls',\n            'calf_raises'\n        ]\n    },\n    {\n        name: 'Core',\n        description: 'Abdominals, obliques, lower back',\n        primaryExercises: [\n            'planks',\n            'crunches',\n            'dead_bugs'\n        ],\n        secondaryExercises: [\n            'russian_twists',\n            'leg_raises',\n            'mountain_climbers'\n        ]\n    }\n];\n// ============================================================================\n// TYPE GUARDS\n// ============================================================================\n/**\n * Type guard for workout log entry\n */ const isWorkoutLogEntry = (obj)=>{\n    return obj && typeof obj.id === 'string' && typeof obj.userId === 'string' && obj.date instanceof Date && typeof obj.exerciseId === 'string' && typeof obj.order === 'string' && typeof obj.setNumber === 'number' && typeof obj.reps === 'number' && typeof obj.weight === 'string' && typeof obj.unit === 'string';\n};\n/**\n * Type guard for exercise\n */ const isExercise = (obj)=>{\n    return obj && typeof obj.id === 'string' && typeof obj.name === 'string' && typeof obj.category === 'string' && Array.isArray(obj.muscleGroups) && Array.isArray(obj.equipment);\n};\n/**\n * Type guard for workout session\n */ const isWorkoutSession = (obj)=>{\n    return obj && typeof obj.id === 'string' && typeof obj.userId === 'string' && obj.date instanceof Date && obj.startTime instanceof Date;\n};\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n/**\n * Convert weight from lb to kg\n */ const convertLbToKg = (weight)=>{\n    return weight * 0.453592;\n};\n/**\n * Convert weight from kg to lb\n */ const convertKgToLb = (weight)=>{\n    return weight / 0.453592;\n};\n/**\n * Parse weight string to numbers\n */ const parseWeightString = (weight)=>{\n    return weight.split(',').map((w)=>w.trim()).filter((w)=>w.length > 0).map((w)=>parseFloat(w)).filter((w)=>!isNaN(w));\n};\n/**\n * Calculate average weight from weight string\n */ const calculateAverageWeight = (weight)=>{\n    const weights = parseWeightString(weight);\n    if (weights.length === 0) return 0;\n    return weights.reduce((sum, w)=>sum + w, 0) / weights.length;\n};\n/**\n * Calculate training volume\n */ const calculateTrainingVolume = (sets, reps, averageWeight, unit)=>{\n    const weightKg = unit === 'LB' ? convertLbToKg(averageWeight) : averageWeight;\n    return sets * reps * weightKg;\n};\n/**\n * Generate order string based on set type and context\n */ const generateOrder = (setType, context)=>{\n    const config = SET_TYPE_CONFIGS[setType];\n    if (config && config.orderPattern === 'numeric') {\n        return context.currentGroupNumber.toString();\n    } else {\n        // Grouped pattern (A, B, C, etc.)\n        return `${context.currentGroupNumber}${context.currentSubOrder}`;\n    }\n};\n/**\n * Format duration string\n */ const formatDuration = (seconds)=>{\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const secs = seconds % 60;\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n};\n/**\n * Parse duration string\n */ const parseDuration = (duration)=>{\n    const parts = duration.split(':').map(Number);\n    if (parts.length === 3) {\n        return (parts[0] || 0) * 3600 + (parts[1] || 0) * 60 + (parts[2] || 0);\n    }\n    return 0;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdHlwZXMvd29ya291dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOzs7Q0FHQyxHQUVELCtFQUErRTtBQUMvRSxRQUFRO0FBQ1IsK0VBQStFO0FBb1cvRSwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLCtFQUErRTtBQUUvRTs7Q0FFQyxHQUNNLE1BQU1BLG1CQUFtRDtJQUM5REMsVUFBVTtRQUNSQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RDLGdCQUFnQjtJQUNsQjtJQUNBQyxVQUFVO1FBQ1JMLE1BQU07UUFDTkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLGNBQWM7UUFDZEcsY0FBYztRQUNkRixnQkFBZ0I7SUFDbEI7SUFDQUcsUUFBUTtRQUNOUCxNQUFNO1FBQ05DLE9BQU87UUFDUEMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RHLGNBQWM7UUFDZEYsZ0JBQWdCO0lBQ2xCO0lBQ0FJLFdBQVc7UUFDVFIsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsY0FBYztRQUNkRyxjQUFjO1FBQ2RGLGdCQUFnQjtJQUNsQjtJQUNBSyxTQUFTO1FBQ1BULE1BQU07UUFDTkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLGNBQWM7UUFDZEMsZ0JBQWdCO0lBQ2xCO0lBQ0FNLGlCQUFpQjtRQUNmVixNQUFNO1FBQ05DLE9BQU87UUFDUEMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RDLGdCQUFnQjtJQUNsQjtJQUNBTyxVQUFVO1FBQ1JYLE1BQU07UUFDTkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLGNBQWM7UUFDZEMsZ0JBQWdCO0lBQ2xCO0lBQ0FRLFlBQVk7UUFDVlosTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsY0FBYztRQUNkQyxnQkFBZ0I7SUFDbEI7SUFDQVMsU0FBUztRQUNQYixNQUFNO1FBQ05DLE9BQU87UUFDUEMsYUFBYTtRQUNiQyxjQUFjO1FBQ2RDLGdCQUFnQjtJQUNsQjtJQUNBVSxNQUFNO1FBQ0pkLE1BQU07UUFDTkMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLGNBQWM7UUFDZEMsZ0JBQWdCO0lBQ2xCO0lBQ0FXLE9BQU87UUFDTGYsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLGFBQWE7UUFDYkMsY0FBYztRQUNkQyxnQkFBZ0I7SUFDbEI7QUFDRixFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNWSxzQkFBMEM7SUFDckQ7UUFDRUMsTUFBTTtRQUNOZixhQUFhO1FBQ2JnQixjQUFjO1lBQUM7WUFBUztZQUFRO1lBQWE7U0FBTztRQUNwREMsV0FBVztZQUFDO1lBQVc7WUFBWTtTQUFhO1FBQ2hEQyxZQUFZO0lBQ2Q7SUFDQTtRQUNFSCxNQUFNO1FBQ05mLGFBQWE7UUFDYmdCLGNBQWM7WUFBQztZQUFVO1lBQVc7WUFBVTtTQUFNO1FBQ3BEQyxXQUFXO1lBQUM7WUFBWTtZQUFTO1NBQVU7UUFDM0NDLFlBQVk7SUFDZDtJQUNBO1FBQ0VILE1BQU07UUFDTmYsYUFBYTtRQUNiZ0IsY0FBYztZQUFDO1lBQVM7U0FBUTtRQUNoQ0MsV0FBVztZQUFDO1lBQWE7WUFBUTtZQUFTO1NBQWE7UUFDdkRDLFlBQVk7SUFDZDtJQUNBO1FBQ0VILE1BQU07UUFDTmYsYUFBYTtRQUNiZ0IsY0FBYztZQUFDO1lBQVU7U0FBb0I7UUFDN0NDLFdBQVc7WUFBQztZQUFjO1lBQWU7U0FBTztRQUNoREMsWUFBWTtJQUNkO0NBQ0QsQ0FBQztBQUVGOztDQUVDLEdBQ00sTUFBTUMsZ0JBQStCO0lBQzFDO1FBQ0VKLE1BQU07UUFDTmYsYUFBYTtRQUNib0Isa0JBQWtCO1lBQUM7WUFBZTtZQUFZO1NBQWlCO1FBQy9EQyxvQkFBb0I7WUFBQztZQUFRO1lBQVM7U0FBbUI7SUFDM0Q7SUFDQTtRQUNFTixNQUFNO1FBQ05mLGFBQWE7UUFDYm9CLGtCQUFrQjtZQUFDO1lBQVk7WUFBUTtTQUFXO1FBQ2xEQyxvQkFBb0I7WUFBQztZQUFpQjtZQUFjO1NBQVM7SUFDL0Q7SUFDQTtRQUNFTixNQUFNO1FBQ05mLGFBQWE7UUFDYm9CLGtCQUFrQjtZQUFDO1lBQWtCO1lBQWtCO1NBQWtCO1FBQ3pFQyxvQkFBb0I7WUFBQztZQUFnQjtZQUFnQjtTQUFhO0lBQ3BFO0lBQ0E7UUFDRU4sTUFBTTtRQUNOZixhQUFhO1FBQ2JvQixrQkFBa0I7WUFBQztZQUFlO1lBQWU7U0FBZTtRQUNoRUMsb0JBQW9CO1lBQUM7WUFBa0I7WUFBa0I7U0FBc0I7SUFDakY7SUFDQTtRQUNFTixNQUFNO1FBQ05mLGFBQWE7UUFDYm9CLGtCQUFrQjtZQUFDO1lBQVU7WUFBYTtTQUFTO1FBQ25EQyxvQkFBb0I7WUFBQztZQUFhO1lBQWE7U0FBYztJQUMvRDtJQUNBO1FBQ0VOLE1BQU07UUFDTmYsYUFBYTtRQUNib0Isa0JBQWtCO1lBQUM7WUFBVTtZQUFZO1NBQVk7UUFDckRDLG9CQUFvQjtZQUFDO1lBQWtCO1lBQWM7U0FBb0I7SUFDM0U7Q0FDRCxDQUFDO0FBRUYsK0VBQStFO0FBQy9FLGNBQWM7QUFDZCwrRUFBK0U7QUFFL0U7O0NBRUMsR0FDTSxNQUFNQyxvQkFBb0IsQ0FBQ0M7SUFDaEMsT0FDRUEsT0FDQSxPQUFPQSxJQUFJQyxFQUFFLEtBQUssWUFDbEIsT0FBT0QsSUFBSUUsTUFBTSxLQUFLLFlBQ3RCRixJQUFJRyxJQUFJLFlBQVlDLFFBQ3BCLE9BQU9KLElBQUlLLFVBQVUsS0FBSyxZQUMxQixPQUFPTCxJQUFJTSxLQUFLLEtBQUssWUFDckIsT0FBT04sSUFBSU8sU0FBUyxLQUFLLFlBQ3pCLE9BQU9QLElBQUlRLElBQUksS0FBSyxZQUNwQixPQUFPUixJQUFJUyxNQUFNLEtBQUssWUFDdEIsT0FBT1QsSUFBSVUsSUFBSSxLQUFLO0FBRXhCLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1DLGFBQWEsQ0FBQ1g7SUFDekIsT0FDRUEsT0FDQSxPQUFPQSxJQUFJQyxFQUFFLEtBQUssWUFDbEIsT0FBT0QsSUFBSVIsSUFBSSxLQUFLLFlBQ3BCLE9BQU9RLElBQUlZLFFBQVEsS0FBSyxZQUN4QkMsTUFBTUMsT0FBTyxDQUFDZCxJQUFJUCxZQUFZLEtBQzlCb0IsTUFBTUMsT0FBTyxDQUFDZCxJQUFJTixTQUFTO0FBRS9CLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1xQixtQkFBbUIsQ0FBQ2Y7SUFDL0IsT0FDRUEsT0FDQSxPQUFPQSxJQUFJQyxFQUFFLEtBQUssWUFDbEIsT0FBT0QsSUFBSUUsTUFBTSxLQUFLLFlBQ3RCRixJQUFJRyxJQUFJLFlBQVlDLFFBQ3BCSixJQUFJZ0IsU0FBUyxZQUFZWjtBQUU3QixFQUFFO0FBRUYsK0VBQStFO0FBQy9FLG1CQUFtQjtBQUNuQiwrRUFBK0U7QUFFL0U7O0NBRUMsR0FDTSxNQUFNYSxnQkFBZ0IsQ0FBQ1I7SUFDNUIsT0FBT0EsU0FBUztBQUNsQixFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNUyxnQkFBZ0IsQ0FBQ1Q7SUFDNUIsT0FBT0EsU0FBUztBQUNsQixFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNVSxvQkFBb0IsQ0FBQ1Y7SUFDaEMsT0FBT0EsT0FDSlcsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRUMsSUFBSSxJQUNmQyxNQUFNLENBQUNGLENBQUFBLElBQUtBLEVBQUVHLE1BQU0sR0FBRyxHQUN2QkosR0FBRyxDQUFDQyxDQUFBQSxJQUFLSSxXQUFXSixJQUNwQkUsTUFBTSxDQUFDRixDQUFBQSxJQUFLLENBQUNLLE1BQU1MO0FBQ3hCLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1NLHlCQUF5QixDQUFDbkI7SUFDckMsTUFBTW9CLFVBQVVWLGtCQUFrQlY7SUFDbEMsSUFBSW9CLFFBQVFKLE1BQU0sS0FBSyxHQUFHLE9BQU87SUFDakMsT0FBT0ksUUFBUUMsTUFBTSxDQUFDLENBQUNDLEtBQUtULElBQU1TLE1BQU1ULEdBQUcsS0FBS08sUUFBUUosTUFBTTtBQUNoRSxFQUFFO0FBRUY7O0NBRUMsR0FDTSxNQUFNTywwQkFBMEIsQ0FDckNDLE1BQ0F6QixNQUNBMEIsZUFDQXhCO0lBRUEsTUFBTXlCLFdBQVd6QixTQUFTLE9BQU9PLGNBQWNpQixpQkFBaUJBO0lBQ2hFLE9BQU9ELE9BQU96QixPQUFPMkI7QUFDdkIsRUFBRTtBQUVGOztDQUVDLEdBQ00sTUFBTUMsZ0JBQWdCLENBQzNCQyxTQUNBQztJQUVBLE1BQU1DLFNBQVNsRSxnQkFBZ0IsQ0FBQ2dFLFFBQVE7SUFFeEMsSUFBSUUsVUFBVUEsT0FBTzdELFlBQVksS0FBSyxXQUFXO1FBQy9DLE9BQU80RCxRQUFRRSxrQkFBa0IsQ0FBQ0MsUUFBUTtJQUM1QyxPQUFPO1FBQ0wsa0NBQWtDO1FBQ2xDLE9BQU8sR0FBR0gsUUFBUUUsa0JBQWtCLEdBQUdGLFFBQVFJLGVBQWUsRUFBRTtJQUNsRTtBQUNGLEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1DLGlCQUFpQixDQUFDQztJQUM3QixNQUFNQyxRQUFRQyxLQUFLQyxLQUFLLENBQUNILFVBQVU7SUFDbkMsTUFBTUksVUFBVUYsS0FBS0MsS0FBSyxDQUFDLFVBQVcsT0FBUTtJQUM5QyxNQUFNRSxPQUFPTCxVQUFVO0lBRXZCLE9BQU8sR0FBR0MsTUFBTUosUUFBUSxHQUFHUyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRUYsUUFBUVAsUUFBUSxHQUFHUyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsRUFBRUQsS0FBS1IsUUFBUSxHQUFHUyxRQUFRLENBQUMsR0FBRyxNQUFNO0FBQzFILEVBQUU7QUFFRjs7Q0FFQyxHQUNNLE1BQU1DLGdCQUFnQixDQUFDQztJQUM1QixNQUFNQyxRQUFRRCxTQUFTaEMsS0FBSyxDQUFDLEtBQUtDLEdBQUcsQ0FBQ2lDO0lBQ3RDLElBQUlELE1BQU01QixNQUFNLEtBQUssR0FBRztRQUN0QixPQUFPLENBQUM0QixLQUFLLENBQUMsRUFBRSxJQUFJLEtBQUssT0FBTyxDQUFDQSxLQUFLLENBQUMsRUFBRSxJQUFJLEtBQUssS0FBTUEsQ0FBQUEsS0FBSyxDQUFDLEVBQUUsSUFBSTtJQUN0RTtJQUNBLE9BQU87QUFDVCxFQUFFIiwic291cmNlcyI6WyIvVXNlcnMvdmljdG9yc29sZS9Eb2N1bWVudHMvR2l0SHViL21hc3NpbWluby9tYXNzaW1pbm8vc3JjL3R5cGVzL3dvcmtvdXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBXb3Jrb3V0IExvZyBUeXBlIERlZmluaXRpb25zIGZvciBNYXNzaW1pbm9cbiAqIENvbXByZWhlbnNpdmUgdHlwZSBzeXN0ZW0gZm9yIHdvcmtvdXQgdHJhY2tpbmcgYW5kIG1hbmFnZW1lbnRcbiAqL1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFTlVNU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSBTZXRUeXBlID0gJ1NUUkFJR0hUJyB8ICdTVVBFUlNFVCcgfCAnVFJJU0VUJyB8ICdHSUFOVF9TRVQnIHwgJ1BZUkFNSUQnIHwgJ1JFVkVSU0VfUFlSQU1JRCcgfCAnRFJPUF9TRVQnIHwgJ1JFU1RfUEFVU0UnIHwgJ0NMVVNURVInIHwgJ0VNT00nIHwgJ0FNUkFQJztcbmV4cG9ydCB0eXBlIFdlaWdodFVuaXQgPSAnS0cnIHwgJ0xCJztcbmV4cG9ydCB0eXBlIEludGVuc2l0eVR5cGUgPSAnUEVSQ0VOVEFHRV8xUk0nIHwgJ1JQRScgfCAnUklSJztcblxuLy8gVHlwZSBhbGlhcyBmb3IgVXNlciB0byBhdm9pZCBjaXJjdWxhciBpbXBvcnRzXG50eXBlIFVzZXIgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZyB8IG51bGw7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIHJvbGU6IHN0cmluZztcbiAgaW1hZ2U/OiBzdHJpbmcgfCBudWxsO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09SRSBXT1JLT1VUIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogV29ya291dCBsb2cgZW50cnkgd2l0aCBhbGwgZmllbGRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV29ya291dExvZ0VudHJ5IHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcklkOiBzdHJpbmc7XG4gIGNvYWNoSWQ/OiBzdHJpbmc7XG5cbiAgLy8gQmFzaWMgd29ya291dCBpbmZvXG4gIGRhdGU6IERhdGU7XG4gIGV4ZXJjaXNlSWQ6IHN0cmluZztcbiAgb3JkZXI6IHN0cmluZztcbiAgc2V0TnVtYmVyOiBudW1iZXI7XG4gIHNldFR5cGU6IFNldFR5cGU7XG5cbiAgLy8gUGVyZm9ybWFuY2UgZGF0YVxuICByZXBzOiBudW1iZXI7XG4gIHdlaWdodDogc3RyaW5nO1xuICB1bml0OiBXZWlnaHRVbml0O1xuICBpbnRlbnNpdHk/OiBzdHJpbmc7XG4gIGludGVuc2l0eVR5cGU/OiBJbnRlbnNpdHlUeXBlO1xuICB0ZW1wbz86IHN0cmluZztcbiAgcmVzdFNlY29uZHM/OiBudW1iZXI7XG5cbiAgLy8gQ2FsY3VsYXRlZCBmaWVsZHNcbiAgdHJhaW5pbmdWb2x1bWU/OiBudW1iZXI7XG4gIGR1cmF0aW9uPzogc3RyaW5nO1xuXG4gIC8vIFJlY29yZHNcbiAgcGVyc29uYWxSZWNvcmQ/OiBib29sZWFuO1xuICB2b2x1bWVSZWNvcmQ/OiBib29sZWFuO1xuXG4gIC8vIEZlZWRiYWNrIGFuZCBub3Rlc1xuICBjb2FjaEZlZWRiYWNrPzogc3RyaW5nO1xuICB1c2VyQ29tbWVudHM/OiBzdHJpbmc7XG5cbiAgLy8gTWV0YWRhdGFcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG5cbiAgLy8gUmVsYXRpb25zaGlwc1xuICB1c2VyPzogVXNlcjtcbiAgY29hY2g/OiBVc2VyO1xuICBleGVyY2lzZT86IEV4ZXJjaXNlO1xufVxuXG4vKipcbiAqIEV4ZXJjaXNlIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgbXVzY2xlR3JvdXBzOiBzdHJpbmdbXTtcbiAgZXF1aXBtZW50OiBzdHJpbmdbXTtcbiAgaW5zdHJ1Y3Rpb25zPzogc3RyaW5nO1xuICB2aWRlb1VybD86IHN0cmluZztcbiAgaW1hZ2VVcmw/OiBzdHJpbmc7XG4gIGlzQWN0aXZlOiBib29sZWFuO1xuICBkaWZmaWN1bHR5OiAnQkVHSU5ORVInIHwgJ0lOVEVSTUVESUFURScgfCAnQURWQU5DRUQnO1xuICBzYWZldHlOb3Rlcz86IHN0cmluZztcbiAgdXNhZ2VDb3VudDogbnVtYmVyO1xuICBsYXN0VXNlZD86IERhdGU7XG4gIGNyZWF0ZWRBdDogRGF0ZTtcbiAgdXBkYXRlZEF0OiBEYXRlO1xufVxuXG4vKipcbiAqIFdvcmtvdXQgc2Vzc2lvbiBjb250YWluZXJcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXb3Jrb3V0U2Vzc2lvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBjb2FjaElkPzogc3RyaW5nO1xuICBcbiAgLy8gU2Vzc2lvbiBpbmZvXG4gIGRhdGU6IERhdGU7XG4gIHN0YXJ0VGltZTogRGF0ZTtcbiAgZW5kVGltZT86IERhdGU7XG4gIGR1cmF0aW9uPzogbnVtYmVyO1xuICBcbiAgLy8gU2Vzc2lvbiBtZXRhZGF0YVxuICB0aXRsZT86IHN0cmluZztcbiAgbm90ZXM/OiBzdHJpbmc7XG4gIGxvY2F0aW9uPzogc3RyaW5nO1xuICBcbiAgLy8gUGVyZm9ybWFuY2UgdHJhY2tpbmdcbiAgdG90YWxWb2x1bWU/OiBudW1iZXI7XG4gIHRvdGFsU2V0czogbnVtYmVyO1xuICB0b3RhbFJlcHM6IG51bWJlcjtcbiAgXG4gIC8vIFN0YXR1c1xuICBpc0NvbXBsZXRlOiBib29sZWFuO1xuICBpc1RlbXBsYXRlOiBib29sZWFuO1xuICBcbiAgY3JlYXRlZEF0OiBEYXRlO1xuICB1cGRhdGVkQXQ6IERhdGU7XG4gIFxuICAvLyBSZWxhdGlvbnNoaXBzXG4gIHVzZXI/OiBVc2VyO1xuICBjb2FjaD86IFVzZXI7XG4gIGVudHJpZXM/OiBXb3Jrb3V0TG9nRW50cnlbXTtcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRk9STSBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEZvcm0gZGF0YSBmb3IgY3JlYXRpbmcvZWRpdGluZyB3b3Jrb3V0IGVudHJpZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXb3Jrb3V0TG9nRW50cnlGb3JtRGF0YSB7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgZGF0ZTogc3RyaW5nOyAvLyBZWVlZLU1NLUREIGZvcm1hdFxuICBleGVyY2lzZUlkOiBzdHJpbmc7XG4gIHNldE51bWJlcjogbnVtYmVyO1xuICBzZXRUeXBlOiBTZXRUeXBlO1xuICByZXBzOiBudW1iZXI7XG4gIHdlaWdodDogc3RyaW5nO1xuICB1bml0OiBXZWlnaHRVbml0O1xuICBzdWJPcmRlcj86IHN0cmluZzsgLy8gJ0EnLCAnQicsICdDJyBmb3IgZ3JvdXBlZCBzZXRzXG4gIGludGVuc2l0eT86IHN0cmluZztcbiAgaW50ZW5zaXR5VHlwZT86IEludGVuc2l0eVR5cGU7XG4gIHRlbXBvPzogc3RyaW5nO1xuICByZXN0U2Vjb25kcz86IG51bWJlcjtcbiAgdXNlckNvbW1lbnRzPzogc3RyaW5nO1xuICBjb2FjaEZlZWRiYWNrPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEZvcm0gZGF0YSBmb3Igd29ya291dCBzZXNzaW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRTZXNzaW9uRm9ybURhdGEge1xuICBkYXRlOiBzdHJpbmc7IC8vIFlZWVktTU0tREQgZm9ybWF0XG4gIHRpdGxlPzogc3RyaW5nO1xuICBub3Rlcz86IHN0cmluZztcbiAgbG9jYXRpb24/OiBzdHJpbmc7XG4gIHN0YXJ0VGltZTogc3RyaW5nOyAvLyBISDpNTSBmb3JtYXRcbiAgZW5kVGltZT86IHN0cmluZzsgLy8gSEg6TU0gZm9ybWF0XG4gIGlzVGVtcGxhdGU6IGJvb2xlYW47XG59XG5cbi8qKlxuICogRm9ybSB2YWxpZGF0aW9uIGVycm9yc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRGb3JtRXJyb3JzIHtcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDQUxDVUxBVElPTiBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFdlaWdodCBjYWxjdWxhdGlvbiByZXN1bHRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXZWlnaHRDYWxjdWxhdGlvbiB7XG4gIGF2ZXJhZ2VXZWlnaHQ6IG51bWJlcjtcbiAgd2VpZ2h0czogbnVtYmVyW107XG4gIHRvdGFsV2VpZ2h0OiBudW1iZXI7XG4gIHdlaWdodENvdW50OiBudW1iZXI7XG59XG5cbi8qKlxuICogVHJhaW5pbmcgdm9sdW1lIGNhbGN1bGF0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVm9sdW1lQ2FsY3VsYXRpb24ge1xuICB2b2x1bWU6IG51bWJlcjtcbiAgdm9sdW1lS2c6IG51bWJlcjtcbiAgdG90YWxTZXRzOiBudW1iZXI7XG4gIHRvdGFsUmVwczogbnVtYmVyO1xuICBhdmVyYWdlV2VpZ2h0OiBudW1iZXI7XG59XG5cbi8qKlxuICogT3JkZXIgZ2VuZXJhdGlvbiBjb250ZXh0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgT3JkZXJHZW5lcmF0aW9uQ29udGV4dCB7XG4gIGN1cnJlbnRTZXRUeXBlOiBTZXRUeXBlO1xuICBwcmV2aW91c1NldFR5cGU/OiBTZXRUeXBlO1xuICBjdXJyZW50R3JvdXBOdW1iZXI6IG51bWJlcjtcbiAgY3VycmVudFN1Yk9yZGVyOiBzdHJpbmc7IC8vICdBJywgJ0InLCAnQycsIGV0Yy5cbiAgdG90YWxFbnRyaWVzOiBudW1iZXI7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVJIFRZUEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogVGFibGUgY29sdW1uIGNvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXb3Jrb3V0VGFibGVDb2x1bW4ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgdHlwZTogJ3RleHQnIHwgJ251bWJlcicgfCAnc2VsZWN0JyB8ICdkYXRlJyB8ICd0aW1lJyB8ICd0ZXh0YXJlYSc7XG4gIHJlcXVpcmVkPzogYm9vbGVhbjtcbiAgZWRpdGFibGU/OiBib29sZWFuO1xuICB3aWR0aD86IHN0cmluZztcbiAgb3B0aW9ucz86IHsgdmFsdWU6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W107XG59XG5cbi8qKlxuICogRmlsdGVyIG9wdGlvbnMgZm9yIHdvcmtvdXQgbG9nc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRGaWx0ZXJPcHRpb25zIHtcbiAgZGF0ZVJhbmdlPzoge1xuICAgIHN0YXJ0OiBEYXRlO1xuICAgIGVuZDogRGF0ZTtcbiAgfTtcbiAgZXhlcmNpc2VzPzogc3RyaW5nW107XG4gIHNldFR5cGVzPzogU2V0VHlwZVtdO1xuICBjb2FjaElkPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogU29ydCBvcHRpb25zIGZvciB3b3Jrb3V0IGxvZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBXb3Jrb3V0U29ydE9wdGlvbnMge1xuICBmaWVsZDoga2V5b2YgV29ya291dExvZ0VudHJ5O1xuICBkaXJlY3Rpb246ICdhc2MnIHwgJ2Rlc2MnO1xufVxuXG4vKipcbiAqIFBhZ2luYXRpb24gZm9yIHdvcmtvdXQgbG9nc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRQYWdpbmF0aW9uIHtcbiAgcGFnZTogbnVtYmVyO1xuICBsaW1pdDogbnVtYmVyO1xuICB0b3RhbDogbnVtYmVyO1xuICB0b3RhbFBhZ2VzOiBudW1iZXI7XG4gIGhhc01vcmU6IGJvb2xlYW47XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEFQSSBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEFQSSByZXNwb25zZSBmb3Igd29ya291dCBsb2dzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgV29ya291dExvZ1Jlc3BvbnNlIHtcbiAgZW50cmllczogV29ya291dExvZ0VudHJ5W107XG4gIHBhZ2luYXRpb246IFdvcmtvdXRQYWdpbmF0aW9uO1xuICBmaWx0ZXJzOiBXb3Jrb3V0RmlsdGVyT3B0aW9ucztcbiAgc29ydDogV29ya291dFNvcnRPcHRpb25zO1xufVxuXG4vKipcbiAqIEFQSSByZXNwb25zZSBmb3Igd29ya291dCBzZXNzaW9uc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFdvcmtvdXRTZXNzaW9uUmVzcG9uc2Uge1xuICBzZXNzaW9uczogV29ya291dFNlc3Npb25bXTtcbiAgcGFnaW5hdGlvbjogV29ya291dFBhZ2luYXRpb247XG59XG5cbi8qKlxuICogQVBJIHJlc3BvbnNlIGZvciBleGVyY2lzZXNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZVJlc3BvbnNlIHtcbiAgZXhlcmNpc2VzOiBFeGVyY2lzZVtdO1xuICBjYXRlZ29yaWVzOiBzdHJpbmdbXTtcbiAgbXVzY2xlR3JvdXBzOiBzdHJpbmdbXTtcbiAgZXF1aXBtZW50OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgd29ya291dCBlbnRyeSByZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlV29ya291dEVudHJ5UmVxdWVzdCB7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgZW50cmllczogV29ya291dExvZ0VudHJ5Rm9ybURhdGFbXTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgd29ya291dCBlbnRyeSByZXF1ZXN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlV29ya291dEVudHJ5UmVxdWVzdCB7XG4gIGlkOiBzdHJpbmc7XG4gIGRhdGE6IFBhcnRpYWw8V29ya291dExvZ0VudHJ5Rm9ybURhdGE+O1xufVxuXG4vKipcbiAqIERlbGV0ZSB3b3Jrb3V0IGVudHJ5IHJlcXVlc3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBEZWxldGVXb3Jrb3V0RW50cnlSZXF1ZXN0IHtcbiAgaWQ6IHN0cmluZztcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElUWSBUWVBFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFNldCB0eXBlIGNvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZXRUeXBlQ29uZmlnIHtcbiAgdHlwZTogU2V0VHlwZTtcbiAgbGFiZWw6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgb3JkZXJQYXR0ZXJuOiAnbnVtZXJpYycgfCAnZ3JvdXBlZCc7XG4gIG1heEdyb3VwU2l6ZT86IG51bWJlcjtcbiAgd2VpZ2h0SGFuZGxpbmc6ICdzaW5nbGUnIHwgJ211bHRpcGxlJyB8ICdwcm9ncmVzc2l2ZSc7XG59XG5cbi8qKlxuICogRXhlcmNpc2UgY2F0ZWdvcnlcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFeGVyY2lzZUNhdGVnb3J5IHtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBtdXNjbGVHcm91cHM6IHN0cmluZ1tdO1xuICBlcXVpcG1lbnQ6IHN0cmluZ1tdO1xuICBkaWZmaWN1bHR5OiAnQkVHSU5ORVInIHwgJ0lOVEVSTUVESUFURScgfCAnQURWQU5DRUQnO1xufVxuXG4vKipcbiAqIE11c2NsZSBncm91cCBkZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTXVzY2xlR3JvdXAge1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHByaW1hcnlFeGVyY2lzZXM6IHN0cmluZ1tdO1xuICBzZWNvbmRhcnlFeGVyY2lzZXM6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIEVxdWlwbWVudCBkZWZpbml0aW9uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRXF1aXBtZW50IHtcbiAgbmFtZTogc3RyaW5nO1xuICBjYXRlZ29yeTogJ2ZyZWVfd2VpZ2h0cycgfCAnbWFjaGluZXMnIHwgJ2NhcmRpbycgfCAnYm9keXdlaWdodCcgfCAnb3RoZXInO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBleGVyY2lzZXM6IHN0cmluZ1tdO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT05TVEFOVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBTZXQgdHlwZSBjb25maWd1cmF0aW9uc1xuICovXG5leHBvcnQgY29uc3QgU0VUX1RZUEVfQ09ORklHUzogUmVjb3JkPFNldFR5cGUsIFNldFR5cGVDb25maWc+ID0ge1xuICBTVFJBSUdIVDoge1xuICAgIHR5cGU6ICdTVFJBSUdIVCcsXG4gICAgbGFiZWw6ICdTdHJhaWdodCBTZXRzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1JlZ3VsYXIgc2V0cyB3aXRoIGNvbnNpc3RlbnQgd2VpZ2h0JyxcbiAgICBvcmRlclBhdHRlcm46ICdudW1lcmljJyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ3NpbmdsZScsXG4gIH0sXG4gIFNVUEVSU0VUOiB7XG4gICAgdHlwZTogJ1NVUEVSU0VUJyxcbiAgICBsYWJlbDogJ1N1cGVyc2V0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1R3byBleGVyY2lzZXMgcGVyZm9ybWVkIGJhY2stdG8tYmFjaycsXG4gICAgb3JkZXJQYXR0ZXJuOiAnZ3JvdXBlZCcsXG4gICAgbWF4R3JvdXBTaXplOiAyLFxuICAgIHdlaWdodEhhbmRsaW5nOiAnc2luZ2xlJyxcbiAgfSxcbiAgVFJJU0VUOiB7XG4gICAgdHlwZTogJ1RSSVNFVCcsXG4gICAgbGFiZWw6ICdUcmlzZXQnLFxuICAgIGRlc2NyaXB0aW9uOiAnVGhyZWUgZXhlcmNpc2VzIHBlcmZvcm1lZCBiYWNrLXRvLWJhY2snLFxuICAgIG9yZGVyUGF0dGVybjogJ2dyb3VwZWQnLFxuICAgIG1heEdyb3VwU2l6ZTogMyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ3NpbmdsZScsXG4gIH0sXG4gIEdJQU5UX1NFVDoge1xuICAgIHR5cGU6ICdHSUFOVF9TRVQnLFxuICAgIGxhYmVsOiAnR2lhbnQgU2V0JyxcbiAgICBkZXNjcmlwdGlvbjogJ0ZvdXIgb3IgbW9yZSBleGVyY2lzZXMgcGVyZm9ybWVkIGJhY2stdG8tYmFjaycsXG4gICAgb3JkZXJQYXR0ZXJuOiAnZ3JvdXBlZCcsXG4gICAgbWF4R3JvdXBTaXplOiA0LFxuICAgIHdlaWdodEhhbmRsaW5nOiAnc2luZ2xlJyxcbiAgfSxcbiAgUFlSQU1JRDoge1xuICAgIHR5cGU6ICdQWVJBTUlEJyxcbiAgICBsYWJlbDogJ1B5cmFtaWQnLFxuICAgIGRlc2NyaXB0aW9uOiAnSW5jcmVhc2luZyB3ZWlnaHQgd2l0aCBlYWNoIHNldCcsXG4gICAgb3JkZXJQYXR0ZXJuOiAnbnVtZXJpYycsXG4gICAgd2VpZ2h0SGFuZGxpbmc6ICdwcm9ncmVzc2l2ZScsXG4gIH0sXG4gIFJFVkVSU0VfUFlSQU1JRDoge1xuICAgIHR5cGU6ICdSRVZFUlNFX1BZUkFNSUQnLFxuICAgIGxhYmVsOiAnUmV2ZXJzZSBQeXJhbWlkJyxcbiAgICBkZXNjcmlwdGlvbjogJ0RlY3JlYXNpbmcgd2VpZ2h0IHdpdGggZWFjaCBzZXQnLFxuICAgIG9yZGVyUGF0dGVybjogJ251bWVyaWMnLFxuICAgIHdlaWdodEhhbmRsaW5nOiAncHJvZ3Jlc3NpdmUnLFxuICB9LFxuICBEUk9QX1NFVDoge1xuICAgIHR5cGU6ICdEUk9QX1NFVCcsXG4gICAgbGFiZWw6ICdEcm9wIFNldCcsXG4gICAgZGVzY3JpcHRpb246ICdEZWNyZWFzaW5nIHdlaWdodCB3aXRoaW4gdGhlIHNhbWUgc2V0JyxcbiAgICBvcmRlclBhdHRlcm46ICdudW1lcmljJyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ211bHRpcGxlJyxcbiAgfSxcbiAgUkVTVF9QQVVTRToge1xuICAgIHR5cGU6ICdSRVNUX1BBVVNFJyxcbiAgICBsYWJlbDogJ1Jlc3QtUGF1c2UnLFxuICAgIGRlc2NyaXB0aW9uOiAnU2hvcnQgcmVzdCBwZXJpb2RzIHdpdGhpbiBhIHNldCcsXG4gICAgb3JkZXJQYXR0ZXJuOiAnbnVtZXJpYycsXG4gICAgd2VpZ2h0SGFuZGxpbmc6ICdzaW5nbGUnLFxuICB9LFxuICBDTFVTVEVSOiB7XG4gICAgdHlwZTogJ0NMVVNURVInLFxuICAgIGxhYmVsOiAnQ2x1c3RlcicsXG4gICAgZGVzY3JpcHRpb246ICdTaG9ydCByZXN0IHBlcmlvZHMgYmV0d2VlbiByZXBzJyxcbiAgICBvcmRlclBhdHRlcm46ICdudW1lcmljJyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ3NpbmdsZScsXG4gIH0sXG4gIEVNT006IHtcbiAgICB0eXBlOiAnRU1PTScsXG4gICAgbGFiZWw6ICdFTU9NJyxcbiAgICBkZXNjcmlwdGlvbjogJ0V2ZXJ5IE1pbnV0ZSBvbiB0aGUgTWludXRlJyxcbiAgICBvcmRlclBhdHRlcm46ICdudW1lcmljJyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ3NpbmdsZScsXG4gIH0sXG4gIEFNUkFQOiB7XG4gICAgdHlwZTogJ0FNUkFQJyxcbiAgICBsYWJlbDogJ0FNUkFQJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FzIE1hbnkgUm91bmRzIEFzIFBvc3NpYmxlJyxcbiAgICBvcmRlclBhdHRlcm46ICdudW1lcmljJyxcbiAgICB3ZWlnaHRIYW5kbGluZzogJ3NpbmdsZScsXG4gIH0sXG59O1xuXG4vKipcbiAqIEV4ZXJjaXNlIGNhdGVnb3JpZXNcbiAqL1xuZXhwb3J0IGNvbnN0IEVYRVJDSVNFX0NBVEVHT1JJRVM6IEV4ZXJjaXNlQ2F0ZWdvcnlbXSA9IFtcbiAge1xuICAgIG5hbWU6ICdDb21wb3VuZCcsXG4gICAgZGVzY3JpcHRpb246ICdNdWx0aS1qb2ludCBtb3ZlbWVudHMgdGhhdCB3b3JrIG11bHRpcGxlIG11c2NsZSBncm91cHMnLFxuICAgIG11c2NsZUdyb3VwczogWydjaGVzdCcsICdiYWNrJywgJ3Nob3VsZGVycycsICdsZWdzJ10sXG4gICAgZXF1aXBtZW50OiBbJ2JhcmJlbGwnLCAnZHVtYmJlbGwnLCAna2V0dGxlYmVsbCddLFxuICAgIGRpZmZpY3VsdHk6ICdJTlRFUk1FRElBVEUnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0lzb2xhdGlvbicsXG4gICAgZGVzY3JpcHRpb246ICdTaW5nbGUtam9pbnQgbW92ZW1lbnRzIHRoYXQgdGFyZ2V0IHNwZWNpZmljIG11c2NsZXMnLFxuICAgIG11c2NsZUdyb3VwczogWydiaWNlcHMnLCAndHJpY2VwcycsICdjYWx2ZXMnLCAnYWJzJ10sXG4gICAgZXF1aXBtZW50OiBbJ2R1bWJiZWxsJywgJ2NhYmxlJywgJ21hY2hpbmUnXSxcbiAgICBkaWZmaWN1bHR5OiAnQkVHSU5ORVInLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0NhcmRpbycsXG4gICAgZGVzY3JpcHRpb246ICdDYXJkaW92YXNjdWxhciBleGVyY2lzZXMgZm9yIGVuZHVyYW5jZSBhbmQgY29uZGl0aW9uaW5nJyxcbiAgICBtdXNjbGVHcm91cHM6IFsnaGVhcnQnLCAnbHVuZ3MnXSxcbiAgICBlcXVpcG1lbnQ6IFsndHJlYWRtaWxsJywgJ2Jpa2UnLCAncm93ZXInLCAnZWxsaXB0aWNhbCddLFxuICAgIGRpZmZpY3VsdHk6ICdCRUdJTk5FUicsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnTW9iaWxpdHknLFxuICAgIGRlc2NyaXB0aW9uOiAnRmxleGliaWxpdHkgYW5kIG1vYmlsaXR5IGV4ZXJjaXNlcycsXG4gICAgbXVzY2xlR3JvdXBzOiBbJ2pvaW50cycsICdjb25uZWN0aXZlIHRpc3N1ZSddLFxuICAgIGVxdWlwbWVudDogWydib2R5d2VpZ2h0JywgJ2ZvYW1fcm9sbGVyJywgJ2JhbmQnXSxcbiAgICBkaWZmaWN1bHR5OiAnQkVHSU5ORVInLFxuICB9LFxuXTtcblxuLyoqXG4gKiBNdXNjbGUgZ3JvdXBzXG4gKi9cbmV4cG9ydCBjb25zdCBNVVNDTEVfR1JPVVBTOiBNdXNjbGVHcm91cFtdID0gW1xuICB7XG4gICAgbmFtZTogJ0NoZXN0JyxcbiAgICBkZXNjcmlwdGlvbjogJ1BlY3RvcmFsaXMgbWFqb3IgYW5kIG1pbm9yJyxcbiAgICBwcmltYXJ5RXhlcmNpc2VzOiBbJ2JlbmNoX3ByZXNzJywgJ3B1c2hfdXBzJywgJ2R1bWJiZWxsX3ByZXNzJ10sXG4gICAgc2Vjb25kYXJ5RXhlcmNpc2VzOiBbJ2RpcHMnLCAnZmx5ZXMnLCAnY2FibGVfY3Jvc3NvdmVycyddLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ0JhY2snLFxuICAgIGRlc2NyaXB0aW9uOiAnTGF0aXNzaW11cyBkb3JzaSwgcmhvbWJvaWRzLCB0cmFwZXppdXMnLFxuICAgIHByaW1hcnlFeGVyY2lzZXM6IFsncHVsbF91cHMnLCAncm93cycsICdkZWFkbGlmdCddLFxuICAgIHNlY29uZGFyeUV4ZXJjaXNlczogWydsYXRfcHVsbGRvd25zJywgJ2ZhY2VfcHVsbHMnLCAnc2hydWdzJ10sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnU2hvdWxkZXJzJyxcbiAgICBkZXNjcmlwdGlvbjogJ0RlbHRvaWRzIChhbnRlcmlvciwgbGF0ZXJhbCwgcG9zdGVyaW9yKScsXG4gICAgcHJpbWFyeUV4ZXJjaXNlczogWydvdmVyaGVhZF9wcmVzcycsICdsYXRlcmFsX3JhaXNlcycsICdyZWFyX2RlbHRfZmx5ZXMnXSxcbiAgICBzZWNvbmRhcnlFeGVyY2lzZXM6IFsnYXJub2xkX3ByZXNzJywgJ3VwcmlnaHRfcm93cycsICdmYWNlX3B1bGxzJ10sXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnQXJtcycsXG4gICAgZGVzY3JpcHRpb246ICdCaWNlcHMgYW5kIHRyaWNlcHMnLFxuICAgIHByaW1hcnlFeGVyY2lzZXM6IFsnYmljZXBfY3VybHMnLCAndHJpY2VwX2RpcHMnLCAnaGFtbWVyX2N1cmxzJ10sXG4gICAgc2Vjb25kYXJ5RXhlcmNpc2VzOiBbJ3ByZWFjaGVyX2N1cmxzJywgJ3NrdWxsX2NydXNoZXJzJywgJ2NvbmNlbnRyYXRpb25fY3VybHMnXSxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdMZWdzJyxcbiAgICBkZXNjcmlwdGlvbjogJ1F1YWRyaWNlcHMsIGhhbXN0cmluZ3MsIGdsdXRlcywgY2FsdmVzJyxcbiAgICBwcmltYXJ5RXhlcmNpc2VzOiBbJ3NxdWF0cycsICdkZWFkbGlmdHMnLCAnbHVuZ2VzJ10sXG4gICAgc2Vjb25kYXJ5RXhlcmNpc2VzOiBbJ2xlZ19wcmVzcycsICdsZWdfY3VybHMnLCAnY2FsZl9yYWlzZXMnXSxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICdDb3JlJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FiZG9taW5hbHMsIG9ibGlxdWVzLCBsb3dlciBiYWNrJyxcbiAgICBwcmltYXJ5RXhlcmNpc2VzOiBbJ3BsYW5rcycsICdjcnVuY2hlcycsICdkZWFkX2J1Z3MnXSxcbiAgICBzZWNvbmRhcnlFeGVyY2lzZXM6IFsncnVzc2lhbl90d2lzdHMnLCAnbGVnX3JhaXNlcycsICdtb3VudGFpbl9jbGltYmVycyddLFxuICB9LFxuXTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVFlQRSBHVUFSRFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBUeXBlIGd1YXJkIGZvciB3b3Jrb3V0IGxvZyBlbnRyeVxuICovXG5leHBvcnQgY29uc3QgaXNXb3Jrb3V0TG9nRW50cnkgPSAob2JqOiBhbnkpOiBvYmogaXMgV29ya291dExvZ0VudHJ5ID0+IHtcbiAgcmV0dXJuIChcbiAgICBvYmogJiZcbiAgICB0eXBlb2Ygb2JqLmlkID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBvYmoudXNlcklkID09PSAnc3RyaW5nJyAmJlxuICAgIG9iai5kYXRlIGluc3RhbmNlb2YgRGF0ZSAmJlxuICAgIHR5cGVvZiBvYmouZXhlcmNpc2VJZCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygb2JqLm9yZGVyID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBvYmouc2V0TnVtYmVyID09PSAnbnVtYmVyJyAmJlxuICAgIHR5cGVvZiBvYmoucmVwcyA9PT0gJ251bWJlcicgJiZcbiAgICB0eXBlb2Ygb2JqLndlaWdodCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygb2JqLnVuaXQgPT09ICdzdHJpbmcnXG4gICk7XG59O1xuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIGV4ZXJjaXNlXG4gKi9cbmV4cG9ydCBjb25zdCBpc0V4ZXJjaXNlID0gKG9iajogYW55KTogb2JqIGlzIEV4ZXJjaXNlID0+IHtcbiAgcmV0dXJuIChcbiAgICBvYmogJiZcbiAgICB0eXBlb2Ygb2JqLmlkID09PSAnc3RyaW5nJyAmJlxuICAgIHR5cGVvZiBvYmoubmFtZSA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygb2JqLmNhdGVnb3J5ID09PSAnc3RyaW5nJyAmJlxuICAgIEFycmF5LmlzQXJyYXkob2JqLm11c2NsZUdyb3VwcykgJiZcbiAgICBBcnJheS5pc0FycmF5KG9iai5lcXVpcG1lbnQpXG4gICk7XG59O1xuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIHdvcmtvdXQgc2Vzc2lvblxuICovXG5leHBvcnQgY29uc3QgaXNXb3Jrb3V0U2Vzc2lvbiA9IChvYmo6IGFueSk6IG9iaiBpcyBXb3Jrb3V0U2Vzc2lvbiA9PiB7XG4gIHJldHVybiAoXG4gICAgb2JqICYmXG4gICAgdHlwZW9mIG9iai5pZCA9PT0gJ3N0cmluZycgJiZcbiAgICB0eXBlb2Ygb2JqLnVzZXJJZCA9PT0gJ3N0cmluZycgJiZcbiAgICBvYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUgJiZcbiAgICBvYmouc3RhcnRUaW1lIGluc3RhbmNlb2YgRGF0ZVxuICApO1xufTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENvbnZlcnQgd2VpZ2h0IGZyb20gbGIgdG8ga2dcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbnZlcnRMYlRvS2cgPSAod2VpZ2h0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gd2VpZ2h0ICogMC40NTM1OTI7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgd2VpZ2h0IGZyb20ga2cgdG8gbGJcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbnZlcnRLZ1RvTGIgPSAod2VpZ2h0OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICByZXR1cm4gd2VpZ2h0IC8gMC40NTM1OTI7XG59O1xuXG4vKipcbiAqIFBhcnNlIHdlaWdodCBzdHJpbmcgdG8gbnVtYmVyc1xuICovXG5leHBvcnQgY29uc3QgcGFyc2VXZWlnaHRTdHJpbmcgPSAod2VpZ2h0OiBzdHJpbmcpOiBudW1iZXJbXSA9PiB7XG4gIHJldHVybiB3ZWlnaHRcbiAgICAuc3BsaXQoJywnKVxuICAgIC5tYXAodyA9PiB3LnRyaW0oKSlcbiAgICAuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAwKVxuICAgIC5tYXAodyA9PiBwYXJzZUZsb2F0KHcpKVxuICAgIC5maWx0ZXIodyA9PiAhaXNOYU4odykpO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGUgYXZlcmFnZSB3ZWlnaHQgZnJvbSB3ZWlnaHQgc3RyaW5nXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVBdmVyYWdlV2VpZ2h0ID0gKHdlaWdodDogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgY29uc3Qgd2VpZ2h0cyA9IHBhcnNlV2VpZ2h0U3RyaW5nKHdlaWdodCk7XG4gIGlmICh3ZWlnaHRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDA7XG4gIHJldHVybiB3ZWlnaHRzLnJlZHVjZSgoc3VtLCB3KSA9PiBzdW0gKyB3LCAwKSAvIHdlaWdodHMubGVuZ3RoO1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGUgdHJhaW5pbmcgdm9sdW1lXG4gKi9cbmV4cG9ydCBjb25zdCBjYWxjdWxhdGVUcmFpbmluZ1ZvbHVtZSA9IChcbiAgc2V0czogbnVtYmVyLFxuICByZXBzOiBudW1iZXIsXG4gIGF2ZXJhZ2VXZWlnaHQ6IG51bWJlcixcbiAgdW5pdDogV2VpZ2h0VW5pdFxuKTogbnVtYmVyID0+IHtcbiAgY29uc3Qgd2VpZ2h0S2cgPSB1bml0ID09PSAnTEInID8gY29udmVydExiVG9LZyhhdmVyYWdlV2VpZ2h0KSA6IGF2ZXJhZ2VXZWlnaHQ7XG4gIHJldHVybiBzZXRzICogcmVwcyAqIHdlaWdodEtnO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBvcmRlciBzdHJpbmcgYmFzZWQgb24gc2V0IHR5cGUgYW5kIGNvbnRleHRcbiAqL1xuZXhwb3J0IGNvbnN0IGdlbmVyYXRlT3JkZXIgPSAoXG4gIHNldFR5cGU6IFNldFR5cGUsXG4gIGNvbnRleHQ6IE9yZGVyR2VuZXJhdGlvbkNvbnRleHRcbik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IFNFVF9UWVBFX0NPTkZJR1Nbc2V0VHlwZV07XG4gIFxuICBpZiAoY29uZmlnICYmIGNvbmZpZy5vcmRlclBhdHRlcm4gPT09ICdudW1lcmljJykge1xuICAgIHJldHVybiBjb250ZXh0LmN1cnJlbnRHcm91cE51bWJlci50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIC8vIEdyb3VwZWQgcGF0dGVybiAoQSwgQiwgQywgZXRjLilcbiAgICByZXR1cm4gYCR7Y29udGV4dC5jdXJyZW50R3JvdXBOdW1iZXJ9JHtjb250ZXh0LmN1cnJlbnRTdWJPcmRlcn1gO1xuICB9XG59O1xuXG4vKipcbiAqIEZvcm1hdCBkdXJhdGlvbiBzdHJpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGZvcm1hdER1cmF0aW9uID0gKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gMzYwMCk7XG4gIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKChzZWNvbmRzICUgMzYwMCkgLyA2MCk7XG4gIGNvbnN0IHNlY3MgPSBzZWNvbmRzICUgNjA7XG4gIFxuICByZXR1cm4gYCR7aG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XG59O1xuXG4vKipcbiAqIFBhcnNlIGR1cmF0aW9uIHN0cmluZ1xuICovXG5leHBvcnQgY29uc3QgcGFyc2VEdXJhdGlvbiA9IChkdXJhdGlvbjogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgY29uc3QgcGFydHMgPSBkdXJhdGlvbi5zcGxpdCgnOicpLm1hcChOdW1iZXIpO1xuICBpZiAocGFydHMubGVuZ3RoID09PSAzKSB7XG4gICAgcmV0dXJuIChwYXJ0c1swXSB8fCAwKSAqIDM2MDAgKyAocGFydHNbMV0gfHwgMCkgKiA2MCArIChwYXJ0c1syXSB8fCAwKTtcbiAgfVxuICByZXR1cm4gMDtcbn07XG4iXSwibmFtZXMiOlsiU0VUX1RZUEVfQ09ORklHUyIsIlNUUkFJR0hUIiwidHlwZSIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJvcmRlclBhdHRlcm4iLCJ3ZWlnaHRIYW5kbGluZyIsIlNVUEVSU0VUIiwibWF4R3JvdXBTaXplIiwiVFJJU0VUIiwiR0lBTlRfU0VUIiwiUFlSQU1JRCIsIlJFVkVSU0VfUFlSQU1JRCIsIkRST1BfU0VUIiwiUkVTVF9QQVVTRSIsIkNMVVNURVIiLCJFTU9NIiwiQU1SQVAiLCJFWEVSQ0lTRV9DQVRFR09SSUVTIiwibmFtZSIsIm11c2NsZUdyb3VwcyIsImVxdWlwbWVudCIsImRpZmZpY3VsdHkiLCJNVVNDTEVfR1JPVVBTIiwicHJpbWFyeUV4ZXJjaXNlcyIsInNlY29uZGFyeUV4ZXJjaXNlcyIsImlzV29ya291dExvZ0VudHJ5Iiwib2JqIiwiaWQiLCJ1c2VySWQiLCJkYXRlIiwiRGF0ZSIsImV4ZXJjaXNlSWQiLCJvcmRlciIsInNldE51bWJlciIsInJlcHMiLCJ3ZWlnaHQiLCJ1bml0IiwiaXNFeGVyY2lzZSIsImNhdGVnb3J5IiwiQXJyYXkiLCJpc0FycmF5IiwiaXNXb3Jrb3V0U2Vzc2lvbiIsInN0YXJ0VGltZSIsImNvbnZlcnRMYlRvS2ciLCJjb252ZXJ0S2dUb0xiIiwicGFyc2VXZWlnaHRTdHJpbmciLCJzcGxpdCIsIm1hcCIsInciLCJ0cmltIiwiZmlsdGVyIiwibGVuZ3RoIiwicGFyc2VGbG9hdCIsImlzTmFOIiwiY2FsY3VsYXRlQXZlcmFnZVdlaWdodCIsIndlaWdodHMiLCJyZWR1Y2UiLCJzdW0iLCJjYWxjdWxhdGVUcmFpbmluZ1ZvbHVtZSIsInNldHMiLCJhdmVyYWdlV2VpZ2h0Iiwid2VpZ2h0S2ciLCJnZW5lcmF0ZU9yZGVyIiwic2V0VHlwZSIsImNvbnRleHQiLCJjb25maWciLCJjdXJyZW50R3JvdXBOdW1iZXIiLCJ0b1N0cmluZyIsImN1cnJlbnRTdWJPcmRlciIsImZvcm1hdER1cmF0aW9uIiwic2Vjb25kcyIsImhvdXJzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsInNlY3MiLCJwYWRTdGFydCIsInBhcnNlRHVyYXRpb24iLCJkdXJhdGlvbiIsInBhcnRzIiwiTnVtYmVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/types/workout.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "?4410":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?ae40":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?c6f9":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?c757":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("firebase-admin");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("fs/promises");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@opentelemetry","vendor-chunks/@babel","vendor-chunks/zod","vendor-chunks/formdata-node","vendor-chunks/node-fetch","vendor-chunks/openai","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/web-streams-polyfill","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/form-data-encoder","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/abort-controller","vendor-chunks/@panva","vendor-chunks/oidc-token-hash","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/@mollie","vendor-chunks/engine.io","vendor-chunks/socket.io-adapter","vendor-chunks/mime-db","vendor-chunks/socket.io","vendor-chunks/socket.io-parser","vendor-chunks/negotiator","vendor-chunks/engine.io-parser","vendor-chunks/cors","vendor-chunks/accepts","vendor-chunks/mime-types","vendor-chunks/@socket.io","vendor-chunks/vary","vendor-chunks/supports-color","vendor-chunks/base64id","vendor-chunks/object-assign","vendor-chunks/ruply","vendor-chunks/has-flag"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fmassichat%2Froute&page=%2Fapi%2Fmassichat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fmassichat%2Froute.ts&appDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvictorsole%2FDocuments%2FGitHub%2Fmassimino%2Fmassimino&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();